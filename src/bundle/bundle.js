var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function o(){return Object.create(null)}function i(e){e.forEach(n)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t}function l(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function c(e){let t;return l(e,(e=>t=e))(),t}function h(e,t,n){e.$$.on_destroy.push(l(t,n))}function d(e,t,n){return e.set(n),t}function u(t){return t&&r(t.destroy)?t.destroy:e}const p="undefined"!=typeof window;let f=p?()=>window.performance.now():()=>Date.now(),g=p?e=>requestAnimationFrame(e):e;const m=new Set;function b(e){m.forEach((t=>{t.c(e)||(m.delete(t),t.f())})),0!==m.size&&g(b)}function w(e,t){e.appendChild(t)}function v(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function y(e){const t=E("style");return function(e,t){w(e.head||e,t),t.sheet}(v(e),t),t.sheet}function k(e,t,n){e.insertBefore(t,n||null)}function x(e){e.parentNode&&e.parentNode.removeChild(e)}function C(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function E(e){return document.createElement(e)}function T(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function S(e){return document.createTextNode(e)}function B(){return S(" ")}function I(){return S("")}function _(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function L(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function A(e){return""===e?null:+e}function O(e,t){t=""+t,e.data!==t&&(e.data=t)}function $(e,t){e.value=null==t?"":t}function M(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function P(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function N(e){const t=e.querySelector(":checked");return t&&t.__value}function R(e,t,n){e.classList[n?"add":"remove"](t)}function D(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,o,t),i}class z{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=T(t.nodeName):this.e=E(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)k(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(x)}}function F(e,t){return new e(t)}const H=new Map;let j,U=0;function W(e,t,n,o,i,r,s,a=0){const l=16.666/o;let c="{\n";for(let e=0;e<=1;e+=l){const o=t+(n-t)*r(e);c+=100*e+`%{${s(o,1-o)}}\n`}const h=c+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(h)}_${a}`,u=v(e),{stylesheet:p,rules:f}=H.get(u)||function(e,t){const n={stylesheet:y(t),rules:{}};return H.set(e,n),n}(u,e);f[d]||(f[d]=!0,p.insertRule(`@keyframes ${d} ${h}`,p.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${d} ${o}ms linear ${i}ms 1 both`,U+=1,d}function q(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-o.length;i&&(e.style.animation=o.join(", "),U-=i,U||g((()=>{U||(H.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&x(t)})),H.clear())})))}function V(e){j=e}function G(){if(!j)throw new Error("Function called outside component initialization");return j}function Y(e){G().$$.on_mount.push(e)}function K(){const e=G();return(t,n,{cancelable:o=!1}={})=>{const i=e.$$.callbacks[t];if(i){const r=D(t,n,{cancelable:o});return i.slice().forEach((t=>{t.call(e,r)})),!r.defaultPrevented}return!0}}const X=[],Z=[];let J=[];const Q=[],ee=Promise.resolve();let te=!1;function ne(e){J.push(e)}function oe(e){Q.push(e)}const ie=new Set;let re,se=0;function ae(){if(0!==se)return;const e=j;do{try{for(;se<X.length;){const e=X[se];se++,V(e),le(e.$$)}}catch(e){throw X.length=0,se=0,e}for(V(null),X.length=0,se=0;Z.length;)Z.pop()();for(let e=0;e<J.length;e+=1){const t=J[e];ie.has(t)||(ie.add(t),t())}J.length=0}while(X.length);for(;Q.length;)Q.pop()();te=!1,ie.clear(),V(e)}function le(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}function ce(e,t,n){e.dispatchEvent(D(`${t?"intro":"outro"}${n}`))}const he=new Set;let de;function ue(){de={r:0,c:[],p:de}}function pe(){de.r||i(de.c),de=de.p}function fe(e,t){e&&e.i&&(he.delete(e),e.i(t))}function ge(e,t,n,o){if(e&&e.o){if(he.has(e))return;he.add(e),de.c.push((()=>{he.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}const me={duration:0};function be(n,o,s,a){const l={direction:"both"};let c=o(n,s,l),h=a?0:1,d=null,u=null,p=null;function w(){p&&q(n,p)}function v(e,t){const n=e.b-h;return t*=Math.abs(n),{a:h,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function y(o){const{delay:r=0,duration:s=300,easing:a=t,tick:l=e,css:y}=c||me,k={start:f()+r,b:o};o||(k.group=de,de.r+=1),d||u?u=k:(y&&(w(),p=W(n,h,o,s,r,a,y)),o&&l(0,1),d=v(k,s),ne((()=>ce(n,o,"start"))),function(e){let t;0===m.size&&g(b),new Promise((n=>{m.add(t={c:e,f:n})}))}((e=>{if(u&&e>u.start&&(d=v(u,s),u=null,ce(n,d.b,"start"),y&&(w(),p=W(n,h,d.b,d.duration,0,a,c.css))),d)if(e>=d.end)l(h=d.b,1-h),ce(n,d.b,"end"),u||(d.b?w():--d.group.r||i(d.group.c)),d=null;else if(e>=d.start){const t=e-d.start;h=d.a+d.d*a(t/d.duration),l(h,1-h)}return!(!d&&!u)})))}return{run(e){r(c)?(re||(re=Promise.resolve(),re.then((()=>{re=null}))),re).then((()=>{c=c(l),y(e)})):y(e)},end(){w(),d=u=null}}}function we(e,t){const n=t.token={};function o(e,o,i,r){if(t.token!==n)return;t.resolved=r;let s=t.ctx;void 0!==i&&(s=s.slice(),s[i]=r);const a=e&&(t.current=e)(s);let l=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(ue(),ge(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),pe())})):t.block.d(1),a.c(),fe(a,1),a.m(t.mount(),t.anchor),l=!0),t.block=a,t.blocks&&(t.blocks[o]=a),l&&ae()}if(!(i=e)||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then){if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}else{const n=G();if(e.then((e=>{V(n),o(t.then,1,t.value,e),V(null)}),(e=>{if(V(n),o(t.catch,2,t.error,e),V(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}var i}function ve(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function ye(e){e&&e.c()}function ke(e,t,o,s){const{fragment:a,after_update:l}=e.$$;a&&a.m(t,o),s||ne((()=>{const t=e.$$.on_mount.map(n).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...t):i(t),e.$$.on_mount=[]})),l.forEach(ne)}function xe(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];J.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),J=t}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ce(e,t){-1===e.$$.dirty[0]&&(X.push(e),te||(te=!0,ee.then(ae)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ee(t,n,r,s,a,l,c,h=[-1]){const d=j;V(t);const u=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:h,skip_bound:!1,root:n.target||d.$$.root};c&&c(u.root);let p=!1;if(u.ctx=r?r(t,n.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return u.ctx&&a(u.ctx[e],u.ctx[e]=i)&&(!u.skip_bound&&u.bound[e]&&u.bound[e](i),p&&Ce(t,e)),n})):[],u.update(),p=!0,i(u.before_update),u.fragment=!!s&&s(u.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);u.fragment&&u.fragment.l(e),e.forEach(x)}else u.fragment&&u.fragment.c();n.intro&&fe(t.$$.fragment),ke(t,n.target,n.anchor,n.customElement),ae()}V(d)}class Te{$destroy(){xe(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Se=[];function Be(t,n=e){let o;const i=new Set;function r(e){if(s(t,e)&&(t=e,o)){const e=!Se.length;for(const e of i)e[1](),Se.push(e,t);if(e){for(let e=0;e<Se.length;e+=2)Se[e][0](Se[e+1]);Se.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(s,a=e){const l=[s,a];return i.add(l),1===i.size&&(o=n(r)||e),s(t),()=>{i.delete(l),0===i.size&&o&&(o(),o=null)}}}}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ce-hint--align-start{text-align:left}.ce-hint--align-center{text-align:center}.ce-hint__description{opacity:.6;margin-top:3px}")),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}();typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;function Ie(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _e(){}Object.assign(_e,{default:_e,register:_e,revert:function(){},__esModule:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){const t=(this.document||this.ownerDocument).querySelectorAll(e);let n=t.length;for(;--n>=0&&t.item(n)!==this;);return n>-1}),Element.prototype.closest||(Element.prototype.closest=function(e){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t);return null}),Element.prototype.prepend||(Element.prototype.prepend=function(e){const t=document.createDocumentFragment();Array.isArray(e)||(e=[e]),e.forEach((e=>{const n=e instanceof Node;t.appendChild(n?e:document.createTextNode(e))})),this.insertBefore(t,this.firstChild)}),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length||!!e;const t=this.parentNode,n=window.getComputedStyle(t,null),o=parseInt(n.getPropertyValue("border-top-width")),i=parseInt(n.getPropertyValue("border-left-width")),r=this.offsetTop-t.offsetTop<t.scrollTop,s=this.offsetTop-t.offsetTop+this.clientHeight-o>t.scrollTop+t.clientHeight,a=this.offsetLeft-t.offsetLeft<t.scrollLeft,l=this.offsetLeft-t.offsetLeft+this.clientWidth-i>t.scrollLeft+t.clientWidth,c=r&&!s;(r||s)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-o+this.clientHeight/2),(a||l)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-i+this.clientWidth/2),(r||s||a||l)&&!e&&this.scrollIntoView(c)}),window.requestIdleCallback=window.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)};var Le=(e=>(e.VERBOSE="VERBOSE",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e))(Le||{});const Ae=8,Oe=9,$e=13,Me=27,Pe=37,Ne=38,Re=40,De=39,ze=46,Fe=0;function He(e,t,n="log",o,i="color: inherit"){if(!("console"in window)||!window.console[n])return;const r=["info","log","warn","error"].includes(n),s=[];switch(He.logLevel){case"ERROR":if("error"!==n)return;break;case"WARN":if(!["error","warn"].includes(n))return;break;case"INFO":if(!r||e)return}o&&s.push(o);const a="Editor.js 2.30.2";e&&(r?(s.unshift("line-height: 1em;\n            color: #006FEA;\n            display: inline-block;\n            font-size: 11px;\n            line-height: 1em;\n            background-color: #fff;\n            padding: 4px 9px;\n            border-radius: 30px;\n            border: 1px solid rgba(56, 138, 229, 0.16);\n            margin: 4px 5px 4px 0;",i),t=`%c${a}%c ${t}`):t=`( ${a} )${t}`);try{r?o?console[n](`${t} %o`,...s):console[n](t,...s):console[n](t)}catch{}}He.logLevel="VERBOSE";const je=He.bind(window,!1),Ue=He.bind(window,!0);function We(e){return Object.prototype.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function qe(e){return"function"===We(e)||"asyncfunction"===We(e)}function Ve(e){return"object"===We(e)}function Ge(e){return"string"===We(e)}function Ye(e){return"number"===We(e)}function Ke(e){return"undefined"===We(e)}function Xe(e){return!e||0===Object.keys(e).length&&e.constructor===Object}function Ze(e){return e>47&&e<58||32===e||13===e||229===e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223}async function Je(e,t=()=>{},n=()=>{}){return e.reduce((async(e,o)=>(await e,async function(e,t,n){try{await e.function(e.data),await t(Ke(e.data)?{}:e.data)}catch{n(Ke(e.data)?{}:e.data)}}(o,t,n))),Promise.resolve())}function Qe(e){return Array.prototype.slice.call(e)}function et(e,t){return function(){const n=this,o=arguments;window.setTimeout((()=>e.apply(n,o)),t)}}function tt(e,t,n){let o;return(...i)=>{const r=this,s=n&&!o;window.clearTimeout(o),o=window.setTimeout((()=>{o=null,n||e.apply(r,i)}),t),s&&e.apply(r,i)}}function nt(e,t,n=void 0){let o,i,r,s=null,a=0;n||(n={});const l=function(){a=!1===n.leading?0:Date.now(),s=null,r=e.apply(o,i),s||(o=i=null)};return function(){const c=Date.now();!a&&!1===n.leading&&(a=c);const h=t-(c-a);return o=this,i=arguments,h<=0||h>t?(s&&(clearTimeout(s),s=null),a=c,r=e.apply(o,i),s||(o=i=null)):!s&&!1!==n.trailing&&(s=setTimeout(l,h)),r}}function ot(e){return e[0].toUpperCase()+e.slice(1)}function it(e,...t){if(!t.length)return e;const n=t.shift();if(Ve(e)&&Ve(n))for(const t in n)Ve(n[t])?(e[t]||Object.assign(e,{[t]:{}}),it(e[t],n[t])):Object.assign(e,{[t]:n[t]});return it(e,...t)}function rt(e){const t=function(){const e={win:!1,mac:!1,x11:!1,linux:!1},t=Object.keys(e).find((e=>-1!==window.navigator.appVersion.toLowerCase().indexOf(e)));return t&&(e[t]=!0),e}();return e=e.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi," + "),e=t.mac?e.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):e.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN")}function st(){return((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""))(10)}function at(e,t,n){e&&Ue(`«${t}» is deprecated and will be removed in the next major release. Please use the «${n}» instead.`,"warn")}function lt(e,t,n){const o=n.value?"value":"get",i=n[o],r=`#${t}Cache`;if(n[o]=function(...e){return void 0===this[r]&&(this[r]=i.apply(this,...e)),this[r]},"get"===o&&n.set){const t=n.set;n.set=function(n){delete e[r],t.apply(this,n)}}return n}function ct(){return window.matchMedia("(max-width: 650px)").matches}const ht=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1);class dt{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,t=null,n={}){const o=document.createElement(e);if(Array.isArray(t)){const e=t.filter((e=>void 0!==e));o.classList.add(...e)}else t&&o.classList.add(t);for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(o[e]=n[e]);return o}static text(e){return document.createTextNode(e)}static append(e,t){Array.isArray(t)?t.forEach((t=>e.appendChild(t))):e.appendChild(t)}static prepend(e,t){Array.isArray(t)?(t=t.reverse()).forEach((t=>e.prepend(t))):e.prepend(t)}static swap(e,t){const n=document.createElement("div"),o=e.parentNode;o.insertBefore(n,e),o.insertBefore(e,t),o.insertBefore(t,n),o.removeChild(n)}static find(e=document,t){return e.querySelector(t)}static get(e){return document.getElementById(e)}static findAll(e=document,t){return e.querySelectorAll(t)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map((e=>`input[type="${e}"]`)).join(", ")}static findAllInputs(e){return Qe(e.querySelectorAll(dt.allInputsSelector)).reduce(((e,t)=>dt.isNativeInput(t)||dt.containsOnlyInlineElements(t)?[...e,t]:[...e,...dt.getDeepestBlockElements(t)]),[])}static getDeepestNode(e,t=!1){const n=t?"lastChild":"firstChild",o=t?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[n]){let i=e[n];if(dt.isSingleTag(i)&&!dt.isNativeInput(i)&&!dt.isLineBreakTag(i))if(i[o])i=i[o];else{if(!i.parentNode[o])return i.parentNode;i=i.parentNode[o]}return this.getDeepestNode(i,t)}return e}static isElement(e){return!Ye(e)&&(e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE)}static isFragment(e){return!Ye(e)&&(e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)}static isContentEditable(e){return"true"===e.contentEditable}static isNativeInput(e){return!(!e||!e.tagName)&&["INPUT","TEXTAREA"].includes(e.tagName)}static canSetCaret(e){let t=!0;if(dt.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1}else t=dt.isContentEditable(e);return t}static isNodeEmpty(e,t){let n;return!(this.isSingleTag(e)&&!this.isLineBreakTag(e))&&(n=this.isElement(e)&&this.isNativeInput(e)?e.value:e.textContent.replace("​",""),t&&(n=n.replace(new RegExp(t,"g"),"")),0===n.trim().length)}static isLeaf(e){return!!e&&0===e.childNodes.length}static isEmpty(e,t){e.normalize();const n=[e];for(;n.length>0;)if(e=n.shift()){if(this.isLeaf(e)&&!this.isNodeEmpty(e,t))return!1;e.childNodes&&n.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const t=dt.make("div");return t.innerHTML=e,t.childElementCount>0}static getContentLength(e){return dt.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let t;Ge(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;const n=e=>!dt.blockElements.includes(e.tagName.toLowerCase())&&Array.from(e.children).every(n);return Array.from(t.children).every(n)}static getDeepestBlockElements(e){return dt.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce(((e,t)=>[...e,...dt.getDeepestBlockElements(t)]),[])}static getHolder(e){return Ge(e)?document.getElementById(e):e}static isAnchor(e){return"a"===e.tagName.toLowerCase()}static offset(e){const t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop,i=t.top+o,r=t.left+n;return{top:i,left:r,bottom:i+t.height,right:r+t.width}}}function ut(e){e.dataset.empty=dt.isEmpty(e)?"true":"false"}const pt={ui:{blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":"","Convert to":""}},toolNames:{Text:"",Link:"",Bold:"",Italic:""},tools:{link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},blockTunes:{delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}}},ft=class e{static ui(t,n){return e._t(t,n)}static t(t,n){return e._t(t,n)}static setDictionary(t){e.currentDictionary=t}static _t(t,n){const o=e.getNamespace(t);return o&&o[n]?o[n]:n}static getNamespace(t){return t.split(".").reduce(((e,t)=>e&&Object.keys(e).length?e[t]:{}),e.currentDictionary)}};ft.currentDictionary=pt;let gt=ft;class mt extends Error{}class bt{constructor(){this.subscribers={}}on(e,t){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(t)}once(e,t){e in this.subscribers||(this.subscribers[e]=[]);const n=o=>{const i=t(o),r=this.subscribers[e].indexOf(n);return-1!==r&&this.subscribers[e].splice(r,1),i};this.subscribers[e].push(n)}emit(e,t){Xe(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce(((e,t)=>{const n=t(e);return void 0!==n?n:e}),t)}off(e,t){if(void 0!==this.subscribers[e]){for(let n=0;n<this.subscribers[e].length;n++)if(this.subscribers[e][n]===t){delete this.subscribers[e][n];break}}else console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`)}destroy(){this.subscribers={}}}function wt(e){Object.setPrototypeOf(this,{get id(){return e.id},get name(){return e.name},get config(){return e.config},get holder(){return e.holder},get isEmpty(){return e.isEmpty},get selected(){return e.selected},set stretched(t){e.stretched=t},get stretched(){return e.stretched},get focusable(){return e.focusable},call:(t,n)=>e.call(t,n),save:()=>e.save(),validate:t=>e.validate(t),dispatchChange(){e.dispatchChange()},getActiveToolboxEntry:()=>e.getActiveToolboxEntry()})}class vt{constructor(){this.allListeners=[]}on(e,t,n,o=!1){const i=function(e=""){return`${e}${Math.floor(1e8*Math.random()).toString(16)}`}("l"),r={id:i,element:e,eventType:t,handler:n,options:o};if(!this.findOne(e,t,n))return this.allListeners.push(r),e.addEventListener(t,n,o),i}off(e,t,n,o){const i=this.findAll(e,t,n);i.forEach(((e,t)=>{const n=this.allListeners.indexOf(i[t]);n>-1&&(this.allListeners.splice(n,1),e.element.removeEventListener(e.eventType,e.handler,e.options))}))}offById(e){const t=this.findById(e);t&&t.element.removeEventListener(t.eventType,t.handler,t.options)}findOne(e,t,n){const o=this.findAll(e,t,n);return o.length>0?o[0]:null}findAll(e,t,n){let o;const i=e?this.findByEventTarget(e):[];return o=e&&t&&n?i.filter((e=>e.eventType===t&&e.handler===n)):e&&t?i.filter((e=>e.eventType===t)):i,o}removeAll(){this.allListeners.map((e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)})),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter((t=>{if(t.element===e)return t}))}findByType(e){return this.allListeners.filter((t=>{if(t.eventType===e)return t}))}findByHandler(e){return this.allListeners.filter((t=>{if(t.handler===e)return t}))}findById(e){return this.allListeners.find((t=>t.id===e))}}class yt{constructor({config:e,eventsDispatcher:t}){if(this.nodes={},this.listeners=new vt,this.readOnlyMutableListeners={on:(e,t,n,o=!1)=>{this.mutableListenerIds.push(this.listeners.on(e,t,n,o))},clearAll:()=>{for(const e of this.mutableListenerIds)this.listeners.offById(e);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===yt)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=t}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const t=this.nodes[e];t instanceof HTMLElement&&t.remove()}}get isRtl(){return"rtl"===this.config.i18n.direction}}class kt{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return t?dt.isElement(t)?t:t.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(kt.get())}static isSelectionAtEditor(e){if(!e)return!1;let t=e.anchorNode||e.focusNode;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let n=null;return t&&t instanceof Element&&(n=t.closest(`.${kt.CSS.editorZone}`)),!!n&&n.nodeType===Node.ELEMENT_NODE}static isRangeAtEditor(e){if(!e)return;let t=e.startContainer;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let n=null;return t&&t instanceof Element&&(n=t.closest(`.${kt.CSS.editorZone}`)),!!n&&n.nodeType===Node.ELEMENT_NODE}static get isSelectionExists(){return!!kt.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e,t=document.selection,n={x:0,y:0,width:0,height:0};if(t&&"Control"!==t.type)return e=t.createRange(),n.x=e.boundingLeft,n.y=e.boundingTop,n.width=e.boundingWidth,n.height=e.boundingHeight,n;if(!window.getSelection)return je("Method window.getSelection is not supported","warn"),n;if(t=window.getSelection(),null===t.rangeCount||isNaN(t.rangeCount))return je("Method SelectionUtils.rangeCount is not supported","warn"),n;if(0===t.rangeCount)return n;if(e=t.getRangeAt(0).cloneRange(),e.getBoundingClientRect&&(n=e.getBoundingClientRect()),0===n.x&&0===n.y){const t=document.createElement("span");if(t.getBoundingClientRect){t.appendChild(document.createTextNode("​")),e.insertNode(t),n=t.getBoundingClientRect();const o=t.parentNode;o.removeChild(t),o.normalize()}}return n}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,t=0){const n=document.createRange(),o=window.getSelection();return dt.isNativeInput(e)?dt.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=t,e.getBoundingClientRect()):void 0:(n.setStart(e,t),n.setEnd(e,t),o.removeAllRanges(),o.addRange(n),n.getBoundingClientRect())}static isRangeInsideContainer(e){const t=kt.range;return null!==t&&e.contains(t.startContainer)}static addFakeCursor(){const e=kt.range;if(null===e)return;const t=dt.make("span","codex-editor__fake-cursor");t.dataset.mutationFree="true",e.collapse(),e.insertNode(t)}static isFakeCursorInsideContainer(e){return null!==dt.find(e,".codex-editor__fake-cursor")}static removeFakeCursor(e=document.body){const t=dt.find(e,".codex-editor__fake-cursor");t&&t.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=kt.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}findParentTag(e,t,n=10){const o=window.getSelection();let i=null;return o&&o.anchorNode&&o.focusNode?([o.anchorNode,o.focusNode].forEach((o=>{let r=n;for(;r>0&&o.parentNode&&(o.tagName!==e||(i=o,t&&o.classList&&!o.classList.contains(t)&&(i=null),!i));)o=o.parentNode,r--})),i):null}expandToTag(e){const t=window.getSelection();t.removeAllRanges();const n=document.createRange();n.selectNodeContents(e),t.addRange(n)}}const xt="redactor dom changed",Ct="block changed",Et="fake cursor is about to be toggled",Tt="fake cursor have been set",St="editor mobile layout toggled";function Bt(e,t){if(!e.conversionConfig)return!1;const n=e.conversionConfig[t];return qe(n)||Ge(n)}function It(e,t){return Bt(e.tool,t)}function _t(e,t){return Object.entries(e).some((([e,n])=>t[e]&&function(e,t){const n=Array.isArray(e)||Ve(e),o=Array.isArray(t)||Ve(t);return n||o?JSON.stringify(e)===JSON.stringify(t):e===t}(t[e],n)))}async function Lt(e,t){const n=(await e.save()).data;return t.reduce(((t,o)=>{if(!Bt(o,"import"))return t;const i=o.toolbox.filter((t=>{if(Xe(t)||!t.icon)return!1;if(void 0!==t.data){if(_t(t.data,n))return!1}else if(o.name===e.name)return!1;return!0}));return t.push({...o,toolbox:i}),t}),[])}function At(e,t){return!!e.mergeable&&(e.name===t.name||It(t,"export")&&It(e,"import"))}function Ot(e,t){const n=null==t?void 0:t.import;return qe(n)?n(e):Ge(n)?{[n]:e}:(void 0!==n&&je("Conversion «import» property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}const $t=class e{constructor(e,t){this.cursor=-1,this.items=[],this.items=e||[],this.focusedCssClass=t}get currentItem(){return-1===this.cursor?null:this.items[this.cursor]}setCursor(e){e<this.items.length&&e>=-1&&(this.dropCursor(),this.cursor=e,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(e){this.items=e}next(){this.cursor=this.leafNodesAndReturnIndex(e.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(e.directions.LEFT)}dropCursor(){-1!==this.cursor&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(t){if(0===this.items.length)return this.cursor;let n=this.cursor;return-1===n?n=t===e.directions.RIGHT?-1:0:this.items[n].classList.remove(this.focusedCssClass),n=t===e.directions.RIGHT?(n+1)%this.items.length:(this.items.length+n-1)%this.items.length,dt.canSetCaret(this.items[n])&&et((()=>kt.setCursor(this.items[n])),50)(),this.items[n].classList.add(this.focusedCssClass),n}};$t.directions={RIGHT:"right",LEFT:"left"};let Mt=$t;class Pt{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=e=>{if(this.isEventReadyForHandling(e))switch(Pt.usedKeys.includes(e.keyCode)&&e.preventDefault(),e.keyCode){case Oe:this.handleTabPress(e);break;case Pe:case Ne:this.flipLeft();break;case De:case Re:this.flipRight();break;case $e:this.handleEnterPress(e)}},this.iterator=new Mt(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||Pt.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[Oe,Pe,De,$e,Ne,Re]}activate(e,t){this.activated=!0,e&&this.iterator.setItems(e),void 0!==t&&this.iterator.setCursor(t),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter((t=>t!==e))}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?Mt.directions.LEFT:Mt.directions.RIGHT){case Mt.directions.RIGHT:this.flipRight();break;case Mt.directions.LEFT:this.flipLeft()}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),qe(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach((e=>e()))}}const Nt='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',Rt='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M11.5 17.5L5 11M5 11V15.5M5 11H9.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12.5 6.5L19 13M19 13V8.5M19 13H14.5"/></svg>';var Dt={exports:{}};
/*!
     * CodeX.Tooltips
     * 
     * @version 1.0.5
     * 
     * @licence MIT
     * @author CodeX <https://codex.so>
     * 
     * 
     */!function(e){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){n.r(t),n.d(t,"default",(function(){return o}));class o{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(e,t,n){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const o=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},n);if(o.hidingDelay&&(this.hidingDelay=o.hidingDelay),this.nodes.content.innerHTML="","string"==typeof t)this.nodes.content.appendChild(document.createTextNode(t));else{if(!(t instanceof Node))throw Error("[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But "+typeof t+" given.");this.nodes.content.appendChild(t)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),o.placement){case"top":this.placeTop(e,o);break;case"left":this.placeLeft(e,o);break;case"right":this.placeRight(e,o);break;default:this.placeBottom(e,o)}o&&o.delay?this.showingTimeout=setTimeout((()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0}),o.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(e=!1){if(this.hidingDelay&&!e)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout((()=>{this.hide(!0)}),this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(e,t,n){e.addEventListener("mouseenter",(()=>{this.show(e,t,n)})),e.addEventListener("mouseleave",(()=>{this.hide()}))}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const e="codex-tooltips-style";if(document.getElementById(e))return;const t=n(2),o=this.make("style",null,{textContent:t.toString(),id:e});this.prepend(document.head,o)}placeBottom(e,t){const n=e.getBoundingClientRect(),o=n.left+e.clientWidth/2-this.nodes.wrapper.offsetWidth/2,i=n.bottom+window.pageYOffset+this.offsetTop+t.marginTop;this.applyPlacement("bottom",o,i)}placeTop(e,t){const n=e.getBoundingClientRect(),o=n.left+e.clientWidth/2-this.nodes.wrapper.offsetWidth/2,i=n.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",o,i)}placeLeft(e,t){const n=e.getBoundingClientRect(),o=n.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-t.marginLeft,i=n.top+window.pageYOffset+e.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",o,i)}placeRight(e,t){const n=e.getBoundingClientRect(),o=n.right+this.offsetRight+t.marginRight,i=n.top+window.pageYOffset+e.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",o,i)}applyPlacement(e,t,n){this.nodes.wrapper.classList.add(this.CSS.placement[e]),this.nodes.wrapper.style.left=t+"px",this.nodes.wrapper.style.top=n+"px"}make(e,t=null,n={}){const o=document.createElement(e);Array.isArray(t)?o.classList.add(...t):t&&o.classList.add(t);for(const e in n)n.hasOwnProperty(e)&&(o[e]=n[e]);return o}append(e,t){Array.isArray(t)?t.forEach((t=>e.appendChild(t))):e.appendChild(t)}prepend(e,t){Array.isArray(t)?(t=t.reverse()).forEach((t=>e.prepend(t))):e.prepend(t)}}},function(e,t){e.exports='.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>\') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}'}]).default}(Dt);const zt=Ie(Dt.exports);let Ft=null;function Ht(){Ft||(Ft=new zt)}function jt(e=!1){Ht(),null==Ft||Ft.hide(e)}function Ut(e,t,n){Ht(),null==Ft||Ft.onHover(e,t,n)}function Wt(e){return(t,n)=>[[e,t].filter((e=>!!e)).join("__"),n].filter((e=>!!e)).join("--")}const qt=Wt("ce-hint"),Vt={root:qt(),alignedStart:qt(null,"align-left"),alignedCenter:qt(null,"align-center"),title:qt("title"),description:qt("description")};class Gt{constructor(e){this.nodes={root:dt.make("div",[Vt.root,"center"===e.alignment?Vt.alignedCenter:Vt.alignedStart]),title:dt.make("div",Vt.title,{textContent:e.title})},this.nodes.root.appendChild(this.nodes.title),void 0!==e.description&&(this.nodes.description=dt.make("div",Vt.description,{textContent:e.description}),this.nodes.root.appendChild(this.nodes.description))}getElement(){return this.nodes.root}}class Yt{constructor(e){this.params=e}get name(){if(void 0!==this.params&&"name"in this.params)return this.params.name}destroy(){jt()}onChildrenOpen(){var e;void 0!==this.params&&"children"in this.params&&"function"==typeof(null==(e=this.params.children)?void 0:e.onOpen)&&this.params.children.onOpen()}onChildrenClose(){var e;void 0!==this.params&&"children"in this.params&&"function"==typeof(null==(e=this.params.children)?void 0:e.onClose)&&this.params.children.onClose()}handleClick(){var e,t;void 0!==this.params&&"onActivate"in this.params&&(null==(t=(e=this.params).onActivate)||t.call(e,this.params))}addHint(e,t){Ut(e,new Gt(t).getElement(),{placement:t.position,hidingDelay:100})}get children(){var e;return void 0!==this.params&&"children"in this.params&&void 0!==(null==(e=this.params.children)?void 0:e.items)?this.params.children.items:[]}get hasChildren(){return this.children.length>0}get isChildrenOpen(){var e;return void 0!==this.params&&"children"in this.params&&!0===(null==(e=this.params.children)?void 0:e.isOpen)}get isChildrenFlippable(){var e;return!(void 0===this.params||!("children"in this.params)||!1===(null==(e=this.params.children)?void 0:e.isFlippable))}get isChildrenSearchable(){var e;return void 0!==this.params&&"children"in this.params&&!0===(null==(e=this.params.children)?void 0:e.searchable)}get closeOnActivate(){return void 0!==this.params&&"closeOnActivate"in this.params&&this.params.closeOnActivate}get isActive(){return void 0!==this.params&&"isActive"in this.params&&("function"==typeof this.params.isActive?this.params.isActive():!0===this.params.isActive)}}const Kt=Wt("ce-popover-item"),Xt={container:Kt(),active:Kt(null,"active"),disabled:Kt(null,"disabled"),focused:Kt(null,"focused"),hidden:Kt(null,"hidden"),confirmationState:Kt(null,"confirmation"),noHover:Kt(null,"no-hover"),noFocus:Kt(null,"no-focus"),title:Kt("title"),secondaryTitle:Kt("secondary-title"),icon:Kt("icon"),iconTool:Kt("icon","tool"),iconChevronRight:Kt("icon","chevron-right"),wobbleAnimation:Wt("wobble")()};class Zt extends Yt{constructor(e,t){super(e),this.params=e,this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{var e;null==(e=this.nodes.root)||e.classList.remove(Xt.noFocus)},this.removeSpecialHoverBehavior=()=>{var e;null==(e=this.nodes.root)||e.classList.remove(Xt.noHover)},this.onErrorAnimationEnd=()=>{var e,t;null==(e=this.nodes.icon)||e.classList.remove(Xt.wobbleAnimation),null==(t=this.nodes.icon)||t.removeEventListener("animationend",this.onErrorAnimationEnd)},this.nodes.root=this.make(e,t)}get isDisabled(){return!0===this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get isConfirmationStateEnabled(){return null!==this.confirmationState}get isFocused(){return null!==this.nodes.root&&this.nodes.root.classList.contains(Xt.focused)}getElement(){return this.nodes.root}handleClick(){this.isConfirmationStateEnabled&&null!==this.confirmationState?this.activateOrEnableConfirmationMode(this.confirmationState):this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){var t;null==(t=this.nodes.root)||t.classList.toggle(Xt.active,e)}toggleHidden(e){var t;null==(t=this.nodes.root)||t.classList.toggle(Xt.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e,t){var n,o;const i=(null==t?void 0:t.wrapperTag)||"div",r=dt.make(i,Xt.container,{type:"button"===i?"button":void 0});return e.name&&(r.dataset.itemName=e.name),this.nodes.icon=dt.make("div",[Xt.icon,Xt.iconTool],{innerHTML:e.icon||'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>'}),r.appendChild(this.nodes.icon),void 0!==e.title&&r.appendChild(dt.make("div",Xt.title,{innerHTML:e.title||""})),e.secondaryLabel&&r.appendChild(dt.make("div",Xt.secondaryTitle,{textContent:e.secondaryLabel})),this.hasChildren&&r.appendChild(dt.make("div",[Xt.icon,Xt.iconChevronRight],{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.58284 17.5L14.4414 12.6414C14.5195 12.5633 14.5195 12.4367 14.4414 12.3586L9.58284 7.5"/></svg>'})),this.isActive&&r.classList.add(Xt.active),e.isDisabled&&r.classList.add(Xt.disabled),void 0!==e.hint&&!1!==(null==(n=null==t?void 0:t.hint)?void 0:n.enabled)&&this.addHint(r,{...e.hint,position:(null==(o=null==t?void 0:t.hint)?void 0:o.position)||"right"}),r}enableConfirmationMode(e){if(null===this.nodes.root)return;const t={...this.params,...e,confirmation:"confirmation"in e?e.confirmation:void 0},n=this.make(t);this.nodes.root.innerHTML=n.innerHTML,this.nodes.root.classList.add(Xt.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){if(null===this.nodes.root)return;const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(Xt.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){var e,t,n;null==(e=this.nodes.root)||e.classList.add(Xt.noHover),null==(t=this.nodes.root)||t.classList.add(Xt.noFocus),null==(n=this.nodes.root)||n.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){var e;this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),null==(e=this.nodes.root)||e.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){var t;if("confirmation"in e&&void 0!==e.confirmation)this.enableConfirmationMode(e.confirmation);else try{null==(t=e.onActivate)||t.call(e,e),this.disableConfirmationMode()}catch{this.animateError()}}animateError(){var e,t,n;null!=(e=this.nodes.icon)&&e.classList.contains(Xt.wobbleAnimation)||(null==(t=this.nodes.icon)||t.classList.add(Xt.wobbleAnimation),null==(n=this.nodes.icon)||n.addEventListener("animationend",this.onErrorAnimationEnd))}}const Jt=Wt("ce-popover-item-separator"),Qt={container:Jt(),line:Jt("line"),hidden:Jt(null,"hidden")};class en extends Yt{constructor(){super(),this.nodes={root:dt.make("div",Qt.container),line:dt.make("div",Qt.line)},this.nodes.root.appendChild(this.nodes.line)}getElement(){return this.nodes.root}toggleHidden(e){var t;null==(t=this.nodes.root)||t.classList.toggle(Qt.hidden,e)}}var tn=(e=>(e.Default="default",e.Separator="separator",e.Html="html",e))(tn||{}),nn=(e=>(e.Closed="closed",e.ClosedOnActivate="closed-on-activate",e))(nn||{});const on=Wt("ce-popover"),rn={popover:on(),popoverContainer:on("container"),popoverOpenTop:on(null,"open-top"),popoverOpenLeft:on(null,"open-left"),popoverOpened:on(null,"opened"),search:on("search"),nothingFoundMessage:on("nothing-found-message"),nothingFoundMessageDisplayed:on("nothing-found-message","displayed"),items:on("items"),overlay:on("overlay"),overlayHidden:on("overlay","hidden"),popoverNested:on(null,"nested"),getPopoverNestedClass:e=>on(null,`nested-level-${e.toString()}`),popoverInline:on(null,"inline"),popoverHeader:on("header")};var sn=(e=>(e.NestingLevel="--nesting-level",e.PopoverHeight="--popover-height",e.InlinePopoverWidth="--inline-popover-width",e.TriggerItemLeft="--trigger-item-left",e.TriggerItemTop="--trigger-item-top",e))(sn||{});const an=Wt("ce-popover-item-html"),ln={root:an(),hidden:an(null,"hidden")};class cn extends Yt{constructor(e,t){var n,o;super(e),this.nodes={root:dt.make("div",ln.root)},this.nodes.root.appendChild(e.element),e.name&&(this.nodes.root.dataset.itemName=e.name),void 0!==e.hint&&!1!==(null==(n=null==t?void 0:t.hint)?void 0:n.enabled)&&this.addHint(this.nodes.root,{...e.hint,position:(null==(o=null==t?void 0:t.hint)?void 0:o.position)||"right"})}getElement(){return this.nodes.root}toggleHidden(e){var t;null==(t=this.nodes.root)||t.classList.toggle(ln.hidden,e)}getControls(){const e=this.nodes.root.querySelectorAll(`button, ${dt.allInputsSelector}`);return Array.from(e)}}class hn extends bt{constructor(e,t={}){super(),this.params=e,this.itemsRenderParams=t,this.listeners=new vt,this.messages={nothingFound:"Nothing found",search:"Search"},this.items=this.buildItems(e.items),e.messages&&(this.messages={...this.messages,...e.messages}),this.nodes={},this.nodes.popoverContainer=dt.make("div",[rn.popoverContainer]),this.nodes.nothingFoundMessage=dt.make("div",[rn.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popoverContainer.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=dt.make("div",[rn.items]),this.items.forEach((e=>{const t=e.getElement();null!==t&&this.nodes.items.appendChild(t)})),this.nodes.popoverContainer.appendChild(this.nodes.items),this.listeners.on(this.nodes.popoverContainer,"click",(e=>this.handleClick(e))),this.nodes.popover=dt.make("div",[rn.popover,this.params.class]),this.nodes.popover.appendChild(this.nodes.popoverContainer)}get itemsDefault(){return this.items.filter((e=>e instanceof Zt))}getElement(){return this.nodes.popover}show(){this.nodes.popover.classList.add(rn.popoverOpened),void 0!==this.search&&this.search.focus()}hide(){this.nodes.popover.classList.remove(rn.popoverOpened),this.nodes.popover.classList.remove(rn.popoverOpenTop),this.itemsDefault.forEach((e=>e.reset())),void 0!==this.search&&this.search.clear(),this.emit(nn.Closed)}destroy(){var e;this.items.forEach((e=>e.destroy())),this.nodes.popover.remove(),this.listeners.removeAll(),null==(e=this.search)||e.destroy()}activateItemByName(e){const t=this.items.find((t=>t.name===e));this.handleItemClick(t)}buildItems(e){return e.map((e=>{switch(e.type){case tn.Separator:return new en;case tn.Html:return new cn(e,this.itemsRenderParams[tn.Html]);default:return new Zt(e,this.itemsRenderParams[tn.Default])}}))}getTargetItem(e){return this.items.filter((e=>e instanceof Zt||e instanceof cn)).find((t=>{const n=t.getElement();return null!==n&&e.composedPath().includes(n)}))}handleItemClick(e){if(!("isDisabled"in e)||!e.isDisabled){if(e.hasChildren)return this.showNestedItems(e),void("handleClick"in e&&"function"==typeof e.handleClick&&e.handleClick());this.itemsDefault.filter((t=>t!==e)).forEach((e=>e.reset())),"handleClick"in e&&"function"==typeof e.handleClick&&e.handleClick(),this.toggleItemActivenessIfNeeded(e),e.closeOnActivate&&(this.hide(),this.emit(nn.ClosedOnActivate))}}handleClick(e){const t=this.getTargetItem(e);void 0!==t&&this.handleItemClick(t)}toggleItemActivenessIfNeeded(e){if(e instanceof Zt&&(!0===e.toggle&&e.toggleActive(),"string"==typeof e.toggle)){const t=this.itemsDefault.filter((t=>t.toggle===e.toggle));if(1===t.length)return void e.toggleActive();t.forEach((t=>{t.toggleActive(t===e)}))}}}var dn=(e=>(e.Search="search",e))(dn||{});const un=Wt("cdx-search-field"),pn={wrapper:un(),icon:un("icon"),input:un("input")};class fn extends bt{constructor({items:e,placeholder:t}){super(),this.listeners=new vt,this.items=e,this.wrapper=dt.make("div",pn.wrapper);const n=dt.make("div",pn.icon,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>'});this.input=dt.make("input",pn.input,{placeholder:t,tabIndex:-1}),this.wrapper.appendChild(n),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",(()=>{this.searchQuery=this.input.value,this.emit(dn.Search,{query:this.searchQuery,items:this.foundItems})}))}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.emit(dn.Search,{query:"",items:this.foundItems})}destroy(){this.listeners.removeAll()}get foundItems(){return this.items.filter((e=>this.checkItem(e)))}checkItem(e){var t,n;const o=(null==(t=e.title)?void 0:t.toLowerCase())||"",i=null==(n=this.searchQuery)?void 0:n.toLowerCase();return void 0!==i&&o.includes(i)}}var gn=Object.defineProperty,mn=Object.getOwnPropertyDescriptor;const bn=class e extends hn{constructor(e,t){super(e,t),this.nestingLevel=0,this.nestedPopoverTriggerItem=null,this.previouslyHoveredItem=null,this.scopeElement=document.body,this.hide=()=>{var e;super.hide(),this.destroyNestedPopoverIfExists(),null==(e=this.flipper)||e.deactivate(),this.previouslyHoveredItem=null},this.onFlip=()=>{const e=this.itemsDefault.find((e=>e.isFocused));null==e||e.onFocus()},this.onSearch=e=>{var t;const n=""===e.query,o=0===e.items.length;this.items.forEach((t=>{let i=!1;t instanceof Zt?i=!e.items.includes(t):(t instanceof en||t instanceof cn)&&(i=o||!n),t.toggleHidden(i)})),this.toggleNothingFoundMessage(o);const i=""===e.query?this.flippableElements:e.items.map((e=>e.getElement()));null!=(t=this.flipper)&&t.isActivated&&(this.flipper.deactivate(),this.flipper.activate(i))},void 0!==e.nestingLevel&&(this.nestingLevel=e.nestingLevel),this.nestingLevel>0&&this.nodes.popover.classList.add(rn.popoverNested),void 0!==e.scopeElement&&(this.scopeElement=e.scopeElement),null!==this.nodes.popoverContainer&&this.listeners.on(this.nodes.popoverContainer,"mouseover",(e=>this.handleHover(e))),e.searchable&&this.addSearch(),!1!==e.flippable&&(this.flipper=new Pt({items:this.flippableElements,focusedItemClass:Xt.focused,allowedKeys:[Oe,Ne,Re,$e]}),this.flipper.onFlip(this.onFlip))}hasFocus(){return void 0!==this.flipper&&this.flipper.hasFocus()}get scrollTop(){return null===this.nodes.items?0:this.nodes.items.scrollTop}get offsetTop(){return null===this.nodes.popoverContainer?0:this.nodes.popoverContainer.offsetTop}show(){var e;this.nodes.popover.style.setProperty(sn.PopoverHeight,this.size.height+"px"),this.shouldOpenBottom||this.nodes.popover.classList.add(rn.popoverOpenTop),this.shouldOpenRight||this.nodes.popover.classList.add(rn.popoverOpenLeft),super.show(),null==(e=this.flipper)||e.activate(this.flippableElements)}destroy(){this.hide(),super.destroy()}showNestedItems(e){null!==this.nestedPopover&&void 0!==this.nestedPopover||(this.nestedPopoverTriggerItem=e,this.showNestedPopoverForItem(e))}handleHover(e){const t=this.getTargetItem(e);void 0!==t&&this.previouslyHoveredItem!==t&&(this.destroyNestedPopoverIfExists(),this.previouslyHoveredItem=t,t.hasChildren&&this.showNestedPopoverForItem(t))}setTriggerItemPosition(e,t){const n=t.getElement(),o=(n?n.offsetTop:0)-this.scrollTop,i=this.offsetTop+o;e.style.setProperty(sn.TriggerItemTop,i+"px")}destroyNestedPopoverIfExists(){var e,t;void 0===this.nestedPopover||null===this.nestedPopover||(this.nestedPopover.off(nn.ClosedOnActivate,this.hide),this.nestedPopover.hide(),this.nestedPopover.destroy(),this.nestedPopover.getElement().remove(),this.nestedPopover=null,null==(e=this.flipper)||e.activate(this.flippableElements),null==(t=this.nestedPopoverTriggerItem)||t.onChildrenClose())}showNestedPopoverForItem(t){var n;this.nestedPopover=new e({searchable:t.isChildrenSearchable,items:t.children,nestingLevel:this.nestingLevel+1,flippable:t.isChildrenFlippable}),t.onChildrenOpen(),this.nestedPopover.on(nn.ClosedOnActivate,this.hide);const o=this.nestedPopover.getElement();return this.nodes.popover.appendChild(o),this.setTriggerItemPosition(o,t),o.style.setProperty(sn.NestingLevel,this.nestedPopover.nestingLevel.toString()),this.nestedPopover.show(),null==(n=this.flipper)||n.deactivate(),this.nestedPopover}get shouldOpenBottom(){if(void 0===this.nodes.popover||null===this.nodes.popover)return!1;const e=this.nodes.popoverContainer.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),n=this.size.height,o=e.top+n,i=e.top-n,r=Math.min(window.innerHeight,t.bottom);return i<t.top||o<=r}get shouldOpenRight(){if(void 0===this.nodes.popover||null===this.nodes.popover)return!1;const e=this.nodes.popover.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),n=this.size.width,o=e.right+n,i=e.left-n,r=Math.min(window.innerWidth,t.right);return i<t.left||o<=r}get size(){var e;const t={height:0,width:0};if(null===this.nodes.popover)return t;const n=this.nodes.popover.cloneNode(!0);n.style.visibility="hidden",n.style.position="absolute",n.style.top="-1000px",n.classList.add(rn.popoverOpened),null==(e=n.querySelector("."+rn.popoverNested))||e.remove(),document.body.appendChild(n);const o=n.querySelector("."+rn.popoverContainer);return t.height=o.offsetHeight,t.width=o.offsetWidth,n.remove(),t}get flippableElements(){return this.items.map((e=>e instanceof Zt?e.getElement():e instanceof cn?e.getControls():void 0)).flat().filter((e=>null!=e))}addSearch(){this.search=new fn({items:this.itemsDefault,placeholder:this.messages.search}),this.search.on(dn.Search,this.onSearch);const e=this.search.getElement();e.classList.add(rn.search),this.nodes.popoverContainer.insertBefore(e,this.nodes.popoverContainer.firstChild)}toggleNothingFoundMessage(e){this.nodes.nothingFoundMessage.classList.toggle(rn.nothingFoundMessageDisplayed,e)}};((e,t,n,o)=>{for(var i,r=o>1?void 0:o?mn(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o?i(t,n,r):i(r))||r);o&&r&&gn(t,n,r)})([lt],bn.prototype,"size",1);let wn=bn;class vn extends wn{constructor(e){const t=!ct();super({...e,class:rn.popoverInline},{[tn.Default]:{wrapperTag:"button",hint:{position:"top",alignment:"center",enabled:t}},[tn.Html]:{hint:{position:"top",alignment:"center",enabled:t}}}),this.items.forEach((e=>{!(e instanceof Zt)&&!(e instanceof cn)||e.hasChildren&&e.isChildrenOpen&&this.showNestedItems(e)}))}get offsetLeft(){return null===this.nodes.popoverContainer?0:this.nodes.popoverContainer.offsetLeft}show(){0===this.nestingLevel&&this.nodes.popover.style.setProperty(sn.InlinePopoverWidth,this.size.width+"px"),super.show()}handleHover(){}setTriggerItemPosition(e,t){const n=t.getElement(),o=n?n.offsetLeft:0,i=this.offsetLeft+o;e.style.setProperty(sn.TriggerItemLeft,i+"px")}showNestedItems(e){if(this.nestedPopoverTriggerItem===e)return this.destroyNestedPopoverIfExists(),void(this.nestedPopoverTriggerItem=null);super.showNestedItems(e)}showNestedPopoverForItem(e){const t=super.showNestedPopoverForItem(e);return t.getElement().classList.add(rn.getPopoverNestedClass(t.nestingLevel)),t}handleItemClick(e){var t;e!==this.nestedPopoverTriggerItem&&(null==(t=this.nestedPopoverTriggerItem)||t.handleClick(),super.destroyNestedPopoverIfExists()),super.handleItemClick(e)}}const yn=class e{constructor(){this.scrollPosition=null}lock(){ht?this.lockHard():document.body.classList.add(e.CSS.scrollLocked)}unlock(){ht?this.unlockHard():document.body.classList.remove(e.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(e.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(e.CSS.scrollLockedHard),null!==this.scrollPosition&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};yn.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};let kn=yn;const xn=Wt("ce-popover-header"),Cn={root:xn(),text:xn("text"),backButton:xn("back-button")};class En{constructor({text:e,onBackButtonClick:t}){this.listeners=new vt,this.text=e,this.onBackButtonClick=t,this.nodes={root:dt.make("div",[Cn.root]),backButton:dt.make("button",[Cn.backButton]),text:dt.make("div",[Cn.text])},this.nodes.backButton.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 17.5L9.64142 12.6414C9.56331 12.5633 9.56331 12.4367 9.64142 12.3586L14.5 7.5"/></svg>',this.nodes.root.appendChild(this.nodes.backButton),this.listeners.on(this.nodes.backButton,"click",this.onBackButtonClick),this.nodes.text.innerText=this.text,this.nodes.root.appendChild(this.nodes.text)}getElement(){return this.nodes.root}destroy(){this.nodes.root.remove(),this.listeners.destroy()}}class Tn{constructor(){this.history=[]}push(e){this.history.push(e)}pop(){return this.history.pop()}get currentTitle(){return 0===this.history.length?"":this.history[this.history.length-1].title}get currentItems(){return 0===this.history.length?[]:this.history[this.history.length-1].items}reset(){for(;this.history.length>1;)this.pop()}}class Sn extends hn{constructor(e){super(e,{[tn.Default]:{hint:{enabled:!1}},[tn.Html]:{hint:{enabled:!1}}}),this.scrollLocker=new kn,this.history=new Tn,this.isHidden=!0,this.nodes.overlay=dt.make("div",[rn.overlay,rn.overlayHidden]),this.nodes.popover.insertBefore(this.nodes.overlay,this.nodes.popover.firstChild),this.listeners.on(this.nodes.overlay,"click",(()=>{this.hide()})),this.history.push({items:e.items})}show(){this.nodes.overlay.classList.remove(rn.overlayHidden),super.show(),this.scrollLocker.lock(),this.isHidden=!1}hide(){this.isHidden||(super.hide(),this.nodes.overlay.classList.add(rn.overlayHidden),this.scrollLocker.unlock(),this.history.reset(),this.isHidden=!0)}destroy(){super.destroy(),this.scrollLocker.unlock()}showNestedItems(e){this.updateItemsAndHeader(e.children,e.title),this.history.push({title:e.title,items:e.children})}updateItemsAndHeader(e,t){if(null!==this.header&&void 0!==this.header&&(this.header.destroy(),this.header=null),void 0!==t){this.header=new En({text:t,onBackButtonClick:()=>{this.history.pop(),this.updateItemsAndHeader(this.history.currentItems,this.history.currentTitle)}});const e=this.header.getElement();null!==e&&this.nodes.popoverContainer.insertBefore(e,this.nodes.popoverContainer.firstChild)}this.items.forEach((e=>{var t;return null==(t=e.getElement())?void 0:t.remove()})),this.items=this.buildItems(e),this.items.forEach((e=>{var t;const n=e.getElement();null!==n&&(null==(t=this.nodes.items)||t.appendChild(n))}))}}var Bn=(e=>(e.APPEND_CALLBACK="appendCallback",e.RENDERED="rendered",e.MOVED="moved",e.UPDATED="updated",e.REMOVED="removed",e.ON_PASTE="onPaste",e))(Bn||{});class In extends bt{constructor({id:e=st(),data:t,tool:n,readOnly:o,tunesData:i},r){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(e=void 0)=>{const t=void 0===e,n=e instanceof InputEvent;let o;!t&&!n&&this.detectToolRootChange(e),o=!(!t&&!n)||!(e.length>0&&e.every((e=>{const{addedNodes:t,removedNodes:n,target:o}=e;return[...Array.from(t),...Array.from(n),o].some((e=>(dt.isElement(e)||(e=e.parentElement),e&&null!==e.closest('[data-mutation-free="true"]'))))}))),o&&(this.dropInputsCache(),this.updateCurrentInput(),this.toggleInputsEmptyMark(),this.call("updated"),this.emit("didMutated",this))},this.name=n.name,this.id=e,this.settings=n.settings,this.config=n.settings.config||{},this.editorEventBus=r||null,this.blockAPI=new wt(this),this.tool=n,this.toolInstance=n.create(t,this.blockAPI,o),this.tunes=n.tunes,this.composeTunes(i),this.holder=this.compose(),window.requestIdleCallback((()=>{this.watchBlockMutations(),this.addInputEvents(),this.toggleInputsEmptyMark()}))}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(0!==this.cachedInputs.length)return this.cachedInputs;const e=dt.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const t=this.inputs.findIndex((t=>t===e||t.contains(e)));-1!==t&&(this.inputIndex=t)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then((e=>e&&!Xe(e.data)?e.data:{}))}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return qe(this.toolInstance.merge)}get focusable(){return 0!==this.inputs.length}get isEmpty(){const e=dt.isEmpty(this.pluginsContent,"/"),t=!this.hasMedia;return e&&t}get hasMedia(){return!!this.holder.querySelector(["img","iframe","video","audio","source","input","textarea","twitterwidget"].join(","))}set selected(e){var t,n;this.holder.classList.toggle(In.CSS.selected,e);const o=!0===e&&kt.isRangeInsideContainer(this.holder),i=!1===e&&kt.isFakeCursorInsideContainer(this.holder);(o||i)&&(null==(t=this.editorEventBus)||t.emit(Et,{state:e}),o?kt.addFakeCursor():kt.removeFakeCursor(this.holder),null==(n=this.editorEventBus)||n.emit(Tt,{state:e}))}get selected(){return this.holder.classList.contains(In.CSS.selected)}set stretched(e){this.holder.classList.toggle(In.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(In.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(In.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,t){if(qe(this.toolInstance[e])){"appendCallback"===e&&je("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,t)}catch(t){je(`Error during '${e}' call: ${t.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),t=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach((([e,n])=>{if(qe(n.save))try{t[e]=n.save()}catch(e){je(`Tune ${n.constructor.name} save method throws an Error %o`,"warn",e)}}));const n=window.performance.now();let o;return Promise.resolve(e).then((e=>(o=window.performance.now(),{id:this.id,tool:this.name,data:e,tunes:t,time:o-n}))).catch((e=>{je(`Saving process for ${this.name} tool failed due to the ${e}`,"log","red")}))}async validate(e){let t=!0;return this.toolInstance.validate instanceof Function&&(t=await this.toolInstance.validate(e)),t}getTunes(){const e=[],t=[],n="function"==typeof this.toolInstance.renderSettings?this.toolInstance.renderSettings():[];return dt.isElement(n)?e.push({type:tn.Html,element:n}):Array.isArray(n)?e.push(...n):e.push(n),[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map((e=>e.render())).forEach((e=>{dt.isElement(e)?t.push({type:tn.Html,element:e}):Array.isArray(e)?t.push(...e):t.push(e)})),{toolTunes:e,commonTunes:t}}updateCurrentInput(){this.currentInput=dt.isNativeInput(document.activeElement)||!kt.anchorNode?document.activeElement:kt.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),qe(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(1===e.length)return Promise.resolve(this.tool.toolbox[0]);const t=await this.data;return null==e?void 0:e.find((e=>_t(e.data,t)))}async exportDataAsString(){return function(e,t){const n=null==t?void 0:t.export;return qe(n)?n(e):Ge(n)?e[n]:(void 0!==n&&je("Conversion «export» property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}(await this.data,this.tool.conversionConfig)}compose(){const e=dt.make("div",In.CSS.wrapper),t=dt.make("div",In.CSS.content),n=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=n,t.appendChild(this.toolRenderedElement);let o=t;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach((e=>{if(qe(e.wrap))try{o=e.wrap(o)}catch(t){je(`Tune ${e.constructor.name} wrap method throws an Error %o`,"warn",t)}})),e.appendChild(o),e}composeTunes(e){Array.from(this.tunes.values()).forEach((t=>{(t.isInternal?this.defaultTunesInstances:this.tunesInstances).set(t.name,t.create(e[t.name],this.blockAPI))})),Object.entries(e).forEach((([e,t])=>{this.tunesInstances.has(e)||(this.unavailableTunesData[e]=t)}))}addInputEvents(){this.inputs.forEach((e=>{e.addEventListener("focus",this.handleFocus),dt.isNativeInput(e)&&e.addEventListener("input",this.didMutated)}))}removeInputEvents(){this.inputs.forEach((e=>{e.removeEventListener("focus",this.handleFocus),dt.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)}))}watchBlockMutations(){var e;this.redactorDomChangedCallback=e=>{const{mutations:t}=e;t.some((e=>function(e,t){const{type:n,target:o,addedNodes:i,removedNodes:r}=e;return("attributes"!==e.type||"data-empty"!==e.attributeName)&&!!(t.contains(o)||"childList"===n&&(Array.from(i).some((e=>e===t))||Array.from(r).some((e=>e===t))))}(e,this.toolRenderedElement)))&&this.didMutated(t)},null==(e=this.editorEventBus)||e.on(xt,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;null==(e=this.editorEventBus)||e.off(xt,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach((e=>{if(Array.from(e.removedNodes).includes(this.toolRenderedElement)){const t=e.addedNodes[e.addedNodes.length-1];this.toolRenderedElement=t}}))}dropInputsCache(){this.cachedInputs=[]}toggleInputsEmptyMark(){this.inputs.forEach(ut)}}class _n extends yt{static getNamespace(e,t){return t?`blockTunes.${e}`:`tools.${e}`}get methods(){return{t:()=>{Ue("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e,t){return Object.assign(this.methods,{t:n=>gt.t(_n.getNamespace(e,t),n)})}}var Ln={exports:{}};!function(e){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){n(1),
/*!
           * Codex JavaScript Notification module
           * https://github.com/codex-team/js-notifier
           */
e.exports=function(){var e=n(6),t="cdx-notify--bounce-in",o=null;return{show:function(n){if(n.message){!function(){if(o)return!0;o=e.getWrapper(),document.body.appendChild(o)}();var i=null,r=n.time||8e3;switch(n.type){case"confirm":i=e.confirm(n);break;case"prompt":i=e.prompt(n);break;default:i=e.alert(n),window.setTimeout((function(){i.remove()}),r)}o.appendChild(i),i.classList.add(t)}}}}()},function(e,t,n){var o=n(2);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,i),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,'.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:\'\';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:\'\';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o=e[1]||"",i=e[3];if(!i)return o;if(t&&"function"==typeof btoa){var r=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),s=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[o].concat(s).concat([r]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<e.length;i++){var s=e[i];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var o,i,r={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=o.apply(this,arguments)),i}),a=function(){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(e){return document.querySelector(e)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch{n=null}e[t]=n}return e[t]}}(),l=null,c=0,h=[],d=n(5);function u(e,t){for(var n=0;n<e.length;n++){var o=e[n],i=r[o.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](o.parts[s]);for(;s<o.parts.length;s++)i.parts.push(w(o.parts[s],t))}else{var a=[];for(s=0;s<o.parts.length;s++)a.push(w(o.parts[s],t));r[o.id]={id:o.id,refs:1,parts:a}}}}function p(e,t){for(var n=[],o={},i=0;i<e.length;i++){var r=e[i],s=t.base?r[0]+t.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};o[s]?o[s].parts.push(a):n.push(o[s]={id:s,parts:[a]})}return n}function f(e,t){var n=a(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=h[h.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),h.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function m(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),b(t,e.attrs),f(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function w(e,t){var n,o,i,r,s,a;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var h=c++;n=l||(l=m(t)),o=k.bind(null,n,h,!1),i=k.bind(null,n,h,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(s=t,a=document.createElement("link"),void 0===s.attrs.type&&(s.attrs.type="text/css"),s.attrs.rel="stylesheet",b(a,s.attrs),f(s,a),o=function(e,t,n){var o=n.css,i=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||r)&&(o=d(o)),i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([o],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n=a,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),o=function(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){g(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){if(typeof DEBUG<"u"&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return u(n,t),function(e){for(var o=[],i=0;i<n.length;i++){var s=n[i];(a=r[s.id]).refs--,o.push(a)}for(e&&u(p(e,t),t),i=0;i<o.length;i++){var a;if(0===(a=o[i]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete r[a.id]}}}};var v,y=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function k(e,t,n,o){var i=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var r=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}},function(e,t){e.exports=function(e){var t=typeof window<"u"&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,r=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(i=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,n){var o,i,r,s,a,l,c,h,d;e.exports=(o="cdx-notifies",i="cdx-notify",r="cdx-notify__cross",s="cdx-notify__button--confirm",a="cdx-notify__button--cancel",l="cdx-notify__input",c="cdx-notify__button",h="cdx-notify__btns-wrapper",{alert:d=function(e){var t=document.createElement("DIV"),n=document.createElement("DIV"),o=e.message,s=e.style;return t.classList.add(i),s&&t.classList.add(i+"--"+s),t.innerHTML=o,n.classList.add(r),n.addEventListener("click",t.remove.bind(t)),t.appendChild(n),t},confirm:function(e){var t=d(e),n=document.createElement("div"),o=document.createElement("button"),i=document.createElement("button"),l=t.querySelector("."+r),u=e.cancelHandler,p=e.okHandler;return n.classList.add(h),o.innerHTML=e.okText||"Confirm",i.innerHTML=e.cancelText||"Cancel",o.classList.add(c),i.classList.add(c),o.classList.add(s),i.classList.add(a),u&&"function"==typeof u&&(i.addEventListener("click",u),l.addEventListener("click",u)),p&&"function"==typeof p&&o.addEventListener("click",p),o.addEventListener("click",t.remove.bind(t)),i.addEventListener("click",t.remove.bind(t)),n.appendChild(o),n.appendChild(i),t.appendChild(n),t},prompt:function(e){var t=d(e),n=document.createElement("div"),o=document.createElement("button"),i=document.createElement("input"),a=t.querySelector("."+r),u=e.cancelHandler,p=e.okHandler;return n.classList.add(h),o.innerHTML=e.okText||"Ok",o.classList.add(c),o.classList.add(s),i.classList.add(l),e.placeholder&&i.setAttribute("placeholder",e.placeholder),e.default&&(i.value=e.default),e.inputType&&(i.type=e.inputType),u&&"function"==typeof u&&a.addEventListener("click",u),p&&"function"==typeof p&&o.addEventListener("click",(function(){p(i.value)})),o.addEventListener("click",t.remove.bind(t)),n.appendChild(i),n.appendChild(o),t.appendChild(n),t},getWrapper:function(){var e=document.createElement("DIV");return e.classList.add(o),e}})}])}(Ln);const An=Ie(Ln.exports);class On{show(e){An.show(e)}}var $n={exports:{}};!function(e){e.exports=function(){function e(e){var t=e.tags,n=Object.keys(t).map((function(e){return typeof t[e]})).every((function(e){return"object"===e||"boolean"===e||"function"===e}));if(!n)throw new Error("The configuration was invalid");this.config=e}var t=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function n(e){return-1!==t.indexOf(e.nodeName)}var o=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function i(e){return-1!==o.indexOf(e.nodeName)}function r(e,t){return e.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function s(e,t,n){return"function"==typeof e.tags[t]?e.tags[t](n):e.tags[t]}function a(e,t){return typeof t>"u"||"boolean"==typeof t&&!t}function l(e,t,n){var o=e.name.toLowerCase();return!0!==t&&("function"==typeof t[o]?!t[o](e.value,n):typeof t[o]>"u"||!1===t[o]||"string"==typeof t[o]&&t[o]!==e.value)}return e.prototype.clean=function(e){const t=document.implementation.createHTMLDocument(),n=t.createElement("div");return n.innerHTML=e,this._sanitize(t,n),n.innerHTML},e.prototype._sanitize=function(e,t){var o=r(e,t),c=o.firstChild();if(c)do{if(c.nodeType!==Node.TEXT_NODE){if(c.nodeType===Node.COMMENT_NODE){t.removeChild(c),this._sanitize(e,t);break}var h,d=i(c);d&&(h=Array.prototype.some.call(c.childNodes,n));var u=!!t.parentNode,p=n(t)&&n(c)&&u,f=c.nodeName.toLowerCase(),g=s(this.config,f,c);if(d&&h||a(c,g)||!this.config.keepNestedBlockElements&&p){if("SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName)for(;c.childNodes.length>0;)t.insertBefore(c.childNodes[0],c);t.removeChild(c),this._sanitize(e,t);break}for(var m=0;m<c.attributes.length;m+=1){var b=c.attributes[m];l(b,g,c)&&(c.removeAttribute(b.name),m-=1)}this._sanitize(e,c)}else if(""===c.data.trim()&&(c.previousElementSibling&&n(c.previousElementSibling)||c.nextElementSibling&&n(c.nextElementSibling))){t.removeChild(c),this._sanitize(e,t);break}}while(c=o.nextSibling())},e}()}($n);const Mn=Ie($n.exports);function Pn(e,t){return e.map((e=>{const n=qe(t)?t(e.tool):t;return Xe(n)||(e.data=Rn(e.data,n)),e}))}function Nn(e,t={}){return new Mn({tags:t}).clean(e)}function Rn(e,t){return Array.isArray(e)?function(e,t){return e.map((e=>Rn(e,t)))}(e,t):Ve(e)?function(e,t){const n={};for(const o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;const i=e[o],r=Dn(t[o])?t[o]:t;n[o]=Rn(i,r)}return n}(e,t):Ge(e)?function(e,t){return Ve(t)?Nn(e,t):!1===t?Nn(e,{}):e}(e,t):e}function Dn(e){return Ve(e)||function(e){return"boolean"===We(e)}(e)||qe(e)}const zn=function e(t,n){const o={};return Object.entries(t).forEach((([t,i])=>{if(Ve(i)){const r=n?`${n}.${t}`:t;Object.values(i).every((e=>Ge(e)))?o[t]=r:o[t]=e(i,r)}else o[t]=i})),o}(pt);var Fn={exports:{}};
/*!
     * Library for handling keyboard shortcuts
     * @copyright CodeX (https://codex.so)
     * @license MIT
     * @author CodeX (https://codex.so)
     * @version 1.2.0
     */!function(e){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.r(t);var r=function(){function e(t){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.commands={},this.keys={},this.name=t.name,this.parseShortcutName(t.name),this.element=t.on,this.callback=t.callback,this.executeShortcut=function(e){n.execute(e)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return i(e,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),i(e,[{key:"parseShortcutName",value:function(t){t=t.split("+");for(var n=0;n<t.length;n++){t[n]=t[n].toUpperCase();var o=!1;for(var i in e.supportedCommands)if(e.supportedCommands[i].includes(t[n])){o=this.commands[i]=!0;break}o||(this.keys[t[n]]=!0)}for(var r in e.supportedCommands)this.commands[r]||(this.commands[r]=!1)}},{key:"execute",value:function(t){var n,o={CMD:t.ctrlKey||t.metaKey,SHIFT:t.shiftKey,ALT:t.altKey},i=!0;for(n in this.commands)this.commands[n]!==o[n]&&(i=!1);var r,s=!0;for(r in this.keys)s=s&&t.keyCode===e.keyCodes[r];i&&s&&this.callback(t)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),e}();t.default=r}]).default}(Fn);const Hn=Ie(Fn.exports);const jn=new class{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const t=new Hn({name:e.name,on:e.on,callback:e.handler}),n=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...n,t])}remove(e,t){const n=this.findShortcut(e,t);if(!n)return;n.remove();const o=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,o.filter((e=>e!==n)))}findShortcut(e,t){return(this.registeredShortcuts.get(e)||[]).find((({name:e})=>e===t))}};var Un=Object.defineProperty,Wn=Object.getOwnPropertyDescriptor,qn=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?Wn(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&Un(t,n,r),r},Vn=(e=>(e.Opened="toolbox-opened",e.Closed="toolbox-closed",e.BlockAdded="toolbox-block-added",e))(Vn||{});const Gn=class e extends bt{constructor({api:t,tools:n,i18nLabels:o}){super(),this.opened=!1,this.listeners=new vt,this.popover=null,this.handleMobileLayoutToggle=()=>{this.destroyPopover(),this.initPopover()},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=t,this.tools=n,this.i18nLabels=o,this.enableShortcuts(),this.nodes={toolbox:dt.make("div",e.CSS.toolbox)},this.initPopover(),this.api.events.on(St,this.handleMobileLayoutToggle)}get isEmpty(){return 0===this.toolsToBeDisplayed.length}static get CSS(){return{toolbox:"ce-toolbox"}}getElement(){return this.nodes.toolbox}hasFocus(){if(null!==this.popover)return"hasFocus"in this.popover?this.popover.hasFocus():void 0}destroy(){var e;super.destroy(),this.nodes&&this.nodes.toolbox&&this.nodes.toolbox.remove(),this.removeAllShortcuts(),null==(e=this.popover)||e.off(nn.Closed,this.onPopoverClose),this.listeners.destroy(),this.api.events.off(St,this.handleMobileLayoutToggle)}toolButtonActivated(e,t){this.insertNewBlock(e,t)}open(){var e;this.isEmpty||(null==(e=this.popover)||e.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var e;null==(e=this.popover)||e.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}initPopover(){var e;const t=ct()?Sn:wn;this.popover=new t({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(nn.Closed,this.onPopoverClose),null==(e=this.nodes.toolbox)||e.append(this.popover.getElement())}destroyPopover(){null!==this.popover&&(this.popover.hide(),this.popover.off(nn.Closed,this.onPopoverClose),this.popover.destroy(),this.popover=null),null!==this.nodes.toolbox&&(this.nodes.toolbox.innerHTML="")}get toolsToBeDisplayed(){const e=[];return this.tools.forEach((t=>{t.toolbox&&e.push(t)})),e}get toolboxItemsToBeDisplayed(){const e=(e,t)=>({icon:e.icon,title:gt.t(zn.toolNames,e.title||ot(t.name)),name:t.name,onActivate:()=>{this.toolButtonActivated(t.name,e.data)},secondaryLabel:t.shortcut?rt(t.shortcut):""});return this.toolsToBeDisplayed.reduce(((t,n)=>(Array.isArray(n.toolbox)?n.toolbox.forEach((o=>{t.push(e(o,n))})):void 0!==n.toolbox&&t.push(e(n.toolbox,n)),t)),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach((e=>{const t=e.shortcut;t&&this.enableShortcutForTool(e.name,t)}))}enableShortcutForTool(e,t){jn.add({name:t,on:this.api.ui.nodes.redactor,handler:async t=>{t.preventDefault();const n=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(n);if(o)try{const t=await this.api.blocks.convert(o.id,e);return void this.api.caret.setToBlock(t,"end")}catch{}this.insertNewBlock(e)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach((e=>{const t=e.shortcut;t&&jn.remove(this.api.ui.nodes.redactor,t)}))}async insertNewBlock(e,t){const n=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(n);if(!o)return;const i=o.isEmpty?n:n+1;let r;if(t){const n=await this.api.blocks.composeBlockData(e);r=Object.assign(n,t)}const s=this.api.blocks.insert(e,r,void 0,i,void 0,o.isEmpty);s.call(Bn.APPEND_CALLBACK),this.api.caret.setToBlock(i),this.emit("toolbox-block-added",{block:s}),this.api.toolbar.close()}};qn([lt],Gn.prototype,"toolsToBeDisplayed",1),qn([lt],Gn.prototype,"toolboxItemsToBeDisplayed",1);let Yn=Gn;const Kn="block hovered";var Xn=(e=>(e[e.Block=0]="Block",e[e.Inline=1]="Inline",e[e.Tune=2]="Tune",e))(Xn||{}),Zn=(e=>(e.Shortcut="shortcut",e.Toolbox="toolbox",e.EnabledInlineTools="inlineToolbar",e.EnabledBlockTunes="tunes",e.Config="config",e))(Zn||{}),Jn=(e=>(e.Shortcut="shortcut",e.SanitizeConfig="sanitize",e))(Jn||{}),Qn=(e=>(e.IsEnabledLineBreaks="enableLineBreaks",e.Toolbox="toolbox",e.ConversionConfig="conversionConfig",e.IsReadOnlySupported="isReadOnlySupported",e.PasteConfig="pasteConfig",e))(Qn||{}),eo=(e=>(e.IsInline="isInline",e.Title="title",e))(eo||{}),to=(e=>(e.IsTune="isTune",e))(to||{});class no{constructor({name:e,constructable:t,config:n,api:o,isDefault:i,isInternal:r=!1,defaultPlaceholder:s}){this.api=o,this.name=e,this.constructable=t,this.config=n,this.isDefault=i,this.isInternal=r,this.defaultPlaceholder=s}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(qe(this.constructable.reset))return this.constructable.reset()}prepare(){if(qe(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return 1===this.type}isBlock(){return 0===this.type}isTune(){return 2===this.type}}function oo(){const e=window.getSelection();if(null===e)return[null,0];let t=e.focusNode,n=e.focusOffset;return null===t?[null,0]:(t.nodeType!==Node.TEXT_NODE&&t.childNodes.length>0&&(t.childNodes[n]?(t=t.childNodes[n],n=0):(t=t.childNodes[n-1],n=t.textContent.length)),[t,n])}function io(e,t,n,o){const i=document.createRange();"left"===o?(i.setStart(e,0),i.setEnd(t,n)):(i.setStart(t,n),i.setEnd(e,e.childNodes.length));const r=i.cloneContents(),s=document.createElement("div");s.appendChild(r);return function(e){return!/[^\t\n\r ]/.test(e)}(s.textContent||"")}function ro(e){const t=dt.getDeepestNode(e);if(null===t||dt.isEmpty(e))return!0;if(dt.isNativeInput(t))return 0===t.selectionEnd;if(dt.isEmpty(e))return!0;const[n,o]=oo();return null!==n&&io(e,n,o,"left")}function so(e){const t=dt.getDeepestNode(e,!0);if(null===t)return!0;if(dt.isNativeInput(t))return t.selectionEnd===t.value.length;const[n,o]=oo();return null!==n&&io(e,n,o,"right")}class ao{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return Qe(this.workingArea.children)}static set(e,t,n){return isNaN(Number(t))?(Reflect.set(e,t,n),!0):(e.insert(+t,n),!0)}static get(e,t){return isNaN(Number(t))?Reflect.get(e,t):e.get(+t)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,t){const n=this.blocks[t];dt.swap(this.blocks[e].holder,n.holder),this.blocks[t]=this.blocks[e],this.blocks[e]=n}move(e,t){const n=this.blocks.splice(t,1)[0],o=e-1,i=Math.max(0,o),r=this.blocks[i];e>0?this.insertToDOM(n,"afterend",r):this.insertToDOM(n,"beforebegin",r),this.blocks.splice(e,0,n);const s=this.composeBlockEvent("move",{fromIndex:t,toIndex:e});n.call(Bn.MOVED,s)}insert(e,t,n=!1){if(!this.length)return void this.push(t);e>this.length&&(e=this.length),n&&(this.blocks[e].holder.remove(),this.blocks[e].call(Bn.REMOVED));const o=n?1:0;if(this.blocks.splice(e,o,t),e>0){const n=this.blocks[e-1];this.insertToDOM(t,"afterend",n)}else{const n=this.blocks[e+1];n?this.insertToDOM(t,"beforebegin",n):this.insertToDOM(t)}}replace(e,t){if(void 0===this.blocks[e])throw Error("Incorrect index");this.blocks[e].holder.replaceWith(t.holder),this.blocks[e]=t}insertMany(e,t){const n=new DocumentFragment;for(const t of e)n.appendChild(t.holder);if(this.length>0){if(t>0){const e=Math.min(t-1,this.length-1);this.blocks[e].holder.after(n)}else 0===t&&this.workingArea.prepend(n);this.blocks.splice(t,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(n);e.forEach((e=>e.call(Bn.RENDERED)))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(Bn.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach((e=>e.call(Bn.REMOVED))),this.blocks.length=0}insertAfter(e,t){const n=this.blocks.indexOf(e);this.insert(n+1,t)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,t,n){t?n.holder.insertAdjacentElement(t,e.holder):this.workingArea.appendChild(e.holder),e.call(Bn.RENDERED)}composeBlockEvent(e,t){return new CustomEvent(e,{detail:t})}}const lo="block-removed",co="block-added",ho="block-changed";class uo{constructor(){this.completed=Promise.resolve()}add(e){return new Promise(((t,n)=>{this.completed=this.completed.then(e).then(t).catch(n)}))}}class po extends yt{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}setToBlock(e,t=this.positions.DEFAULT,n=0){var o;const{BlockManager:i,BlockSelection:r}=this.Editor;if(r.clearSelection(),!e.focusable)return null==(o=window.getSelection())||o.removeAllRanges(),r.selectBlock(e),void(i.currentBlock=e);let s;switch(t){case this.positions.START:s=e.firstInput;break;case this.positions.END:s=e.lastInput;break;default:s=e.currentInput}if(!s)return;const a=dt.getDeepestNode(s,t===this.positions.END),l=dt.getContentLength(a);switch(!0){case t===this.positions.START:n=0;break;case t===this.positions.END:case n>l:n=l}this.set(a,n),i.setCurrentBlockByChildNode(e.holder),i.currentBlock.currentInput=s}setToInput(e,t=this.positions.DEFAULT,n=0){const{currentBlock:o}=this.Editor.BlockManager,i=dt.getDeepestNode(e);switch(t){case this.positions.START:this.set(i,0);break;case this.positions.END:this.set(i,dt.getContentLength(i));break;default:n&&this.set(i,n)}o.currentInput=e}set(e,t=0){const{top:n,bottom:o}=kt.setCursor(e,t),{innerHeight:i}=window;n<0?window.scrollBy(0,n-30):o>i&&window.scrollBy(0,o-i+30)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const e=this.Editor.BlockManager.insertAtEnd();this.setToBlock(e)}}extractFragmentFromCaretPosition(){const e=kt.get();if(e.rangeCount){const t=e.getRangeAt(0),n=this.Editor.BlockManager.currentBlock.currentInput;if(t.deleteContents(),n){if(dt.isNativeInput(n)){const e=n,t=document.createDocumentFragment(),o=e.value.substring(0,e.selectionStart),i=e.value.substring(e.selectionStart);return t.textContent=i,e.value=o,t}{const e=t.cloneRange();return e.selectNodeContents(n),e.setStart(t.endContainer,t.endOffset),e.extractContents()}}}}navigateNext(e=!1){const{BlockManager:t}=this.Editor,{currentBlock:n,nextBlock:o}=t;if(void 0===n)return!1;const{nextInput:i,currentInput:r}=n,s=void 0!==r?so(r):void 0;let a=o;const l=e||s||!n.focusable;if(i&&l)return this.setToInput(i,this.positions.START),!0;if(null===a){if(n.tool.isDefault||!l)return!1;a=t.insertAtEnd()}return!!l&&(this.setToBlock(a,this.positions.START),!0)}navigatePrevious(e=!1){const{currentBlock:t,previousBlock:n}=this.Editor.BlockManager;if(!t)return!1;const{previousInput:o,currentInput:i}=t,r=void 0!==i?ro(i):void 0,s=e||r||!t.focusable;return o&&s?(this.setToInput(o,this.positions.END),!0):!(null===n||!s)&&(this.setToBlock(n,this.positions.END),!0)}createShadow(e){const t=document.createElement("span");t.classList.add(po.CSS.shadowCaret),e.insertAdjacentElement("beforeend",t)}restoreCaret(e){const t=e.querySelector(`.${po.CSS.shadowCaret}`);if(!t)return;(new kt).expandToTag(t);const n=document.createRange();n.selectNode(t),n.extractContents()}insertContentAtCaretPosition(e){const t=document.createDocumentFragment(),n=document.createElement("div"),o=kt.get(),i=kt.range;n.innerHTML=e,Array.from(n.childNodes).forEach((e=>t.appendChild(e))),0===t.childNodes.length&&t.appendChild(new Text);const r=t.lastChild;i.deleteContents(),i.insertNode(t);const s=document.createRange(),a=r.nodeType===Node.TEXT_NODE?r:r.firstChild;null!==a&&null!==a.textContent&&s.setStart(a,a.textContent.length),o.removeAllRanges(),o.addRange(s)}}const fo=class e extends yt{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=e=>{try{const t=e.create({},{},!1);if(!1===e.pasteConfig)return void this.exceptionList.push(e.name);if(!qe(t.onPaste))return;this.getTagsConfig(e),this.getFilesConfig(e),this.getPatternsConfig(e)}catch(t){je(`Paste handling for «${e.name}» Tool hasn't been set up because of the error`,"warn",t)}},this.handlePasteEvent=async e=>{const{BlockManager:t,Toolbar:n}=this.Editor,o=t.setCurrentBlockByChildNode(e.target);!o||this.isNativeBehaviour(e.target)&&!e.clipboardData.types.includes("Files")||o&&this.exceptionList.includes(o.name)||(e.preventDefault(),this.processDataTransfer(e.clipboardData),n.close())}}async prepare(){this.processTools()}toggleReadOnly(e){e?this.unsetCallback():this.setCallback()}async processDataTransfer(e,t=!1){const{Tools:n}=this.Editor,o=e.types;if((o.includes?o.includes("Files"):o.contains("Files"))&&!Xe(this.toolsFiles))return void await this.processFiles(e.files);const i=e.getData(this.MIME_TYPE),r=e.getData("text/plain");let s=e.getData("text/html");if(i)try{return void this.insertEditorJSData(JSON.parse(i))}catch{}t&&r.trim()&&s.trim()&&(s="<p>"+(s.trim()?s:r)+"</p>");const a=Object.keys(this.toolsTags).reduce(((e,t)=>(e[t.toLowerCase()]=this.toolsTags[t].sanitizationConfig??{},e)),{}),l=Nn(s,Object.assign({},a,n.getAllInlineToolsSanitizeConfig(),{br:{}}));l.trim()&&l.trim()!==r&&dt.isHTMLString(l)?await this.processText(l,!0):await this.processText(r)}async processText(e,t=!1){const{Caret:n,BlockManager:o}=this.Editor,i=t?this.processHTML(e):this.processPlain(e);if(!i.length)return;if(1===i.length)return void(i[0].isBlock?this.processSingleBlock(i.pop()):this.processInlinePaste(i.pop()));const r=o.currentBlock&&o.currentBlock.tool.isDefault&&o.currentBlock.isEmpty;i.map((async(e,t)=>this.insertBlock(e,0===t&&r))),o.currentBlock&&n.setToBlock(o.currentBlock,n.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const e=this.Editor.Tools.blockTools;Array.from(e.values()).forEach(this.processTool)}collectTagNames(e){return Ge(e)?[e]:Ve(e)?Object.keys(e):[]}getTagsConfig(e){if(!1===e.pasteConfig)return;const t=e.pasteConfig.tags||[],n=[];t.forEach((t=>{const o=this.collectTagNames(t);n.push(...o),o.forEach((n=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,n))return void je(`Paste handler for «${e.name}» Tool on «${n}» tag is skipped because it is already used by «${this.toolsTags[n].tool.name}» Tool.`,"warn");const o=Ve(t)?t[n]:null;this.toolsTags[n.toUpperCase()]={tool:e,sanitizationConfig:o}}))})),this.tagsByTool[e.name]=n.map((e=>e.toUpperCase()))}getFilesConfig(e){if(!1===e.pasteConfig)return;const{files:t={}}=e.pasteConfig;let{extensions:n,mimeTypes:o}=t;!n&&!o||(n&&!Array.isArray(n)&&(je(`«extensions» property of the onDrop config for «${e.name}» Tool should be an array`),n=[]),o&&!Array.isArray(o)&&(je(`«mimeTypes» property of the onDrop config for «${e.name}» Tool should be an array`),o=[]),o&&(o=o.filter((t=>!!function(e){return/^[-\w]+\/([-+\w]+|\*)$/.test(e)}(t)||(je(`MIME type value «${t}» for the «${e.name}» Tool is not a valid MIME type`,"warn"),!1)))),this.toolsFiles[e.name]={extensions:n||[],mimeTypes:o||[]})}getPatternsConfig(e){!1===e.pasteConfig||!e.pasteConfig.patterns||Xe(e.pasteConfig.patterns)||Object.entries(e.pasteConfig.patterns).forEach((([t,n])=>{n instanceof RegExp||je(`Pattern ${n} for «${e.name}» Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:t,pattern:n,tool:e})}))}isNativeBehaviour(e){return dt.isNativeInput(e)}async processFiles(e){const{BlockManager:t}=this.Editor;let n;n=await Promise.all(Array.from(e).map((e=>this.processFile(e)))),n=n.filter((e=>!!e));const o=t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty;n.forEach(((e,n)=>{t.paste(e.type,e.event,0===n&&o)}))}async processFile(e){const t=function(e){return e.name.split(".").pop()}(e),n=Object.entries(this.toolsFiles).find((([n,{mimeTypes:o,extensions:i}])=>{const[r,s]=e.type.split("/"),a=i.find((e=>e.toLowerCase()===t.toLowerCase())),l=o.find((e=>{const[t,n]=e.split("/");return t===r&&(n===s||"*"===n)}));return!!a||!!l}));if(!n)return;const[o]=n;return{event:this.composePasteEvent("file",{file:e}),type:o}}processHTML(e){const{Tools:t}=this.Editor,n=dt.make("DIV");return n.innerHTML=e,this.getNodes(n).map((e=>{let n,o=t.defaultTool,i=!1;switch(e.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:n=dt.make("div"),n.appendChild(e);break;case Node.ELEMENT_NODE:n=e,i=!0,this.toolsTags[n.tagName]&&(o=this.toolsTags[n.tagName].tool)}const{tags:r}=o.pasteConfig||{tags:[]},s=r.reduce(((e,t)=>(this.collectTagNames(t).forEach((n=>{const o=Ve(t)?t[n]:null;e[n.toLowerCase()]=o||{}})),e)),{}),a=Object.assign({},s,o.baseSanitizeConfig);if("table"===n.tagName.toLowerCase()){const e=Nn(n.outerHTML,a);n=dt.make("div",void 0,{innerHTML:e}).firstChild}else n.innerHTML=Nn(n.innerHTML,a);const l=this.composePasteEvent("tag",{data:n});return{content:n,isBlock:i,tool:o.name,event:l}})).filter((e=>{const t=dt.isEmpty(e.content),n=dt.isSingleTag(e.content);return!t||n}))}processPlain(e){const{defaultBlock:t}=this.config;if(!e)return[];const n=t;return e.split(/\r?\n/).filter((e=>e.trim())).map((e=>{const t=dt.make("div");t.textContent=e;const o=this.composePasteEvent("tag",{data:t});return{content:t,tool:n,isBlock:!1,event:o}}))}async processSingleBlock(e){const{Caret:t,BlockManager:n}=this.Editor,{currentBlock:o}=n;o&&e.tool===o.name&&dt.containsOnlyInlineElements(e.content.innerHTML)?t.insertContentAtCaretPosition(e.content.innerHTML):this.insertBlock(e,(null==o?void 0:o.tool.isDefault)&&o.isEmpty)}async processInlinePaste(t){const{BlockManager:n,Caret:o}=this.Editor,{content:i}=t;if(n.currentBlock&&n.currentBlock.tool.isDefault&&i.textContent.length<e.PATTERN_PROCESSING_MAX_LENGTH){const e=await this.processPattern(i.textContent);if(e){const t=n.currentBlock&&n.currentBlock.tool.isDefault&&n.currentBlock.isEmpty,i=n.paste(e.tool,e.event,t);return void o.setToBlock(i,o.positions.END)}}if(n.currentBlock&&n.currentBlock.currentInput){const e=n.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,Nn(i.innerHTML,e))}else this.insertBlock(t)}async processPattern(e){const t=this.toolsPatterns.find((t=>{const n=t.pattern.exec(e);return!!n&&e===n.shift()}));return t?{event:this.composePasteEvent("pattern",{key:t.key,data:e}),tool:t.tool.name}:void 0}insertBlock(e,t=!1){const{BlockManager:n,Caret:o}=this.Editor,{currentBlock:i}=n;let r;if(t&&i&&i.isEmpty)return r=n.paste(e.tool,e.event,!0),void o.setToBlock(r,o.positions.END);r=n.paste(e.tool,e.event),o.setToBlock(r,o.positions.END)}insertEditorJSData(e){const{BlockManager:t,Caret:n,Tools:o}=this.Editor;Pn(e,(e=>o.blockTools.get(e).sanitizeConfig)).forEach((({tool:e,data:o},i)=>{let r=!1;0===i&&(r=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty);const s=t.insert({tool:e,data:o,replace:r});n.setToBlock(s,n.positions.END)}))}processElementNode(e,t,n){const o=Object.keys(this.toolsTags),i=e,{tool:r}=this.toolsTags[i.tagName]||{},s=this.tagsByTool[null==r?void 0:r.name]||[],a=o.includes(i.tagName),l=dt.blockElements.includes(i.tagName.toLowerCase()),c=Array.from(i.children).some((({tagName:e})=>o.includes(e)&&!s.includes(e))),h=Array.from(i.children).some((({tagName:e})=>dt.blockElements.includes(e.toLowerCase())));return l||a||c?a&&!c||l&&!h&&!c?[...t,n,i]:void 0:(n.appendChild(i),[...t,n])}getNodes(e){const t=Array.from(e.childNodes);let n;const o=(e,t)=>{if(dt.isEmpty(t)&&!dt.isSingleTag(t))return e;const i=e[e.length-1];let r=new DocumentFragment;switch(i&&dt.isFragment(i)&&(r=e.pop()),t.nodeType){case Node.ELEMENT_NODE:if(n=this.processElementNode(t,e,r),n)return n;break;case Node.TEXT_NODE:return r.appendChild(t),[...e,r];default:return[...e,r]}return[...e,...Array.from(t.childNodes).reduce(o,[])]};return t.reduce(o,[])}composePasteEvent(e,t){return new CustomEvent(e,{detail:t})}};fo.PATTERN_PROCESSING_MAX_LENGTH=450;let go=fo;class mo extends yt{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,t){const n=document.elementFromPoint(e-window.pageXOffset,t-window.pageYOffset);n.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const o=[`.${In.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],i=n.closest("."+this.Editor.UI.CSS.editorWrapper),r=o.some((e=>!!n.closest(e)));!i||r||(this.mousedown=!0,this.startX=e,this.startY=t)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",(e=>{this.processMouseDown(e)}),!1),this.listeners.on(document.body,"mousemove",nt((e=>{this.processMouseMove(e)}),10),{passive:!0}),this.listeners.on(document.body,"mouseleave",(()=>{this.processMouseLeave()})),this.listeners.on(window,"scroll",nt((e=>{this.processScroll(e)}),10),{passive:!0}),this.listeners.on(document.body,"mouseup",(()=>{this.processMouseUp()}),!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(null!==e.target.closest(dt.allInputsSelector)||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),this.inScrollZone?this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0):this.isScrolling=!1}genHTML(){const{UI:e}=this.Editor,t=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),n=dt.make("div",mo.CSS.overlay,{}),o=dt.make("div",mo.CSS.overlayContainer,{}),i=dt.make("div",mo.CSS.rect,{});return o.appendChild(i),n.appendChild(o),t.appendChild(n),this.overlayRectangle=i,{container:t,overlay:n}}scrollVertical(e){if(!this.inScrollZone||!this.mousedown)return;const t=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-t,setTimeout((()=>{this.scrollVertical(e)}),0)}changingRectangle(e){if(!this.mousedown)return;void 0!==e.pageY&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:t,leftPos:n,index:o}=this.genInfoForMouseSelection(),i=this.startX>t&&this.mouseX>t,r=this.startX<n&&this.mouseX<n;this.rectCrossesBlocks=!(i||r),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),void 0!==o&&(this.trySelectNextBlock(o),this.inverseSelection(),kt.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=this.startX-window.pageXOffset+"px",this.overlayRectangle.style.top=this.startY-window.pageYOffset+"px",this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const e of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(e);if(!this.rectCrossesBlocks&&e)for(const e of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(e)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=this.startY-window.pageYOffset+"px",this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=this.mouseY-window.pageYOffset+"px"),this.mouseX>=this.startX?(this.overlayRectangle.style.left=this.startX-window.pageXOffset+"px",this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=this.mouseX-window.pageXOffset+"px")}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,t=this.mouseY-window.pageYOffset,n=document.elementFromPoint(e,t),o=this.Editor.BlockManager.getBlockByChildNode(n);let i;void 0!==o&&(i=this.Editor.BlockManager.blocks.findIndex((e=>e.holder===o.holder)));const r=this.Editor.BlockManager.lastBlock.holder.querySelector("."+In.CSS.content),s=Number.parseInt(window.getComputedStyle(r).width,10)/2;return{index:i,leftPos:e-s,rightPos:e+s}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const t=this.stackOfSelected[this.stackOfSelected.length-1]===e,n=this.stackOfSelected.length;if(t)return;const o=this.stackOfSelected[n-1]-this.stackOfSelected[n-2]>0;let i=0;n>1&&(i=o?1:-1);const r=e>this.stackOfSelected[n-1]&&1===i,s=e<this.stackOfSelected[n-1]&&-1===i,a=!(r||s||0===i);if(!a&&(e>this.stackOfSelected[n-1]||void 0===this.stackOfSelected[n-1])){let t=this.stackOfSelected[n-1]+1||e;for(;t<=e;t++)this.addBlockInSelection(t);return}if(!a&&e<this.stackOfSelected[n-1]){for(let t=this.stackOfSelected[n-1]-1;t>=e;t--)this.addBlockInSelection(t);return}if(!a)return;let l,c=n-1;for(l=e>this.stackOfSelected[n-1]?()=>e>this.stackOfSelected[c]:()=>e<this.stackOfSelected[c];l();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[c]),this.stackOfSelected.pop(),c--}}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-block:only-of-type .ce-paragraph[data-placeholder-active]:empty:before,.ce-block:only-of-type .ce-paragraph[data-placeholder-active][data-empty=true]:before{content:attr(data-placeholder-active)}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}();
/**
     * Base Paragraph Block for the Editor.js.
     * Represents a regular text block
     *
     * @author CodeX (team@codex.so)
     * @copyright CodeX 2018
     * @license The MIT License (MIT)
     */
class bo{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:t,api:n,readOnly:o}){this.api=n,this.readOnly=o,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=t.placeholder?t.placeholder:bo.DEFAULT_PLACEHOLDER,this._data=e??{},this._element=null,this._preserveBlank=t.preserveBlank??!1}onKeyUp(e){if("Backspace"!==e.code&&"Delete"!==e.code||!this._element)return;const{textContent:t}=this._element;""===t&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable="false",e.dataset.placeholderActive=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable="true",e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){if(!this._element)return;this._data.text+=e.text;const t=function(e){const t=document.createElement("div");t.innerHTML=e.trim();const n=document.createDocumentFragment();return n.append(...Array.from(t.childNodes)),n}(e.text);this._element.appendChild(t),this._element.normalize()}validate(e){return!(""===e.text.trim()&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const t={text:e.detail.data.innerHTML};this._data=t,window.requestAnimationFrame((()=>{this._element&&(this._element.innerHTML=this._data.text||"")}))}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',title:"Text"}}}class wo{constructor(){this.commandName="bold"}static get sanitize(){return{b:{}}}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',name:"bold",onActivate:()=>{document.execCommand(this.commandName)},isActive:()=>document.queryCommandState(this.commandName)}}get shortcut(){return"CMD+B"}}wo.isInline=!0,wo.title="Bold";class vo{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}vo.isInline=!0,vo.title="Italic";class yo{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new kt}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Nt,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.enterKeyHint="done",this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",(e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)})),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const e=this.selection.findParentTag("A");if(e)return this.selection.expandToTag(e),this.unlink(),this.closeActions(),this.checkState(),void this.toolbar.close()}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const t=e.getAttribute("href");this.nodes.input.value="null"!==t?t:"",this.selection.save()}else this.nodes.button.innerHTML=Nt,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const e=new kt;e.save(),this.selection.restore(),this.selection.removeFakeBackground(),e.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let t=this.nodes.input.value||"";return t.trim()?this.validateURL(t)?(t=this.prepareLink(t),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(t),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),void this.inlineToolbar.close()):(this.notifier.show({message:"Pasted link is not valid.",style:"error"}),void je("Incorrect Link pasted","warn",t)):(this.selection.restore(),this.unlink(),e.preventDefault(),void this.closeActions())}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e)}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const t=/^\/[^/\s]/.test(e),n="#"===e.substring(0,1),o=/^\/\/[^/\s]/.test(e);return!t&&!n&&!o&&(e="http://"+e),e}insertLink(e){const t=this.selection.findParentTag("A");t&&this.selection.expandToTag(t),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}yo.isInline=!0,yo.title="Link";class ko{constructor({api:e}){this.i18nAPI=e.i18n,this.blocksAPI=e.blocks,this.selectionAPI=e.selection,this.toolsAPI=e.tools,this.caretAPI=e.caret}async render(){const e=kt.get(),t=this.blocksAPI.getBlockByElement(e.anchorNode);if(void 0===t)return[];const n=this.toolsAPI.getBlockTools(),o=await Lt(t,n);if(0===o.length)return[];const i=o.reduce(((e,n)=>{var o;return null==(o=n.toolbox)||o.forEach((o=>{e.push({icon:o.icon,title:gt.t(zn.toolNames,o.title),name:n.name,closeOnActivate:!0,onActivate:async()=>{const e=await this.blocksAPI.convert(t.id,n.name,o.data);this.caretAPI.setToBlock(e,"end")}})})),e}),[]),r=await t.getActiveToolboxEntry(),s=void 0!==r?r.icon:Rt,a=!ct();return{icon:s,name:"convert-to",hint:{title:this.i18nAPI.t("Convert to")},children:{searchable:a,items:i,onOpen:()=>{a&&(this.selectionAPI.setFakeBackground(),this.selectionAPI.save())},onClose:()=>{a&&(this.selectionAPI.restore(),this.selectionAPI.removeFakeBackground())}}}}}ko.isInline=!0;class xo{constructor({data:e,api:t}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=t,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=dt.make("div",this.CSS.wrapper),t=dt.make("div",this.CSS.info),n=dt.make("div",this.CSS.title,{textContent:this.title}),o=dt.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',t.appendChild(n),t.appendChild(o),e.appendChild(t),e}}xo.isReadOnlySupported=!0;class Co extends no{constructor(){super(...arguments),this.type=Xn.Inline}get title(){return this.constructable[eo.Title]}create(){return new this.constructable({api:this.api,config:this.settings})}}class Eo extends no{constructor(){super(...arguments),this.type=Xn.Tune}create(e,t){return new this.constructable({api:this.api,config:this.settings,block:t,data:e})}}class To extends Map{get blockTools(){const e=Array.from(this.entries()).filter((([,e])=>e.isBlock()));return new To(e)}get inlineTools(){const e=Array.from(this.entries()).filter((([,e])=>e.isInline()));return new To(e)}get blockTunes(){const e=Array.from(this.entries()).filter((([,e])=>e.isTune()));return new To(e)}get internalTools(){const e=Array.from(this.entries()).filter((([,e])=>e.isInternal));return new To(e)}get externalTools(){const e=Array.from(this.entries()).filter((([,e])=>!e.isInternal));return new To(e)}}var So=Object.defineProperty,Bo=Object.getOwnPropertyDescriptor,Io=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?Bo(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&So(t,n,r),r};class _o extends no{constructor(){super(...arguments),this.type=Xn.Block,this.inlineTools=new To,this.tunes=new To}create(e,t,n){return new this.constructable({data:e,block:t,readOnly:n,api:this.api,config:this.settings})}get isReadOnlySupported(){return!0===this.constructable[Qn.IsReadOnlySupported]}get isLineBreaksEnabled(){return this.constructable[Qn.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[Qn.Toolbox],t=this.config[Zn.Toolbox];if(!Xe(e)&&!1!==t)return t?Array.isArray(e)?Array.isArray(t)?t.map(((t,n)=>{const o=e[n];return o?{...o,...t}:t})):[t]:Array.isArray(t)?t:[{...e,...t}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[Qn.ConversionConfig]}get enabledInlineTools(){return this.config[Zn.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[Zn.EnabledBlockTunes]}get pasteConfig(){return this.constructable[Qn.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,t=this.baseSanitizeConfig;if(Xe(e))return t;const n={};for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const i=e[o];Ve(i)?n[o]=Object.assign({},t,i):n[o]=i}return n}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach((t=>Object.assign(e,t.sanitizeConfig))),Array.from(this.tunes.values()).forEach((t=>Object.assign(e,t.sanitizeConfig))),e}}Io([lt],_o.prototype,"sanitizeConfig",1),Io([lt],_o.prototype,"baseSanitizeConfig",1);class Lo{constructor(e,t,n){this.api=n,this.config=e,this.editorConfig=t}get(e){const{class:t,isInternal:n=!1,...o}=this.config[e],i=this.getConstructor(t),r=t[to.IsTune];return new i({name:e,constructable:t,config:o,api:this.api.getMethodsForTool(e,r),isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:n})}getConstructor(e){switch(!0){case e[eo.IsInline]:return Co;case e[to.IsTune]:return Eo;default:return _o}}}class Ao{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e+1);if(!t)throw new Error("Unable to move Block down since it is already the last");const n=t.holder,o=n.getBoundingClientRect();let i=Math.abs(window.innerHeight-n.offsetHeight);o.top<window.innerHeight&&(i=window.scrollY+n.offsetHeight),window.scrollTo(0,i),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}}Ao.isTune=!0;class Oo{constructor({api:e}){this.api=e}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}Oo.isTune=!0;class $o{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e),n=this.api.blocks.getBlockByIndex(e-1);if(0===e||!t||!n)throw new Error("Unable to move Block up since it is already the first");const o=t.holder,i=n.holder,r=o.getBoundingClientRect(),s=i.getBoundingClientRect();let a;a=s.top>0?Math.abs(r.top)-Math.abs(s.top):Math.abs(r.top)+s.height,window.scrollBy(0,-1*a),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}}$o.isTune=!0;var Mo=Object.defineProperty,Po=Object.getOwnPropertyDescriptor;class No extends yt{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new To,this.toolsUnavailable=new To}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=it({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||0===Object.keys(this.config.tools).length)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new Lo(e,this.config,this.Editor.API);const t=this.getListOfPrepareFunctions(e);if(0===t.length)return Promise.resolve();await Je(t,(e=>{this.toolPrepareMethodSuccess(e)}),(e=>{this.toolPrepareMethodFallback(e)})),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach((t=>{Object.assign(e,t.sanitizeConfig)})),e}destroy(){Object.values(this.available).forEach((async e=>{qe(e.reset)&&await e.reset()}))}get internalTools(){return{convertTo:{class:ko,isInternal:!0},link:{class:yo,isInternal:!0},bold:{class:wo,isInternal:!0},italic:{class:vo,isInternal:!0},paragraph:{class:bo,inlineToolbar:!0,isInternal:!0},stub:{class:xo,isInternal:!0},moveUp:{class:$o,isInternal:!0},delete:{class:Oo,isInternal:!0},moveDown:{class:Ao,isInternal:!0}}}toolPrepareMethodSuccess(e){const t=this.factory.get(e.toolName);if(t.isInline()){const e=["render"].filter((e=>!t.create()[e]));if(e.length)return je(`Incorrect Inline Tool: ${t.name}. Some of required methods is not implemented %o`,"warn",e),void this.toolsUnavailable.set(t.name,t)}this.toolsAvailable.set(t.name,t)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const t=[];return Object.entries(e).forEach((([e,n])=>{t.push({function:qe(n.class.prepare)?n.class.prepare:()=>{},data:{toolName:e,config:n.config}})})),t}prepareBlockTools(){Array.from(this.blockTools.values()).forEach((e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)}))}assignInlineToolsToBlockTool(e){if(!1!==this.config.inlineToolbar){if(!0===e.enabledInlineTools)return void(e.inlineTools=new To(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map((e=>[e,this.inlineTools.get(e)])):Array.from(this.inlineTools.entries())));Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new To(["convertTo",...e.enabledInlineTools].map((e=>[e,this.inlineTools.get(e)]))))}}assignBlockTunesToBlockTool(e){if(!1!==e.enabledBlockTunes){if(Array.isArray(e.enabledBlockTunes)){const t=new To(e.enabledBlockTunes.map((e=>[e,this.blockTunes.get(e)])));return void(e.tunes=new To([...t,...this.blockTunes.internalTools]))}if(Array.isArray(this.config.tunes)){const t=new To(this.config.tunes.map((e=>[e,this.blockTunes.get(e)])));return void(e.tunes=new To([...t,...this.blockTunes.internalTools]))}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const t=this.config.tools[e];if(!qe(t)&&!qe(t.class))throw Error(`Tool «${e}» must be a constructor function or an object with function in the «class» property`)}}prepareConfig(){const e={};for(const t in this.config.tools)Ve(this.config.tools[t])?e[t]=this.config.tools[t]:e[t]={class:this.config.tools[t]};return e}}((e,t,n,o)=>{for(var i,r=o>1?void 0:o?Po(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o?i(t,n,r):i(r))||r);o&&r&&Mo(t,n,r)})([lt],No.prototype,"getAllInlineToolsSanitizeConfig",1);const Ro=':root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;--color-background-icon-active: rgba(56, 138, 229, .1);--color-text-icon-active: #388AE5;--color-text-primary: black;position:absolute;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3;opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{color:var(--color-text-primary);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:0;border-radius:4px;line-height:normal;height:100%;padding:0;width:28px;background-color:transparent;cursor:pointer}@media (max-width: 650px){.ce-inline-tool{width:36px;height:36px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#f8f8f8}}.ce-inline-tool svg{display:block;width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:4px 8px;font-size:14px;line-height:22px;outline:none;margin:0;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-inline-tool--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #EFF0F1;--color-shadow: rgba(13, 20, 33, .1);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #F8F8F8;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;--popover-top: calc(100% + var(--offset-from-target));--popover-left: 0;--nested-popover-overlap: 4px;--icon-size: 20px;--item-padding: 3px;--item-height: calc(var(--icon-size) + 2 * var(--item-padding))}.ce-popover__container{min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0px 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:var(--popover-left);top:var(--popover-top);background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened>.ce-popover__container{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened>.ce-popover__container{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover--open-top .ce-popover__container{--popover-top: calc(-1 * (var(--offset-from-target) + var(--popover-height)))}.ce-popover--open-left .ce-popover__container{--popover-left: calc(-1 * var(--width) + 100%)}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}@media (max-width: 650px){.ce-popover .ce-popover__container{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}}.ce-popover__search{margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover--nested .ce-popover__container{--popover-left: calc(var(--nesting-level) * (var(--width) - var(--nested-popover-overlap)));top:calc(var(--trigger-item-top) - var(--nested-popover-overlap));position:absolute}.ce-popover--open-top.ce-popover--nested .ce-popover__container{top:calc(var(--trigger-item-top) - var(--popover-height) + var(--item-height) + var(--offset-from-target) + var(--nested-popover-overlap))}.ce-popover--open-left .ce-popover--nested .ce-popover__container{--popover-left: calc(-1 * (var(--nesting-level) + 1) * var(--width) + 100%)}.ce-popover-item-separator{padding:4px 3px}.ce-popover-item-separator--hidden{display:none}.ce-popover-item-separator__line{height:1px;background:var(--color-border);width:100%}.ce-popover-item-html--hidden{display:none}.ce-popover-item{--border-radius: 6px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--item-padding);color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;background:transparent}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover-item__icon--tool{margin-right:4px}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-right:auto}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title,.ce-popover-item--confirmation .ce-popover-item__icon{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}.ce-popover-header{margin-bottom:8px;margin-top:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover-header__text{font-size:18px;font-weight:600}.ce-popover-header__back-button{border:0;background:transparent;width:36px;height:36px;color:var(--color-text-primary)}.ce-popover-header__back-button svg{display:block;width:28px;height:28px}.ce-popover--inline{--height: 38px;--height-mobile: 46px;--container-padding: 4px;position:relative}.ce-popover--inline .ce-popover__custom-content{margin-bottom:0}.ce-popover--inline .ce-popover__items{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-popover--inline .ce-popover__container{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:var(--container-padding);height:var(--height);top:0;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;width:-webkit-max-content;width:-moz-max-content;width:max-content;-webkit-animation:none;animation:none}@media (max-width: 650px){.ce-popover--inline .ce-popover__container{height:var(--height-mobile);position:absolute}}.ce-popover--inline .ce-popover-item-separator{padding:0 4px}.ce-popover--inline .ce-popover-item-separator__line{height:100%;width:1px}.ce-popover--inline .ce-popover-item{border-radius:4px;padding:4px}.ce-popover--inline .ce-popover-item__icon--tool{-webkit-box-shadow:none;box-shadow:none;background:transparent;margin-right:0}.ce-popover--inline .ce-popover-item__icon{width:auto;width:initial;height:auto;height:initial}.ce-popover--inline .ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover--inline .ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover--inline .ce-popover-item:not(:last-of-type){margin-bottom:0;margin-bottom:initial}.ce-popover--inline .ce-popover-item-html{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover--inline .ce-popover-item__icon--chevron-right{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{--offset: 3px;left:0;top:calc(var(--height) + var(--offset))}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{top:calc(var(--height-mobile) + var(--offset))}}.ce-popover--inline .ce-popover--nested .ce-popover__container{min-width:var(--width);width:var(--width);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:6px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.ce-popover--inline .ce-popover--nested .ce-popover__items{display:block;width:100%}.ce-popover--inline .ce-popover--nested .ce-popover-item{border-radius:6px;padding:3px}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested .ce-popover-item{padding:4px}}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon--tool{margin-right:4px}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon{width:26px;height:26px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator{padding:4px 3px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator__line{width:100%;height:1px}.codex-editor [data-placeholder]:empty:before,.codex-editor [data-placeholder][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text;content:attr(data-placeholder)}.codex-editor [data-placeholder-active]:empty:before,.codex-editor [data-placeholder-active][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text}.codex-editor [data-placeholder-active]:empty:focus:before,.codex-editor [data-placeholder-active][data-empty=true]:focus:before{content:attr(data-placeholder-active)}\n';const Do={BlocksAPI:class extends yt{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,t={},n={},o,i,r,s)=>new wt(this.Editor.BlockManager.insert({id:s,tool:e,data:t,index:o,needToFocus:i,replace:r})),this.composeBlockData=async e=>{const t=this.Editor.Tools.blockTools.get(e);return new In({tool:t,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,t,n)=>{const{BlockManager:o}=this.Editor,i=o.getBlockById(e);if(void 0===i)throw new Error(`Block with id "${e}" not found`);return new wt(await o.update(i,t,n))},this.convert=async(e,t,n)=>{var o,i;const{BlockManager:r,Tools:s}=this.Editor,a=r.getBlockById(e);if(!a)throw new Error(`Block with id "${e}" not found`);const l=s.blockTools.get(a.name),c=s.blockTools.get(t);if(!c)throw new Error(`Block Tool with type "${t}" not found`);const h=void 0!==(null==(o=null==l?void 0:l.conversionConfig)?void 0:o.export),d=void 0!==(null==(i=c.conversionConfig)?void 0:i.import);if(h&&d){return new wt(await r.convert(a,t,n))}{const e=[!h&&ot(a.name),!d&&ot(t)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${a.name}" to "${t}" is not possible. ${e} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,t=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(t);const n=e.map((({id:e,type:t,data:n})=>this.Editor.BlockManager.composeBlock({id:e,tool:t||this.config.defaultBlock,data:n})));return this.Editor.BlockManager.insertMany(n,t),n.map((e=>new wt(e)))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,t)=>this.swap(e,t),move:(e,t)=>this.move(e,t),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),getBlockByElement:e=>this.getBlockByElement(e),stretchBlock:(e,t=!0)=>this.stretchBlock(e,t),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const t=this.Editor.BlockManager.getBlockById(e);if(t)return this.Editor.BlockManager.getBlockIndex(t);Ue("There is no block with id `"+e+"`","warn")}getBlockByIndex(e){const t=this.Editor.BlockManager.getBlockByIndex(e);if(void 0!==t)return new wt(t);Ue("There is no block at index `"+e+"`","warn")}getById(e){const t=this.Editor.BlockManager.getBlockById(e);return void 0===t?(Ue("There is no block with id `"+e+"`","warn"),null):new wt(t)}getBlockByElement(e){const t=this.Editor.BlockManager.getBlock(e);if(void 0!==t)return new wt(t);Ue("There is no block corresponding to element `"+e+"`","warn")}swap(e,t){je("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,t)}move(e,t){this.Editor.BlockManager.move(e,t)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const t=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(t)}catch(e){return void Ue(e,"warn")}0===this.Editor.BlockManager.blocks.length&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(void 0===e||void 0===e.blocks)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(e){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,t=!0){at(!0,"blocks.stretchBlock()","BlockAPI");const n=this.Editor.BlockManager.getBlockByIndex(e);n&&(n.stretched=t)}insertNewBlock(){je("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if("number"!=typeof e)throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(null===e)throw new Error("Index should be greater than or equal to 0")}},CaretAPI:class extends yt{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>!!this.Editor.BlockManager.firstBlock&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,t),!0),this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>!!this.Editor.BlockManager.lastBlock&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,t),!0),this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>!!this.Editor.BlockManager.previousBlock&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,t),!0),this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>!!this.Editor.BlockManager.nextBlock&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,t),!0),this.setToBlock=(e,t=this.Editor.Caret.positions.DEFAULT,n=0)=>{const o=function(e,t){return"number"==typeof e?t.BlockManager.getBlockByIndex(e):"string"==typeof e?t.BlockManager.getBlockById(e):t.BlockManager.getBlockById(e.id)}(e,this.Editor);return void 0!==o&&(this.Editor.Caret.setToBlock(o,t,n),!0)},this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}},EventsAPI:class extends yt{get methods(){return{emit:(e,t)=>this.emit(e,t),off:(e,t)=>this.off(e,t),on:(e,t)=>this.on(e,t)}}on(e,t){this.eventsDispatcher.on(e,t)}emit(e,t){this.eventsDispatcher.emit(e,t)}off(e,t){this.eventsDispatcher.off(e,t)}},I18nAPI:_n,API:class extends yt{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,tools:this.Editor.ToolsAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e,t){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e,t)})}},InlineToolbarAPI:class extends yt{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}},ListenersAPI:class extends yt{get methods(){return{on:(e,t,n,o)=>this.on(e,t,n,o),off:(e,t,n,o)=>this.off(e,t,n,o),offById:e=>this.offById(e)}}on(e,t,n,o){return this.listeners.on(e,t,n,o)}off(e,t,n,o){this.listeners.off(e,t,n,o)}offById(e){this.listeners.offById(e)}},NotifierAPI:class extends yt{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.notifier=new On}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}},ReadOnlyAPI:class extends yt{get methods(){const e=()=>this.isEnabled;return{toggle:e=>this.toggle(e),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}},SanitizerAPI:class extends yt{get methods(){return{clean:(e,t)=>this.clean(e,t)}}clean(e,t){return Nn(e,t)}},SaverAPI:class extends yt{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(Ue(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}},SelectionAPI:class extends yt{constructor(){super(...arguments),this.selectionUtils=new kt}get methods(){return{findParentTag:(e,t)=>this.findParentTag(e,t),expandToTag:e=>this.expandToTag(e),save:()=>this.selectionUtils.save(),restore:()=>this.selectionUtils.restore(),setFakeBackground:()=>this.selectionUtils.setFakeBackground(),removeFakeBackground:()=>this.selectionUtils.removeFakeBackground()}}findParentTag(e,t){return this.selectionUtils.findParentTag(e,t)}expandToTag(e){this.selectionUtils.expandToTag(e)}},ToolsAPI:class extends yt{get methods(){return{getBlockTools:()=>Array.from(this.Editor.Tools.blockTools.values())}}},StylesAPI:class extends yt{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}},ToolbarAPI:class extends yt{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){-1!==this.Editor.BlockManager.currentBlockIndex?e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close():Ue("Could't toggle the Toolbar because there is no block selected ","warn")}toggleToolbox(e){-1!==this.Editor.BlockManager.currentBlockIndex?e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close():Ue("Could't toggle the Toolbox because there is no block selected ","warn")}},TooltipAPI:class extends yt{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t})}get methods(){return{show:(e,t,n)=>this.show(e,t,n),hide:()=>this.hide(),onHover:(e,t,n)=>this.onHover(e,t,n)}}show(e,t,n){!function(e,t,n){Ht(),null==Ft||Ft.show(e,t,n)}(e,t,n)}hide(){jt()}onHover(e,t,n){Ut(e,t,n)}},UiAPI:class extends yt{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}},BlockSettings:class extends yt{constructor(){super(...arguments),this.opened=!1,this.selection=new kt,this.popover=null,this.close=()=>{this.opened&&(this.opened=!1,kt.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(nn.Closed,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))},this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;if(null!==this.popover)return"flipper"in this.popover?null==(e=this.popover)?void 0:e.flipper:void 0}make(){this.nodes.wrapper=dt.make("div",[this.CSS.settings]),this.eventsDispatcher.on(St,this.close)}destroy(){this.removeAllNodes(),this.listeners.destroy(),this.eventsDispatcher.off(St,this.close)}async open(e=this.Editor.BlockManager.currentBlock){var t;this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(e),this.Editor.BlockSelection.clearCache();const{toolTunes:n,commonTunes:o}=e.getTunes();this.eventsDispatcher.emit(this.events.opened);const i=ct()?Sn:wn;this.popover=new i({searchable:!0,items:await this.getTunesItems(e,o,n),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:gt.ui(zn.ui.popover,"Nothing found"),search:gt.ui(zn.ui.popover,"Filter")}}),this.popover.on(nn.Closed,this.onPopoverClose),null==(t=this.nodes.wrapper)||t.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}async getTunesItems(e,t,n){const o=[];void 0!==n&&n.length>0&&(o.push(...n),o.push({type:tn.Separator}));const i=Array.from(this.Editor.Tools.blockTools.values()),r=(await Lt(e,i)).reduce(((t,n)=>(n.toolbox.forEach((o=>{t.push({icon:o.icon,title:gt.t(zn.toolNames,o.title),name:n.name,closeOnActivate:!0,onActivate:async()=>{const{BlockManager:t,Caret:i,Toolbar:r}=this.Editor,s=await t.convert(e,n.name,o.data);r.close(),i.setToBlock(s,i.positions.END)}})})),t)),[]);return r.length>0&&(o.push({icon:Rt,name:"convert-to",title:gt.ui(zn.ui.popover,"Convert to"),children:{searchable:!0,items:r}}),o.push({type:tn.Separator})),o.push(...t),o.map((e=>this.resolveTuneAliases(e)))}resolveTuneAliases(e){if(e.type===tn.Separator||e.type===tn.Html)return e;const t=function(e,t){const n={};return Object.keys(e).forEach((o=>{const i=t[o];void 0!==i?n[i]=e[o]:n[o]=e[o]})),n}(e,{label:"title"});return e.confirmation&&(t.confirmation=this.resolveTuneAliases(e.confirmation)),t}},Toolbar:class extends yt{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:null==(e=this.toolboxInstance)?void 0:e.opened,close:()=>{var e;null==(e=this.toolboxInstance)||e.close()},open:()=>{null!==this.toolboxInstance?(this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()):je("toolbox.open() called before initialization is finished","warn")},toggle:()=>{null!==this.toolboxInstance?this.toolboxInstance.toggle():je("toolbox.toggle() called before initialization is finished","warn")},hasFocus:()=>{var e;return null==(e=this.toolboxInstance)?void 0:e.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback((()=>{this.drawUI(),this.enableModuleBindings()}),{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(null===this.toolboxInstance)return void je("Can't open Toolbar since Editor initialization is not finished yet","warn");if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const t=e.holder,{isMobile:n}=this.Editor.UI;let o;const i=e.firstInput,r=t.getBoundingClientRect(),s=void 0!==i?i.getBoundingClientRect():null,a=null!==s?s.top-r.top:null,l=null!==a?a>20:void 0;if(n)o=t.offsetTop+t.offsetHeight;else if(void 0===i||l){const n=parseInt(window.getComputedStyle(e.pluginsContent).paddingTop);o=t.offsetTop+n}else{const e=function(e){const t=window.getComputedStyle(e),n=parseFloat(t.fontSize),o=parseFloat(t.lineHeight)||1.2*n,i=parseFloat(t.paddingTop),r=parseFloat(t.borderTopWidth);return parseFloat(t.marginTop)+r+i+(o-n)/2+.8*n}(i),n=parseInt(window.getComputedStyle(this.nodes.plusButton).height,10),r=8;o=t.offsetTop+e-n+r+a}this.nodes.wrapper.style.top=`${Math.floor(o)}px`,1===this.Editor.BlockManager.blocks.length&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e,t;this.Editor.ReadOnly.isEnabled||(null==(e=this.nodes.wrapper)||e.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),null==(t=this.toolboxInstance)||t.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(e=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()}async make(){this.nodes.wrapper=dt.make("div",this.CSS.toolbar),["content","actions"].forEach((e=>{this.nodes[e]=dt.make("div",this.CSS[e])})),dt.append(this.nodes.wrapper,this.nodes.content),dt.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=dt.make("div",this.CSS.plusButton,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>'}),dt.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",(()=>{jt(!0),this.plusButtonClicked()}),!1);const e=dt.make("div");e.appendChild(document.createTextNode(gt.ui(zn.ui.toolbar.toolbox,"Add"))),e.appendChild(dt.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),Ut(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=dt.make("span",this.CSS.settingsToggler,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>'}),dt.append(this.nodes.actions,this.nodes.settingsToggler);const t=dt.make("div"),n=dt.text(gt.ui(zn.ui.blockTunes.toggler,"Click to tune")),o=await async function(e,t){const n=navigator.keyboard;return n&&(await n.getLayoutMap()).get(e)||t}("Slash","/");t.appendChild(n),t.appendChild(dt.make("div",this.CSS.plusButtonShortcut,{textContent:rt(`CMD + ${o}`)})),Ut(this.nodes.settingsToggler,t,{hidingDelay:400}),dt.append(this.nodes.actions,this.makeToolbox()),dt.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),dt.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new Yn({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:gt.ui(zn.ui.popover,"Filter"),nothingFound:gt.ui(zn.ui.popover,"Nothing found")}}),this.toolboxInstance.on(Vn.Opened,(()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)})),this.toolboxInstance.on(Vn.Closed,(()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)})),this.toolboxInstance.on(Vn.BlockAdded,(({block:e})=>{const{BlockManager:t,Caret:n}=this.Editor,o=t.getBlockById(e.id);0===o.inputs.length&&(o===t.lastBlock?(t.insertAtEnd(),n.setToBlock(t.lastBlock)):n.setToBlock(t.nextBlock))})),this.toolboxInstance.getElement()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,null==(e=this.toolboxInstance)||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",(e=>{var t;e.stopPropagation(),this.settingsTogglerClicked(),null!=(t=this.toolboxInstance)&&t.opened&&this.toolboxInstance.close(),jt(!0)}),!0),ct()||this.eventsDispatcher.on(Kn,(e=>{var t;this.Editor.BlockSettings.opened||null!=(t=this.toolboxInstance)&&t.opened||this.moveAndOpen(e.block)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}},InlineToolbar:class extends yt{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.CSS={inlineToolbar:"ce-inline-toolbar"},this.opened=!1,this.popover=null,this.toolbarVerticalMargin=ct()?20:6,this.toolsInstances=new Map}toggleReadOnly(e){e?this.destroy():window.requestIdleCallback((()=>{this.make()}),{timeout:2e3})}async tryToShow(e=!1){e&&this.close(),this.allowedToShow()&&(await this.open(),this.Editor.Toolbar.close())}close(){var e,t;this.opened&&(this.Editor.ReadOnly.isEnabled||(Array.from(this.toolsInstances.entries()).forEach((([e,t])=>{const n=this.getToolShortcut(e);n&&jn.remove(this.Editor.UI.nodes.redactor,n),qe(t.clear)&&t.clear()})),this.toolsInstances=null,this.reset(),this.opened=!1,null==(e=this.popover)||e.hide(),null==(t=this.popover)||t.destroy(),this.popover=null))}containsNode(e){return void 0!==this.nodes.wrapper&&this.nodes.wrapper.contains(e)}destroy(){var e;this.removeAllNodes(),null==(e=this.popover)||e.destroy(),this.popover=null}make(){this.nodes.wrapper=dt.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),dt.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}async open(){var e;if(this.opened)return;this.opened=!0,null!==this.popover&&this.popover.destroy();const t=await this.getInlineTools();this.popover=new vn({items:t,scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:gt.ui(zn.ui.popover,"Nothing found"),search:gt.ui(zn.ui.popover,"Filter")}}),this.move(this.popover.size.width),null==(e=this.nodes.wrapper)||e.append(this.popover.getElement()),this.popover.show()}move(e){const t=kt.rect,n=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),o={x:t.x-n.x,y:t.y+t.height-n.top+this.toolbarVerticalMargin};o.x+e+n.x>this.Editor.UI.contentRect.right&&(o.x=this.Editor.UI.contentRect.right-e-n.x),this.nodes.wrapper.style.left=Math.floor(o.x)+"px",this.nodes.wrapper.style.top=Math.floor(o.y)+"px"}reset(){this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const e=kt.get(),t=kt.text;if(!e||!e.anchorNode||e.isCollapsed||t.length<1)return!1;const n=dt.isElement(e.anchorNode)?e.anchorNode:e.anchorNode.parentElement;if(null===n||e&&["IMG","INPUT"].includes(n.tagName)||null===n.closest('[contenteditable="true"]'))return!1;const o=this.Editor.BlockManager.getBlock(e.anchorNode);return!!o&&0!==o.tool.inlineTools.size}async getInlineTools(){const e=kt.get(),t=this.Editor.BlockManager.getBlock(e.anchorNode),n=Array.from(t.tool.inlineTools.values()),o=[];null===this.toolsInstances&&(this.toolsInstances=new Map);for(let e=0;e<n.length;e++){const t=n[e],i=t.create(),r=await i.render();this.toolsInstances.set(t.name,i);const s=this.getToolShortcut(t.name);if(s)try{this.enableShortcuts(t.name,s)}catch{}const a=void 0!==s?rt(s):void 0,l=gt.t(zn.toolNames,t.title||ot(t.name));[r].flat().forEach((r=>{var s,c;const h={name:t.name,onActivate:()=>{this.toolClicked(i)},hint:{title:l,description:a}};if(dt.isElement(r)){const e={...h,element:r,type:tn.Html};if(qe(i.renderActions)){const t=i.renderActions();e.children={isOpen:null==(s=i.checkState)?void 0:s.call(i,kt.get()),isFlippable:!1,items:[{type:tn.Html,element:t}]}}else null==(c=i.checkState)||c.call(i,kt.get());o.push(e)}else if(r.type===tn.Html)o.push({...h,...r,type:tn.Html});else if(r.type===tn.Separator)o.push({type:tn.Separator});else{const t={...h,...r,type:tn.Default};"children"in t&&0!==e&&o.push({type:tn.Separator}),o.push(t),"children"in t&&e<n.length-1&&o.push({type:tn.Separator})}}))}return o}getToolShortcut(e){const{Tools:t}=this.Editor,n=t.inlineTools.get(e),o=t.internal.inlineTools;return Array.from(o.keys()).includes(e)?this.inlineTools[e][Jn.Shortcut]:null==n?void 0:n.shortcut}enableShortcuts(e,t){jn.add({name:t,handler:t=>{var n;const{currentBlock:o}=this.Editor.BlockManager;o&&o.tool.enabledInlineTools&&(t.preventDefault(),null==(n=this.popover)||n.activateItemByName(e))},on:this.Editor.UI.nodes.redactor})}toolClicked(e){var t;const n=kt.range;null==(t=e.surround)||t.call(e,n),this.checkToolsState()}checkToolsState(){var e;null==(e=this.toolsInstances)||e.forEach((e=>{var t;null==(t=e.checkState)||t.call(e,kt.get())}))}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach((([t,n])=>{e[t]=n.create()})),e}},BlockEvents:class extends yt{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case Ae:this.backspace(e);break;case ze:this.delete(e);break;case $e:this.enter(e);break;case Re:case De:this.arrowRightAndDown(e);break;case Ne:case Pe:this.arrowLeftAndUp(e);break;case Oe:this.tabPressed(e)}"/"===e.key&&!e.ctrlKey&&!e.metaKey&&this.slashPressed(e),"Slash"===e.code&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.commandSlashPressed())}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&Ze(e.keyCode)&&(this.Editor.Toolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||this.Editor.BlockSelection.clearSelection(e))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(e){this.Editor.BlockManager.getBlockByChildNode(e.target).dropTarget=!0}dragLeave(e){this.Editor.BlockManager.getBlockByChildNode(e.target).dropTarget=!1}handleCommandC(e){const{BlockSelection:t}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:t,BlockManager:n,Caret:o}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e).then((()=>{const i=n.removeSelectedBlocks(),r=n.insertDefaultBlockAtIndex(i,!0);o.setToBlock(r,o.positions.START),t.clearSelection(e)}))}tabPressed(e){const{InlineToolbar:t,Caret:n}=this.Editor;t.opened||(e.shiftKey?n.navigatePrevious(!0):n.navigateNext(!0))&&e.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(e){this.Editor.BlockManager.currentBlock.isEmpty&&(e.preventDefault(),this.Editor.Caret.insertContentAtCaretPosition("/"),this.activateToolbox())}enter(e){const{BlockManager:t,UI:n}=this.Editor,o=t.currentBlock;if(void 0===o||o.tool.isLineBreaksEnabled||n.someToolbarOpened&&n.someFlipperButtonFocused||e.shiftKey&&!ht)return;let i=o;void 0!==o.currentInput&&ro(o.currentInput)&&!o.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):i=o.currentInput&&so(o.currentInput)?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(i),this.Editor.Toolbar.moveAndOpen(i),e.preventDefault()}backspace(e){const{BlockManager:t,Caret:n}=this.Editor,{currentBlock:o,previousBlock:i}=t;if(void 0!==o&&kt.isCollapsed&&o.currentInput&&ro(o.currentInput))if(e.preventDefault(),this.Editor.Toolbar.close(),o.currentInput===o.firstInput){if(null!==i)if(i.isEmpty)t.removeBlock(i);else if(o.isEmpty){t.removeBlock(o);const e=t.currentBlock;n.setToBlock(e,n.positions.END)}else At(i,o)?this.mergeBlocks(i,o):n.setToBlock(i,n.positions.END)}else n.navigatePrevious()}delete(e){const{BlockManager:t,Caret:n}=this.Editor,{currentBlock:o,nextBlock:i}=t;if(kt.isCollapsed&&so(o.currentInput))if(e.preventDefault(),this.Editor.Toolbar.close(),o.currentInput===o.lastInput){if(null!==i){if(!i.isEmpty)return o.isEmpty?(t.removeBlock(o),void n.setToBlock(i,n.positions.START)):void(At(o,i)?this.mergeBlocks(o,i):n.setToBlock(i,n.positions.START));t.removeBlock(i)}}else n.navigateNext()}mergeBlocks(e,t){const{BlockManager:n,Caret:o,Toolbar:i}=this.Editor;o.createShadow(e.lastInput),n.mergeBlocks(e,t).then((()=>{o.restoreCaret(e.pluginsContent),i.close()}))}arrowRightAndDown(e){const t=Pt.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===Oe);if(this.Editor.UI.someToolbarOpened&&t)return;this.Editor.Toolbar.close();const{currentBlock:n}=this.Editor.BlockManager,o=(void 0!==(null==n?void 0:n.currentInput)?so(n.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;e.shiftKey&&e.keyCode===Re&&o?this.Editor.CrossBlockSelection.toggleBlockSelectedState():(e.keyCode===Re||e.keyCode===De&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious())?e.preventDefault():(et((()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()}),20)(),this.Editor.BlockSelection.clearSelection(e))}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(Pt.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===Oe))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const{currentBlock:t}=this.Editor.BlockManager,n=(void 0!==(null==t?void 0:t.currentInput)?ro(t.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;e.shiftKey&&e.keyCode===Ne&&n?this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1):(e.keyCode===Ne||e.keyCode===Pe&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext())?e.preventDefault():(et((()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()}),20)(),this.Editor.BlockSelection.clearSelection(e))}needToolbarClosing(e){const t=e.keyCode===$e&&this.Editor.Toolbar.toolbox.opened,n=e.keyCode===$e&&this.Editor.BlockSettings.opened,o=e.keyCode===$e&&this.Editor.InlineToolbar.opened,i=e.keyCode===Oe;return!(e.shiftKey||i||t||n||o)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}},BlockManager:class extends yt{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find((e=>!!e.inputs.length))}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find((e=>!!e.inputs.length))}get previousBlock(){return 0===this.currentBlockIndex?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every((e=>e.isEmpty))}prepare(){const e=new ao(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:ao.set,get:ao.get}),this.listeners.on(document,"copy",(e=>this.Editor.BlockEvents.handleCommandC(e)))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:t={},id:n,tunes:o={}}){const i=this.Editor.ReadOnly.isEnabled,r=this.Editor.Tools.blockTools.get(e),s=new In({id:n,data:t,tool:r,api:this.Editor.API,readOnly:i,tunesData:o},this.eventsDispatcher);return i||window.requestIdleCallback((()=>{this.bindBlockEvents(s)}),{timeout:2e3}),s}insert({id:e,tool:t=this.config.defaultBlock,data:n={},index:o,needToFocus:i=!0,replace:r=!1,tunes:s={}}={}){let a=o;void 0===a&&(a=this.currentBlockIndex+(r?0:1));const l=this.composeBlock({id:e,tool:t,data:n,tunes:s});return r&&this.blockDidMutated(lo,this.getBlockByIndex(a),{index:a}),this._blocks.insert(a,l,r),this.blockDidMutated(co,l,{index:a}),i?this.currentBlockIndex=a:a<=this.currentBlockIndex&&this.currentBlockIndex++,l}insertMany(e,t=0){this._blocks.insertMany(e,t)}async update(e,t,n){if(!t&&!n)return e;const o=await e.data,i=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},o,t??{}),tunes:n??e.tunes}),r=this.getBlockIndex(e);return this._blocks.replace(r,i),this.blockDidMutated(ho,i,{index:r}),i}replace(e,t,n){const o=this.getBlockIndex(e);return this.insert({tool:t,data:n,index:o,replace:!0})}paste(e,t,n=!1){const o=this.insert({tool:e,replace:n});try{window.requestIdleCallback((()=>{o.call(Bn.ON_PASTE,t)}))}catch(t){je(`${e}: onPaste callback call is failed`,"error",t)}return o}insertDefaultBlockAtIndex(e,t=!1){const n=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=n,this.blockDidMutated(co,n,{index:e}),t?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,n}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,t){let n;if(e.name===t.name&&e.mergeable){const o=await t.data;if(Xe(o))return void console.error("Could not merge Block. Failed to extract original Block data.");const[i]=Pn([o],e.tool.sanitizeConfig);n=i}else if(e.mergeable&&It(t,"export")&&It(e,"import")){n=Ot(Nn(await t.exportDataAsString(),e.tool.sanitizeConfig),e.tool.conversionConfig)}void 0!==n&&(await e.mergeWith(n),this.removeBlock(t),this.currentBlockIndex=this._blocks.indexOf(e))}removeBlock(e,t=!0){return new Promise((n=>{const o=this._blocks.indexOf(e);if(!this.validateIndex(o))throw new Error("Can't find a Block to remove");e.destroy(),this._blocks.remove(o),this.blockDidMutated(lo,e,{index:o}),this.currentBlockIndex>=o&&this.currentBlockIndex--,this.blocks.length?0===o&&(this.currentBlockIndex=0):(this.unsetCurrentBlock(),t&&this.insert()),n()}))}removeSelectedBlocks(){let e;for(let t=this.blocks.length-1;t>=0;t--)this.blocks[t].selected&&(this.removeBlock(this.blocks[t]),e=t);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.unsetCurrentBlock(),this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),t=dt.make("div");t.appendChild(e);const n={text:dt.isEmpty(t)?"":t.innerHTML};return this.insert({data:n})}getBlockByIndex(e){return-1===e&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find((t=>t.id===e))}getBlock(e){dt.isElement(e)||(e=e.parentNode);const t=this._blocks.nodes,n=e.closest(`.${In.CSS.wrapper}`),o=t.indexOf(n);if(o>=0)return this._blocks[o]}setCurrentBlockByChildNode(e){dt.isElement(e)||(e=e.parentNode);const t=e.closest(`.${In.CSS.wrapper}`);if(!t)return;const n=t.closest(`.${this.Editor.UI.CSS.editorWrapper}`);return null!=n&&n.isEqualNode(this.Editor.UI.nodes.wrapper)?(this.currentBlockIndex=this._blocks.nodes.indexOf(t),this.currentBlock.updateCurrentInput(),this.currentBlock):void 0}getBlockByChildNode(e){if(!(e&&e instanceof Node))return;dt.isElement(e)||(e=e.parentNode);const t=e.closest(`.${In.CSS.wrapper}`);return this.blocks.find((e=>e.holder===t))}swap(e,t){this._blocks.swap(e,t),this.currentBlockIndex=t}move(e,t=this.currentBlockIndex){isNaN(e)||isNaN(t)?je("Warning during 'move' call: incorrect indices provided.","warn"):this.validateIndex(e)&&this.validateIndex(t)?(this._blocks.move(e,t),this.currentBlockIndex=e,this.blockDidMutated("block-moved",this.currentBlock,{fromIndex:t,toIndex:e})):je("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn")}async convert(e,t,n){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const o=this.Editor.Tools.blockTools.get(t);if(!o)throw new Error(`Could not convert Block. Tool «${t}» not found.`);let i=Ot(Nn(await e.exportDataAsString(),o.sanitizeConfig),o.conversionConfig);return n&&(i=Object.assign(i,n)),this.replace(e,o.name,i)}unsetCurrentBlock(){this.currentBlockIndex=-1}async clear(e=!1){const t=new uo;this.blocks.forEach((e=>{t.add((async()=>{await this.removeBlock(e,!1)}))})),await t.completed,this.unsetCurrentBlock(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map((e=>e.destroy())))}bindBlockEvents(e){const{BlockEvents:t}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",(e=>{t.keydown(e)})),this.readOnlyMutableListeners.on(e.holder,"keyup",(e=>{t.keyup(e)})),this.readOnlyMutableListeners.on(e.holder,"dragover",(e=>{t.dragOver(e)})),this.readOnlyMutableListeners.on(e.holder,"dragleave",(e=>{t.dragLeave(e)})),e.on("didMutated",(e=>this.blockDidMutated(ho,e,{index:this.getBlockIndex(e)})))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",(e=>this.Editor.BlockEvents.handleCommandX(e))),this.blocks.forEach((e=>{this.bindBlockEvents(e)}))}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,t,n){const o=new CustomEvent(e,{detail:{target:new wt(t),...n}});return this.eventsDispatcher.emit(Ct,{event:o}),t}},BlockSelection:class extends yt{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every((e=>!0===e.selected))}set allBlocksSelected(e){const{BlockManager:t}=this.Editor;t.blocks.forEach((t=>{t.selected=e})),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return null===this.anyBlockSelectedCache&&(this.anyBlockSelectedCache=e.blocks.some((e=>!0===e.selected))),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter((e=>e.selected))}prepare(){this.selection=new kt,jn.add({name:"CMD+A",handler:e=>{const{BlockManager:t,ReadOnly:n}=this.Editor;if(n.isEnabled)return e.preventDefault(),void this.selectAllBlocks();t.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){kt.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:t}=this.Editor;let n;n=isNaN(e)?t.currentBlock:t.getBlockByIndex(e),n.selected=!1,this.clearCache()}clearSelection(e,t=!1){const{BlockManager:n,Caret:o,RectangleSelection:i}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const r=e&&e instanceof KeyboardEvent,s=r&&Ze(e.keyCode);if(this.anyBlockSelected&&r&&s&&!kt.isSelectionExists){const t=n.removeSelectedBlocks();n.insertDefaultBlockAtIndex(t,!0),o.setToBlock(n.currentBlock),et((()=>{const t=e.key;o.insertContentAtCaretPosition(t.length>1?"":t)}),20)()}this.Editor.CrossBlockSelection.clear(e),this.anyBlockSelected&&!i.isRectActivated()?(t&&this.selection.restore(),this.allBlocksSelected=!1):this.Editor.RectangleSelection.clearSelection()}copySelectedBlocks(e){e.preventDefault();const t=dt.make("div");this.selectedBlocks.forEach((e=>{const n=Nn(e.holder.innerHTML,this.sanitizerConfig),o=dt.make("p");o.innerHTML=n,t.appendChild(o)}));const n=Array.from(t.childNodes).map((e=>e.textContent)).join("\n\n"),o=t.innerHTML;return e.clipboardData.setData("text/plain",n),e.clipboardData.setData("text/html",o),Promise.all(this.selectedBlocks.map((e=>e.save()))).then((t=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(t))}catch{}}))}selectBlockByIndex(e){const{BlockManager:t}=this.Editor,n=t.getBlockByIndex(e);void 0!==n&&this.selectBlock(n)}selectBlock(e){this.selection.save(),kt.get().removeAllRanges(),e.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(e){e.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){jn.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),dt.isNativeInput(e.target)&&!this.readyToBlockSelection)return void(this.readyToBlockSelection=!0);const t=this.Editor.BlockManager.getBlock(e.target),n=t.inputs;n.length>1&&!this.readyToBlockSelection?this.readyToBlockSelection=!0:1!==n.length||this.needToSelectAll?this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlock(t),this.needToSelectAll=!0):this.needToSelectAll=!0}selectAllBlocks(){this.selection.save(),kt.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}},Caret:po,CrossBlockSelection:class extends yt{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:t,BlockSelection:n}=this.Editor;if(null===e.relatedTarget&&null===e.target)return;const o=t.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,i=t.getBlockByChildNode(e.target);if(o&&i&&i!==o){if(o===this.firstSelectedBlock)return kt.get().removeAllRanges(),o.selected=!0,i.selected=!0,void n.clearCache();if(i===this.firstSelectedBlock)return o.selected=!1,i.selected=!1,void n.clearCache();this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(o,i),this.lastSelectedBlock=i}}}async prepare(){this.listeners.on(document,"mousedown",(e=>{this.enableCrossBlockSelection(e)}))}watchSelection(e){if(e.button!==Fe)return;const{BlockManager:t}=this.Editor;this.firstSelectedBlock=t.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock&&this.firstSelectedBlock!==this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:t,BlockSelection:n}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=t.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,n.clearCache(),kt.get().removeAllRanges());const o=t.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),i=t.blocks[o];i&&(this.lastSelectedBlock.selected!==i.selected?(i.selected=!0,n.clearCache()):(this.lastSelectedBlock.selected=!1,n.clearCache()),this.lastSelectedBlock=i,this.Editor.InlineToolbar.close(),i.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:t,BlockSelection:n,Caret:o}=this.Editor,i=t.blocks.indexOf(this.firstSelectedBlock),r=t.blocks.indexOf(this.lastSelectedBlock);if(n.anyBlockSelected&&i>-1&&r>-1&&e&&e instanceof KeyboardEvent)switch(e.keyCode){case Re:case De:o.setToBlock(t.blocks[Math.max(i,r)],o.positions.END);break;case Ne:case Pe:o.setToBlock(t.blocks[Math.min(i,r)],o.positions.START);break;default:o.setToBlock(t.blocks[Math.max(i,r)],o.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:t}=this.Editor;kt.isCollapsed||this.Editor.BlockSelection.clearSelection(e),t.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,t){const{BlockManager:n,BlockSelection:o}=this.Editor,i=n.blocks.indexOf(e),r=n.blocks.indexOf(t),s=e.selected!==t.selected;for(let a=Math.min(i,r);a<=Math.max(i,r);a++){const i=n.blocks[a];i!==this.firstSelectedBlock&&i!==(s?e:t)&&(n.blocks[a].selected=!n.blocks[a].selected,o.clearCache())}}},DragNDrop:class extends yt{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",(async e=>{await this.processDrop(e)}),!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",(()=>{this.processDragStart()})),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",(e=>{this.processDragOver(e)}),!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:t,Paste:n,Caret:o}=this.Editor;e.preventDefault(),t.blocks.forEach((e=>{e.dropTarget=!1})),kt.isAtEditor&&!kt.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const i=t.setCurrentBlockByChildNode(e.target);if(i)this.Editor.Caret.setToBlock(i,o.positions.END);else{const e=t.setCurrentBlockByChildNode(t.lastBlock.holder);this.Editor.Caret.setToBlock(e,o.positions.END)}await n.processDataTransfer(e.dataTransfer,!0)}processDragStart(){kt.isAtEditor&&!kt.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}},ModificationsObserver:class extends yt{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=400,this.mutationObserver=new MutationObserver((e=>{this.redactorChanged(e)})),this.eventsDispatcher.on(Ct,(e=>{this.particularBlockChanged(e.event)})),this.eventsDispatcher.on(Et,(()=>{this.disable()})),this.eventsDispatcher.on(Tt,(()=>{this.enable()}))}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!qe(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout((()=>{let e;e=1===this.batchingOnChangeQueue.size?this.batchingOnChangeQueue.values().next().value:Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,e),this.batchingOnChangeQueue.clear()}),this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(xt,{mutations:e})}},Paste:go,ReadOnly:class extends yt{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:t}=e,n=[];Array.from(t.entries()).forEach((([e,t])=>{t.isReadOnlySupported||n.push(e)})),this.toolsDontSupportReadOnly=n,this.config.readOnly&&n.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly,!0)}async toggle(e=!this.readOnlyEnabled,t=!1){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const n=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const t in this.Editor)this.Editor[t].toggleReadOnly&&this.Editor[t].toggleReadOnly(e);if(n===e)return this.readOnlyEnabled;if(t)return this.readOnlyEnabled;this.Editor.ModificationsObserver.disable();const o=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(o.blocks),this.Editor.ModificationsObserver.enable(),this.readOnlyEnabled}throwCriticalError(){throw new mt(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}},RectangleSelection:mo,Renderer:class extends yt{async render(e){return new Promise((t=>{const{Tools:n,BlockManager:o}=this.Editor;if(0===e.length)o.insert();else{const t=e.map((({type:e,data:t,tunes:i,id:r})=>{let s;!1===n.available.has(e)&&(Ue(`Tool «${e}» is not found. Check 'tools' property at the Editor.js config.`,"warn"),t=this.composeStubDataForTool(e,t,r),e=n.stubTool);try{s=o.composeBlock({id:r,tool:e,data:t,tunes:i})}catch(a){je(`Block «${e}» skipped because of plugins error`,"error",{data:t,error:a}),t=this.composeStubDataForTool(e,t,r),e=n.stubTool,s=o.composeBlock({id:r,tool:e,data:t,tunes:i})}return s}));o.insertMany(t)}window.requestIdleCallback((()=>{t()}),{timeout:2e3})}))}composeStubDataForTool(e,t,n){const{Tools:o}=this.Editor;let i=e;if(o.unavailable.has(e)){const t=o.unavailable.get(e).toolbox;void 0!==t&&void 0!==t[0].title&&(i=t[0].title)}return{savedData:{id:n,type:e,data:t},title:i}}},Saver:class extends yt{async save(){const{BlockManager:e,Tools:t}=this.Editor,n=e.blocks,o=[];try{n.forEach((e=>{o.push(this.getSavedData(e))}));const e=await Promise.all(o),i=await Pn(e,(e=>t.blockTools.get(e).sanitizeConfig));return this.makeOutput(i)}catch(e){Ue("Saving failed due to the Error %o","error",e)}}async getSavedData(e){const t=await e.save(),n=t&&await e.validate(t.data);return{...t,isValid:n}}makeOutput(e){const t=[];return e.forEach((({id:e,tool:n,data:o,tunes:i,isValid:r})=>{if(!r)return void je(`Block «${n}» skipped because saved data is invalid`);if(n===this.Editor.Tools.stubTool)return void t.push(o);const s={id:e,type:n,data:o,...!Xe(i)&&{tunes:i}};t.push(s)})),{time:+new Date,blocks:t,version:"2.30.2"}}},Tools:No,UI:class extends yt{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=tt((()=>{this.windowResize()}),200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${In.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.setIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.disableModuleBindings():window.requestIdleCallback((()=>{this.enableModuleBindings()}),{timeout:2e3})}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:t,InlineToolbar:n}=this.Editor;return!!(t.opened||n.opened||e.toolbox.opened)}get someFlipperButtonFocused(){return!!this.Editor.Toolbar.toolbox.hasFocus()||Object.entries(this.Editor).filter((([e,t])=>t.flipper instanceof Pt)).some((([e,t])=>t.flipper.hasFocus()))}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){const{Toolbar:e,BlockSettings:t,InlineToolbar:n}=this.Editor;t.close(),n.close(),e.toolbox.close()}setIsMobile(){const e=window.innerWidth<650;e!==this.isMobile&&this.eventsDispatcher.emit(St,{isEnabled:this.isMobile}),this.isMobile=e}make(){this.nodes.holder=dt.getHolder(this.config.holder),this.nodes.wrapper=dt.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=dt.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){const e="editor-js-styles";if(dt.get(e))return;const t=dt.make("style",null,{id:e,textContent:Ro.toString()});this.config.style&&!Xe(this.config.style)&&this.config.style.nonce&&t.setAttribute("nonce",this.config.style.nonce),dt.prepend(document.head,t)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",(e=>{this.redactorClicked(e)}),!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",(e=>{this.documentTouched(e)}),{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",(e=>{this.documentTouched(e)}),{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(document,"keydown",(e=>{this.documentKeydown(e)}),!0),this.readOnlyMutableListeners.on(document,"mousedown",(e=>{this.documentClicked(e)}),!0);const e=tt((()=>{this.selectionChanged()}),180);this.readOnlyMutableListeners.on(document,"selectionchange",e,!0),this.readOnlyMutableListeners.on(window,"resize",(()=>{this.resizeDebouncer()}),{passive:!0}),this.watchBlockHoveredEvents(),this.enableInputsEmptyMark()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",nt((t=>{const n=t.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||n&&e!==n&&(e=n,this.eventsDispatcher.emit(Kn,{block:this.Editor.BlockManager.getBlockByChildNode(n)}))}),20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.setIsMobile()}documentKeydown(e){switch(e.keyCode){case $e:this.enterPressed(e);break;case Ae:case ze:this.backspacePressed(e);break;case Me:this.escapePressed(e);break;default:this.defaultBehaviour(e)}}defaultBehaviour(e){const{currentBlock:t}=this.Editor.BlockManager,n=e.target.closest(`.${this.CSS.editorWrapper}`),o=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;void 0===t||null!==n?n||t&&o||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close()):this.Editor.BlockEvents.keydown(e)}backspacePressed(e){const{BlockManager:t,BlockSelection:n,Caret:o}=this.Editor;if(n.anyBlockSelected&&!kt.isSelectionExists){const i=t.removeSelectedBlocks(),r=t.insertDefaultBlockAtIndex(i,!0);o.setToBlock(r,o.positions.START),n.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:t,BlockSelection:n}=this.Editor;if(this.someToolbarOpened)return;const o=t.currentBlockIndex>=0;if(n.anyBlockSelected&&!kt.isSelectionExists)return n.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),void e.stopPropagation();if(!this.someToolbarOpened&&o&&"BODY"===e.target.tagName){const t=this.Editor.BlockManager.insert();e.preventDefault(),this.Editor.Caret.setToBlock(t),this.Editor.Toolbar.moveAndOpen(t)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){var t,n;if(!e.isTrusted)return;const o=e.target;this.nodes.holder.contains(o)||kt.isAtEditor||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close());const i=null==(t=this.Editor.BlockSettings.nodes.wrapper)?void 0:t.contains(o),r=null==(n=this.Editor.Toolbar.nodes.settingsToggler)?void 0:n.contains(o),s=i||r;if(this.Editor.BlockSettings.opened&&!s){this.Editor.BlockSettings.close();const e=this.Editor.BlockManager.getBlockByChildNode(o);this.Editor.Toolbar.moveAndOpen(e)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let t=e.target;if(t===this.nodes.redactor){const n=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,o=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;t=document.elementFromPoint(n,o)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(t)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){if(!kt.isCollapsed)return;const t=e.target,n=e.metaKey||e.ctrlKey;if(dt.isAnchor(t)&&n){e.stopImmediatePropagation(),e.stopPropagation();const n=function(e){try{return new URL(e).href}catch{}return"//"===e.substring(0,2)?window.location.protocol+e:window.location.origin+e}(t.getAttribute("href"));!function(e){window.open(e,"_blank")}(n)}else this.processBottomZoneClick(e)}processBottomZoneClick(e){const t=this.Editor.BlockManager.getBlockByIndex(-1),n=dt.offset(t.holder).bottom,o=e.pageY,{BlockSelection:i}=this.Editor;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!i.anyBlockSelected&&n<o){e.stopImmediatePropagation(),e.stopPropagation();const{BlockManager:t,Caret:n,Toolbar:o}=this.Editor;(!t.lastBlock.tool.isDefault||!t.lastBlock.isEmpty)&&t.insertAtEnd(),n.setToTheLastBlock(),o.moveAndOpen(t.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:t}=this.Editor,n=kt.anchorElement;e.isCrossBlockSelectionStarted&&t.anyBlockSelected&&kt.get().removeAllRanges(),n?null===n.closest(`.${In.CSS.content}`)&&(this.Editor.InlineToolbar.containsNode(n)||this.Editor.InlineToolbar.close(),"true"!==n.dataset.inlineToolbar)||(this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(n),this.Editor.InlineToolbar.tryToShow(!0)):kt.range||this.Editor.InlineToolbar.close()}enableInputsEmptyMark(){function e(e){ut(e.target)}this.readOnlyMutableListeners.on(this.nodes.wrapper,"input",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusin",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusout",e)}}};class zo{constructor(e){let t,n;this.moduleInstances={},this.eventsDispatcher=new bt,this.isReady=new Promise(((e,o)=>{t=e,n=o})),Promise.resolve().then((async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:n,Caret:o,UI:i,ModificationsObserver:r}=this.moduleInstances;i.checkEmptiness(),r.enable(),this.configuration.autofocus&&o.setToBlock(n.blocks[0],o.positions.START),t()})).catch((e=>{je(`Editor.js is not ready because of ${e}`,"error"),n(e)}))}set configuration(e){var t,n;Ve(e)?this.config={...e}:this.config={holder:e},at(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),null==this.config.holder&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=Le.VERBOSE),function(e){He.logLevel=e}(this.config.logLevel),at(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=void 0!==this.config.minHeight?this.config.minHeight:300;const o={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=!!this.config.hideToolbar&&this.config.hideToolbar,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=void 0===this.config.inlineToolbar||this.config.inlineToolbar,(Xe(this.config.data)||!this.config.data.blocks||0===this.config.data.blocks.length)&&(this.config.data={blocks:[o]}),this.config.readOnly=this.config.readOnly||!1,null!=(t=this.config.i18n)&&t.messages&&gt.setDictionary(this.config.i18n.messages),this.config.i18n.direction=(null==(n=this.config.i18n)?void 0:n.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:t}=this.config;if(e&&t)throw Error("«holderId» and «holder» param can't assign at the same time.");if(Ge(t)&&!dt.get(t))throw Error(`element with ID «${t}» is missing. Pass correct holder's ID.`);if(t&&Ve(t)&&!dt.isElement(t))throw Error("«holder» value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce(((e,t)=>e.then((async()=>{try{await this.moduleInstances[t].prepare()}catch(e){if(e instanceof mt)throw new Error(e.message);je(`Module ${t} was skipped because of %o`,"warn",e)}}))),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(Do).forEach((([e,t])=>{try{this.moduleInstances[e]=new t({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(t){je("[constructModules]",`Module ${e} skipped because`,"error",t)}}))}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const t={};for(const n in this.moduleInstances)n!==e&&(t[n]=this.moduleInstances[n]);return t}}
/**
     * Editor.js
     *
     * @license Apache-2.0
     * @see Editor.js <https://editorjs.io>
     * @author CodeX Team <https://codex.so>
     */class Fo{static get version(){return"2.30.2"}constructor(e){let t=()=>{};Ve(e)&&qe(e.onReady)&&(t=e.onReady);const n=new zo(e);this.isReady=n.isReady.then((()=>{this.exportAPI(n),t()}))}exportAPI(e){["configuration"].forEach((t=>{this[t]=e[t]})),this.destroy=()=>{Object.values(e.moduleInstances).forEach((e=>{qe(e.destroy)&&e.destroy(),e.listeners.removeAll()})),null==Ft||Ft.destroy(),Ft=null,e=null;for(const e in this)Object.prototype.hasOwnProperty.call(this,e)&&delete this[e];Object.setPrototypeOf(this,null)},Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach((([t,n])=>{Object.entries(n).forEach((([n,o])=>{this[o]=e.moduleInstances.API.methods[t][n]}))}))}}const Ho={Version:"2.1.15",FileVersion:"0",Name:"Unnamed Language",CaseSensitive:!1,IgnoreDiacritics:!0,ShowEtymology:!1,ShowInflection:!1,Inflections:[],UseLects:!1,HeaderTags:"",Alphabet:"a b c d e f g h i j k l m n o p q r s t u v w x y z",Lexicon:{},Etymologies:{},Relatives:{},Pronunciations:{General:"Use this field to write pronunciation rules to automatically transcribe your orthography in IPA. For example,\nth > θ\nThis rule will automatically transcribe any ⟨th⟩ in your orthography as [θ].\nRules can be much more complex than this. You can read the section on pronunciation rules in the Help tab for more information.\n\nThe most common mistake has to do with the fact that rules are applied in order from top to bottom. For example, if you have the following rules,\ne > ɛ\nae > æ\nthen the second rule will never be applied, because the first rule will always change ⟨e⟩ to [ɛ] before the second rule can be applied.\nThe solution in almost all cases like this is to change the order of the rules so that the ones with the longest patterns are applied first.\nae > æ\ne > ɛ\nNow both rules will be applied correctly. You can test this by removing the first set of rules from this demo."},Orthographies:[{name:"Romanization",font:"Gentium",root:"rom",lect:"General",rules:"Your romanized orthography is the base form of input.",display:!0}],ShowOrthography:!1,ShowPronunciation:!0,Phonotactics:{General:{Onsets:"",Medials:"",Codas:"",Vowels:"",Illegals:""}},UseAdvancedPhonotactics:!1,AdvancedPhonotactics:{Categories:{},Syllables:[],Constructs:[{enabled:!0,structures:""}],Illegals:[]},Lects:["General"],Phrasebook:{},Docs:{blocks:[]},Diagnostics:[],FileTheme:"default",OrderByDate:!1,SaveLocation:"",UploadToDatabase:!1},jo=Be(Ho),Uo=Be(structuredClone(Ho)),Wo=Be(0),qo=Be(""),Vo=Be((()=>{const e={};for(const t of c(Uo).Lects)e[t]="";return e})()),Go=Be(""),Yo=Be((()=>{const e={};for(const t of c(Uo).Lects)e[t]="";return e})()),Ko=Be(""),Xo=Be(""),Zo=Be(new Fo),Jo=Be("styles/dark.css"),Qo=Be(!0),ei=Be(0),ti=Be(!1),ni=Be(!1),oi=Be(""),ii=Be("");const{ipcRenderer:ri}=require("electron"),si=require("fs"),ai=require("path");function li(e,t){c(Uo).Diagnostics.push({Time:Date(),Version:c(Uo).Version,OS:"browser",Action:e,Error:t.stack}),di.error(t.stack)}function ci(e){c(Uo).Diagnostics.push({Time:Date(),Version:c(Uo).Version,OS:"browser",Action:e})}function hi(e,t){!async function(e){let t;await ri.invoke("getUserDataPath").then((e=>{t=e})),e(t)}((n=>{const o=n+ai.sep+"Diagnostics"+ai.sep;si.existsSync(o)||si.mkdirSync(o);const i=(new Date).toString(),r=o+"logs",s="Report: "+t+"\nTime: "+i+"\nVersion: "+ri.invoke("getVersion")+"\nFile: (v"+c(Uo).Version+") "+c(Uo).Name+"\n"+e+"\n";si.existsSync(r)?si.appendFile(r,s,(e=>{e&&di.error(String(e),!1)})):si.writeFile(r,s,(e=>{e&&di.error(String(e),!1)}))}))}const di={log:(e,t=!0)=>{t&&hi(e,"info");const n="[22m[4mLexc Debug[24m:[22m [32m"+e+"[39m";console.log(n),ri.invoke("debug",n)},logObj:(e,t="",n=!0)=>{n&&hi("Object: "+t+"\n"+JSON.stringify(e,null,2),"info");const o="[22m[4mLexc Debug[24m[22m [32m"+t+":[39m\n"+JSON.stringify(e,null,2).replace(/(.*):/g,"[32m$1[39m:");ri.invoke("debug",o),console.log(o)},warn:(e,t=!0)=>{t&&hi(e,"warning");const n="[22m[4mLexc Debug[24m[22m [33m"+e+"[39m";ri.invoke("debug",n),console.log(n)},error:(e,t=!0)=>{t&&hi(e,"error");const n="[22m[4mLexc Debug[24m[22m [31m"+e+"[39m";ri.invoke("debug",n),console.log(n)},logAndReturn:(e,t="",n=!1)=>(di.logObj(e,t,n),e)},ui=()=>c(Uo);function pi(e){let t=ui().HeaderTags.toLowerCase().trim().split(/\s+/);t[0]||(t=[]);let n=ui().Alphabet;const o=ui().IgnoreDiacritics,i=ui().CaseSensitive,r=structuredClone(e),s=[];for(const e of t){s.push([]);for(const t in r)(()=>{const e=[];return r[t].Senses.forEach((t=>{e.push(...t.tags)})),e})().includes(e)&&s[s.length-1].push(t);for(const e of s[s.length-1])delete r[e]}const a=[];for(const e in r)a.push(e);s.push(a),n=i?n.trim():n.trim().toLowerCase();const l=n.split(/\s+/),c=Array.from(new Set(l)).sort(((e,t)=>t.length-e.length)),h=[];for(const e of s){const t={},n=[];for(const r of e){let e=i?r:r.toLowerCase();e=o?e.normalize("NFD").replace(/\p{Diacritic}/gu,""):e;for(const t of c)e=e.replace(new RegExp(`${t.replace(/[-[\]{}()*+?.,\\/^$|#\s]/g,"\\$&")}`,"g"),`${l.indexOf(t)}.`);const s=e.split(".");for(const e of s)s[s.indexOf(e)]=+e||0;t[r]=s,n.push(s)}n.sort(((e,t)=>{for(const n of e){const o=t[e.indexOf(n)];if(n!==o)return n-o}return 0}));const r=[];for(const e in t)r.push([e,n.indexOf(t[e])]);r.sort(((e,t)=>e[1]-t[1]));for(let e=0;e<r.length;e++)r[e]=r[e][0];for(const e of r)h.push(e)}return h}const fi=require("vex-js");let gi=!1;function mi(e,t,n){let o=t;return e.forEach((e=>{try{o=function(e,t,n){var o,i,r;const s=c(Uo).CaseSensitive?"g":"gi";let[a,l,h]=e.split("/"),d=t=" "+t+" ";const u=/\{(.+?)\}/g,p=/\^|#/g,f=/\{!(.+(?:\s+.+)*)\}/g,g=/\s*,\s*/g,m=/\s+/g,b=["∆","∇","⊂","⊃","⊆","⊇","⊄","⊅","⊈","⊉","⊊","⊋","⊍","⊎","⊏","⊐","⊑","⊒","⊓","⊔","⊕","⊖","⊗","⊘","⊙","⊚","⊛","⊜","⊝","⊞","⊟","⊠","⊡","⊢","⊣","⊤","⊥","⊦","⊧","⊨","⊩","⊪","⊫","⊬","⊭","⊮","⊯","⊰","⊱","⊲","⊳","⊴","⊵","⊶","⊷","⊸","⊹","⊺","⊻","⊼","⊽","⊾","⊿","⋀","⋁","⋂","⋃","⋄","⋇","⋈","⋉","⋊","⋋","⋌","⋍","⋎","⋏","⋐","⋑","⋒","⋓","⋔","⋕","⋖","⋗","⋘","⋙","⋚","⋛","⋜","⋝","⋞","⋟","⋠","⋡","⋢","⋣","⋤","⋥","⋦","⋧","⋨","⋩","⋪","⋫","⋬","⋭","⋮","⋯","⋰","⋱","⋲","⋳","⋴","⋵","⋶","⋷","⋸","⋹","⋺","⋻","⋼","⋽","⋾","⌁","⌂","⌃","⌄","⌅","⌆","⌇","⌈","⌉","⌊","⌋","⌑","⌒","⌓","⌔","⌕","⌖","⌗","⌘","⌙"];let w=0;null===(o=a.match(u))||void 0===o||o.forEach((e=>{n[b[w]]=e.replace(u,"$1").split(g),a=a.replace(e,b[w]),w++})),null===(i=l.match(u))||void 0===i||i.forEach((e=>{n[b[w]]=e.replace(u,"$1").split(g),l=l.replace(e,b[w]),w++})),null===(r=h.match(u))||void 0===r||r.forEach((e=>{n[b[w]]=e.replace(u,"$1").split(g),h=h.replace(e,b[w]),w++})),a=a.replaceAll(p,"\\s").replaceAll(f,"(?:(?!$1).)").replaceAll(m,""),l=l.replaceAll(m,""),h=h.replaceAll(p,"\\s").replaceAll(f,"(?:(?!$1).)").replaceAll(m,"");let v="("+h.replace("_",`)${a}(`)+")";Object.entries(n).forEach((([e,t])=>{v=v.replaceAll(e,`(?:${t.join("|")})`)}));const y=a.split("").filter((e=>e in n)),k=l.split("").filter((e=>e in n)),x=h.split("").filter((e=>e in n));function C(e){let o=h.replaceAll("\\b",""),i=[];x.length>0&&(x.forEach((t=>{const o=e.match(new RegExp(`(?:${n[t].join("|")})`,s));i.push([t,o])})),i=[...new Set(i)].sort(((e,t)=>t.length-e.length))),i.forEach((([e,t])=>{t.forEach((t=>{o=o.replace(e,t)}))})),o=o.replaceAll("\\s"," ");for(const e of o.match(/\(\?:(.*)\)\?/g)?o.match(/\(\?:(.*)\)\?/g):[]){const i=e.replace(/\(\?:(.*)\)\?/g,"$1"),r=o.replace(e,i);let l="("+r.replace("_",`)${a}(`)+")";Object.entries(n).forEach((([e,t])=>{l=l.replaceAll(e,`(?:${t.join("|")})`)})),o=t.match(new RegExp(l,s))?r:o.replace(e,"")}for(const e of o.match(/(.|\s)\?/g)?o.match(/(.|\s)\?/g):[]){const i=e.replace(/(.|\s)\?/g,"$1"),r=o.replace(e,i);let l="("+r.replace("_",`)${a}(`)+")";Object.entries(n).forEach((([e,t])=>{l=l.replaceAll(e,`(?:${t.join("|")})`)})),o=t.match(new RegExp(l,s))?r:o.replace(e,"")}const r=o.replaceAll("?","").indexOf("_"),l=y[0]?"_"===h?e.length:(()=>{let t=0;return Object.entries(n).filter((([e])=>y.includes(e))).forEach((([,n])=>{const o=n.find((t=>e.includes(t)));t+=o?o.length:0})),t})():a.length;return e=e.slice(r,r+l)}const E=t.match(new RegExp(v,s));if(E&&l.includes("_")?E.forEach((e=>{const t=C(e);d=d.replace(t,l.replaceAll("_",t))})):d=d.replaceAll(new RegExp(v,s),`$1${l}$2`),k[0]&&y[0]){let e=[];E&&(e=E.map((e=>{const t=C(e),o=[t,k[y.indexOf(Object.keys(n).find((e=>n[e].some((n=>n===t&&y.includes(e))))))]];return[o[0],o[1],n[o[1]][n[y[k.indexOf(o[1])]].indexOf(o[0])]?n[o[1]][n[y[k.indexOf(o[1])]].indexOf(o[0])]:o[0]]})),E.forEach(((t,n)=>{d=d.replace(t.replace(e[n][0],e[n][1]),t.replace(e[n][0],e[n][2]))})))}return d.replaceAll(/[∅⦰]/g,"").replaceAll("␠"," ").trim()}(e,o,n)}catch(n){li(`Attempted to apply rule '${e}' to '${t}'`,n),gi||(gi=!0,fi.dialog.alert({message:`An error occurred while trying to apply rule '${e}' to '${t}'. The rule may be invalid. If you think this is a bug, please contact the developer.`,callback:()=>{gi=!1}}))}})),o}function bi(e){return{rules:e.split(/\n|;/).map((e=>e.trim())).filter((e=>e.match(/^.*(?:\/|>).*/))).map((e=>e.match(/\/.*_.*$/)?e:e.match(/\/\s*$/)?e+"_":e+"/_")).map((e=>e.split(/(?:\/|>)/).map((e=>e.trim())).join("/"))).filter((e=>e.match(/^.+?\/.*?\/.*?_.*?$/)||e.match(/^.*?\/.+?\/.*?_.*?$/))),categories:Object.fromEntries(e.split("\n").map((e=>e.trim())).filter((e=>e.match(/^.*::.*$/))).map((e=>e.split("::"))).map((([e,t])=>[e.trim(),t.split(",").map((e=>e.trim()))])))}}const wi=()=>c(Uo);function vi(e,t,n=!1){let o;o=n?n.Pronunciations[t]:wi().Pronunciations[t];const i=bi(o);return mi(i.rules,e,i.categories)}function yi(e){c(Vo)[e]=vi(c(qo),e);const t=wi().Lexicon;for(const n in t)t[n].pronunciations.hasOwnProperty(e)&&!1===t[n].pronunciations[e].irregular&&(t[n].pronunciations[e].ipa=vi(n,e));wi().Lexicon=t,c(Yo)[e]=vi(c(Go),e);const n=wi().Phrasebook;for(const t in n)for(const o in n[t])if(n[t][o].pronunciations.hasOwnProperty(e)){!1===n[t][o].pronunciations[e].irregular&&(n[t][o].pronunciations[e].ipa=vi(o,e));for(const i in n[t][o].variants)n[t][o].variants[i].pronunciations[e].ipa=vi(i,e)}wi().Phrasebook=n}const ki={left:"right",right:"left",top:"bottom",bottom:"top"};function xi(e){let t,n,o=!e[10]&&Ci(e);return{c(){t=E("div"),o&&o.c(),L(t,"class",n="tooltip animation-"+e[8]+" "+e[0]+" "+e[4]+" svelte-1b37eoe"),M(t,"min-width",e[7]+"px"),M(t,"max-width",e[3]+"px"),M(t,"text-align",e[2]),R(t,"show",e[9]),R(t,"arrowless",!e[5])},m(n,i){k(n,t,i),o&&o.m(t,null),e[16](t)},p(e,i){e[10]?o&&(o.d(1),o=null):o?o.p(e,i):(o=Ci(e),o.c(),o.m(t,null)),273&i&&n!==(n="tooltip animation-"+e[8]+" "+e[0]+" "+e[4]+" svelte-1b37eoe")&&L(t,"class",n),128&i&&M(t,"min-width",e[7]+"px"),8&i&&M(t,"max-width",e[3]+"px"),4&i&&M(t,"text-align",e[2]),785&i&&R(t,"show",e[9]),305&i&&R(t,"arrowless",!e[5])},d(n){n&&x(t),o&&o.d(),e[16](null)}}}function Ci(e){let t,n;return{c(){t=new z(!1),n=I(),t.a=n},m(o,i){t.m(e[1],o,i),k(o,n,i)},p(e,n){2&n&&t.p(e[1])},d(e){e&&x(n),e&&t.d()}}}function Ei(t){let n,o=t[1]&&xi(t);return{c(){o&&o.c(),n=I()},m(e,t){o&&o.m(e,t),k(e,n,t)},p(e,[t]){e[1]?o?o.p(e,t):(o=xi(e),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:e,o:e,d(e){o&&o.d(e),e&&x(n)}}}function Ti(e,t,n){let o,{action:i="hover"}=t,{content:r=""}=t,{align:s="left"}=t,{position:a="top"}=t,{maxWidth:l=200}=t,{style:c=null}=t,{theme:h=""}=t,{animation:d=""}=t,{arrow:u=!0}=t,{autoPosition:p=!1}=t,{show:f=!1}=t,g=null,m=0,b=null,w=null,v=!1;const y=d?200:0;var k;return Y((()=>{if(null!==g&&(o&&!b&&(b=new r.component({target:g,props:{action:i,...r.props}})),n(7,m=((e,t)=>{const n=e.getBoundingClientRect().width+2,o=window.getComputedStyle(e),i=n-(parseInt(o.getPropertyValue("padding-left"),10)+parseInt(o.getPropertyValue("padding-right"),10));return Math.round(Math.min(t,i||t))})(g,l)),c&&"object"==typeof c))for(let e in c){const t=e.replace(/-_$/g,"").replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase(),n=c[e];g.style.setProperty(`--tooltip-${t}`,n)}p&&!(e=>{const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)})(g)&&n(0,a=ki[a]),d&&n(8,w=d),setTimeout((()=>n(9,v=!0)),y)})),k=()=>{b&&(b.$destroy(),b=null)},G().$$.on_destroy.push(k),e.$$set=e=>{"action"in e&&n(11,i=e.action),"content"in e&&n(1,r=e.content),"align"in e&&n(2,s=e.align),"position"in e&&n(0,a=e.position),"maxWidth"in e&&n(3,l=e.maxWidth),"style"in e&&n(12,c=e.style),"theme"in e&&n(4,h=e.theme),"animation"in e&&n(13,d=e.animation),"arrow"in e&&n(5,u=e.arrow),"autoPosition"in e&&n(14,p=e.autoPosition),"show"in e&&n(15,f=e.show)},e.$$.update=()=>{2&e.$$.dirty&&n(10,o="object"==typeof r),32832&e.$$.dirty&&(g&&f?setTimeout((()=>n(9,v=!0)),y):n(9,v=!1))},[a,r,s,l,h,u,g,m,w,v,o,i,c,d,p,f,function(e){Z[e?"unshift":"push"]((()=>{g=e,n(6,g)}))}]}var Si=class extends Te{constructor(e){super(),Ee(this,e,Ti,Ei,s,{action:11,content:1,align:2,position:0,maxWidth:3,style:12,theme:4,animation:13,arrow:5,autoPosition:14,show:15})}};const Bi=(e,t)=>{let n=null,o=e.getAttribute("title"),i=t?.action||e.getAttribute("action")||"hover";o&&(e.removeAttribute("title"),t={content:o,...t});const r=()=>{n?a():s()},s=()=>{n||(n=new Si({target:e,props:t}))},a=()=>{n&&(n.$destroy(),n=null)},l=()=>{null!==e&&(e.removeEventListener("click",r),e.removeEventListener("mouseenter",s),e.removeEventListener("mouseleave",a))};return null!==e&&(l(),"click"===i&&e.addEventListener("click",r),"hover"===i&&(e.addEventListener("mouseenter",s),e.addEventListener("mouseleave",a))),e.style.position="relative",t.show&&s(),{destroy(){l(),o&&e.setAttribute("title",o)}}};function Ii(e,t,n){const o=e.slice();return o[2]=t[n],o}function _i(e){let t,n;function o(e,n){return 3&n&&(t=null),null==t&&(t=!!(Object.keys(e[0]).length>1||e[1].UseLects||void 0===e[0].General)),t?Ai:Li}let i=o(e,-1),r=i(e);return{c(){r.c(),n=I()},m(e,t){r.m(e,t),k(e,n,t)},p(e,t){i===(i=o(e,t))&&r?r.p(e,t):(r.d(1),r=i(e),r&&(r.c(),r.m(n.parentNode,n)))},d(e){r.d(e),e&&x(n)}}}function Li(e){let t,n,o,i=e[0].General.ipa+"",r=e[0].General.irregular&&Oi();return{c(){t=E("p"),n=S(i),o=B(),r&&r.c(),L(t,"class","pronunciation")},m(e,i){k(e,t,i),w(t,n),w(t,o),r&&r.m(t,null)},p(e,o){1&o&&i!==(i=e[0].General.ipa+"")&&O(n,i),e[0].General.irregular?r||(r=Oi(),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(e){e&&x(t),r&&r.d()}}}function Ai(e){let t,n=Object.keys(e[0]),o=[];for(let t=0;t<n.length;t+=1)o[t]=Mi(Ii(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=I()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);k(e,t,n)},p(e,i){if(1&i){let r;for(n=Object.keys(e[0]),r=0;r<n.length;r+=1){const s=Ii(e,n,r);o[r]?o[r].p(s,i):(o[r]=Mi(s),o[r].c(),o[r].m(t.parentNode,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){C(o,e),e&&x(t)}}}function Oi(e){let t,n,o;return{c(){t=E("span"),t.textContent="lightbulb",L(t,"title","irregular pronunciation: rules are not being applied"),L(t,"class","material-icons"),M(t,"font-size","0.75em"),M(t,"margin-right","-1em")},m(e,i){k(e,t,i),n||(o=u(Bi.call(null,t,{position:"bottom"})),n=!0)},d(e){e&&x(t),n=!1,o()}}}function $i(e){let t,n,o;return{c(){t=E("span"),t.textContent="lightbulb",L(t,"title","irregular pronunciation: rules are not being applied"),L(t,"class","material-icons"),M(t,"font-size","0.75em"),M(t,"margin-right","-1em")},m(e,i){k(e,t,i),n||(o=u(Bi.call(null,t,{position:"bottom"})),n=!0)},d(e){e&&x(t),n=!1,o()}}}function Mi(e){let t,n,o,i,r,s,a,l,c=e[2]+"",h=e[0][e[2]].ipa+"",d=e[0][e[2]].irregular&&$i();return{c(){t=E("p"),n=E("u"),o=S(c),i=B(),r=E("span"),s=S(h),a=B(),d&&d.c(),l=B(),L(r,"class","pronunciation"),L(t,"class","lect")},m(e,c){k(e,t,c),w(t,n),w(n,o),w(t,i),w(t,r),w(r,s),w(r,a),d&&d.m(r,null),w(t,l)},p(e,t){1&t&&c!==(c=e[2]+"")&&O(o,c),1&t&&h!==(h=e[0][e[2]].ipa+"")&&O(s,h),e[0][e[2]].irregular?d||(d=$i(),d.c(),d.m(r,null)):d&&(d.d(1),d=null)},d(e){e&&x(t),d&&d.d()}}}function Pi(t){let n,o=t[1].ShowPronunciation&&_i(t);return{c(){o&&o.c(),n=I()},m(e,t){o&&o.m(e,t),k(e,n,t)},p(e,[t]){e[1].ShowPronunciation?o?o.p(e,t):(o=_i(e),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:e,o:e,d(e){o&&o.d(e),e&&x(n)}}}function Ni(e,t,n){let o;h(e,Uo,(e=>n(1,o=e)));let{pronunciations:i}=t;return e.$$set=e=>{"pronunciations"in e&&n(0,i=e.pronunciations)},[i,o]}class Ri extends Te{constructor(e){super(),Ee(this,e,Ni,Pi,s,{pronunciations:0})}}function Di(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function zi(e,{delay:t=0,duration:n=400,easing:o=Di,amount:i=5,opacity:r=0}={}){const s=getComputedStyle(e),a=+s.opacity,l="none"===s.filter?"":s.filter,c=a*(1-r),[h,d]=function(e){const t="string"==typeof e&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}(i);return{delay:t,duration:n,easing:o,css:(e,t)=>`opacity: ${a-c*t}; filter: ${l} blur(${t*h}${d});`}}function Fi(e,{delay:t=0,speed:n,duration:o,easing:i=Di}={}){let r=e.getTotalLength();const s=getComputedStyle(e);return"butt"!==s.strokeLinecap&&(r+=parseInt(s.strokeWidth)),void 0===o?o=void 0===n?800:r/n:"function"==typeof o&&(o=o(r)),{delay:t,duration:o,easing:i,css:(e,t)=>`\n\t\t\tstroke-dasharray: ${r};\n\t\t\tstroke-dashoffset: ${t*r};\n\t\t`}}function Hi(e,t,n){const o=e.slice();return o[9]=t[n],o}function ji(e,t,n){const o=e.slice();return o[12]=t[n],o}function Ui(e,t,n){const o=e.slice();return o[15]=t[n],o}function Wi(e){let t,n,o,i,r,s,a,l,c=e[1]?"⏶":"⏷",h=e[1]&&!e[2]&&qi(e);return{c(){t=E("button"),n=S("Inflections "),o=S(c),i=B(),h&&h.c(),r=I(),L(t,"class","inflection hover-highlight")},m(c,d){k(c,t,d),w(t,n),w(t,o),k(c,i,d),h&&h.m(c,d),k(c,r,d),s=!0,a||(l=_(t,"click",e[8]),a=!0)},p(e,t){(!s||2&t)&&c!==(c=e[1]?"⏶":"⏷")&&O(o,c),e[1]&&!e[2]?h?(h.p(e,t),6&t&&fe(h,1)):(h=qi(e),h.c(),fe(h,1),h.m(r.parentNode,r)):h&&(ue(),ge(h,1,1,(()=>{h=null})),pe())},i(e){s||(fe(h),s=!0)},o(e){ge(h),s=!1},d(e){e&&x(t),e&&x(i),h&&h.d(e),e&&x(r),a=!1,l()}}}function qi(e){let t,n,o,i=e[0].flat(),r=[];for(let t=0;t<i.length;t+=1)r[t]=Ji(Hi(e,i,t));return{c(){t=E("div");for(let e=0;e<r.length;e+=1)r[e].c();L(t,"class","inflection")},m(e,n){k(e,t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null);o=!0},p(e,n){if(1&n){let o;for(i=e[0].flat(),o=0;o<i.length;o+=1){const s=Hi(e,i,o);r[o]?r[o].p(s,n):(r[o]=Ji(s),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},i(e){o||(ne((()=>{o&&(n||(n=be(t,zi,{amount:10,duration:333},!0)),n.run(1))})),o=!0)},o(e){n||(n=be(t,zi,{amount:10,duration:333},!1)),n.run(0),o=!1},d(e){e&&x(t),C(r,e),e&&n&&n.end()}}}function Vi(e){let t,n=`h${e[9].data.level}`,o=`h${e[9].data.level}`&&Gi(e);return{c(){o&&o.c(),t=I()},m(e,n){o&&o.m(e,n),k(e,t,n)},p(e,i){`h${e[9].data.level}`?n?s(n,`h${e[9].data.level}`)?(o.d(1),o=Gi(e),n=`h${e[9].data.level}`,o.c(),o.m(t.parentNode,t)):o.p(e,i):(o=Gi(e),n=`h${e[9].data.level}`,o.c(),o.m(t.parentNode,t)):n&&(o.d(1),o=null,n=`h${e[9].data.level}`)},d(e){e&&x(t),o&&o.d(e)}}}function Gi(e){let t,n=e[9].data.text+"";return{c(){t=E(`h${e[9].data.level}`)},m(e,o){k(e,t,o),t.innerHTML=n},p(e,o){1&o&&n!==(n=e[9].data.text+"")&&(t.innerHTML=n)},d(e){e&&x(t)}}}function Yi(e){let t,n=e[9].data.content,o=[];for(let t=0;t<n.length;t+=1)o[t]=Xi(ji(e,n,t));return{c(){t=E("table");for(let e=0;e<o.length;e+=1)o[e].c();M(t,"margin","auto")},m(e,n){k(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,i){if(1&i){let r;for(n=e[9].data.content,r=0;r<n.length;r+=1){const s=ji(e,n,r);o[r]?o[r].p(s,i):(o[r]=Xi(s),o[r].c(),o[r].m(t,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){e&&x(t),C(o,e)}}}function Ki(e){let t,n=e[15]+"";return{c(){t=E("td")},m(e,o){k(e,t,o),t.innerHTML=n},p(e,o){1&o&&n!==(n=e[15]+"")&&(t.innerHTML=n)},d(e){e&&x(t)}}}function Xi(e){let t,n,o=e[12],i=[];for(let t=0;t<o.length;t+=1)i[t]=Ki(Ui(e,o,t));return{c(){t=E("tr");for(let e=0;e<i.length;e+=1)i[e].c();n=B()},m(e,o){k(e,t,o);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null);w(t,n)},p(e,r){if(1&r){let s;for(o=e[12],s=0;s<o.length;s+=1){const a=Ui(e,o,s);i[s]?i[s].p(a,r):(i[s]=Ki(a),i[s].c(),i[s].m(t,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=o.length}},d(e){e&&x(t),C(i,e)}}}function Zi(e){let t,n=e[9].data.text+"";return{c(){t=E("p")},m(e,o){k(e,t,o),t.innerHTML=n},p(e,o){1&o&&n!==(n=e[9].data.text+"")&&(t.innerHTML=n)},d(e){e&&x(t)}}}function Ji(e){let t,n,o,i="header"===e[9].type&&Vi(e),r="table"===e[9].type&&Yi(e),s="paragraph"===e[9].type&&Zi(e);return{c(){i&&i.c(),t=B(),r&&r.c(),n=B(),s&&s.c(),o=I()},m(e,a){i&&i.m(e,a),k(e,t,a),r&&r.m(e,a),k(e,n,a),s&&s.m(e,a),k(e,o,a)},p(e,a){"header"===e[9].type?i?i.p(e,a):(i=Vi(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),"table"===e[9].type?r?r.p(e,a):(r=Yi(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),"paragraph"===e[9].type?s?s.p(e,a):(s=Zi(e),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(e){i&&i.d(e),e&&x(t),r&&r.d(e),e&&x(n),s&&s.d(e),e&&x(o)}}}function Qi(e){let t,n,o=e[0][0]&&Wi(e);return{c(){o&&o.c(),t=I()},m(e,i){o&&o.m(e,i),k(e,t,i),n=!0},p(e,[n]){e[0][0]?o?(o.p(e,n),1&n&&fe(o,1)):(o=Wi(e),o.c(),fe(o,1),o.m(t.parentNode,t)):o&&(ue(),ge(o,1,1,(()=>{o=null})),pe())},i(e){n||(fe(o),n=!0)},o(e){ge(o),n=!1},d(e){o&&o.d(e),e&&x(t)}}}function er(e,t,n){let o,i,r;h(e,Uo,(e=>n(6,o=e))),h(e,ni,(e=>n(7,i=e))),h(e,ti,(e=>n(2,r=e)));let s,{word:a}=t,{tags:l}=t,{readFromReference:c=!1}=t,d=!1;return e.$$set=e=>{"word"in e&&n(3,a=e.word),"tags"in e&&n(4,l=e.tags),"readFromReference"in e&&n(5,c=e.readFromReference)},e.$$.update=()=>{if(249&e.$$.dirty){o.Inflections,o.Lexicon;let e="";n(0,s=structuredClone(c&&"object"==typeof i?i.Inflections:o.Inflections).filter((e=>{let t;try{t=new RegExp(e.filter)}catch(n){di.error(`Invalid regular expression: /${e.filter}/`),t=/.+/}return(!e.tags[0]||e.tags.some((e=>l.includes(e))))&&a.match(t)})).map((t=>(e+=t.categories+"\n",t.tables.blocks)))),s.forEach(((t,o)=>{t.forEach(((t,i)=>{"table"===t.type&&t.data.content.forEach(((t,r)=>{t.forEach(((t,l)=>{const c=bi(function(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent}(t)).rules,h=bi(e).categories;c[0]&&n(0,s[o][i].data.content[r][l]=mi(c,a,h),s)}))}))}))}))}},[s,d,r,a,l,c,o,i,()=>n(1,d=!d)]}class tr extends Te{constructor(e){super(),Ee(this,e,er,Qi,s,{word:3,tags:4,readFromReference:5})}}function nr(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let or={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const ir=/[&<>"']/,rr=new RegExp(ir.source,"g"),sr=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ar=new RegExp(sr.source,"g"),lr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cr=e=>lr[e];function hr(e,t){if(t){if(ir.test(e))return e.replace(rr,cr)}else if(sr.test(e))return e.replace(ar,cr);return e}const dr=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function ur(e){return e.replace(dr,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const pr=/(^|[^\[])\^/g;function fr(e,t){e="string"==typeof e?e:e.source,t=t||"";const n={replace:(t,o)=>(o=(o=o.source||o).replace(pr,"$1"),e=e.replace(t,o),n),getRegex:()=>new RegExp(e,t)};return n}const gr=/[^\w:]/g,mr=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function br(e,t,n){if(e){let e;try{e=decodeURIComponent(ur(n)).replace(gr,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!mr.test(n)&&(n=function(e,t){wr[" "+e]||(vr.test(e)?wr[" "+e]=e+"/":wr[" "+e]=Er(e,"/",!0));e=wr[" "+e];const n=-1===e.indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(yr,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(kr,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}const wr={},vr=/^[^:]+:\/*[^/]*$/,yr=/^([^:]+:)[\s\S]*$/,kr=/^([^:]+:\/*[^/]*)[\s\S]*$/;const xr={exec:function(){}};function Cr(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let o=!1,i=t;for(;--i>=0&&"\\"===n[i];)o=!o;return o?"|":" |"})).split(/ \|/);let o=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;o<n.length;o++)n[o]=n[o].trim().replace(/\\\|/g,"|");return n}function Er(e,t,n){const o=e.length;if(0===o)return"";let i=0;for(;i<o;){const r=e.charAt(o-i-1);if(r!==t||n){if(r===t||!n)break;i++}else i++}return e.slice(0,o-i)}function Tr(e,t){if(t<1)return"";let n="";for(;t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}function Sr(e,t,n,o){const i=t.href,r=t.title?hr(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){o.state.inLink=!0;const e={type:"link",raw:n,href:i,title:r,text:s,tokens:o.inlineTokens(s)};return o.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:r,text:hr(s)}}class Br{constructor(e){this.options=e||or}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Er(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const o=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=o.length?e.slice(o.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=Er(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *>[ \t]?/gm,""),n=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(e);return this.lexer.state.top=n,{type:"blockquote",raw:t[0],tokens:o,text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n,o,i,r,s,a,l,c,h,d,u,p,f=t[1].trim();const g=f.length>1,m={type:"list",raw:"",ordered:g,start:g?+f.slice(0,-1):"",loose:!1,items:[]};f=g?`\\d{1,9}\\${f.slice(-1)}`:`\\${f}`,this.options.pedantic&&(f=g?f:"[*+-]");const b=new RegExp(`^( {0,3}${f})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(p=!1,t=b.exec(e))&&!this.rules.block.hr.test(e);){if(n=t[0],e=e.substring(n.length),c=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),h=e.split("\n",1)[0],this.options.pedantic?(r=2,u=c.trimLeft()):(r=t[2].search(/[^ ]/),r=r>4?1:r,u=c.slice(r),r+=t[1].length),a=!1,!c&&/^ *$/.test(h)&&(n+=h+"\n",e=e.substring(h.length+1),p=!0),!p){const t=new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),o=new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),s=new RegExp(`^ {0,${Math.min(3,r-1)}}#`);for(;e&&(d=e.split("\n",1)[0],h=d,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!i.test(h))&&!s.test(h)&&!t.test(h)&&!o.test(e);){if(h.search(/[^ ]/)>=r||!h.trim())u+="\n"+h.slice(r);else{if(a)break;if(c.search(/[^ ]/)>=4)break;if(i.test(c))break;if(s.test(c))break;if(o.test(c))break;u+="\n"+h}a||h.trim()||(a=!0),n+=d+"\n",e=e.substring(d.length+1),c=h.slice(r)}}m.loose||(l?m.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(o=/^\[[ xX]\] /.exec(u),o&&(i="[ ] "!==o[0],u=u.replace(/^\[[ xX]\] +/,""))),m.items.push({type:"list_item",raw:n,task:!!o,checked:i,loose:!1,text:u}),m.raw+=n}m.items[m.items.length-1].raw=n.trimRight(),m.items[m.items.length-1].text=u.trimRight(),m.raw=m.raw.trimRight();const w=m.items.length;for(s=0;s<w;s++)if(this.lexer.state.top=!1,m.items[s].tokens=this.lexer.blockTokens(m.items[s].text,[]),!m.loose){const e=m.items[s].tokens.filter((e=>"space"===e.type)),t=e.length>0&&e.some((e=>/\n.*\n/.test(e.raw)));m.loose=t}if(m.loose)for(s=0;s<w;s++)m.items[s].loose=!0;return m}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){const n=this.options.sanitizer?this.options.sanitizer(t[0]):hr(t[0]);e.type="paragraph",e.text=n,e.tokens=this.lexer.inline(n)}return e}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:o}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:Cr(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n,o,i,r,s=e.align.length;for(n=0;n<s;n++)/^ *-+: *$/.test(e.align[n])?e.align[n]="right":/^ *:-+: *$/.test(e.align[n])?e.align[n]="center":/^ *:-+ *$/.test(e.align[n])?e.align[n]="left":e.align[n]=null;for(s=e.rows.length,n=0;n<s;n++)e.rows[n]=Cr(e.rows[n],e.header.length).map((e=>({text:e})));for(s=e.header.length,o=0;o<s;o++)e.header[o].tokens=this.lexer.inline(e.header[o].text);for(s=e.rows.length,o=0;o<s;o++)for(r=e.rows[o],i=0;i<r.length;i++)r[i].tokens=this.lexer.inline(r[i].text);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:hr(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):hr(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=Er(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let o=0,i=0;for(;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])o++;else if(e[i]===t[1]&&(o--,o<0))return i;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],o="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],o=e[3])}else o=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),Sr(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:o?o.replace(this.rules.inline._escapes,"$1"):o},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return Sr(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let o=this.rules.inline.emStrong.lDelim.exec(e);if(!o)return;if(o[3]&&n.match(/[\p{L}\p{N}]/u))return;const i=o[1]||o[2]||"";if(!i||i&&(""===n||this.rules.inline.punctuation.exec(n))){const n=o[0].length-1;let i,r,s=n,a=0;const l="*"===o[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(o=l.exec(t));){if(i=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!i)continue;if(r=i.length,o[3]||o[4]){s+=r;continue}if((o[5]||o[6])&&n%3&&!((n+r)%3)){a+=r;continue}if(s-=r,s>0)continue;r=Math.min(r,r+s+a);const t=e.slice(0,n+o.index+(o[0].length-i.length)+r);if(Math.min(n,r)%2){const e=t.slice(1,-1);return{type:"em",raw:t,text:e,tokens:this.lexer.inlineTokens(e)}}const l=t.slice(2,-2);return{type:"strong",raw:t,text:l,tokens:this.lexer.inlineTokens(l)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),o=/^ /.test(e)&&/ $/.test(e);return n&&o&&(e=e.substring(1,e.length-1)),e=hr(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,o;return"@"===n[2]?(e=hr(this.options.mangle?t(n[1]):n[1]),o="mailto:"+e):(e=hr(n[1]),o=e),{type:"link",raw:n[0],text:e,href:o,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,o;if("@"===n[2])e=hr(this.options.mangle?t(n[0]):n[0]),o="mailto:"+e;else{let t;do{t=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=hr(n[0]),o="www."===n[1]?"http://"+n[0]:n[0]}return{type:"link",raw:n[0],text:e,href:o,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const n=this.rules.inline.text.exec(e);if(n){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):hr(n[0]):n[0]:hr(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:e}}}}const Ir={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:xr,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Ir.def=fr(Ir.def).replace("label",Ir._label).replace("title",Ir._title).getRegex(),Ir.bullet=/(?:[*+-]|\d{1,9}[.)])/,Ir.listItemStart=fr(/^( *)(bull) */).replace("bull",Ir.bullet).getRegex(),Ir.list=fr(Ir.list).replace(/bull/g,Ir.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ir.def.source+")").getRegex(),Ir._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ir._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Ir.html=fr(Ir.html,"i").replace("comment",Ir._comment).replace("tag",Ir._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ir.paragraph=fr(Ir._paragraph).replace("hr",Ir.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ir._tag).getRegex(),Ir.blockquote=fr(Ir.blockquote).replace("paragraph",Ir.paragraph).getRegex(),Ir.normal={...Ir},Ir.gfm={...Ir.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Ir.gfm.table=fr(Ir.gfm.table).replace("hr",Ir.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ir._tag).getRegex(),Ir.gfm.paragraph=fr(Ir._paragraph).replace("hr",Ir.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Ir.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ir._tag).getRegex(),Ir.pedantic={...Ir.normal,html:fr("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Ir._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:xr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:fr(Ir.normal._paragraph).replace("hr",Ir.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Ir.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const _r={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:xr,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:xr,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function Lr(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Ar(e){let t,n,o="";const i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),o+="&#"+n+";";return o}_r._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",_r.punctuation=fr(_r.punctuation).replace(/punctuation/g,_r._punctuation).getRegex(),_r.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,_r.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,_r._comment=fr(Ir._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),_r.emStrong.lDelim=fr(_r.emStrong.lDelim).replace(/punct/g,_r._punctuation).getRegex(),_r.emStrong.rDelimAst=fr(_r.emStrong.rDelimAst,"g").replace(/punct/g,_r._punctuation).getRegex(),_r.emStrong.rDelimUnd=fr(_r.emStrong.rDelimUnd,"g").replace(/punct/g,_r._punctuation).getRegex(),_r._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,_r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,_r._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,_r.autolink=fr(_r.autolink).replace("scheme",_r._scheme).replace("email",_r._email).getRegex(),_r._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,_r.tag=fr(_r.tag).replace("comment",_r._comment).replace("attribute",_r._attribute).getRegex(),_r._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_r._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,_r._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,_r.link=fr(_r.link).replace("label",_r._label).replace("href",_r._href).replace("title",_r._title).getRegex(),_r.reflink=fr(_r.reflink).replace("label",_r._label).replace("ref",Ir._label).getRegex(),_r.nolink=fr(_r.nolink).replace("ref",Ir._label).getRegex(),_r.reflinkSearch=fr(_r.reflinkSearch,"g").replace("reflink",_r.reflink).replace("nolink",_r.nolink).getRegex(),_r.normal={..._r},_r.pedantic={..._r.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:fr(/^!?\[(label)\]\((.*?)\)/).replace("label",_r._label).getRegex(),reflink:fr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_r._label).getRegex()},_r.gfm={..._r.normal,escape:fr(_r.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},_r.gfm.url=fr(_r.gfm.url,"i").replace("email",_r.gfm._extended_email).getRegex(),_r.breaks={..._r.gfm,br:fr(_r.br).replace("{2,}","*").getRegex(),text:fr(_r.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class Or{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||or,this.options.tokenizer=this.options.tokenizer||new Br,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Ir.normal,inline:_r.normal};this.options.pedantic?(t.block=Ir.pedantic,t.inline=_r.pedantic):this.options.gfm&&(t.block=Ir.gfm,this.options.breaks?t.inline=_r.breaks:t.inline=_r.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ir,inline:_r}}static lex(e,t){return new Or(t).lex(e)}static lexInline(e,t){return new Or(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let n,o,i,r;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,n)=>t+"    ".repeat(n.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((o=>!!(n=o.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),o=t[t.length-1],!o||"paragraph"!==o.type&&"text"!==o.type?t.push(n):(o.raw+="\n"+n.raw,o.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),o=t[t.length-1],!o||"paragraph"!==o.type&&"text"!==o.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(o.raw+="\n"+n.raw,o.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(i=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let o;this.options.extensions.startBlock.forEach((function(e){o=e.call({lexer:this},n),"number"==typeof o&&o>=0&&(t=Math.min(t,o))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i)))o=t[t.length-1],r&&"paragraph"===o.type?(o.raw+="\n"+n.raw,o.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):t.push(n),r=i.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),o=t[t.length-1],o&&"text"===o.type?(o.raw+="\n"+n.raw,o.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,o,i,r,s,a,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,r.index)+"["+Tr("a",r[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,r.index)+"["+Tr("a",r[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,r.index+r[0].length-2)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(s||(a=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((o=>!!(n=o.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),o=t[t.length-1],o&&"text"===n.type&&"text"===o.type?(o.raw+=n.raw,o.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),o=t[t.length-1],o&&"text"===n.type&&"text"===o.type?(o.raw+=n.raw,o.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,a))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e,Ar))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e,Ar))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let o;this.options.extensions.startInline.forEach((function(e){o=e.call({lexer:this},n),"number"==typeof o&&o>=0&&(t=Math.min(t,o))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(i,Lr))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(a=n.raw.slice(-1)),s=!0,o=t[t.length-1],o&&"text"===o.type?(o.raw+=n.raw,o.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class $r{constructor(e){this.options=e||or}code(e,t,n){const o=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,o);null!=t&&t!==e&&(n=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",o?'<pre><code class="'+this.options.langPrefix+hr(o)+'">'+(n?e:hr(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:hr(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,t,n,o){if(this.options.headerIds){return`<h${t} id="${this.options.headerPrefix+o.slug(n)}">${e}</h${t}>\n`}return`<h${t}>${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const o=t?"ol":"ul";return"<"+o+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+o+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){if(null===(e=br(this.options.sanitize,this.options.baseUrl,e)))return n;let o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>",o}image(e,t,n){if(null===(e=br(this.options.sanitize,this.options.baseUrl,e)))return n;let o=`<img src="${e}" alt="${n}"`;return t&&(o+=` title="${t}"`),o+=this.options.xhtml?"/>":">",o}text(e){return e}}class Mr{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class Pr{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,o=0;if(this.seen.hasOwnProperty(n)){o=this.seen[e];do{o++,n=e+"-"+o}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=o,this.seen[n]=0),n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}}class Nr{constructor(e){this.options=e||or,this.options.renderer=this.options.renderer||new $r,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Mr,this.slugger=new Pr}static parse(e,t){return new Nr(t).parse(e)}static parseInline(e,t){return new Nr(t).parseInline(e)}parse(e,t=!0){let n,o,i,r,s,a,l,c,h,d,u,p,f,g,m,b,w,v,y,k="";const x=e.length;for(n=0;n<x;n++)if(d=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]&&(y=this.options.extensions.renderers[d.type].call({parser:this},d),!1!==y||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)))k+=y||"";else switch(d.type){case"space":continue;case"hr":k+=this.renderer.hr();continue;case"heading":k+=this.renderer.heading(this.parseInline(d.tokens),d.depth,ur(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":k+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(c="",l="",r=d.header.length,o=0;o<r;o++)l+=this.renderer.tablecell(this.parseInline(d.header[o].tokens),{header:!0,align:d.align[o]});for(c+=this.renderer.tablerow(l),h="",r=d.rows.length,o=0;o<r;o++){for(a=d.rows[o],l="",s=a.length,i=0;i<s;i++)l+=this.renderer.tablecell(this.parseInline(a[i].tokens),{header:!1,align:d.align[i]});h+=this.renderer.tablerow(l)}k+=this.renderer.table(c,h);continue;case"blockquote":h=this.parse(d.tokens),k+=this.renderer.blockquote(h);continue;case"list":for(u=d.ordered,p=d.start,f=d.loose,r=d.items.length,h="",o=0;o<r;o++)m=d.items[o],b=m.checked,w=m.task,g="",m.task&&(v=this.renderer.checkbox(b),f?m.tokens.length>0&&"paragraph"===m.tokens[0].type?(m.tokens[0].text=v+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=v+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:v}):g+=v),g+=this.parse(m.tokens,f),h+=this.renderer.listitem(g,w,b);k+=this.renderer.list(h,u,p);continue;case"html":k+=this.renderer.html(d.text);continue;case"paragraph":k+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(h=d.tokens?this.parseInline(d.tokens):d.text;n+1<x&&"text"===e[n+1].type;)d=e[++n],h+="\n"+(d.tokens?this.parseInline(d.tokens):d.text);k+=t?this.renderer.paragraph(h):h;continue;default:{const e='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return k}parseInline(e,t){t=t||this.renderer;let n,o,i,r="";const s=e.length;for(n=0;n<s;n++)if(o=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(i=this.options.extensions.renderers[o.type].call({parser:this},o),!1!==i||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)))r+=i||"";else switch(o.type){case"escape":case"text":r+=t.text(o.text);break;case"html":r+=t.html(o.text);break;case"link":r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break;case"image":r+=t.image(o.href,o.title,o.text);break;case"strong":r+=t.strong(this.parseInline(o.tokens,t));break;case"em":r+=t.em(this.parseInline(o.tokens,t));break;case"codespan":r+=t.codespan(o.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(o.tokens,t));break;default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return r}}class Rr{constructor(e){this.options=e||or}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}function Dr(e,t){return(n,o,i)=>{"function"==typeof o&&(i=o,o=null);const r={...o},s=function(e,t,n){return o=>{if(o.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+hr(o.message+"",!0)+"</pre>";return t?Promise.resolve(e):n?void n(null,e):e}if(t)return Promise.reject(o);if(!n)throw o;n(o)}}((o={...zr.defaults,...r}).silent,o.async,i);if(null==n)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(o),o.hooks&&(o.hooks.options=o),i){const r=o.highlight;let a;try{o.hooks&&(n=o.hooks.preprocess(n)),a=e(n,o)}catch(e){return s(e)}const l=function(e){let n;if(!e)try{o.walkTokens&&zr.walkTokens(a,o.walkTokens),n=t(a,o),o.hooks&&(n=o.hooks.postprocess(n))}catch(t){e=t}return o.highlight=r,e?s(e):i(null,n)};if(!r||r.length<3)return l();if(delete o.highlight,!a.length)return l();let c=0;return zr.walkTokens(a,(function(e){"code"===e.type&&(c++,setTimeout((()=>{r(e.text,e.lang,(function(t,n){if(t)return l(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),c--,0===c&&l()}))}),0))})),void(0===c&&l())}if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(n):n).then((t=>e(t,o))).then((e=>o.walkTokens?Promise.all(zr.walkTokens(e,o.walkTokens)).then((()=>e)):e)).then((e=>t(e,o))).then((e=>o.hooks?o.hooks.postprocess(e):e)).catch(s);try{o.hooks&&(n=o.hooks.preprocess(n));const i=e(n,o);o.walkTokens&&zr.walkTokens(i,o.walkTokens);let r=t(i,o);return o.hooks&&(r=o.hooks.postprocess(r)),r}catch(e){return s(e)}}}function zr(e,t,n){return Dr(Or.lex,Nr.parse)(e,t,n)}function Fr(e){return e=e.replaceAll(/__(.+)__/g,"<u>$1</u>"),e=zr.parse(e,{breaks:!0,smartypants:!0})}zr.options=zr.setOptions=function(e){var t;return zr.defaults={...zr.defaults,...e},t=zr.defaults,or=t,zr},zr.getDefaults=nr,zr.defaults=or,zr.use=function(...e){const t=zr.defaults.extensions||{renderers:{},childTokens:{}};e.forEach((e=>{const n={...e};if(n.async=zr.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if(e.renderer){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let o=e.renderer.apply(this,t);return!1===o&&(o=n.apply(this,t)),o}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");t[e.level]?t[e.level].unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){const t=zr.defaults.renderer||new $r;for(const n in e.renderer){const o=t[n];t[n]=(...i)=>{let r=e.renderer[n].apply(t,i);return!1===r&&(r=o.apply(t,i)),r}}n.renderer=t}if(e.tokenizer){const t=zr.defaults.tokenizer||new Br;for(const n in e.tokenizer){const o=t[n];t[n]=(...i)=>{let r=e.tokenizer[n].apply(t,i);return!1===r&&(r=o.apply(t,i)),r}}n.tokenizer=t}if(e.hooks){const t=zr.defaults.hooks||new Rr;for(const n in e.hooks){const o=t[n];Rr.passThroughHooks.has(n)?t[n]=i=>{if(zr.defaults.async)return Promise.resolve(e.hooks[n].call(t,i)).then((e=>o.call(t,e)));const r=e.hooks[n].call(t,i);return o.call(t,r)}:t[n]=(...i)=>{let r=e.hooks[n].apply(t,i);return!1===r&&(r=o.apply(t,i)),r}}n.hooks=t}if(e.walkTokens){const t=zr.defaults.walkTokens;n.walkTokens=function(n){let o=[];return o.push(e.walkTokens.call(this,n)),t&&(o=o.concat(t.call(this,n))),o}}zr.setOptions(n)}))},zr.walkTokens=function(e,t){let n=[];for(const o of e)switch(n=n.concat(t.call(zr,o)),o.type){case"table":for(const e of o.header)n=n.concat(zr.walkTokens(e.tokens,t));for(const e of o.rows)for(const o of e)n=n.concat(zr.walkTokens(o.tokens,t));break;case"list":n=n.concat(zr.walkTokens(o.items,t));break;default:zr.defaults.extensions&&zr.defaults.extensions.childTokens&&zr.defaults.extensions.childTokens[o.type]?zr.defaults.extensions.childTokens[o.type].forEach((function(e){n=n.concat(zr.walkTokens(o[e],t))})):o.tokens&&(n=n.concat(zr.walkTokens(o.tokens,t)))}return n},zr.parseInline=Dr(Or.lexInline,Nr.parseInline),zr.Parser=Nr,zr.parser=Nr.parse,zr.Renderer=$r,zr.TextRenderer=Mr,zr.Lexer=Or,zr.lexer=Or.lex,zr.Tokenizer=Br,zr.Slugger=Pr,zr.Hooks=Rr,zr.parse=zr,zr.options,zr.setOptions,zr.use,zr.walkTokens,zr.parseInline,Nr.parse,Or.lex,function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ce-header{padding:.6em 0 3px;margin:0;line-height:1.25em;outline:none}.ce-header p,.ce-header div{padding:0!important;margin:0!important}")),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}();
/**
     * Header block for the Editor.js.
     *
     * @author CodeX (team@ifmo.su)
     * @copyright CodeX 2018
     * @license MIT
     * @version 2.0.0
     */
class Hr{constructor({data:e,config:t,api:n,readOnly:o}){this.api=n,this.readOnly=o,this._settings=t,this._data=this.normalizeData(e),this._element=this.getTag()}get _CSS(){return{block:this.api.styles.block,wrapper:"ce-header"}}isHeaderData(e){return void 0!==e.text}normalizeData(e){const t={text:"",level:this.defaultLevel.number};return this.isHeaderData(e)&&(t.text=e.text||"",void 0!==e.level&&!isNaN(parseInt(e.level.toString()))&&(t.level=parseInt(e.level.toString()))),t}render(){return this._element}renderSettings(){return this.levels.map((e=>({icon:e.svg,label:this.api.i18n.t(`Heading ${e.number}`),onActivate:()=>this.setLevel(e.number),closeOnActivate:!0,isActive:this.currentLevel.number===e.number,render:()=>document.createElement("div")})))}setLevel(e){this.data={level:e,text:this.data.text}}merge(e){const t={text:this.data.text+e.text,level:this.data.level};this.data=t}validate(e){return""!==e.text.trim()}save(e){return{text:e.innerHTML,level:this.currentLevel.number}}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{level:!1,text:{}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data}set data(e){if(this._data=this.normalizeData(e),void 0!==e.level&&this._element.parentNode){const e=this.getTag();e.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(e,this._element),this._element=e}void 0!==e.text&&(this._element.innerHTML=this._data.text||"")}getTag(){const e=document.createElement(this.currentLevel.tag);return e.innerHTML=this._data.text||"",e.classList.add(this._CSS.wrapper),e.contentEditable=this.readOnly?"false":"true",e.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),e}get currentLevel(){let e=this.levels.find((e=>e.number===this._data.level));return e||(e=this.defaultLevel),e}get defaultLevel(){if(this._settings.defaultLevel){const e=this.levels.find((e=>e.number===this._settings.defaultLevel));if(e)return e;console.warn("(ง'̀-'́)ง Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}get levels(){const e=[{number:1,tag:"H1",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>'},{number:2,tag:"H2",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>'},{number:3,tag:"H3",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>'},{number:4,tag:"H4",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.8489 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>'},{number:5,tag:"H5",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>'},{number:6,tag:"H6",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>'}];return this._settings.levels?e.filter((e=>this._settings.levels.includes(e.number))):e}onPaste(e){const t=e.detail;if("data"in t){const e=t.data;let n=this.defaultLevel.number;switch(e.tagName){case"H1":n=1;break;case"H2":n=2;break;case"H3":n=3;break;case"H4":n=4;break;case"H5":n=5;break;case"H6":n=6}this._settings.levels&&(n=this._settings.levels.reduce(((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e))),this.data={level:n,text:e.innerHTML}}}static get pasteConfig(){return{tags:["H1","H2","H3","H4","H5","H6"]}}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 7L9 12M9 17V12M9 12L15 12M15 7V12M15 17L15 12"/></svg>',title:"Heading"}}}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-block:only-of-type .ce-paragraph[data-placeholder-active]:empty:before,.ce-block:only-of-type .ce-paragraph[data-placeholder-active][data-empty=true]:before{content:attr(data-placeholder-active)}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}();
/**
     * Base Paragraph Block for the Editor.js.
     * Represents a regular text block
     *
     * @author CodeX (team@codex.so)
     * @copyright CodeX 2018
     * @license The MIT License (MIT)
     */
class jr{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:t,api:n,readOnly:o}){this.api=n,this.readOnly=o,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=t.placeholder?t.placeholder:jr.DEFAULT_PLACEHOLDER,this._data=e??{},this._element=null,this._preserveBlank=t.preserveBlank??!1}onKeyUp(e){if("Backspace"!==e.code&&"Delete"!==e.code||!this._element)return;const{textContent:t}=this._element;""===t&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable="false",e.dataset.placeholderActive=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable="true",e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){if(!this._element)return;this._data.text+=e.text;const t=function(e){const t=document.createElement("div");t.innerHTML=e.trim();const n=document.createDocumentFragment();return n.append(...Array.from(t.childNodes)),n}(e.text);this._element.appendChild(t),this._element.normalize()}validate(e){return!(""===e.text.trim()&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const t={text:e.detail.data.innerHTML};this._data=t,window.requestAnimationFrame((()=>{this._element&&(this._element.innerHTML=this._data.text||"")}))}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',title:"Text"}}}function Ur(e,t,n={}){const o=document.createElement(e);Array.isArray(t)?o.classList.add(...t):t&&o.classList.add(t);for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(o[e]=n[e]);return o}function Wr(e){const t=e.getBoundingClientRect();return{y1:Math.floor(t.top+window.pageYOffset),x1:Math.floor(t.left+window.pageXOffset),x2:Math.floor(t.right+window.pageXOffset),y2:Math.floor(t.bottom+window.pageYOffset)}}function qr(e,t){const n=Wr(e),o=Wr(t);return{fromTopBorder:o.y1-n.y1,fromLeftBorder:o.x1-n.x1,fromRightBorder:n.x2-o.x2,fromBottomBorder:n.y2-o.y2}}function Vr(e,t){return t.parentNode.insertBefore(e,t)}function Gr(e,t=!0){const n=document.createRange(),o=window.getSelection();n.selectNodeContents(e),n.collapse(t),o.removeAllRanges(),o.addRange(n)}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.tc-wrap{--color-background:#f9f9fb;--color-text-secondary:#7b7e89;--color-border:#e8e8eb;--cell-size:34px;--toolbox-icon-size:18px;--toolbox-padding:6px;--toolbox-aiming-field-size:calc(var(--toolbox-icon-size) + var(--toolbox-padding)*2);border-left:0;position:relative;height:100%;width:100%;margin-top:var(--toolbox-icon-size);box-sizing:border-box;display:grid;grid-template-columns:calc(100% - var(--cell-size)) var(--cell-size)}.tc-wrap--readonly{grid-template-columns:100% var(--cell-size)}.tc-wrap svg{vertical-align:top}@media print{.tc-wrap{border-left-color:var(--color-border);border-left-style:solid;border-left-width:1px;grid-template-columns:100% var(--cell-size)}}@media print{.tc-wrap .tc-row:after{display:none}}.tc-table{position:relative;width:100%;height:100%;display:grid;font-size:14px;border-top:1px solid var(--color-border);line-height:1.4}.tc-table:after{width:calc(var(--cell-size));height:100%;left:calc(var(--cell-size)*-1);top:0}.tc-table:after,.tc-table:before{position:absolute;content:""}.tc-table:before{width:100%;height:var(--toolbox-aiming-field-size);top:calc(var(--toolbox-aiming-field-size)*-1);left:0}.tc-table--heading .tc-row:first-child{font-weight:600;border-bottom:2px solid var(--color-border)}.tc-table--heading .tc-row:first-child [contenteditable]:empty:before{content:attr(heading);color:var(--color-text-secondary)}.tc-table--heading .tc-row:first-child:after{bottom:-2px;border-bottom:2px solid var(--color-border)}.tc-add-column,.tc-add-row{display:flex;color:var(--color-text-secondary)}@media print{.tc-add{display:none}}.tc-add-column{padding:4px 0;justify-content:center;border-top:1px solid var(--color-border)}@media print{.tc-add-column{display:none}}.tc-add-row{height:var(--cell-size);align-items:center;padding-left:4px;position:relative}.tc-add-row:before{content:"";position:absolute;right:calc(var(--cell-size)*-1);width:var(--cell-size);height:100%}@media print{.tc-add-row{display:none}}.tc-add-column,.tc-add-row{transition:0s;cursor:pointer;will-change:background-color}.tc-add-column:hover,.tc-add-row:hover{transition:background-color .1s ease;background-color:var(--color-background)}.tc-add-row{margin-top:1px}.tc-add-row:hover:before{transition:.1s;background-color:var(--color-background)}.tc-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(10px,1fr));position:relative;border-bottom:1px solid var(--color-border)}.tc-row:after{content:"";pointer-events:none;position:absolute;width:var(--cell-size);height:100%;bottom:-1px;right:calc(var(--cell-size)*-1);border-bottom:1px solid var(--color-border)}.tc-row--selected{background:var(--color-background)}.tc-row--selected:after{background:var(--color-background)}.tc-cell{border-right:1px solid var(--color-border);padding:6px 12px;overflow:hidden;outline:none;line-break:normal}.tc-cell--selected{background:var(--color-background)}.tc-wrap--readonly .tc-row:after{display:none}.tc-toolbox{--toolbox-padding:6px;--popover-margin:30px;--toggler-click-zone-size:30px;--toggler-dots-color:#7b7e89;--toggler-dots-color-hovered:#1d202b;position:absolute;cursor:pointer;z-index:1;opacity:0;transition:opacity .1s;will-change:left,opacity}.tc-toolbox--column{top:calc(var(--toggler-click-zone-size)*-1);transform:translate(calc(var(--toggler-click-zone-size)*-1/2));will-change:left,opacity}.tc-toolbox--row{left:calc(var(--popover-margin)*-1);transform:translateY(calc(var(--toggler-click-zone-size)*-1/2));margin-top:-1px;will-change:top,opacity}.tc-toolbox--showed{opacity:1}.tc-toolbox .tc-popover{position:absolute;top:0;left:var(--popover-margin)}.tc-toolbox__toggler{display:flex;align-items:center;justify-content:center;width:var(--toggler-click-zone-size);height:var(--toggler-click-zone-size);color:var(--toggler-dots-color);opacity:0;transition:opacity .15s ease;will-change:opacity}.tc-toolbox__toggler:hover{color:var(--toggler-dots-color-hovered)}.tc-toolbox__toggler svg{fill:currentColor}.tc-wrap:hover .tc-toolbox__toggler{opacity:1}.tc-settings .cdx-settings-button{width:50%;margin:0}.tc-popover{--color-border:#eaeaea;--color-background:#fff;--color-background-hover:rgba(232,232,235,.49);--color-background-confirm:#e24a4a;--color-background-confirm-hover:#d54040;--color-text-confirm:#fff;background:var(--color-background);border:1px solid var(--color-border);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;padding:6px;display:none;will-change:opacity,transform}.tc-popover--opened{display:block;animation:menuShowing .1s cubic-bezier(.215,.61,.355,1) forwards}.tc-popover__item{display:flex;align-items:center;padding:2px 14px 2px 2px;border-radius:5px;cursor:pointer;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tc-popover__item:hover{background:var(--color-background-hover)}.tc-popover__item:not(:last-of-type){margin-bottom:2px}.tc-popover__item-icon{display:inline-flex;width:26px;height:26px;align-items:center;justify-content:center;background:var(--color-background);border-radius:5px;border:1px solid var(--color-border);margin-right:8px}.tc-popover__item-label{line-height:22px;font-size:14px;font-weight:500}.tc-popover__item--confirm{background:var(--color-background-confirm);color:var(--color-text-confirm)}.tc-popover__item--confirm:hover{background-color:var(--color-background-confirm-hover)}.tc-popover__item--confirm .tc-popover__item-icon{background:var(--color-background-confirm);border-color:#0000001a}.tc-popover__item--confirm .tc-popover__item-icon svg{transition:transform .2s ease-in;transform:rotate(90deg) scale(1.2)}.tc-popover__item--hidden{display:none}@keyframes menuShowing{0%{opacity:0;transform:translateY(-8px) scale(.9)}70%{opacity:1;transform:translateY(2px)}to{transform:translateY(0)}}')),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}();class Yr{constructor({items:e}){this.items=e,this.wrapper=void 0,this.itemEls=[]}static get CSS(){return{popover:"tc-popover",popoverOpened:"tc-popover--opened",item:"tc-popover__item",itemHidden:"tc-popover__item--hidden",itemConfirmState:"tc-popover__item--confirm",itemIcon:"tc-popover__item-icon",itemLabel:"tc-popover__item-label"}}render(){return this.wrapper=Ur("div",Yr.CSS.popover),this.items.forEach(((e,t)=>{const n=Ur("div",Yr.CSS.item),o=Ur("div",Yr.CSS.itemIcon,{innerHTML:e.icon}),i=Ur("div",Yr.CSS.itemLabel,{textContent:e.label});n.dataset.index=t,n.appendChild(o),n.appendChild(i),this.wrapper.appendChild(n),this.itemEls.push(n)})),this.wrapper.addEventListener("click",(e=>{this.popoverClicked(e)})),this.wrapper}popoverClicked(e){const t=e.target.closest(`.${Yr.CSS.item}`);if(!t)return;const n=t.dataset.index,o=this.items[n];!o.confirmationRequired||this.hasConfirmationState(t)?o.onClick():this.setConfirmationState(t)}setConfirmationState(e){e.classList.add(Yr.CSS.itemConfirmState)}clearConfirmationState(e){e.classList.remove(Yr.CSS.itemConfirmState)}hasConfirmationState(e){return e.classList.contains(Yr.CSS.itemConfirmState)}get opened(){return this.wrapper.classList.contains(Yr.CSS.popoverOpened)}open(){this.items.forEach(((e,t)=>{"function"==typeof e.hideIf&&this.itemEls[t].classList.toggle(Yr.CSS.itemHidden,e.hideIf())})),this.wrapper.classList.add(Yr.CSS.popoverOpened)}close(){this.wrapper.classList.remove(Yr.CSS.popoverOpened),this.itemEls.forEach((e=>{this.clearConfirmationState(e)}))}}const Kr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',Xr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>';class Zr{constructor({api:e,items:t,onOpen:n,onClose:o,cssModifier:i=""}){this.api=e,this.items=t,this.onOpen=n,this.onClose=o,this.cssModifier=i,this.popover=null,this.wrapper=this.createToolbox()}static get CSS(){return{toolbox:"tc-toolbox",toolboxShowed:"tc-toolbox--showed",toggler:"tc-toolbox__toggler"}}get element(){return this.wrapper}createToolbox(){const e=Ur("div",[Zr.CSS.toolbox,this.cssModifier?`${Zr.CSS.toolbox}--${this.cssModifier}`:""]);e.dataset.mutationFree="true";const t=this.createPopover(),n=this.createToggler();return e.appendChild(n),e.appendChild(t),e}createToggler(){const e=Ur("div",Zr.CSS.toggler,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.41 9.66H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 9.66H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.31 14.36H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 14.36H14.59"/></svg>'});return e.addEventListener("click",(()=>{this.togglerClicked()})),e}createPopover(){return this.popover=new Yr({items:this.items}),this.popover.render()}togglerClicked(){this.popover.opened?(this.popover.close(),this.onClose()):(this.popover.open(),this.onOpen())}show(e){const t=e();Object.entries(t).forEach((([e,t])=>{this.wrapper.style[e]=t})),this.wrapper.classList.add(Zr.CSS.toolboxShowed)}hide(){this.popover.close(),this.wrapper.classList.remove(Zr.CSS.toolboxShowed)}}const Jr="tc-wrap",Qr="tc-wrap--readonly",es="tc-table",ts="tc-row",ns="tc-table--heading",os="tc-row--selected",is="tc-cell",rs="tc-cell--selected",ss="tc-add-row",as="tc-add-column";class ls{constructor(e,t,n,o){this.readOnly=e,this.api=t,this.data=n,this.config=o,this.wrapper=null,this.table=null,this.toolboxColumn=this.createColumnToolbox(),this.toolboxRow=this.createRowToolbox(),this.createTableWrapper(),this.hoveredRow=0,this.hoveredColumn=0,this.selectedRow=0,this.selectedColumn=0,this.tunes={withHeadings:!1},this.resize(),this.fill(),this.focusedCell={row:0,column:0},this.documentClicked=e=>{const t=null!==e.target.closest(`.${es}`),n=null===e.target.closest(`.${Jr}`);(t||n)&&this.hideToolboxes();const o=e.target.closest(`.${ss}`),i=e.target.closest(`.${as}`);o&&o.parentNode===this.wrapper?(this.addRow(void 0,!0),this.hideToolboxes()):i&&i.parentNode===this.wrapper&&(this.addColumn(void 0,!0),this.hideToolboxes())},this.readOnly||this.bindEvents()}getWrapper(){return this.wrapper}bindEvents(){document.addEventListener("click",this.documentClicked),this.table.addEventListener("mousemove",function(e,t){let n=0;return function(...o){const i=(new Date).getTime();if(!(i-n<e))return n=i,t(...o)}}(150,(e=>this.onMouseMoveInTable(e))),{passive:!0}),this.table.onkeypress=e=>this.onKeyPressListener(e),this.table.addEventListener("keydown",(e=>this.onKeyDownListener(e))),this.table.addEventListener("focusin",(e=>this.focusInTableListener(e)))}createColumnToolbox(){return new Zr({api:this.api,cssModifier:"column",items:[{label:this.api.i18n.t("Add column to left"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.9167 14.9167L11.5833 18.25M11.5833 18.25L8.25 14.9167M11.5833 18.25L11.5833 10.0833C11.5833 9.19928 11.9345 8.35143 12.5596 7.72631C13.1848 7.10119 14.0326 6.75 14.9167 6.75"/></svg>',onClick:()=>{this.addColumn(this.selectedColumn,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add column to right"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.13333 14.9167L12.4667 18.25M12.4667 18.25L15.8 14.9167M12.4667 18.25L12.4667 10.0833C12.4667 9.19928 12.1155 8.35143 11.4904 7.72631C10.8652 7.10119 10.0174 6.75 9.13333 6.75"/></svg>',onClick:()=>{this.addColumn(this.selectedColumn+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete column"),icon:Kr,hideIf:()=>1===this.numberOfColumns,confirmationRequired:!0,onClick:()=>{this.deleteColumn(this.selectedColumn),this.hideToolboxes()}}],onOpen:()=>{this.selectColumn(this.hoveredColumn),this.hideRowToolbox()},onClose:()=>{this.unselectColumn()}})}createRowToolbox(){return new Zr({api:this.api,cssModifier:"row",items:[{label:this.api.i18n.t("Add row above"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 15.8333L18.2167 12.5M18.2167 12.5L14.8833 9.16667M18.2167 12.5L10.05 12.5C9.16595 12.5 8.31811 12.8512 7.69299 13.4763C7.06787 14.1014 6.71667 14.9493 6.71667 15.8333"/></svg>',onClick:()=>{this.addRow(this.selectedRow,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add row below"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 9.16666L18.2167 12.5M18.2167 12.5L14.8833 15.8333M18.2167 12.5H10.05C9.16594 12.5 8.31809 12.1488 7.69297 11.5237C7.06785 10.8986 6.71666 10.0507 6.71666 9.16666"/></svg>',onClick:()=>{this.addRow(this.selectedRow+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete row"),icon:Kr,hideIf:()=>1===this.numberOfRows,confirmationRequired:!0,onClick:()=>{this.deleteRow(this.selectedRow),this.hideToolboxes()}}],onOpen:()=>{this.selectRow(this.hoveredRow),this.hideColumnToolbox()},onClose:()=>{this.unselectRow()}})}moveCursorToNextRow(){this.focusedCell.row!==this.numberOfRows?(this.focusedCell.row+=1,this.focusCell(this.focusedCell)):(this.addRow(),this.focusedCell.row+=1,this.focusCell(this.focusedCell),this.updateToolboxesPosition(0,0))}getCell(e,t){return this.table.querySelectorAll(`.${ts}:nth-child(${e}) .${is}`)[t-1]}getRow(e){return this.table.querySelector(`.${ts}:nth-child(${e})`)}getRowByCell(e){return e.parentElement}getRowFirstCell(e){return e.querySelector(`.${is}:first-child`)}setCellContent(e,t,n){this.getCell(e,t).innerHTML=n}addColumn(e=-1,t=!1){let n=this.numberOfColumns;for(let o=1;o<=this.numberOfRows;o++){let i;const r=this.createCell();if(e>0&&e<=n?(i=this.getCell(o,e),Vr(r,i)):i=this.getRow(o).appendChild(r),1===o){const i=this.getCell(o,e>0?e:n+1);i&&t&&Gr(i)}}this.addHeadingAttrToFirstRow()}addRow(e=-1,t=!1){let n,o=Ur("div",ts);this.tunes.withHeadings&&this.removeHeadingAttrFromFirstRow();let i=this.numberOfColumns;if(e>0&&e<=this.numberOfRows){n=Vr(o,this.getRow(e))}else n=this.table.appendChild(o);this.fillRow(n,i),this.tunes.withHeadings&&this.addHeadingAttrToFirstRow();const r=this.getRowFirstCell(n);return r&&t&&Gr(r),n}deleteColumn(e){for(let t=1;t<=this.numberOfRows;t++){const n=this.getCell(t,e);if(!n)return;n.remove()}}deleteRow(e){this.getRow(e).remove(),this.addHeadingAttrToFirstRow()}createTableWrapper(){if(this.wrapper=Ur("div",Jr),this.table=Ur("div",es),this.readOnly&&this.wrapper.classList.add(Qr),this.wrapper.appendChild(this.toolboxRow.element),this.wrapper.appendChild(this.toolboxColumn.element),this.wrapper.appendChild(this.table),!this.readOnly){const e=Ur("div",as,{innerHTML:Xr}),t=Ur("div",ss,{innerHTML:Xr});this.wrapper.appendChild(e),this.wrapper.appendChild(t)}}computeInitialSize(){const e=this.data&&this.data.content,t=Array.isArray(e),n=!!t&&e.length,o=t?e.length:void 0,i=n?e[0].length:void 0,r=Number.parseInt(this.config&&this.config.rows),s=Number.parseInt(this.config&&this.config.cols),a=!isNaN(r)&&r>0?r:void 0,l=!isNaN(s)&&s>0?s:void 0;return{rows:o||a||2,cols:i||l||2}}resize(){const{rows:e,cols:t}=this.computeInitialSize();for(let t=0;t<e;t++)this.addRow();for(let e=0;e<t;e++)this.addColumn()}fill(){const e=this.data;if(e&&e.content)for(let t=0;t<e.content.length;t++)for(let n=0;n<e.content[t].length;n++)this.setCellContent(t+1,n+1,e.content[t][n])}fillRow(e,t){for(let n=1;n<=t;n++){const t=this.createCell();e.appendChild(t)}}createCell(){return Ur("div",is,{contentEditable:!this.readOnly})}get numberOfRows(){return this.table.childElementCount}get numberOfColumns(){return this.numberOfRows?this.table.querySelectorAll(`.${ts}:first-child .${is}`).length:0}get isColumnMenuShowing(){return 0!==this.selectedColumn}get isRowMenuShowing(){return 0!==this.selectedRow}onMouseMoveInTable(e){const{row:t,column:n}=this.getHoveredCell(e);this.hoveredColumn=n,this.hoveredRow=t,this.updateToolboxesPosition()}onKeyPressListener(e){if("Enter"===e.key){if(e.shiftKey)return!0;this.moveCursorToNextRow()}return"Enter"!==e.key}onKeyDownListener(e){"Tab"===e.key&&e.stopPropagation()}focusInTableListener(e){const t=e.target,n=this.getRowByCell(t);this.focusedCell={row:Array.from(this.table.querySelectorAll(`.${ts}`)).indexOf(n)+1,column:Array.from(n.querySelectorAll(`.${is}`)).indexOf(t)+1}}hideToolboxes(){this.hideRowToolbox(),this.hideColumnToolbox(),this.updateToolboxesPosition()}hideRowToolbox(){this.unselectRow(),this.toolboxRow.hide()}hideColumnToolbox(){this.unselectColumn(),this.toolboxColumn.hide()}focusCell(){this.focusedCellElem.focus()}get focusedCellElem(){const{row:e,column:t}=this.focusedCell;return this.getCell(e,t)}updateToolboxesPosition(e=this.hoveredRow,t=this.hoveredColumn){this.isColumnMenuShowing||t>0&&t<=this.numberOfColumns&&this.toolboxColumn.show((()=>({left:`calc((100% - var(--cell-size)) / (${this.numberOfColumns} * 2) * (1 + (${t} - 1) * 2))`}))),this.isRowMenuShowing||e>0&&e<=this.numberOfRows&&this.toolboxRow.show((()=>{const t=this.getRow(e),{fromTopBorder:n}=qr(this.table,t),{height:o}=t.getBoundingClientRect();return{top:`${Math.ceil(n+o/2)}px`}}))}setHeadingsSetting(e){this.tunes.withHeadings=e,e?(this.table.classList.add(ns),this.addHeadingAttrToFirstRow()):(this.table.classList.remove(ns),this.removeHeadingAttrFromFirstRow())}addHeadingAttrToFirstRow(){for(let e=1;e<=this.numberOfColumns;e++){let t=this.getCell(1,e);t&&t.setAttribute("heading",this.api.i18n.t("Heading"))}}removeHeadingAttrFromFirstRow(){for(let e=1;e<=this.numberOfColumns;e++){let t=this.getCell(1,e);t&&t.removeAttribute("heading")}}selectRow(e){const t=this.getRow(e);t&&(this.selectedRow=e,t.classList.add(os))}unselectRow(){if(this.selectedRow<=0)return;const e=this.table.querySelector(`.${os}`);e&&e.classList.remove(os),this.selectedRow=0}selectColumn(e){for(let t=1;t<=this.numberOfRows;t++){const n=this.getCell(t,e);n&&n.classList.add(rs)}this.selectedColumn=e}unselectColumn(){if(this.selectedColumn<=0)return;let e=this.table.querySelectorAll(`.${rs}`);Array.from(e).forEach((e=>{e.classList.remove(rs)})),this.selectedColumn=0}getHoveredCell(e){let t=this.hoveredRow,n=this.hoveredColumn;const{width:o,height:i,x:r,y:s}=function(e,t){const n=e.getBoundingClientRect(),{width:o,height:i,x:r,y:s}=n,{clientX:a,clientY:l}=t;return{width:o,height:i,x:a-r,y:l-s}}(this.table,e);return r>=0&&(n=this.binSearch(this.numberOfColumns,(e=>this.getCell(1,e)),(({fromLeftBorder:e})=>r<e),(({fromRightBorder:e})=>r>o-e))),s>=0&&(t=this.binSearch(this.numberOfRows,(e=>this.getCell(e,1)),(({fromTopBorder:e})=>s<e),(({fromBottomBorder:e})=>s>i-e))),{row:t||this.hoveredRow,column:n||this.hoveredColumn}}binSearch(e,t,n,o){let i,r=0,s=e+1,a=0;for(;r<s-1&&a<10;){i=Math.ceil((r+s)/2);const e=t(i),l=qr(this.table,e);if(n(l))s=i;else{if(!o(l))break;r=i}a++}return i}getData(){const e=[];for(let t=1;t<=this.numberOfRows;t++){const n=this.table.querySelector(`.${ts}:nth-child(${t})`),o=Array.from(n.querySelectorAll(`.${is}`));o.every((e=>!e.textContent.trim()))||e.push(o.map((e=>e.innerHTML)))}return e}destroy(){document.removeEventListener("click",this.documentClicked)}}class cs{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:e,config:t,api:n,readOnly:o}){this.api=n,this.readOnly=o,this.config=t,this.data={withHeadings:this.getConfig("withHeadings",!1,e),content:e&&e.content?e.content:[]},this.table=null}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',title:"Table"}}render(){return this.table=new ls(this.readOnly,this.api,this.data,this.config),this.container=Ur("div",this.api.styles.block),this.container.appendChild(this.table.getWrapper()),this.table.setHeadingsSetting(this.data.withHeadings),this.container}renderSettings(){return[{label:this.api.i18n.t("With headings"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',isActive:this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!0,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.api.i18n.t("Without headings"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M14 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><path stroke="currentColor" stroke-width="2" d="M5 14H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',isActive:!this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!1,this.table.setHeadingsSetting(this.data.withHeadings)}}]}save(){const e=this.table.getData();return{withHeadings:this.data.withHeadings,content:e}}destroy(){this.table.destroy()}getConfig(e,t=void 0,n=void 0){const o=this.data||n;return o?o[e]?o[e]:t:this.config&&this.config[e]?this.config[e]:t}static get pasteConfig(){return{tags:["TABLE","TR","TH","TD"]}}onPaste(e){const t=e.detail.data,n=t.querySelector(":scope > thead, tr:first-of-type th"),o=Array.from(t.querySelectorAll("tr")).map((e=>Array.from(e.querySelectorAll("th, td")).map((e=>e.innerHTML))));this.data={withHeadings:null!==n,content:o},this.table.wrapper&&this.table.wrapper.replaceWith(this.render())}}function hs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ds={exports:{}};window,ds.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=4)}([function(e,t,n){var o=n(1),i=n(2);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),o(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,n){var o,i=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},o=[],i=0;i<e.length;i++){var r=e[i],l=t.base?r[0]+t.base:r[0],c=n[l]||0,h="".concat(l," ").concat(c);n[l]=c+1;var d=a(h),u={css:r[1],media:r[2],sourceMap:r[3]};-1!==d?(s[d].references++,s[d].updater(u)):s.push({identifier:h,updater:m(u,t),references:1}),o.push(h)}return o}function c(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var i=n.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var s=r(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var h,d=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function u(e,t,n,o){var i=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var r=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function p(e,t,n){var o=n.css,i=n.media,r=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var f=null,g=0;function m(e,t){var n,o,i;if(t.singleton){var r=g++;n=f||(f=c(t)),o=u.bind(null,n,r,!1),i=u.bind(null,n,r,!0)}else n=c(t),o=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var i=a(n[o]);s[i].references--}for(var r=l(e,t),c=0;c<n.length;c++){var h=a(n[c]);0===s[h].references&&(s[h].updater(),s.splice(h,1))}n=r}}}},function(e,t,n){(t=n(3)(!1)).push([e.i,".cdx-underline {\n    text-decoration: underline;\n}\n",""]),e.exports=t},function(e,t,n){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o,i,r=e[1]||"",s=e[3];if(!s)return r;if(t&&"function"==typeof btoa){var a=(n=s,o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(i," */")),l=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[r].concat(l).concat([a]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(o)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(i[s]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);o&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=void 0,r=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i.key,"string"),"symbol"===o(r)?r:String(r)),i)}var r}n.r(t),n.d(t,"default",(function(){return r})),n(0);var r=function(){function e(t){var n=t.api;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=n,this.button=null,this.tag="U",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}var t,n,o;return t=e,o=[{key:"CSS",get:function(){return"cdx-underline"}},{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{u:{class:e.CSS}}}}],(n=[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}},{key:"surround",value:function(t){if(t){var n=this.api.selection.findParentTag(this.tag,e.CSS);n?this.unwrap(n):this.wrap(t)}}},{key:"wrap",value:function(t){var n=document.createElement(this.tag);n.classList.add(e.CSS),n.appendChild(t.extractContents()),t.insertNode(n),this.api.selection.expandToTag(n)}},{key:"unwrap",value:function(e){this.api.selection.expandToTag(e);var t=window.getSelection(),n=t.getRangeAt(0),o=n.extractContents();e.parentNode.removeChild(e),n.insertNode(o),t.removeAllRanges(),t.addRange(n)}},{key:"checkState",value:function(){var t=this.api.selection.findParentTag(this.tag,e.CSS);this.button.classList.toggle(this.iconClasses.active,!!t)}},{key:"toolboxIcon",get:function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7.5V11.5C9 12.2956 9.31607 13.0587 9.87868 13.6213C10.4413 14.1839 11.2044 14.5 12 14.5C12.7956 14.5 13.5587 14.1839 14.1213 13.6213C14.6839 13.0587 15 12.2956 15 11.5V7.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7.71429 18H16.2857"/></svg>'}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()}]).default;var us,ps=hs(ds.exports);!function(e){e.VERBOSE="VERBOSE",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR"}(us||(us={}));class fs{static get CSS(){return"cdx-monospace"}constructor({api:e}){this.api=e,this.button=null,this.tag="CODE",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}static get isInline(){return!0}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.textContent="M",this.button.classList.add(this.api.styles.inlineToolButton),this.button}surround(e){if(!e)return;const t=this.api.selection.findParentTag(this.tag,fs.CSS);t?this.unwrap(t):this.wrap(e)}wrap(e){const t=document.createElement(this.tag);t.classList.add(fs.CSS),t.appendChild(e.extractContents()),e.insertNode(t),this.api.selection.expandToTag(t)}unwrap(e){this.api.selection.expandToTag(e);const t=window.getSelection(),n=t.getRangeAt(0),o=n.extractContents();e.parentNode.removeChild(e),n.insertNode(o),t.removeAllRanges(),t.addRange(n)}checkState(){const e=this.api.selection.findParentTag(this.tag,fs.CSS);this.button.classList.toggle(this.iconClasses.active,!!e)}static get sanitize(){return{code:{class:fs.CSS}}}}function gs(e,t="docs-tab"){const n={holder:t,data:null,tools:{underline:ps,monospace:fs,header:{class:Hr,inlineToolbar:!0},paragraph:{class:jr,inlineToolbar:!0,config:{placeholder:"This panel can be used to document and describe your languge’s features in greater detail."}},table:{class:cs,inlineToolbar:!0,config:{rows:3,cols:3,withHeadings:!0}}},logLevel:us.ERROR,readOnly:"ref-docs"===t};e&&(n.data=e);const o=new Fo(n);"docs-tab"===t&&Zo.set(o)}const ms=async(e,t,n)=>await t({name:e,setAttributes:()=>{}}),bs="xata.trace.kind",ws="xata.sdk.version",vs="xata.table",ys="http.request_id",ks="http.status_code",xs="http.host",Cs="http.scheme",Es="http.method",Ts="http.url",Ss="http.route",Bs="http.target",Is="cf.ray";function _s(e){return null!=e}function Ls(e){return e.filter(_s)}function As(e){return Object.fromEntries(Object.entries(e).filter((([,e])=>_s(e))))}function Os(e){try{return e instanceof Blob}catch(e){return!1}}function $s(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Date)&&!Os(e)}function Ms(e){return null!=e}function Ps(e){return Ms(e)&&"string"==typeof e}function Ns(e){return Ms(e)&&Array.isArray(e)&&e.every(Ps)}function Rs(e){return Ms(e)&&"number"==typeof e}function Ds(e,t){const n=[];for(let o=0;o<e.length;o+=t)n.push(e.slice(o,o+t));return n}function zs(e,t){return e.reduce(((e,n)=>e.then((e=>t(n).then((t=>(e.push(t),e)))))),Promise.resolve([]))}function Fs(){try{if(Ms(process)&&Ms(process.env))return{apiKey:process.env.XATA_API_KEY??Hs(),databaseURL:process.env.XATA_DATABASE_URL??js(),branch:process.env.XATA_BRANCH??Us(),deployPreview:process.env.XATA_PREVIEW,deployPreviewBranch:process.env.XATA_PREVIEW_BRANCH,vercelGitCommitRef:process.env.VERCEL_GIT_COMMIT_REF,vercelGitRepoOwner:process.env.VERCEL_GIT_REPO_OWNER}}catch(e){}try{if($s(Deno)&&$s(Deno.env))return{apiKey:Deno.env.get("XATA_API_KEY")??Hs(),databaseURL:Deno.env.get("XATA_DATABASE_URL")??js(),branch:Deno.env.get("XATA_BRANCH")??Us(),deployPreview:Deno.env.get("XATA_PREVIEW"),deployPreviewBranch:Deno.env.get("XATA_PREVIEW_BRANCH"),vercelGitCommitRef:Deno.env.get("VERCEL_GIT_COMMIT_REF"),vercelGitRepoOwner:Deno.env.get("VERCEL_GIT_REPO_OWNER")}}catch(e){}return{apiKey:Hs(),databaseURL:js(),branch:Us(),deployPreview:void 0,deployPreviewBranch:void 0,vercelGitCommitRef:void 0,vercelGitRepoOwner:void 0}}function Hs(){try{return XATA_API_KEY}catch(e){return}}function js(){try{return XATA_DATABASE_URL}catch(e){return}}function Us(){try{return XATA_BRANCH}catch(e){return}}var Ws,qs,Vs,Gs,Ys,Ks=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Xs=(e,t,n)=>(Ks(e,t,"read from private field"),n?n.call(e):t.get(e)),Zs=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Js=(e,t,n,o)=>(Ks(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n);function Qs(e){const t="undefined"!=typeof fetch?fetch:void 0,n="undefined"!=typeof globalThis?globalThis.fetch:void 0,o=e??t??n;if(!o)throw new Error("Couldn't find a global `fetch`. Pass a fetch implementation explicitly.");return o}function ea(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function ta(e){let t,n,o,i=!1;return function(r){void 0===t?(t=r,n=0,o=-1):t=function(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(t,r);const s=t.length;let a=0;for(;n<s;){i&&(10===t[n]&&(a=++n),i=!1);let r=-1;for(;n<s&&-1===r;++n)switch(t[n]){case 58:-1===o&&(o=n-a);break;case 13:i=!0;case 10:r=n}if(-1===r)break;e(t.subarray(a,r),o),a=n,o=-1}a===s?t=void 0:0!==a&&(t=t.subarray(a),n-=a)}}Ws=new WeakMap,qs=new WeakMap,Vs=new WeakMap,Gs=new WeakSet,Ys=function(e){const t=new Promise((e=>Xs(this,qs).push(e))).finally((()=>{this.started--,this.running++})).then((()=>e())).finally((()=>{this.running--;const e=Xs(this,qs).shift();void 0!==e&&(this.started++,e())}));if(this.running+this.started<Xs(this,Vs)){const e=Xs(this,qs).shift();void 0!==e&&(this.started++,e())}return t};const na="text/event-stream",oa="last-event-id";function ia(e,{signal:t,headers:n,onopen:o,onmessage:i,onclose:r,onerror:s,fetch:a,...l}){return new Promise(((s,c)=>{const h={...n};let d;function u(){d.abort()}h.accept||(h.accept=na),t?.addEventListener("abort",(()=>{u(),s()}));const p=a??fetch,f=o??ra;!async function(){d=new AbortController;try{const t=await p(e,{...l,headers:h,signal:d.signal});await f(t),await async function(e,t){const n=e.getReader();let o;for(;!(o=await n.read()).done;)t(o.value)}(t.body,ta(function(e,t,n){let o={data:"",event:"",id:"",retry:void 0};const i=new TextDecoder;return function(r,s){if(0===r.length)n?.(o),o={data:"",event:"",id:"",retry:void 0};else if(s>0){const n=i.decode(r.subarray(0,s)),a=s+(32===r[s+1]?2:1),l=i.decode(r.subarray(a));switch(n){case"data":o.data=o.data?o.data+"\n"+l:l;break;case"event":o.event=l;break;case"id":e(o.id=l);break;case"retry":const n=parseInt(l,10);isNaN(n)||t(o.retry=n)}}}}((e=>{e?h[oa]=e:delete h[oa]}),(e=>{}),i))),r?.(),u(),s()}catch(e){}}()}))}function ra(e){const t=e.headers?.get("content-type");if(!t?.startsWith(na))throw new Error(`Expected content-type to be ${na}, Actual: ${t}`)}const sa="0.26.9";class aa extends Error{constructor(e,t){super(e,t)}}class la extends aa{constructor(e,t,n){super(ha(t)),this.status=e,this.errors=ca(t)?t.errors:[{message:ha(t),status:e}],this.requestId=n,t instanceof Error&&(this.stack=t.stack,this.cause=t.cause)}toString(){const e=super.toString();return`[${this.status}] (${this.requestId??"Unknown"}): ${e}`}}function ca(e){return $s(e)&&Array.isArray(e.errors)}function ha(e){return e instanceof Error?e.message:Ps(e)?e:$s(t=e)&&Ps(t.message)?e.message:ca(e)?"Bulk operation failed":"Unexpected error";var t}const da=new class{constructor(e=10){Zs(this,Gs),Zs(this,Ws,void 0),Zs(this,qs,void 0),Zs(this,Vs,void 0),Js(this,qs,[]),Js(this,Vs,e),this.running=0,this.started=0}setFetch(e){Js(this,Ws,e)}getFetch(){if(!Xs(this,Ws))throw new Error("Fetch not set");return Xs(this,Ws)}request(e,t){const n=new Date,o=this.getFetch(),i=async(r=!1)=>{const{promise:s,cancel:a}=function(e){let t;const n=new Promise((n=>{t=setTimeout((()=>{n()}),e)}));return{cancel:()=>clearTimeout(t),promise:n}}(3e5),l=await Promise.race([o(e,t),s.then((()=>null))]).finally(a);if(!l)throw new Error("Request timed out");if(429===l.status){const e=function(e){if(Rs(e))return e;if(Ps(e)){const t=Number(e);if(!Number.isNaN(t))return t}}(l.headers?.get("x-ratelimit-reset"))??1;return await async function(e){return new Promise((t=>setTimeout(t,e)))}(1e3*e),await i(!0)}if(r){const e=(new Date).getTime()-n.getTime();console.warn(`A request to Xata hit branch rate limits, was retried and stalled for ${e}ms`)}return l};return(r=this,s=Gs,a=Ys,Ks(r,s,"access private method"),a).call(this,(async()=>await i()));var r,s,a}},ua=(e,t={},n={})=>{const o=Object.entries(t).reduce(((e,[t,n])=>null==n?e:{...e,[t]:n}),{}),i=new URLSearchParams(o).toString(),r=i.length>0?`?${i}`:"",s=Object.entries(n).reduce(((e,[t,n])=>({...e,[t]:encodeURIComponent(String(n??"")).replace("%3A",":")})),{});return e.replace(/\{\w*\}/g,(e=>s[e.slice(1,-1)]))+r};function pa({endpoint:e,path:t,workspacesApiUrl:n,apiUrl:o,pathParams:i={}}){if("dataPlane"===e){const e=Ps(n)?`${n}${t}`:n(t,i),o=Ps(i.workspace)?e.replace("{workspaceId}",String(i.workspace)):e;return Ps(i.region)?o.replace("{region}",String(i.region)):o}return`${o}${t}`}function fa(e){const{groups:t}=/.*:\/\/(?<host>[^/]+).*/.exec(e)??{};return t?.host?{Host:t.host}:{}}async function ga(e,t){if(!Ms(e))return;if(Os(e)||"function"==typeof e.text)return e;const{"Content-Type":n}=t??{};return"application/json"===String(n).toLowerCase()&&$s(e)?JSON.stringify(e):e}const ma=ea();async function ba({url:e,method:t,body:n,headers:o,pathParams:i,queryParams:r,fetch:s,apiKey:a,endpoint:l,apiUrl:c,workspacesApiUrl:h,trace:d,signal:u,clientID:p,sessionID:f,clientName:g,xataAgentExtra:m,fetchOptions:b={},rawResponse:w=!1}){return da.setFetch(s),await d(`${t.toUpperCase()} ${e}`,(async({setAttributes:s})=>{const d=pa({endpoint:l,path:e,workspacesApiUrl:h,pathParams:i,apiUrl:c}),v=ua(d,r,i),y=v.includes("localhost")?v.replace(/^[^.]+\./,"http://"):v;s({[Ts]:y,[Bs]:ua(e,r,i)});const k=Ls([["client","TS_SDK"],["version",sa],Ms(g)?["service",g]:void 0,...Object.entries(m??{})]).map((([e,t])=>`${e}=${t}`)).join("; "),x=As({"Accept-Encoding":"identity","Content-Type":"application/json","X-Xata-Client-ID":p??ma,"X-Xata-Session-ID":f??ea(),"X-Xata-Agent":k,...o,...fa(v),Authorization:`Bearer ${a}`}),C=await da.request(y,{...b,method:t.toUpperCase(),body:await ga(n,x),headers:x,signal:u}),{host:E,protocol:T}=function(e){try{const{host:t,protocol:n}=new URL(e);return{host:t,protocol:n}}catch(e){return{}}}(C.url),S=C.headers?.get("x-request-id")??void 0;s({[bs]:"http",[ys]:S,[ks]:C.status,[xs]:E,[Cs]:T?.replace(":",""),[Is]:C.headers?.get("cf-ray")??void 0});const B=C.headers?.get("x-xata-message");if(B&&console.warn(B),204===C.status)return{};if(429===C.status)throw new la(C.status,"Rate limit exceeded",S);try{const e=w?await C.blob():await C.json();if(C.ok)return e;throw new la(C.status,e,S)}catch(e){throw new la(C.status,e,S)}}),{[Es]:t.toUpperCase(),[Ss]:e})}const wa=async e=>ba({...e,endpoint:"dataPlane"}),va=(e,t)=>wa({url:"/db/{dbBranchName}",method:"get",...e,signal:t}),ya=(e,t)=>wa({url:"/db/{dbBranchName}/transaction",method:"post",...e,signal:t}),ka=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/data",method:"post",...e,signal:t}),xa=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}/column/{columnName}/file/{fileId}",method:"get",...e,signal:t}),Ca=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}/column/{columnName}/file/{fileId}",method:"put",...e,signal:t}),Ea=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}/column/{columnName}/file/{fileId}",method:"delete",...e,signal:t}),Ta=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}",method:"get",...e,signal:t}),Sa=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}",method:"put",...e,signal:t}),Ba=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}",method:"patch",...e,signal:t}),Ia=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}",method:"post",...e,signal:t}),_a=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}",method:"delete",...e,signal:t}),La=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/query",method:"post",...e,signal:t}),Aa=(e,t)=>wa({url:"/db/{dbBranchName}/search",method:"post",...e,signal:t}),Oa=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/search",method:"post",...e,signal:t}),$a=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/vectorSearch",method:"post",...e,signal:t}),Ma=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/ask/{sessionId}",method:"post",...e,signal:t}),Pa=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/summarize",method:"post",...e,signal:t}),Na=(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/aggregate",method:"post",...e,signal:t}),Ra=(e,t)=>wa({url:"/db/{dbBranchName}/sql",method:"post",...e,signal:t}),Da=async e=>ba({...e,endpoint:"controlPlane"});!function e(t,n){const o={...t};for(const[t,i]of Object.entries(n))$s(i)&&$s(o[t])?o[t]=e(o[t],i):o[t]=i;return o}({branch:{getBranchList:(e,t)=>wa({url:"/dbs/{dbName}",method:"get",...e,signal:t}),getBranchDetails:va,createBranch:(e,t)=>wa({url:"/db/{dbBranchName}",method:"put",...e,signal:t}),deleteBranch:(e,t)=>wa({url:"/db/{dbBranchName}",method:"delete",...e,signal:t}),copyBranch:(e,t)=>wa({url:"/db/{dbBranchName}/copy",method:"post",...e,signal:t}),updateBranchMetadata:(e,t)=>wa({url:"/db/{dbBranchName}/metadata",method:"put",...e,signal:t}),getBranchMetadata:(e,t)=>wa({url:"/db/{dbBranchName}/metadata",method:"get",...e,signal:t}),getBranchStats:(e,t)=>wa({url:"/db/{dbBranchName}/stats",method:"get",...e,signal:t}),getGitBranchesMapping:(e,t)=>wa({url:"/dbs/{dbName}/gitBranches",method:"get",...e,signal:t}),addGitBranchesEntry:(e,t)=>wa({url:"/dbs/{dbName}/gitBranches",method:"post",...e,signal:t}),removeGitBranchesEntry:(e,t)=>wa({url:"/dbs/{dbName}/gitBranches",method:"delete",...e,signal:t}),resolveBranch:(e,t)=>wa({url:"/dbs/{dbName}/resolveBranch",method:"get",...e,signal:t})},migrations:{getSchema:(e,t)=>wa({url:"/db/{dbBranchName}/schema",method:"get",...e,signal:t}),getBranchMigrationHistory:(e,t)=>wa({url:"/db/{dbBranchName}/migrations",method:"get",...e,signal:t}),getBranchMigrationPlan:(e,t)=>wa({url:"/db/{dbBranchName}/migrations/plan",method:"post",...e,signal:t}),executeBranchMigrationPlan:(e,t)=>wa({url:"/db/{dbBranchName}/migrations/execute",method:"post",...e,signal:t}),getBranchSchemaHistory:(e,t)=>wa({url:"/db/{dbBranchName}/schema/history",method:"post",...e,signal:t}),compareBranchWithUserSchema:(e,t)=>wa({url:"/db/{dbBranchName}/schema/compare",method:"post",...e,signal:t}),compareBranchSchemas:(e,t)=>wa({url:"/db/{dbBranchName}/schema/compare/{branchName}",method:"post",...e,signal:t}),updateBranchSchema:(e,t)=>wa({url:"/db/{dbBranchName}/schema/update",method:"post",...e,signal:t}),previewBranchSchemaEdit:(e,t)=>wa({url:"/db/{dbBranchName}/schema/preview",method:"post",...e,signal:t}),applyBranchSchemaEdit:(e,t)=>wa({url:"/db/{dbBranchName}/schema/apply",method:"post",...e,signal:t}),pushBranchMigrations:(e,t)=>wa({url:"/db/{dbBranchName}/schema/push",method:"post",...e,signal:t})},migrationRequests:{queryMigrationRequests:(e,t)=>wa({url:"/dbs/{dbName}/migrations/query",method:"post",...e,signal:t}),createMigrationRequest:(e,t)=>wa({url:"/dbs/{dbName}/migrations",method:"post",...e,signal:t}),getMigrationRequest:(e,t)=>wa({url:"/dbs/{dbName}/migrations/{mrNumber}",method:"get",...e,signal:t}),updateMigrationRequest:(e,t)=>wa({url:"/dbs/{dbName}/migrations/{mrNumber}",method:"patch",...e,signal:t}),listMigrationRequestsCommits:(e,t)=>wa({url:"/dbs/{dbName}/migrations/{mrNumber}/commits",method:"post",...e,signal:t}),compareMigrationRequest:(e,t)=>wa({url:"/dbs/{dbName}/migrations/{mrNumber}/compare",method:"post",...e,signal:t}),getMigrationRequestIsMerged:(e,t)=>wa({url:"/dbs/{dbName}/migrations/{mrNumber}/merge",method:"get",...e,signal:t}),mergeMigrationRequest:(e,t)=>wa({url:"/dbs/{dbName}/migrations/{mrNumber}/merge",method:"post",...e,signal:t})},table:{createTable:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}",method:"put",...e,signal:t}),deleteTable:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}",method:"delete",...e,signal:t}),updateTable:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}",method:"patch",...e,signal:t}),getTableSchema:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/schema",method:"get",...e,signal:t}),setTableSchema:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/schema",method:"put",...e,signal:t}),getTableColumns:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/columns",method:"get",...e,signal:t}),addTableColumn:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/columns",method:"post",...e,signal:t}),getColumn:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/columns/{columnName}",method:"get",...e,signal:t}),updateColumn:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/columns/{columnName}",method:"patch",...e,signal:t}),deleteColumn:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/columns/{columnName}",method:"delete",...e,signal:t})},records:{branchTransaction:ya,insertRecord:ka,getRecord:Ta,insertRecordWithID:Sa,updateRecordWithID:Ba,upsertRecordWithID:Ia,deleteRecord:_a,bulkInsertTableRecords:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/bulk",method:"post",...e,signal:t})},files:{getFileItem:xa,putFileItem:Ca,deleteFileItem:Ea,getFile:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}/column/{columnName}/file",method:"get",...e,signal:t}),putFile:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}/column/{columnName}/file",method:"put",...e,signal:t}),deleteFile:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}/column/{columnName}/file",method:"delete",...e,signal:t}),fileAccess:(e,t)=>wa({url:"/file/{fileId}",method:"get",...e,signal:t})},searchAndFilter:{queryTable:La,searchBranch:Aa,searchTable:Oa,vectorSearchTable:$a,askTable:(e,t)=>wa({url:"/db/{dbBranchName}/tables/{tableName}/ask",method:"post",...e,signal:t}),askTableSession:Ma,summarizeTable:Pa,aggregateTable:Na},sql:{sqlQuery:Ra}},{oAuth:{getAuthorizationCode:(e,t)=>Da({url:"/oauth/authorize",method:"get",...e,signal:t}),grantAuthorizationCode:(e,t)=>Da({url:"/oauth/authorize",method:"post",...e,signal:t}),getUserOAuthClients:(e,t)=>Da({url:"/user/oauth/clients",method:"get",...e,signal:t}),deleteUserOAuthClient:(e,t)=>Da({url:"/user/oauth/clients/{clientId}",method:"delete",...e,signal:t}),getUserOAuthAccessTokens:(e,t)=>Da({url:"/user/oauth/tokens",method:"get",...e,signal:t}),deleteOAuthAccessToken:(e,t)=>Da({url:"/user/oauth/tokens/{token}",method:"delete",...e,signal:t}),updateOAuthAccessToken:(e,t)=>Da({url:"/user/oauth/tokens/{token}",method:"patch",...e,signal:t})},users:{getUser:(e,t)=>Da({url:"/user",method:"get",...e,signal:t}),updateUser:(e,t)=>Da({url:"/user",method:"put",...e,signal:t}),deleteUser:(e,t)=>Da({url:"/user",method:"delete",...e,signal:t})},authentication:{getUserAPIKeys:(e,t)=>Da({url:"/user/keys",method:"get",...e,signal:t}),createUserAPIKey:(e,t)=>Da({url:"/user/keys/{keyName}",method:"post",...e,signal:t}),deleteUserAPIKey:(e,t)=>Da({url:"/user/keys/{keyName}",method:"delete",...e,signal:t})},workspaces:{getWorkspacesList:(e,t)=>Da({url:"/workspaces",method:"get",...e,signal:t}),createWorkspace:(e,t)=>Da({url:"/workspaces",method:"post",...e,signal:t}),getWorkspace:(e,t)=>Da({url:"/workspaces/{workspaceId}",method:"get",...e,signal:t}),updateWorkspace:(e,t)=>Da({url:"/workspaces/{workspaceId}",method:"put",...e,signal:t}),deleteWorkspace:(e,t)=>Da({url:"/workspaces/{workspaceId}",method:"delete",...e,signal:t}),getWorkspaceMembersList:(e,t)=>Da({url:"/workspaces/{workspaceId}/members",method:"get",...e,signal:t}),updateWorkspaceMemberRole:(e,t)=>Da({url:"/workspaces/{workspaceId}/members/{userId}",method:"put",...e,signal:t}),removeWorkspaceMember:(e,t)=>Da({url:"/workspaces/{workspaceId}/members/{userId}",method:"delete",...e,signal:t})},invites:{inviteWorkspaceMember:(e,t)=>Da({url:"/workspaces/{workspaceId}/invites",method:"post",...e,signal:t}),updateWorkspaceMemberInvite:(e,t)=>Da({url:"/workspaces/{workspaceId}/invites/{inviteId}",method:"patch",...e,signal:t}),cancelWorkspaceMemberInvite:(e,t)=>Da({url:"/workspaces/{workspaceId}/invites/{inviteId}",method:"delete",...e,signal:t}),acceptWorkspaceMemberInvite:(e,t)=>Da({url:"/workspaces/{workspaceId}/invites/{inviteKey}/accept",method:"post",...e,signal:t}),resendWorkspaceMemberInvite:(e,t)=>Da({url:"/workspaces/{workspaceId}/invites/{inviteId}/resend",method:"post",...e,signal:t})},xbcontrolOther:{listClusters:(e,t)=>Da({url:"/workspaces/{workspaceId}/clusters",method:"get",...e,signal:t}),createCluster:(e,t)=>Da({url:"/workspaces/{workspaceId}/clusters",method:"post",...e,signal:t}),getCluster:(e,t)=>Da({url:"/workspaces/{workspaceId}/clusters/{clusterId}",method:"get",...e,signal:t}),updateCluster:(e,t)=>Da({url:"/workspaces/{workspaceId}/clusters/{clusterId}",method:"patch",...e,signal:t})},databases:{getDatabaseList:(e,t)=>Da({url:"/workspaces/{workspaceId}/dbs",method:"get",...e,signal:t}),createDatabase:(e,t)=>Da({url:"/workspaces/{workspaceId}/dbs/{dbName}",method:"put",...e,signal:t}),deleteDatabase:(e,t)=>Da({url:"/workspaces/{workspaceId}/dbs/{dbName}",method:"delete",...e,signal:t}),getDatabaseMetadata:(e,t)=>Da({url:"/workspaces/{workspaceId}/dbs/{dbName}",method:"get",...e,signal:t}),updateDatabaseMetadata:(e,t)=>Da({url:"/workspaces/{workspaceId}/dbs/{dbName}",method:"patch",...e,signal:t}),renameDatabase:(e,t)=>Da({url:"/workspaces/{workspaceId}/dbs/{dbName}/rename",method:"post",...e,signal:t}),getDatabaseGithubSettings:(e,t)=>Da({url:"/workspaces/{workspaceId}/dbs/{dbName}/github",method:"get",...e,signal:t}),updateDatabaseGithubSettings:(e,t)=>Da({url:"/workspaces/{workspaceId}/dbs/{dbName}/github",method:"put",...e,signal:t}),deleteDatabaseGithubSettings:(e,t)=>Da({url:"/workspaces/{workspaceId}/dbs/{dbName}/github",method:"delete",...e,signal:t}),listRegions:(e,t)=>Da({url:"/workspaces/{workspaceId}/regions",method:"get",...e,signal:t})}});class za{}function Fa(e,...t){if(!Ms(e))return;const n=function(e){return e.flatMap((e=>Object.entries(e).map((([e,t])=>{if("trim"===e){const{left:n=0,top:o=0,right:i=0,bottom:r=0}=t;return`${e}=${[o,i,r,n].join(";")}`}if("gravity"===e&&"object"==typeof t){const{x:n=.5,y:o=.5}=t;return`${e}=${[n,o].join("x")}`}return`${e}=${t}`})))).join(",")}(t),{hostname:o,pathname:i,search:r}=new URL(e),s=i.split("/"),a=s.findIndex((e=>"transform"===e));return`https://${o}${`/transform/${[(a>=0?s.splice(a,2):[])[1],n].filter(Ms).join(",")}`}${s.join("/")}${r}`}class Ha{constructor(e){this.id=e.id,this.name=e.name||"",this.mediaType=e.mediaType||"application/octet-stream",this.base64Content=e.base64Content,this.enablePublicUrl=e.enablePublicUrl??!1,this.signedUrlTimeout=e.signedUrlTimeout??300,this.size=e.size??0,this.version=e.version??1,this.url=e.url||"",this.signedUrl=e.signedUrl,this.attributes=e.attributes||{}}static fromBuffer(e,t={}){const n=e.toString("base64");return new Ha({...t,base64Content:n})}toBuffer(){if(!this.base64Content)throw new Error('File content is not available, please select property "base64Content" when querying the file');return Buffer.from(this.base64Content,"base64")}static fromArrayBuffer(e,t={}){const n=new Uint8Array(e);return this.fromUint8Array(n,t)}toArrayBuffer(){if(!this.base64Content)throw new Error('File content is not available, please select property "base64Content" when querying the file');const e=atob(this.base64Content);return new ArrayBuffer(e.length)}static fromUint8Array(e,t={}){let n="";for(let t=0;t<e.byteLength;t++)n+=String.fromCharCode(e[t]);const o=btoa(n);return new Ha({...t,base64Content:o})}toUint8Array(){if(!this.base64Content)throw new Error('File content is not available, please select property "base64Content" when querying the file');const e=atob(this.base64Content),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}static async fromBlob(e,t={}){const n=t.name??e.name,o=e.type,i=await e.arrayBuffer();return this.fromArrayBuffer(i,{...t,name:n,mediaType:o})}toBlob(){if(!this.base64Content)throw new Error('File content is not available, please select property "base64Content" when querying the file');const e=atob(this.base64Content),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return new Blob([t],{type:this.mediaType})}static fromString(e,t={}){const n=btoa(e);return new Ha({...t,base64Content:n})}toString(){if(!this.base64Content)throw new Error('File content is not available, please select property "base64Content" when querying the file');return atob(this.base64Content)}static fromBase64(e,t={}){return new Ha({...t,base64Content:e})}toBase64(){if(!this.base64Content)throw new Error('File content is not available, please select property "base64Content" when querying the file');return this.base64Content}transform(...e){return{url:Fa(this.url,...e),signedUrl:Fa(this.signedUrl,...e),metadataUrl:Fa(this.url,...e,{format:"json"}),metadataSignedUrl:Fa(this.signedUrl,...e,{format:"json"})}}}const ja=async e=>{if(!Ms(e))return null;const{id:t,name:n,mediaType:o,base64Content:i,enablePublicUrl:r,signedUrlTimeout:s}=await e;return As({id:t,name:n||void 0,mediaType:o,base64Content:i,enablePublicUrl:r,signedUrlTimeout:s})};function Ua(e){if(!Ms(e))return;if(!$s(e))return e;const t=Object.fromEntries(Object.entries(e).reduce(((e,[t,n])=>{if(!Ms(n))return e;if(Array.isArray(n)){const o=n.map((e=>Ua(e))).filter((e=>Ms(e)));return 0===o.length?e:[...e,[t,o]]}if($s(n)){const o=Ua(n);return Ms(o)?[...e,[t,o]]:e}return[...e,[t,n]]}),[]));return Object.keys(t).length>0?t:void 0}function Wa(e){if(!Ms(e))return e;if(Ps(e))return e;try{return JSON.stringify(e)}catch(t){return e}}function qa(e){try{return JSON.parse(e)}catch(t){return e}}var Va,Ga,Ya=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ka=(e,t,n)=>(Ya(e,t,"read from private field"),n?n.call(e):t.get(e)),Xa=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Za=(e,t,n,o)=>(Ya(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n);class Ja{constructor(e,t,n=[]){Xa(this,Va,void 0),Za(this,Va,e),this.meta=t,this.records=new tl(this,n)}async nextPage(e,t){return Ka(this,Va).getPaginated({pagination:{size:e,offset:t,after:this.meta.page.cursor}})}async previousPage(e,t){return Ka(this,Va).getPaginated({pagination:{size:e,offset:t,before:this.meta.page.cursor}})}async startPage(e,t){return Ka(this,Va).getPaginated({pagination:{size:e,offset:t,start:this.meta.page.cursor}})}async endPage(e,t){return Ka(this,Va).getPaginated({pagination:{size:e,offset:t,end:this.meta.page.cursor}})}hasNextPage(){return this.meta.page.more}}Va=new WeakMap;const Qa=1e3,el=20;Ga=new WeakMap;let tl=class e extends Array{constructor(...t){super(...e.parseConstructorParams(...t)),Xa(this,Ga,void 0),Za(this,Ga,$s(t[0]?.meta)?t[0]:{meta:{page:{cursor:"",more:!1}},records:[]})}static parseConstructorParams(...e){if(1===e.length&&"number"==typeof e[0])return new Array(e[0]);if(e.length<=2&&$s(e[0]?.meta)&&Array.isArray(e[1]??[])){const t=e[1]??e[0].records??[];return new Array(...t)}return new Array(...e)}toArray(){return new Array(...this)}toSerializable(){return JSON.parse(this.toString())}toString(){return JSON.stringify(this.toArray())}map(e,t){return this.toArray().map(e,t)}async nextPage(t,n){const o=await Ka(this,Ga).nextPage(t,n);return new e(o)}async previousPage(t,n){const o=await Ka(this,Ga).previousPage(t,n);return new e(o)}async startPage(t,n){const o=await Ka(this,Ga).startPage(t,n);return new e(o)}async endPage(t,n){const o=await Ka(this,Ga).endPage(t,n);return new e(o)}hasNextPage(){return Ka(this,Ga).meta.page.more}};var nl,ol,il,rl,sl,al=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ll=(e,t,n)=>(al(e,t,"read from private field"),n?n.call(e):t.get(e)),cl=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},hl=(e,t,n,o)=>(al(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),dl=(e,t,n)=>(al(e,t,"access private method"),n);const ul=class e{constructor(e,t,n,o){cl(this,rl),cl(this,nl,void 0),cl(this,ol,void 0),cl(this,il,{filter:{}}),this.meta={page:{cursor:"start",more:!0,size:el}},this.records=new tl(this,[]),hl(this,nl,t),hl(this,ol,e||this);const i=function(e,t){if(n=e.pagination,Ms(n)&&(Ms(n.start)||Ms(n.end)||Ms(n.after)||Ms(n.before)))return{...t,sort:void 0,filter:void 0};var n;return t}(n,o);ll(this,il).filter=n.filter??i?.filter??{},ll(this,il).filter.$any=n.filter?.$any??i?.filter?.$any,ll(this,il).filter.$all=n.filter?.$all??i?.filter?.$all,ll(this,il).filter.$not=n.filter?.$not??i?.filter?.$not,ll(this,il).filter.$none=n.filter?.$none??i?.filter?.$none,ll(this,il).sort=n.sort??i?.sort,ll(this,il).columns=n.columns??i?.columns,ll(this,il).consistency=n.consistency??i?.consistency,ll(this,il).pagination=n.pagination??i?.pagination,ll(this,il).cache=n.cache??i?.cache,ll(this,il).fetchOptions=n.fetchOptions??i?.fetchOptions,this.any=this.any.bind(this),this.all=this.all.bind(this),this.not=this.not.bind(this),this.filter=this.filter.bind(this),this.sort=this.sort.bind(this),this.none=this.none.bind(this),Object.defineProperty(this,"table",{enumerable:!1}),Object.defineProperty(this,"repository",{enumerable:!1})}getQueryOptions(){return ll(this,il)}key(){const{columns:e=[],filter:t={},sort:n=[],pagination:o={}}=ll(this,il);return function(e){try{return btoa(e)}catch(t){return Buffer.from(e).toString("base64")}}(JSON.stringify({columns:e,filter:t,sort:n,pagination:o}))}any(...t){const n=t.map((e=>e.getQueryOptions().filter??{}));return new e(ll(this,ol),ll(this,nl),{filter:{$any:n}},ll(this,il))}all(...t){const n=t.map((e=>e.getQueryOptions().filter??{}));return new e(ll(this,ol),ll(this,nl),{filter:{$all:n}},ll(this,il))}not(...t){const n=t.map((e=>e.getQueryOptions().filter??{}));return new e(ll(this,ol),ll(this,nl),{filter:{$not:n}},ll(this,il))}none(...t){const n=t.map((e=>e.getQueryOptions().filter??{}));return new e(ll(this,ol),ll(this,nl),{filter:{$none:n}},ll(this,il))}filter(t,n){if(1===arguments.length){const n=Object.entries(t??{}).map((([e,t])=>({[e]:dl(this,rl,sl).call(this,e,t)}))),o=Ls([ll(this,il).filter?.$all].flat().concat(n));return new e(ll(this,ol),ll(this,nl),{filter:{$all:o}},ll(this,il))}{const o=Ms(t)&&Ms(n)?[{[t]:dl(this,rl,sl).call(this,t,n)}]:void 0,i=Ls([ll(this,il).filter?.$all].flat().concat(o));return new e(ll(this,ol),ll(this,nl),{filter:{$all:i}},ll(this,il))}}sort(t,n="asc"){const o=[...[ll(this,il).sort??[]].flat(),{column:t,direction:n}];return new e(ll(this,ol),ll(this,nl),{sort:o},ll(this,il))}select(t){return new e(ll(this,ol),ll(this,nl),{columns:t},ll(this,il))}getPaginated(t={}){const n=new e(ll(this,ol),ll(this,nl),t,ll(this,il));return ll(this,ol).query(n)}async*[Symbol.asyncIterator](){for await(const[e]of this.getIterator({batchSize:1}))yield e}async*getIterator(e={}){const{batchSize:t=1}=e;let n=await this.getPaginated({...e,pagination:{size:t,offset:0}}),o=n.hasNextPage();for(yield n.records;o;)n=await n.nextPage(),o=n.hasNextPage(),yield n.records}async getMany(e={}){const{pagination:t={},...n}=e,{size:o=el,offset:i}=t,r=o<=Qa?o:Qa;let s=await this.getPaginated({...n,pagination:{size:r,offset:i}});const a=[...s.records];for(;s.hasNextPage()&&a.length<o;)s=await s.nextPage(),a.push(...s.records);s.hasNextPage()&&void 0===e.pagination?.size&&console.trace("Calling getMany does not return all results. Paginate to get all results or call getAll.");return new tl(s,a.slice(0,o))}async getAll(e={}){const{batchSize:t=Qa,...n}=e,o=[];for await(const e of this.getIterator({...n,batchSize:t}))o.push(...e);return o}async getFirst(e={}){return(await this.getMany({...e,pagination:{size:1}}))[0]??null}async getFirstOrThrow(e={}){const t=await this.getMany({...e,pagination:{size:1}});if(void 0===t[0])throw new Error("No results found.");return t[0]}async summarize(t={}){const{summaries:n,summariesFilter:o,...i}=t,r=new e(ll(this,ol),ll(this,nl),i,ll(this,il));return ll(this,ol).summarizeTable(r,n,o)}cache(t){return new e(ll(this,ol),ll(this,nl),{cache:t},ll(this,il))}nextPage(e,t){return this.startPage(e,t)}previousPage(e,t){return this.startPage(e,t)}startPage(e,t){return this.getPaginated({pagination:{size:e,offset:t}})}endPage(e,t){return this.getPaginated({pagination:{size:e,offset:t,before:"end"}})}hasNextPage(){return this.meta.page.more}};nl=new WeakMap,ol=new WeakMap,il=new WeakMap,rl=new WeakSet,sl=function(e,t){const n=ll(this,nl).schema?.columns.find((({name:t})=>t===e))?.type;return"multiple"===n&&(Ps(t)||Ns(t))?{$includes:t}:"link"===n&&$s(t)&&Ps(t.id)?t.id:t};let pl=ul;function fl(e){return $s(e)&&Ps(e?.id)}function gl(e){return!!Array.isArray(e)&&e.every((e=>"string"==typeof e||"object"==typeof e&&function(e){return $s(e)&&Ps(e.name)}(e)))}function ml(e){return $s(e)&&Object.entries(e).every((([e,t])=>"*"===e?"random"===t:"asc"===t||"desc"===t))}function bl(e){if(Ps(e))return{[e]:"asc"};if(Array.isArray(e))return e.map((e=>bl(e)));if(ml(e))return e;if(function(e){return $s(e)&&!ml(e)&&void 0!==e.column}(e))return{[e.column]:e.direction??"asc"};throw new Error(`Invalid sort filter: ${e}`)}var wl,vl,yl,kl,xl,Cl,El,Tl,Sl,Bl,Il,_l,Ll,Al,Ol,$l,Ml,Pl,Nl,Rl,Dl,zl,Fl,Hl,jl,Ul,Wl,ql,Vl,Gl,Yl=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Kl=(e,t,n)=>(Yl(e,t,"read from private field"),n?n.call(e):t.get(e)),Xl=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Zl=(e,t,n,o)=>(Yl(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),Jl=(e,t,n)=>(Yl(e,t,"access private method"),n);const Ql=1e3;class ec extends pl{constructor(e){super(null,{name:e.table,schema:e.schemaTables?.find((t=>t.name===e.table))},{}),Xl(this,El),Xl(this,Sl),Xl(this,Il),Xl(this,Ll),Xl(this,Ol),Xl(this,Ml),Xl(this,Nl),Xl(this,Dl),Xl(this,Fl),Xl(this,jl),Xl(this,Wl),Xl(this,Vl),Xl(this,wl,void 0),Xl(this,vl,void 0),Xl(this,yl,void 0),Xl(this,kl,void 0),Xl(this,xl,void 0),Xl(this,Cl,void 0),Zl(this,wl,e.table),Zl(this,yl,e.db),Zl(this,kl,e.pluginOptions.cache),Zl(this,xl,e.schemaTables),Zl(this,vl,(()=>({...e.pluginOptions,sessionID:ea()})));const t=e.pluginOptions.trace??ms;Zl(this,Cl,(async(e,n,o={})=>t(e,n,{...o,[vs]:Kl(this,wl),[bs]:"sdk-operation",[ws]:sa})))}async create(e,t,n,o){return Kl(this,Cl).call(this,"create",(async()=>{const i=ic(t,n,o);if(Array.isArray(e)){if(0===e.length)return[];const n=await Jl(this,Il,_l).call(this,e,{ifVersion:i,createOnly:!0}),o=gl(t)?t:["*"];return await this.read(n,o)}if(Ps(e)&&$s(t)){if(""===e)throw new Error("The id can't be empty");const o=gl(n)?n:void 0;return await Jl(this,Sl,Bl).call(this,e,t,o,{createOnly:!0,ifVersion:i})}if($s(e)&&Ps(e.id)){if(""===e.id)throw new Error("The id can't be empty");const n=gl(t)?t:void 0;return await Jl(this,Sl,Bl).call(this,e.id,{...e,id:void 0},n,{createOnly:!0,ifVersion:i})}if($s(e)){const n=gl(t)?t:void 0;return Jl(this,El,Tl).call(this,e,n)}throw new Error("Invalid arguments for create method")}))}async read(e,t){return Kl(this,Cl).call(this,"read",(async()=>{const n=gl(t)?t:["*"];if(Array.isArray(e)){if(0===e.length)return[];const t=e.map((e=>nc(e))),o=(await this.getAll({filter:{id:{$any:Ls(t)}},columns:n})).reduce(((e,t)=>(e[t.id]=t,e)),{});return t.map((e=>o[e??""]??null))}const o=nc(e);if(o)try{const e=await Ta({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:Kl(this,wl),recordId:o},queryParams:{columns:n},...Kl(this,vl).call(this)}),t=await Jl(this,Wl,ql).call(this);return tc(Kl(this,yl),t,Kl(this,wl),e,n)}catch(e){if($s(e)&&404===e.status)return null;throw e}return null}))}async readOrThrow(e,t){return Kl(this,Cl).call(this,"readOrThrow",(async()=>{const n=await this.read(e,t);if(Array.isArray(n)){const t=Ls(e.filter(((e,t)=>null===n[t])).map((e=>nc(e))));if(t.length>0)throw new Error(`Could not find records with ids: ${t.join(", ")}`);return n}if(null===n){const t=nc(e)??"unknown";throw new Error(`Record with id ${t} not found`)}return n}))}async update(e,t,n,o){return Kl(this,Cl).call(this,"update",(async()=>{const i=ic(t,n,o);if(Array.isArray(e)){if(0===e.length)return[];const n=await this.read(e,["id"]),o=e.filter(((e,t)=>null!==n[t]));await Jl(this,Ol,$l).call(this,o,{ifVersion:i,upsert:!1});const r=gl(t)?t:["*"];return await this.read(e,r)}try{if(Ps(e)&&$s(t)){const o=gl(n)?n:void 0;return await Jl(this,Ll,Al).call(this,e,t,o,{ifVersion:i})}if($s(e)&&Ps(e.id)){const n=gl(t)?t:void 0;return await Jl(this,Ll,Al).call(this,e.id,{...e,id:void 0},n,{ifVersion:i})}}catch(e){if(422===e.status)return null;throw e}throw new Error("Invalid arguments for update method")}))}async updateOrThrow(e,t,n,o){return Kl(this,Cl).call(this,"updateOrThrow",(async()=>{const i=await this.update(e,t,n,o);if(Array.isArray(i)){const t=Ls(e.filter(((e,t)=>null===i[t])).map((e=>nc(e))));if(t.length>0)throw new Error(`Could not find records with ids: ${t.join(", ")}`);return i}if(null===i){const t=nc(e)??"unknown";throw new Error(`Record with id ${t} not found`)}return i}))}async createOrUpdate(e,t,n,o){return Kl(this,Cl).call(this,"createOrUpdate",(async()=>{const i=ic(t,n,o);if(Array.isArray(e)){if(0===e.length)return[];await Jl(this,Ol,$l).call(this,e,{ifVersion:i,upsert:!0});const n=gl(t)?t:["*"];return await this.read(e,n)}if(Ps(e)&&$s(t)){if(""===e)throw new Error("The id can't be empty");const o=gl(n)?n:void 0;return await Jl(this,Ml,Pl).call(this,e,t,o,{ifVersion:i})}if($s(e)&&Ps(e.id)){if(""===e.id)throw new Error("The id can't be empty");const t=gl(n)?n:void 0;return await Jl(this,Ml,Pl).call(this,e.id,{...e,id:void 0},t,{ifVersion:i})}if(!Ms(e)&&$s(t))return await this.create(t,n);if($s(e)&&!Ms(e.id))return await this.create(e,t);throw new Error("Invalid arguments for createOrUpdate method")}))}async createOrReplace(e,t,n,o){return Kl(this,Cl).call(this,"createOrReplace",(async()=>{const i=ic(t,n,o);if(Array.isArray(e)){if(0===e.length)return[];const n=await Jl(this,Il,_l).call(this,e,{ifVersion:i,createOnly:!1}),o=gl(t)?t:["*"];return await this.read(n,o)}if(Ps(e)&&$s(t)){if(""===e)throw new Error("The id can't be empty");const o=gl(n)?n:void 0;return await Jl(this,Sl,Bl).call(this,e,t,o,{createOnly:!1,ifVersion:i})}if($s(e)&&Ps(e.id)){if(""===e.id)throw new Error("The id can't be empty");const t=gl(n)?n:void 0;return await Jl(this,Sl,Bl).call(this,e.id,{...e,id:void 0},t,{createOnly:!1,ifVersion:i})}if(!Ms(e)&&$s(t))return await this.create(t,n);if($s(e)&&!Ms(e.id))return await this.create(e,t);throw new Error("Invalid arguments for createOrReplace method")}))}async delete(e,t){return Kl(this,Cl).call(this,"delete",(async()=>{if(Array.isArray(e)){if(0===e.length)return[];const n=e.map((e=>{if(Ps(e))return e;if(Ps(e.id))return e.id;throw new Error("Invalid arguments for delete method")})),o=gl(t)?t:["*"],i=await this.read(e,o);return await Jl(this,Dl,zl).call(this,n),i}if(Ps(e))return Jl(this,Nl,Rl).call(this,e,t);if($s(e)&&Ps(e.id))return Jl(this,Nl,Rl).call(this,e.id,t);throw new Error("Invalid arguments for delete method")}))}async deleteOrThrow(e,t){return Kl(this,Cl).call(this,"deleteOrThrow",(async()=>{const n=await this.delete(e,t);if(Array.isArray(n)){const t=Ls(e.filter(((e,t)=>null===n[t])).map((e=>nc(e))));if(t.length>0)throw new Error(`Could not find records with ids: ${t.join(", ")}`);return n}if(null===n){const t=nc(e)??"unknown";throw new Error(`Record with id ${t} not found`)}return n}))}async search(e,t={}){return Kl(this,Cl).call(this,"search",(async()=>{const{records:n}=await Oa({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:Kl(this,wl)},body:{query:e,fuzziness:t.fuzziness,prefix:t.prefix,highlight:t.highlight,filter:t.filter,boosters:t.boosters,page:t.page,target:t.target},...Kl(this,vl).call(this)}),o=await Jl(this,Wl,ql).call(this);return n.map((e=>tc(Kl(this,yl),o,Kl(this,wl),e,["*"])))}))}async vectorSearch(e,t,n){return Kl(this,Cl).call(this,"vectorSearch",(async()=>{const{records:o}=await $a({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:Kl(this,wl)},body:{column:e,queryVector:t,similarityFunction:n?.similarityFunction,size:n?.size,filter:n?.filter},...Kl(this,vl).call(this)}),i=await Jl(this,Wl,ql).call(this);return o.map((e=>tc(Kl(this,yl),i,Kl(this,wl),e,["*"])))}))}async aggregate(e,t){return Kl(this,Cl).call(this,"aggregate",(async()=>await Na({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:Kl(this,wl)},body:{aggs:e,filter:t},...Kl(this,vl).call(this)})))}async query(e){return Kl(this,Cl).call(this,"query",(async()=>{const t=await Jl(this,jl,Ul).call(this,e);if(t)return new Ja(e,t.meta,t.records);const n=e.getQueryOptions(),{meta:o,records:i}=await La({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:Kl(this,wl)},body:{filter:Ua(n.filter),sort:void 0!==n.sort?bl(n.sort):void 0,page:n.pagination,columns:n.columns??["*"],consistency:n.consistency},fetchOptions:n.fetchOptions,...Kl(this,vl).call(this)}),r=await Jl(this,Wl,ql).call(this),s=i.map((e=>tc(Kl(this,yl),r,Kl(this,wl),e,n.columns??["*"])));return await Jl(this,Fl,Hl).call(this,e,o,s),new Ja(e,o,s)}))}async summarizeTable(e,t,n){return Kl(this,Cl).call(this,"summarize",(async()=>{const o=e.getQueryOptions(),i=await Pa({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:Kl(this,wl)},body:{filter:Ua(o.filter),sort:void 0!==o.sort?bl(o.sort):void 0,columns:o.columns,consistency:o.consistency,page:void 0!==o.pagination?.size?{size:o.pagination?.size}:void 0,summaries:t,summariesFilter:n},...Kl(this,vl).call(this)}),r=await Jl(this,Wl,ql).call(this);return{...i,summaries:i.summaries.map((e=>tc(Kl(this,yl),r,Kl(this,wl),e,o.columns??[])))}}))}ask(e,t){const n=t?.sessionId?{message:e}:{question:e},o={pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:Kl(this,wl),sessionId:t?.sessionId},body:{...n,rules:t?.rules,searchType:t?.searchType,search:"keyword"===t?.searchType?t?.search:void 0,vectorSearch:"vector"===t?.searchType?t?.vectorSearch:void 0},...Kl(this,vl).call(this)};if(!t?.onMessage)return Ma(o);!function({url:e,method:t,body:n,headers:o,pathParams:i,queryParams:r,fetch:s,apiKey:a,endpoint:l,apiUrl:c,workspacesApiUrl:h,onMessage:d,onError:u,onClose:p,signal:f,clientID:g,sessionID:m,clientName:b,xataAgentExtra:w}){const v=pa({endpoint:l,path:e,workspacesApiUrl:h,pathParams:i,apiUrl:c}),y=ua(v,r,i);ia(y.includes("localhost")?y.replace(/^[^.]+\./,"http://"):y,{method:t,body:JSON.stringify(n),fetch:s,signal:f,headers:{"X-Xata-Client-ID":g??ma,"X-Xata-Session-ID":m??ea(),"X-Xata-Agent":Ls([["client","TS_SDK"],["version",sa],Ms(b)?["service",b]:void 0,...Object.entries(w??{})]).map((([e,t])=>`${e}=${t}`)).join("; "),...o,Authorization:`Bearer ${a}`,"Content-Type":"application/json"},onmessage(e){d?.(JSON.parse(e.data))},onerror(e){u?.(JSON.parse(e.data))},onclose(){p?.()}})}({endpoint:"dataPlane",url:"/db/{dbBranchName}/tables/{tableName}/ask/{sessionId}",method:"POST",onMessage:e=>{t.onMessage?.({answer:e.text,records:e.records})},...o})}}wl=new WeakMap,vl=new WeakMap,yl=new WeakMap,kl=new WeakMap,xl=new WeakMap,Cl=new WeakMap,El=new WeakSet,Tl=async function(e,t=["*"]){const n=await Jl(this,Vl,Gl).call(this,e),o=await ka({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:Kl(this,wl)},queryParams:{columns:t},body:n,...Kl(this,vl).call(this)}),i=await Jl(this,Wl,ql).call(this);return tc(Kl(this,yl),i,Kl(this,wl),o,t)},Sl=new WeakSet,Bl=async function(e,t,n=["*"],{createOnly:o,ifVersion:i}){if(!e)return null;const r=await Jl(this,Vl,Gl).call(this,t),s=await Sa({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:Kl(this,wl),recordId:e},body:r,queryParams:{createOnly:o,columns:n,ifVersion:i},...Kl(this,vl).call(this)}),a=await Jl(this,Wl,ql).call(this);return tc(Kl(this,yl),a,Kl(this,wl),s,n)},Il=new WeakSet,_l=async function(e,{createOnly:t,ifVersion:n}){const o=Ds(await zs(e,(async e=>{const o=await Jl(this,Vl,Gl).call(this,e);return{insert:{table:Kl(this,wl),record:o,createOnly:t,ifVersion:n}}})),Ql),i=[];for(const e of o){const{results:t}=await ya({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}"},body:{operations:e},...Kl(this,vl).call(this)});for(const e of t)"insert"===e.operation?i.push(e.id):i.push(null)}return i},Ll=new WeakSet,Al=async function(e,t,n=["*"],{ifVersion:o}){if(!e)return null;const{id:i,...r}=await Jl(this,Vl,Gl).call(this,t);try{const t=await Ba({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:Kl(this,wl),recordId:e},queryParams:{columns:n,ifVersion:o},body:r,...Kl(this,vl).call(this)}),i=await Jl(this,Wl,ql).call(this);return tc(Kl(this,yl),i,Kl(this,wl),t,n)}catch(e){if($s(e)&&404===e.status)return null;throw e}},Ol=new WeakSet,$l=async function(e,{ifVersion:t,upsert:n}){const o=Ds(await zs(e,(async({id:e,...o})=>{const i=await Jl(this,Vl,Gl).call(this,o);return{update:{table:Kl(this,wl),id:e,ifVersion:t,upsert:n,fields:i}}})),Ql),i=[];for(const e of o){const{results:t}=await ya({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}"},body:{operations:e},...Kl(this,vl).call(this)});for(const e of t)"update"===e.operation?i.push(e.id):i.push(null)}return i},Ml=new WeakSet,Pl=async function(e,t,n=["*"],{ifVersion:o}){if(!e)return null;const i=await Ia({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:Kl(this,wl),recordId:e},queryParams:{columns:n,ifVersion:o},body:t,...Kl(this,vl).call(this)}),r=await Jl(this,Wl,ql).call(this);return tc(Kl(this,yl),r,Kl(this,wl),i,n)},Nl=new WeakSet,Rl=async function(e,t=["*"]){if(!e)return null;try{const n=await _a({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:Kl(this,wl),recordId:e},queryParams:{columns:t},...Kl(this,vl).call(this)}),o=await Jl(this,Wl,ql).call(this);return tc(Kl(this,yl),o,Kl(this,wl),n,t)}catch(e){if($s(e)&&404===e.status)return null;throw e}},Dl=new WeakSet,zl=async function(e){const t=Ds(Ls(e).map((e=>({delete:{table:Kl(this,wl),id:e}}))),Ql);for(const e of t)await ya({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}"},body:{operations:e},...Kl(this,vl).call(this)})},Fl=new WeakSet,Hl=async function(e,t,n){await(Kl(this,kl)?.set(`query_${Kl(this,wl)}:${e.key()}`,{date:new Date,meta:t,records:n}))},jl=new WeakSet,Ul=async function(e){const t=`query_${Kl(this,wl)}:${e.key()}`,n=await(Kl(this,kl)?.get(t));if(!n)return null;const o=Kl(this,kl)?.defaultQueryTTL??-1,{cache:i=o}=e.getQueryOptions();if(i<0)return null;return n.date.getTime()+i<Date.now()?null:n},Wl=new WeakSet,ql=async function(){if(Kl(this,xl))return Kl(this,xl);const{schema:e}=await va({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}"},...Kl(this,vl).call(this)});return Zl(this,xl,e.tables),e.tables},Vl=new WeakSet,Gl=async function(e){const t=(await Jl(this,Wl,ql).call(this)).find((e=>e.name===Kl(this,wl)));if(!t)throw new Error(`Table ${Kl(this,wl)} not found in schema`);const n={};for(const[o,i]of Object.entries(e)){if("xata"===o)continue;const e=t.columns.find((e=>e.name===o))?.type;switch(e){case"link":n[o]=fl(i)?i.id:i;break;case"datetime":n[o]=i instanceof Date?i.toISOString():i;break;case"file":n[o]=await ja(i);break;case"file[]":n[o]=await zs(i,(e=>ja(e)));break;case"json":n[o]=Wa(i);break;default:n[o]=i}}return n};const tc=(e,t,n,o,i)=>{const r={},{xata:s,...a}=o??{};Object.assign(r,a);const{columns:l}=t.find((({name:e})=>e===n))??{};l||console.error(`Table ${n} not found in schema`);for(const n of l??[]){if(!oc(i,n))continue;const o=r[n.name];switch(n.type){case"datetime":{const e=void 0!==o?new Date(o):null;null!==e&&isNaN(e.getTime())?console.error(`Failed to parse date ${o} for field ${n.name}`):r[n.name]=e;break}case"link":{const s=n.link?.table;if(s)if($s(o)){const a=i.reduce(((e,t)=>{if(t===n.name)return[...e,"*"];if(Ps(t)&&t.startsWith(`${n.name}.`)){const[,...n]=t.split(".");return[...e,n.join(".")]}return e}),[]);r[n.name]=tc(e,t,s,o,a)}else r[n.name]=null;else console.error(`Failed to parse link for field ${n.name}`);break}case"file":r[n.name]=Ms(o)?new Ha(o):null;break;case"file[]":r[n.name]=o?.map((e=>new Ha(e)))??null;break;case"json":r[n.name]=qa(o);break;default:r[n.name]=o??null,!0===n.notNull&&null===o&&console.error(`Parse error, column ${n.name} is non nullable and value resolves null`)}}const c={...r},h=void 0!==s?{...s,createdAt:new Date(s.createdAt),updatedAt:new Date(s.updatedAt)}:void 0;c.read=function(t){return e[n].read(c.id,t)},c.update=function(t,o,i){const r=gl(o)?o:["*"],s=ic(o,i);return e[n].update(c.id,t,r,{ifVersion:s})},c.replace=function(t,o,i){const r=gl(o)?o:["*"],s=ic(o,i);return e[n].createOrReplace(c.id,t,r,{ifVersion:s})},c.delete=function(){return e[n].delete(c.id)},void 0!==h&&(c.xata=Object.freeze(h)),c.getMetadata=function(){return c.xata},c.toSerializable=function(){return JSON.parse(JSON.stringify(c))},c.toString=function(){return JSON.stringify(c)};for(const e of["read","update","replace","delete","getMetadata","toSerializable","toString"])Object.defineProperty(c,e,{enumerable:!1});return Object.freeze(c),c};function nc(e){return Ps(e)?e:$s(e)&&Ps(e.id)?e.id:void 0}function oc(e,t){return!!e.includes("*")||e.filter((e=>Ps(e)&&e.startsWith(t.name))).length>0}function ic(...e){for(const t of e)if($s(t)&&Rs(t.ifVersion))return t.ifVersion}var rc,sc=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ac=(e,t,n)=>(sc(e,t,"read from private field"),n?n.call(e):t.get(e));class lc{constructor(e={}){var t,n,o,i;((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,rc,void 0),t=this,n=rc,o=new Map,sc(t,n,"write to private field"),i?i.call(t,o):n.set(t,o),this.capacity=e.max??500,this.defaultQueryTTL=e.defaultQueryTTL??6e4}async getAll(){return Object.fromEntries(ac(this,rc))}async get(e){return ac(this,rc).get(e)??null}async set(e,t){if(await this.delete(e),ac(this,rc).set(e,t),ac(this,rc).size>this.capacity){const e=ac(this,rc).keys().next().value;await this.delete(e)}}async delete(e){ac(this,rc).delete(e)}async clear(){return ac(this,rc).clear()}}rc=new WeakMap;var cc,hc,dc=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},uc=(e,t,n)=>(dc(e,t,"read from private field"),n?n.call(e):t.get(e)),pc=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)};class fc extends za{constructor(e){var t,n,o,i;super(),pc(this,cc,{}),pc(this,hc,void 0),o=e,dc(t=this,n=hc,"write to private field"),i?i.call(t,o):n.set(t,o)}build(e){const t=new Proxy({},{get:(n,o)=>{if(!Ps(o))throw new Error("Invalid table name");return void 0===uc(this,cc)[o]&&(uc(this,cc)[o]=new ec({db:t,pluginOptions:e,table:o,schemaTables:uc(this,hc)})),uc(this,cc)[o]}}),n=uc(this,hc)?.map((({name:e})=>e))??[];for(const o of n)t[o]=new ec({db:t,pluginOptions:e,table:o,schemaTables:uc(this,hc)});return t}}cc=new WeakMap,hc=new WeakMap;class gc extends za{build(e){return{download:async t=>{const{table:n,record:o,column:i,fileId:r=""}=t??{};return await xa({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:n??"",recordId:o??"",columnName:i??"",fileId:r},...e,rawResponse:!0})},upload:async(t,n,o)=>{const{table:i,record:r,column:s,fileId:a=""}=t??{},l=await n,c=o?.mediaType||function(e){if("string"==typeof e)return"text/plain";if("mediaType"in e)return e.mediaType;if(Os(e))return e.type;try{return e.type}catch(e){}return"application/octet-stream"}(l),h=l instanceof Ha?l.toBlob():l;return await Ca({...e,pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:i??"",recordId:r??"",columnName:s??"",fileId:a},body:h,headers:{"Content-Type":c}})},delete:async t=>{const{table:n,record:o,column:i,fileId:r=""}=t??{};return await Ea({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:n??"",recordId:o??"",columnName:i??"",fileId:r},...e})}}}}var mc,bc,wc,vc,yc,kc=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},xc=(e,t,n)=>(kc(e,t,"read from private field"),n?n.call(e):t.get(e)),Cc=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ec=(e,t,n,o)=>(kc(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),Tc=(e,t,n)=>(kc(e,t,"access private method"),n);class Sc extends za{constructor(e,t){super(),this.db=e,Cc(this,bc),Cc(this,vc),Cc(this,mc,void 0),Ec(this,mc,t)}build(e){return{all:async(t,n={})=>{const o=await Tc(this,bc,wc).call(this,t,n,e),i=await Tc(this,vc,yc).call(this,e);return o.map((e=>{const{table:t="orphan"}=e.xata;return{table:t,record:tc(this.db,i,t,e,["*"])}}))},byTable:async(t,n={})=>{const o=await Tc(this,bc,wc).call(this,t,n,e),i=await Tc(this,vc,yc).call(this,e);return o.reduce(((e,t)=>{const{table:n="orphan"}=t.xata,o=e[n]??[],r=tc(this.db,i,n,t,["*"]);return{...e,[n]:[...o,r]}}),{})}}}}function Bc(e){let t="{";for(let n=0;n<e.length;n++)n>0&&(t+=","),null===e[n]||void 0===e[n]?t+="NULL":Array.isArray(e[n])?t+=Bc(e[n]):e[n]instanceof Buffer?t+="\\\\x"+e[n].toString("hex"):t+='"'+Ic(e[n]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"';return t+="}",t}function Ic(e){if(!Ms(e))return null;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return Bc(e);if($s(e))return JSON.stringify(e);try{return e.toString()}catch(t){return e}}mc=new WeakMap,bc=new WeakSet,wc=async function(e,t,n){const{tables:o,fuzziness:i,highlight:r,prefix:s,page:a}=t??{},{records:l}=await Aa({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}"},body:{tables:o,query:e,fuzziness:i,prefix:s,highlight:r,page:a},...n});return l},vc=new WeakSet,yc=async function(e){if(xc(this,mc))return xc(this,mc);const{schema:t}=await va({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}"},...e});return Ec(this,mc,t.tables),t.tables};class _c extends za{build(e){return async(t,...n)=>{const{statement:o,params:i,consistency:r}=function(e,t){if(Ps(e))return{statement:e,params:t?.map((e=>Ic(e)))};if(Ns(e))return{statement:e.reduce(((e,n,o)=>e+n+(o<(t?.length??0)?"$"+(o+1):"")),""),params:t?.map((e=>Ic(e)))};if($s(e)){const{statement:t,params:n,consistency:o}=e;return{statement:t,params:n?.map((e=>Ic(e))),consistency:o}}throw new Error("Invalid query")}(t,n),{records:s,warning:a}=await Ra({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}"},body:{statement:o,params:i,consistency:r},...e});return{records:s,warning:a}}}}class Lc extends za{build(e){return{run:async t=>await ya({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}"},body:{operations:t},...e})}}}var Ac=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Oc=(e,t,n)=>(Ac(e,t,"read from private field"),n?n.call(e):t.get(e)),$c=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Mc=(e,t,n)=>(Ac(e,t,"access private method"),n);const Pc=e=>{var t,n,o,i,r,s;return s=class{constructor(s={},a){$c(this,n),$c(this,i),$c(this,t,void 0);const l=Mc(this,n,o).call(this,s);var c,h,d,u;d=l,Ac(c=this,h=t,"write to private field"),u?u.call(c,d):h.set(c,d);const p={...Mc(this,i,r).call(this,l),cache:l.cache,host:l.host},f=new fc(a).build(p),g=new Sc(f,a).build(p),m=(new Lc).build(p),b=(new _c).build(p),w=(new gc).build(p);this.db=f,this.search=g,this.transactions=m,this.sql=b,this.files=w;for(const[t,n]of Object.entries(e??{}))void 0!==n&&(this[t]=n.build(p))}async getConfig(){return{databaseURL:Oc(this,t).databaseURL,branch:Oc(this,t).branch}}},t=new WeakMap,n=new WeakSet,o=function(e){const t=e?.enableBrowser??function(){try{if($s(process)&&$s(process.env)&&void 0!==process.env.XATA_ENABLE_BROWSER)return"true"===process.env.XATA_ENABLE_BROWSER}catch(e){}try{if($s(Deno)&&$s(Deno.env)&&void 0!==Deno.env.get("XATA_ENABLE_BROWSER"))return"true"===Deno.env.get("XATA_ENABLE_BROWSER")}catch(e){}try{return!0===XATA_ENABLE_BROWSER||"true"===XATA_ENABLE_BROWSER}catch(e){return}}()??!1;if("undefined"!=typeof window&&"undefined"==typeof Deno&&!t)throw new Error("You are trying to use Xata from the browser, which is potentially a non-secure environment. If you understand the security concerns, such as leaking your credentials, pass `enableBrowser: true` to the client options to remove this error.");const n=Qs(e?.fetch),o=e?.databaseURL||function(){try{const{databaseURL:e}=Fs();return e}catch(e){return}}(),i=e?.apiKey||function(){try{const{apiKey:e}=Fs();return e}catch(e){return}}(),r=e?.cache??new lc({defaultQueryTTL:0}),s=e?.trace??ms,a=e?.clientName,l=e?.host??"production",c=e?.xataAgentExtra;if(!i)throw new Error("Option apiKey is required");if(!o)throw new Error("Option databaseURL is required");const h=function(){try{const{branch:e}=Fs();return e}catch(e){return}}(),d=function(){try{const{deployPreview:e,deployPreviewBranch:t,vercelGitCommitRef:n,vercelGitRepoOwner:o}=Fs();return t||("vercel"===e?n&&o?function({org:e,branch:t}){return`preview-${e}-${t}`}({org:o,branch:n}):void console.warn("XATA_PREVIEW=vercel but VERCEL_GIT_COMMIT_REF or VERCEL_GIT_REPO_OWNER is not valid"):void 0)}catch(e){return}}(),u=e?.branch||d||h||"main";return d&&u!==d?console.warn(`Ignoring preview branch ${d} because branch option was passed to the client constructor with value ${u}`):h&&u!==h?console.warn(`Ignoring branch ${h} because branch option was passed to the client constructor with value ${u}`):d&&h&&d!==h?console.warn(`Ignoring preview branch ${d} and branch ${h} because branch option was passed to the client constructor with value ${u}`):d||h||void 0!==e?.branch||console.warn(`No branch was passed to the client constructor. Using default branch ${u}. You can set the branch with the environment variable XATA_BRANCH or by passing the branch option to the client constructor.`),{fetch:n,databaseURL:o,apiKey:i,branch:u,cache:r,trace:s,host:l,clientID:ea(),enableBrowser:t,clientName:a,xataAgentExtra:c}},i=new WeakSet,r=function({fetch:e,apiKey:t,databaseURL:n,branch:o,trace:i,clientID:r,clientName:s,xataAgentExtra:a}){return{fetch:e,apiKey:t,apiUrl:"",workspacesApiUrl:(e,t)=>{const i=t.dbBranchName??t.branch,r=e.replace(/^\/db\/[^/]+/,void 0!==i?`:${o}`:"");return n+r},trace:i,clientID:r,clientName:s,xataAgentExtra:a}},s};Pc();const Nc=[{name:"Languages",columns:[{name:"Name",type:"string"},{name:"Owner",type:"string"},{name:"File",type:"json"}]}],Rc=Pc(),Dc={databaseURL:"https://Saturnine-s-workspace-cvl2j3.us-east-1.xata.sh/db/Lexicanter"};const zc=new class extends Rc{constructor(e){super(Object.assign(Object.assign({},Dc),e),Nc)}}({branch:"main",apiKey:"xau_IXRLBDCqEyeSvgHvN5FmWsOvu26aWd1D2",enableBrowser:!0});var Fc,Hc="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};function jc(e,t){var n={seen:[],stylize:Wc};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Yc(t)?n.showHidden=t:t&&function(e,t){if(!t||!Qc(t))return e;var n=Object.keys(t),o=n.length;for(;o--;)e[n[o]]=t[n[o]]}(n,t),Zc(n.showHidden)&&(n.showHidden=!1),Zc(n.depth)&&(n.depth=2),Zc(n.colors)&&(n.colors=!1),Zc(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Uc),qc(n,e,n.depth)}function Uc(e,t){var n=jc.styles[t];return n?"["+jc.colors[n][0]+"m"+e+"["+jc.colors[n][1]+"m":e}function Wc(e,t){return e}function qc(e,t,n){if(e.customInspect&&t&&nh(t.inspect)&&t.inspect!==jc&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(n,e);return Xc(o)||(o=qc(e,o,n)),o}var i=function(e,t){if(Zc(t))return e.stylize("undefined","undefined");if(Xc(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(o=t,"number"==typeof o)return e.stylize(""+t,"number");var o;if(Yc(t))return e.stylize(""+t,"boolean");if(Kc(t))return e.stylize("null","null")}(e,t);if(i)return i;var r=Object.keys(t),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(r);if(e.showHidden&&(r=Object.getOwnPropertyNames(t)),th(t)&&(r.indexOf("message")>=0||r.indexOf("description")>=0))return Vc(t);if(0===r.length){if(nh(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(Jc(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(eh(t))return e.stylize(Date.prototype.toString.call(t),"date");if(th(t))return Vc(t)}var l,c,h="",d=!1,u=["{","}"];(l=t,Array.isArray(l)&&(d=!0,u=["[","]"]),nh(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]");return Jc(t)&&(h=" "+RegExp.prototype.toString.call(t)),eh(t)&&(h=" "+Date.prototype.toUTCString.call(t)),th(t)&&(h=" "+Vc(t)),0!==r.length||d&&0!=t.length?n<0?Jc(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=d?function(e,t,n,o,i){for(var r=[],s=0,a=t.length;s<a;++s)ih(t,String(s))?r.push(Gc(e,t,n,o,String(s),!0)):r.push("");return i.forEach((function(i){i.match(/^\d+$/)||r.push(Gc(e,t,n,o,i,!0))})),r}(e,t,n,s,r):r.map((function(o){return Gc(e,t,n,s,o,d)})),e.seen.pop(),function(e,t,n){var o=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(o>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,h,u)):u[0]+h+u[1]}function Vc(e){return"["+Error.prototype.toString.call(e)+"]"}function Gc(e,t,n,o,i,r){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),ih(o,i)||(s="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(a=Kc(n)?qc(e,l.value,null):qc(e,l.value,n-1)).indexOf("\n")>-1&&(a=r?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),Zc(s)){if(r&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function Yc(e){return"boolean"==typeof e}function Kc(e){return null===e}function Xc(e){return"string"==typeof e}function Zc(e){return void 0===e}function Jc(e){return Qc(e)&&"[object RegExp]"===oh(e)}function Qc(e){return"object"==typeof e&&null!==e}function eh(e){return Qc(e)&&"[object Date]"===oh(e)}function th(e){return Qc(e)&&("[object Error]"===oh(e)||e instanceof Error)}function nh(e){return"function"==typeof e}function oh(e){return Object.prototype.toString.call(e)}function ih(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function rh(){return void 0!==Fc?Fc:Fc="foo"===function(){}.name}jc.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},jc.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var sh=/\s*function\s+([^\(\s]*)\s*/;function ah(e){if(nh(e)){if(rh())return e.name;var t=e.toString().match(sh);return t&&t[1]}}function lh(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return ch(hh(e.actual),128)+" "+e.operator+" "+ch(hh(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||dh;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var o=n.stack,i=ah(t),r=o.indexOf("\n"+i);if(r>=0){var s=o.indexOf("\n",r+1);o=o.substring(s+1)}this.stack=o}}}function ch(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function hh(e){if(rh()||!nh(e))return jc(e);var t=ah(e);return"[Function"+(t?": "+t:"")+"]"}function dh(e,t,n,o,i){throw new lh({message:n,actual:e,expected:t,operator:o,stackStartFunction:i})}function uh(e,t){e||dh(e,!0,t,"==",uh)}Hc(lh,Error);const{ipcRenderer:ph}=require("electron"),fh=require("fs"),gh=require("path"),mh=require("vex-js"),bh=()=>c(Uo),wh=c(jo);async function vh(e){e(await ph.invoke("getUserDataPath"))}async function yh(e,t){let n;await ph.invoke("showOpenDialog",e).then((e=>{n=e})),t(n)}async function kh(){return"function"==typeof c(Zo).save?(console.log("Save function found for docs editor.",c(Zo)),await c(Zo).save().then((e=>{bh().Docs=e}))):console.log("No save function found for docs editor.",c(Zo)),bh().Version=await ph.invoke("getVersion"),bh().FileVersion=(parseInt(bh().FileVersion,36)+1).toString(36),JSON.stringify(bh())}function xh(e,t){for(const n of e.blocks)switch(n.type){case"header":{const e=document.createElement(`h${n.data.level}`);e.innerHTML=n.data.text,t.appendChild(e);break}case"paragraph":{const e=document.createElement("p");e.innerHTML=n.data.text,t.appendChild(e);break}case"table":{const e=document.createElement("table"),o=document.createElement("tbody");n.data.content.forEach((e=>{const t=document.createElement("tr");e.forEach((e=>{const n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),o.appendChild(t)})),e.appendChild(o),t.appendChild(e);break}}return t}async function Ch(e,t){const n=gh.resolve(`${await ph.invoke("getUserDataPath")}/GraphemyCache/`);fh.existsSync(n)||fh.mkdirSync(n);const o=gh.resolve(n,`${bh().Name}-${t}-${e}.svg`);return fh.existsSync(o)?fh.readFileSync(o,{encoding:"utf8",flag:"r"}):(console.log(`No SVG found at ${o}`),"No SVG found.")}function Eh(e){try{uh(!("No SVG found."===e),e);const t=/<svg (height="([0-9.]+)".*width="([0-9.]+)").*>/im,[n,o]=(([e,t],n)=>[t<e?e/t*n:n,t<e?n:t/e*n])(e.match(t).slice(2).map((e=>Number(e))),50).map((e=>`${e}`));return e.replace(t,((e,t,i,r)=>e.replace(i,n).replace(r,o)))}catch(e){return"No SVG Found."!==e.message&&console.log("Error message:\n",e),`<code>${e}</code>`}}async function Th(){const e=async()=>{const e=await kh();try{vh((t=>{const n=`${t}${gh.sep}Lexicons${gh.sep}`,o=`${t}${gh.sep}Backups${gh.sep}`,i=(new Date).toString().split(" GMT")[0].replaceAll(":","꞉");fh.existsSync(n)||fh.mkdirSync(n),fh.existsSync(o)||fh.mkdirSync(o),fh.writeFileSync(`${n}${bh().Name}.lexc`,e,"utf8"),fh.writeFileSync(`${o}${bh().Name} @ ${i}.lexc`,e,"utf8"),""!==bh().SaveLocation&&fh.writeFileSync(`${bh().SaveLocation}${gh.sep}${bh().Name}.lexc`,e,"utf8")})),c(Qo)?new Notification(`The ${bh().Name} file has been saved.`):mh.dialog.alert(`The ${bh().Name} file has been saved.`)}catch(e){console.log(e),mh.dialog.alert("There was a problem saving your file. The error has been printed to the console. Please contact the developer.")}if(bh().UploadToDatabase&&""!==c(oi)&&""!==c(ii)){const t=await zc.db.Languages.filter({Name:bh().Name,Owner:c(oi)}).getAll();t.length>0?await zc.db.Languages.update({id:t[0].id,File:JSON.parse(e)}):await zc.db.Languages.create({Name:bh().Name,Owner:c(oi),File:JSON.parse(e)})}};bh().Name.trim()?e():mh.dialog.prompt({message:"Please enter a file name before saving.",callback:t=>{t&&(bh().Name=t.trim(),e())}})}const Sh=async()=>{let e;kh().then((t=>{e=new Blob([t])}));const t=await window.showSaveFilePicker({suggestedName:`${bh().Name}.lexc`});await t.requestPermission({mode:"readwrite"});const n=await t.createWritable();try{await n.write(e)}catch(e){return window.alert("The file failed to save. Please contact the developer for assistance."),console.log(e),void await n.close()}await n.close(),window.alert("The file saved successfully.")},Bh=async()=>{let e="";const t=bh().Lexicon;for(const n in t)e+=`${n}\n${t[n][0]}\n${t[n][1]}\n\n`;const n=new Blob([e]),o=await window.showSaveFilePicker({suggestedName:`${bh().Name}.txt`});await o.requestPermission({mode:"readwrite"});const i=await o.createWritable();try{await i.write(n)}catch(e){window.alert("The file failed to export.")}await i.close(),window.alert("The file exported successfully.")},Ih=async()=>{const e=bh().Lexicon,t=[["Word","Pronunciations","Definitions"]];for(const n in e)t.push([n,Object.entries(e[n].pronunciations).map((([e,{ipa:t}])=>e+": "+t)).join(" — "),e[n].Senses.map((e=>e.definition)).join(" — ")]);const n=t.map((e=>e.map(String).map((e=>e.replaceAll('"','""'))).map((e=>`"${e}"`)).join(","))).join("\r\n");const o=new Blob([n]),i=await window.showSaveFilePicker({suggestedName:`${bh().Name}.csv`});await i.requestPermission({mode:"readwrite"});const r=await i.createWritable();try{await r.write(o)}catch(e){window.alert("The file failed to export. Please contact the developer for assistance."),console.log(e)}await r.close(),window.alert("The file exported successfully.")},_h=async()=>{let e;kh().then((t=>{e=new Blob([t])}));const t=await window.showSaveFilePicker({suggestedName:`${bh().Name}.json`});await t.requestPermission({mode:"readwrite"});const n=await t.createWritable();try{await n.write(e)}catch(e){window.alert("The file failed to export.")}await n.close(),window.alert("The file exported successfully.")},Lh={lexicon:async()=>{const e=document.createElement("html"),t=document.createElement("head");t.innerHTML=`\n                <meta charset="UTF-8" />\n                <title>${bh().Name}</title>\n                <link rel="preconnect" href="https://fonts.googleapis.com">\n                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n                <link href="https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">\n            `;const n=document.createElement("style");n.innerHTML=Rh;const o=document.createElement("style");o.innerHTML=Nh;const i=document.createElement("body");i.innerHTML+=`<h1>${bh().Name}</h1>`;const r=pi(bh().Lexicon);i.innerHTML+="<hr/><h2>Lexicon</h2>",i.append(Ah(r)),t.append(n,o),e.append(t,i);const s=e.outerHTML,a=new Blob(["\ufeff",s],{type:"tex/html; charset=utf-8;"}),l=await window.showSaveFilePicker({suggestedName:`${bh().Name}_Lexicon.html`});await l.requestPermission({mode:"readwrite"});const c=await l.createWritable();try{await c.write(a)}catch(e){return mh.dialog.alert("The file failed to export. Please contact the developer for assistance."),console.log(e),void await c.close()}await c.close(),mh.dialog.alert("The file exported successfully.")},all:async()=>{const e=document.createElement("html"),t=document.createElement("head");t.innerHTML=`\n                <meta charset="UTF-8" />\n                <title>${bh().Name}</title>\n                <link rel="preconnect" href="https://fonts.googleapis.com">\n                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n                <link href="https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">\n            `;const n=document.createElement("style");n.innerHTML=Rh;const o=document.createElement("style");o.innerHTML=Nh;let i=document.createElement("div");await c(Zo).save().then((e=>{i=xh(e,i)}));const r=document.createElement("body");r.innerHTML+=`<h1>${bh().Name}</h1>`,r.innerHTML+=i.outerHTML;const s=pi(bh().Lexicon);r.innerHTML+="<hr/><h2>Lexicon</h2>",r.append(Ah(s)),t.append(n,o),e.append(t,r);const a=e.outerHTML,l=new Blob(["\ufeff",a],{type:"tex/html; charset=utf-8;"}),h=await window.showSaveFilePicker({suggestedName:`${bh().Name}.html`});await h.requestPermission({mode:"readwrite"});const d=await h.createWritable();try{await d.write(l)}catch(e){return mh.dialog.alert("The file failed to export. Please contact the developer for assistance."),console.log(e),void await d.close()}await d.close(),mh.dialog.alert("The file exported successfully.")},docs:async()=>{const e=document.createElement("html"),t=document.createElement("head");t.innerHTML=`\n                <meta charset="UTF-8" />\n                <title>${bh().Name} Docs</title>\n                <link rel="preconnect" href="https://fonts.googleapis.com">\n                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n                <link href="https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">\n            `;const n=document.createElement("style");n.innerHTML=Rh;const o=document.createElement("style");o.innerHTML=Nh,t.append(n,o),e.appendChild(t);let i=document.createElement("body");await c(Zo).save().then((e=>{i=xh(e,i)})),i.style.padding="12em",i.classList.add("container"),e.appendChild(i);const r=e.outerHTML,s=new Blob(["\ufeff",r],{type:"tex/html; charset=utf-8;"}),a=await window.showSaveFilePicker({suggestedName:`${bh().Name}_Docs.html`});await a.requestPermission({mode:"readwrite"});const l=await a.createWritable();try{await l.write(s)}catch(e){return mh.dialog.alert("The file failed to export. Please contact the developer."),console.log(e),void await l.close()}await l.close(),mh.dialog.alert("The file exported successfully.")}};function Ah(e){const t=document.createElement("div");t.classList.add("row");const n=document.createElement("div");n.classList.add("column");const o=document.createElement("div");o.classList.add("column");let i=!1;return e.forEach((e=>{let t="";const r=bh().Lexicon[e].pronunciations;Object.entries(r).forEach((([e,n])=>{t+=`<p class="lect">${bh().UseLects?e+": ":""}<span class='pronunciation'>${n.ipa}</span></p>`}));bh().Lexicon[e].Senses.forEach((({lects:e,definition:n,tags:o},i)=>{bh().UseLects&&(t+=`<p class="lect">${e.join(", ")}</p>`),t+=`<div class='sense'>${i+1}.</div>`,o.forEach((e=>{t+=`<div class='tag-item'>${e}</div>`})),t+=`<p>${Fr(n)}</p>`})),i?o.innerHTML+=`<div class="lex-entry"><p>${e}</p>${t}</div>`:n.innerHTML+=`<div class="lex-entry"><p>${e}</p>${t}</div>`,i=!i})),t.append(n,o),t}const Oh={1.9:e=>{Uo.set(wh);try{for(const t in e.Lexicon)bh().Lexicon[t]={pronunciations:{General:{ipa:e.Lexicon[t][0],irregular:e.Lexicon[t][2]}},Senses:[{definition:e.Lexicon[t][1],lects:["General"],tags:e.Lexicon[t][3]}]}}catch(e){window.alert("There was a problem loading the contents of the lexicon. Please contact the developer."),li("Attempted to load a version 1.9 lexicon.",e)}try{bh().Alphabet=e.Alphabet}catch(e){window.alert("There was a problem loading the alphabetical order. Please contact the developer for assistance."),li("Attempted to load a version 1.9 alphabet.",e)}try{bh().Pronunciations.General=e.Romanization,yi("General")}catch(e){window.alert("There was a problem loading the romanizations. Please contact the developer for assistance."),li("Attempted to load version 1.9 romanizations.",e)}try{for(const t in e.Phrasebook)bh().Phrasebook[t]=(()=>{const n={};for(const o in e.Phrasebook[t])n[o]={description:e.Phrasebook[t][o].description,lects:["General"],pronunciations:{General:{ipa:e.Phrasebook[t][o].pronunciation,irregular:!1}},variants:(()=>{const n={};for(const i in e.Phrasebook[t][o].variants)n[i]={description:e.Phrasebook[t][o].variants[i].description,pronunciations:{General:{ipa:e.Phrasebook[t][o].variants[i].pronunciation,irregular:!1}}};return n})(),tags:[]};return n})()}catch(e){window.alert("There was a problem loading the phrasebook. Please contact the developer for assistance."),li("Attempted to load a version 1.9 phrasebook.",e)}try{bh().Phonotactics.General.Onsets=e.Phonotactics.Initial.join(" "),bh().Phonotactics.General.Medials=e.Phonotactics.Middle.join(" "),bh().Phonotactics.General.Codas=e.Phonotactics.Final.join(" "),bh().Phonotactics.General.Vowels=e.Phonotactics.Vowel.join(" "),bh().Phonotactics.General.Illegals=e.Phonotactics.Illegal.join(" ")}catch(e){window.alert("There was a problem loading the phonotactics data. Please contact the developer for assistance."),li("Attempted to load version 1.9 phonotactics.",e)}try{c(Zo).destroy(),gs(e.Docs)}catch(e){window.alert("There was a problem loading the documentation data. Please contact the developer for assistance."),li("Attempted to load version 1.9 documentation.",e)}try{bh().HeaderTags=e.HeaderTags}catch(e){window.alert("There was a problem loading the header tags."),li("Attempted to load version 1.9 header tags.",e)}bh().IgnoreDiacritics=e.IgnoreDiacritics,bh().CaseSensitive=e.CaseSensitive}},$h=require("csv-parser");async function Mh(e,t,n,o,i){const r=[];let s;t-=1,n-=1,o&&(o-=1),i&&(i-=1),yh({title:"Open CSV File",properties:["openFile"]},(a=>{void 0!==a&&("csv"===a[0].split(".").pop()?(s=a,fh.createReadStream(a[0]).pipe($h({headers:!1,skipLines:e?1:0})).on("data",(e=>{r.push(e)})).on("end",(()=>{console.log(r);const e={};r.forEach((r=>{e[r[t]]={pronunciations:{General:{ipa:o?r[o]:vi(r[t],bh().Lects[0]),irregular:!1}},Senses:[{definition:r[n],lects:[bh().Lects[0]],tags:i?r[i].split(/\s+/).map((e=>e.trim())):[]}]}})),console.log(e),c(Uo).Lexicon=e,c(Uo).Name=s[0].split("/")[s[0].split("/").length-1].split(".")[0],ph.emit("update-lexicon-for-gods-sake-please")}))):mh.dialog.alert("A CSV file was not selected."))}))}async function Ph(e=bh().Name){const t=await zc.db.Languages.filter({Name:e,Owner:c(oi)}).getAll();return t.length>0&&t[0].File}const Nh='\n    @import url("https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,4000,7001,4001,700&display=swap");\n    body {\n        overflow-y: auto;\n        text-align: center;\n        margin-left: 15vw;\n        margin-right: 15vw;\n        background-color: #333;\n        color: #ccc;\n    }\n    \n    .container {\n        overflow-x: clip;\n        overflow-y: auto;\n    }\n    \n    .lex-body {\n        font-family: "Gentium Book Plus", serif;\n    }\n    \n    .tag-item {\n        font-family: serif;\n    }\n    \n    .search {\n        font-family: "Gentium Book Plus", serif;\n    }\n    \n    .phonology, .pronunciation {\n        font-family: "Gentium Book Plus", serif !important;\n    }\n    \n    [id=entry-counter] {\n        font-family: serif;\n    }\n    \n    td {\n        text-align: center;\n        border: 2px solid #ccc;\n    }\n    \n    tr {\n        background-color: transparent !important;\n    }\n    \n    table {\n        border-collapse: collapse;\n        margin: auto;\n    }\n    \n    .table-container, .table-title {\n        font-family: "Gentium Book Plus", serif;\n        align-items: center;\n    }\n    \n    button {\n        display: none;\n    }\n    \n    .info {\n        display: none;\n    }\n    \n    .search-row {\n        display: inline-flex;\n    }\n    \n    @media only screen and (min-device-width: 601px) {\n        .sidebar {\n            max-width: 18% !important;\n        }\n    }\n    @media only screen and (max-device-width: 600px) {\n        body {\n            width: 100vw !important;\n            font-size: 12pt;\n            padding: 2vw;\n        }\n        body > h1 {\n            font-size: 36pt;\n        }\n        div.container {\n            height: 60vh !important;\n        }\n        div.column {\n            display: block;\n        }\n        div.sidebar {\n            max-height: 18vh;\n        }\n        div.row {\n            display: block;\n            min-width: 96vw !important;\n            margin-bottom: 36vh;\n        }\n        div.variants {\n            margin-bottom: 4rem;\n        }\n        .lex-entry, .lex-body {\n            font-size: 16pt !important;\n        }\n        .capitalize {\n            font-size: 24pt !important;\n        }\n        .tag-item, [id=entry-counter] {\n            font-size: 16pt;\n        }\n        .search, .sidebar p {\n            font-size: 24pt;\n        }\n        td {\n            font-size: 18pt !important;\n        }\n    }\n    ',Rh='\n    @charset "UTF-8";\n    html, body {\n        align-items: center;\n    }\n    \n    body {\n        font-family: serif;\n        font-size: 11pt;\n        min-width: 400px;\n        min-height: 400px;\n        margin: 0px;\n        overflow: hidden;\n        -webkit-app-region: drag;\n    }\n    \n    button {\n        font-family: serif;\n        font-size: 11pt;\n        transition-duration: 0.33s;\n        cursor: pointer;\n        -webkit-app-region: no-drag;\n        -webkit-user-select: none;\n    }\n    button[id=overwrite] {\n        font-weight: bold;\n    }\n    button.collapser {\n        max-width: 1em;\n        height: 100%;\n        border-color: transparent !important;\n        background-color: rgba(17, 17, 17, 0.0666666667);\n        display: flex;\n        float: right;\n        margin: 0px;\n        padding: 0px;\n    }\n    button.collapser:hover {\n        border-color: rgba(255, 255, 255, 0.2666666667) !important;\n        background-color: rgba(0, 0, 0, 0.2);\n    }\n    button.collapser::after {\n        content: "‖";\n        margin: auto;\n    }\n    button.collapser-h {\n        max-height: 1.33em;\n        width: 100% !important;\n        border-color: transparent !important;\n        background-color: rgba(17, 17, 17, 0.0666666667);\n        display: flex;\n        margin: 0px;\n        padding: 0px;\n    }\n    button.collapser-h:hover {\n        border-color: rgba(255, 255, 255, 0.2666666667) !important;\n        background-color: rgba(0, 0, 0, 0.2);\n    }\n    button.collapser-h::after {\n        content: "═";\n        margin: auto;\n    }\n    \n    .tab-container {\n        width: 100vw;\n        height: 100vh;\n        -webkit-user-select: none;\n    }\n    .tab-container .button-container {\n        width: 100%;\n        text-align: center;\n    }\n    .tab-container .button-container button {\n        border: none;\n        outline: none;\n        padding: 4px;\n        height: 100%;\n        width: fit-content;\n    }\n    .tab-container .window-control {\n        text-align: left;\n        height: 0px;\n        overflow: visible;\n    }\n    .tab-container .window-control button {\n        border: none;\n        outline: none;\n        background-color: transparent;\n    }\n    .tab-container .window-control button.close:hover {\n        background-color: #9e0f0f;\n    }\n    .tab-container .window-control button.minimize:hover {\n        background-color: #c9c911;\n    }\n    .tab-container .window-control button.maximize:hover {\n        background-color: #4eb94e;\n    }\n    .tab-container .tab-pane {\n        height: 80%;\n        box-sizing: border-box;\n        -webkit-app-region: no-drag;\n        -webkit-user-select: text;\n    }\n    \n    .row {\n        display: flex;\n        margin: auto;\n    }\n    .row:has(~ .collapsible-row .collapsed) {\n        height: 90vh !important;\n    }\n    \n    .column {\n        width: 100%;\n    }\n    \n    .collapsible-column {\n        min-width: 2%;\n        width: fit-content;\n    }\n    \n    .collapsible-row:has(.collapsed) {\n        height: 3vh !important;\n    }\n    \n    .collapsed {\n        display: none;\n    }\n    \n    .text-left {\n        text-align: left;\n    }\n    .text-right {\n        text-align: right;\n    }\n    .text-center {\n        text-align: center;\n    }\n    \n    .prelined {\n        white-space: pre-line;\n        /* This is solely to make the \n character work from the JS side */\n    }\n    \n    p {\n        margin: 0px;\n    }\n    \n    div[id=tables-pane] {\n        font-family: Gentium;\n        font-size: 11pt;\n    }\n    \n    h1, h2, h3, h4, h5, h6 {\n        font-style: italic;\n        padding-top: 1em !important;\n    }\n    \n    .info {\n        font-family: serif;\n        font-size: 11pt;\n        font-style: italic;\n        line-height: 1.5em;\n        -webkit-user-select: none;\n    }\n    \n    .phonology {\n        font-family: Gentium;\n        font-size: 11pt;\n        width: 95%;\n    }\n    \n    .version-info {\n        font-family: serif;\n        font-size: 7pt;\n        text-align: left;\n        display: inline;\n        float: right;\n        -webkit-user-select: none;\n    }\n    \n    .lex-body {\n        white-space: pre-line;\n    }\n    .lex-entry {\n        font-family: Gentium;\n        font-size: 11pt;\n        transition: 0.3s;\n        padding: 1em;\n    }\n    \n    .variants {\n        font-family: Gentium;\n        font-size: 11pt;\n    }\n    .variants div.column {\n        margin: 0.6em;\n    }\n    \n    .capitalize {\n        text-transform: capitalize;\n    }\n    \n    .tag-item {\n        font-family: serif;\n        font-size: 7pt;\n        border-radius: 7%;\n        width: fit-content;\n        padding: 0.2em;\n        margin: 0.2em;\n        text-transform: uppercase;\n        display: inline-block;\n    }\n    \n    .sense {\n        font-family: Gentium;\n        font-size: 9pt;\n        border-radius: 7%;\n        width: fit-content;\n        padding: 0.2em;\n        margin: 0.2em;\n        font-weight: bold;\n        font-style: italic;\n        display: inline-block;\n        background-color: transparent;\n        margin-top: 1em;\n    }\n    \n    .lect {\n        font-family: serif;\n        font-size: 9pt;\n        font-style: italic;\n        margin-top: 0.1em;\n    }\n    \n    [id=entry-counter] {\n        font-family: serif;\n        font-size: 7pt;\n        border-radius: 7%;\n        width: fit-content;\n        padding: 0.2em;\n        margin: 0.2em;\n        text-transform: uppercase;\n        font-weight: bold;\n        margin: auto;\n    }\n    \n    .scrolled {\n        overflow-y: auto;\n        overflow-x: wrap;\n    }\n    \n    .container {\n        border-radius: 6px;\n        text-align: center;\n        margin: 6px;\n        padding: 6px;\n    }\n    \n    .row button {\n        padding: 2px 10px 2px 10px;\n        margin: 4px auto 4px auto;\n        display: flex;\n        width: fit-content;\n        border: 1px solid black;\n        border-radius: 8px;\n    }\n    \n    label {\n        font-family: serif;\n        font-size: 11pt;\n        -webkit-user-select: none;\n    }\n    \n    .pronunciation {\n        font-family: Gentium;\n        font-size: 9pt;\n    }\n    \n    textarea, input {\n        font-family: Gentium;\n        font-size: 11pt;\n        display: flex;\n        text-align: center;\n        padding: 4px;\n        margin: 1px auto 1px auto;\n        border: none;\n        border-radius: 3px;\n        width: 80%;\n        resize: vertical;\n        transition: 0.2s;\n    }\n    textarea .pronunciation, input .pronunciation {\n        font-family: Gentium;\n        font-size: 9pt;\n    }\n    textarea[type=number], input[type=number] {\n        padding: 1px;\n        width: 4em;\n    }\n    textarea[type=checkbox], input[type=checkbox] {\n        appearance: none;\n        margin: auto;\n        font: inherit;\n        width: 1rem;\n        height: 1rem;\n        border-radius: 0.15em;\n        transform: translateY(-0.075em);\n        display: grid;\n        place-content: center;\n    }\n    textarea[type=checkbox]::before, input[type=checkbox]::before {\n        content: "";\n        width: 0.65em;\n        height: 0.65em;\n        transform: scale(0);\n        transition: 120ms transform ease-in-out;\n    }\n    textarea[type=checkbox]:checked::before, input[type=checkbox]:checked::before {\n        transform: scale(1);\n        clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);\n    }\n    \n    .header input {\n        width: 70%;\n    }\n    \n    .narrow {\n        width: 50%;\n        margin: auto;\n    }\n    .narrow-col {\n        width: 15%;\n    }\n    \n    .search {\n        text-align: left;\n        width: 100%;\n        margin: 2px auto 2px auto;\n    }\n    \n    .search-container {\n        padding: 0 0.5em 0 0.5em;\n        position: relative;\n    }\n    \n    table {\n        border-collapse: collapse;\n        width: 95%;\n    }\n    table-container {\n        font-family: Gentium;\n        font-size: 11pt;\n        margin: auto;\n        padding: 30px 5%;\n    }\n    table-title {\n        font-family: Gentium;\n        font-size: 14pt;\n        font-style: italic;\n    }\n    \n    td {\n        padding: 2px 6px 2px 6px;\n        text-align: center;\n        user-select: none;\n    }\n    \n    .inflection {\n        font-family: Gentium;\n        font-size: 7pt;\n    }\n    .inflection h1, .inflection h2, .inflection h3, .inflection h4, .inflection h5, .inflection h6 {\n        padding-top: 0.2em;\n    }\n    .inflection h1 {\n        font-size: 1.5em;\n    }\n    .inflection h2 {\n        font-size: 1.3em;\n    }\n    .inflection h3 {\n        font-size: 1.1em;\n    }\n    .inflection h4 {\n        font-size: 1em;\n    }\n    .inflection h5 {\n        font-size: 0.9em;\n    }\n    .inflection h6 {\n        font-size: 0.8em;\n    }\n    \n    ::-webkit-scrollbar {\n        width: 9px;\n    }\n    ::-webkit-scrollbar-thumb {\n        border-radius: 6px;\n        transition: 0.2s;\n    }\n    ::-webkit-scrollbar-button {\n        display: none;\n    }\n    ::-webkit-scrollbar-corner {\n        border-radius: 6px 0px 0px 0px;\n    }\n    ::-webkit-resizer {\n        border-radius: 6px 0px 0px 0px;\n    }\n    \n    hr {\n        margin-bottom: 0.2em;\n        margin-top: 0.2em;\n        max-width: 66.66%;\n        padding: 0px;\n    }\n    \n    .milkyWay {\n        width: 100px;\n        height: 100px;\n        background: transparent;\n        margin: auto;\n        position: relative;\n        border-radius: 50%;\n    }\n    .milkyWay .planet {\n        border: 1px solid white;\n        animation-name: orbit;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        animation-play-state: paused;\n    }\n    .milkyWay .planet::before, .milkyWay .planet::after {\n        position: absolute;\n        content: "";\n        display: block;\n        border-radius: 50%;\n    }\n    .milkyWay > div {\n        position: absolute;\n        border-radius: 50%;\n    }\n    \n    .sun {\n        background: #faca09;\n        width: 10%;\n        height: 10%;\n        top: 45%;\n        left: 45%;\n    }\n    \n    .mercury {\n        width: 20%;\n        height: 20%;\n        top: calc(40% - 1px);\n        left: calc(40% - 1px);\n        animation-duration: 2s;\n    }\n    .mercury::before {\n        background: #9fb5b6;\n        width: 16%;\n        height: 16%;\n        top: -8%;\n        left: 42%;\n    }\n    \n    .venus {\n        width: 30%;\n        height: 30%;\n        top: calc(35% - 1px);\n        left: calc(35% - 1px);\n        animation-duration: 3s;\n    }\n    .venus::before {\n        background: #ECC98E;\n        width: 10%;\n        height: 10%;\n        top: -5%;\n        left: 45%;\n    }\n    \n    .earth {\n        width: 40%;\n        height: 40%;\n        top: calc(30% - 1px);\n        left: calc(30% - 1px);\n        animation-duration: 4s;\n    }\n    .earth::before {\n        background: #208fd8;\n        width: 10%;\n        height: 10%;\n        top: -5%;\n        left: 45%;\n    }\n    .earth::after {\n        background: #33c470;\n        width: 10%;\n        height: 6%;\n        top: -3%;\n        left: 45%;\n        transform: rotate(45deg);\n    }\n    \n    .mars {\n        width: 50%;\n        height: 50%;\n        top: calc(25% - 1px);\n        left: calc(25% - 1px);\n        animation-duration: 5s;\n    }\n    .mars::before {\n        background: #d35400;\n        width: 6%;\n        height: 6%;\n        top: -3%;\n        left: 47%;\n    }\n    \n    .jupiter {\n        width: 60%;\n        height: 60%;\n        top: calc(20% - 1px);\n        left: calc(20% - 1px);\n        animation-duration: 6s;\n    }\n    .jupiter::before {\n        background: #d4975a;\n        width: 10%;\n        height: 10%;\n        top: -5%;\n        left: 45%;\n    }\n    \n    .saturn {\n        width: 70%;\n        height: 70%;\n        top: calc(15% - 1px);\n        left: calc(15% - 1px);\n        animation-duration: 7s;\n    }\n    .saturn::before {\n        background: #E4D191;\n        width: 7%;\n        height: 7%;\n        top: -4%;\n        left: 48%;\n    }\n    .saturn::after {\n        background: #F0E4C1;\n        width: 12%;\n        height: 1%;\n        top: -1%;\n        left: 45.5%;\n        transform: rotate(-15deg);\n    }\n    \n    .uranus {\n        width: 80%;\n        height: 80%;\n        top: calc(10% - 1px);\n        left: calc(10% - 1px);\n        animation-duration: 8s;\n    }\n    .uranus::before {\n        background: #3498db;\n        width: 5%;\n        height: 5%;\n        top: -2%;\n        left: 48%;\n    }\n    .uranus::after {\n        background: #b0d0e5;\n        width: 8%;\n        height: 0.5%;\n        top: 0%;\n        left: 46.25%;\n        transform: rotate(-15deg);\n    }\n    \n    .neptune {\n        width: 90%;\n        height: 90%;\n        top: calc(5% - 1px);\n        left: calc(5% - 1px);\n        animation-duration: 9s;\n    }\n    .neptune::before {\n        background: #1269a3;\n        width: 4%;\n        height: 4%;\n        top: -1%;\n        left: 49%;\n    }\n    .neptune::after {\n        background: #91cbf2;\n        width: 6%;\n        height: 0.5%;\n        top: 0.5%;\n        left: 48%;\n        transform: rotate(-15deg);\n    }\n    \n    .pluto {\n        width: 100%;\n        height: 100%;\n        top: calc(0% - 1px);\n        left: calc(0% - 1px);\n        animation-duration: 10s;\n    }\n    .pluto::before {\n        background: #b78c7a;\n        width: 1%;\n        height: 1%;\n        top: -0.5%;\n        left: 49.5%;\n    }\n    \n    @keyframes orbit {\n        0% {\n            transform: rotate(-180deg);\n        }\n        100% {\n            transform: rotate(180deg);\n        }\n    }\n    /* EditorJS Overrides */\n    .ce-toolbar__plus {\n        transition: 0.33s;\n    }\n    .ce-toolbar__content {\n        max-width: 90% !important;\n    }\n    .ce-block__content {\n        max-width: 80% !important;\n    }\n    .ce-block--selected .ce-block__content {\n        background-color: rgba(255, 255, 255, 0.3333333333) !important;\n    }\n    \n    ::selection {\n        background-color: rgba(255, 255, 255, 0.3333333333) !important;\n    }\n    \n    /*# sourceMappingURL=index.css.map */\n    \n    ';function Dh(e,t){for(var n=0,o=e.length-1;o>=0;o--){var i=e[o];"."===i?e.splice(o,1):".."===i?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var zh=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Fh=function(e){return zh.exec(e).slice(1)};function Hh(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var o=n>=0?arguments[n]:"/";if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,t="/"===o.charAt(0))}return(t?"/":"")+(e=Dh(qh(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."}function jh(e){var t=Uh(e),n="/"===Vh(e,-1);return(e=Dh(qh(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function Uh(e){return"/"===e.charAt(0)}var Wh={extname:function(e){return Fh(e)[3]},basename:function(e,t){var n=Fh(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},dirname:function(e){var t=Fh(e),n=t[0],o=t[1];return n||o?(o&&(o=o.substr(0,o.length-1)),n+o):"."},sep:"/",delimiter:":",relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=Hh(e).substr(1),t=Hh(t).substr(1);for(var o=n(e.split("/")),i=n(t.split("/")),r=Math.min(o.length,i.length),s=r,a=0;a<r;a++)if(o[a]!==i[a]){s=a;break}var l=[];for(a=s;a<o.length;a++)l.push("..");return(l=l.concat(i.slice(s))).join("/")},join:function(){return jh(qh(Array.prototype.slice.call(arguments,0),(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},isAbsolute:Uh,normalize:jh,resolve:Hh};function qh(e,t){if(e.filter)return e.filter(t);for(var n=[],o=0;o<e.length;o++)t(e[o],o,e)&&n.push(e[o]);return n}var Vh="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)};const{ipcRenderer:Gh}=require("electron"),Yh=()=>c(Uo);async function Kh(e,t,n){return async function(e,...t){return await Gh.invoke("ffi",e,...t)}("graphemify",e,t,`${await Gh.invoke("getUserDataPath")}/GraphemyCache/${Yh().Name}-${n}-${t}.svg`,await Gh.invoke("isDev")?"./src/app/utils/interop/library/src/graphemy":Wh.resolve(process.resourcesPath,"graphemy"))}function Xh(e,t,n){const o=e.slice();return o[5]=t[n],o}function Zh(e){let t,n;return{c(){t=E("p"),n=S(e[0]),M(t,"font-style","italic")},m(e,o){k(e,t,o),w(t,n)},p(e,t){1&t&&O(n,e[0])},d(e){e&&x(t)}}}function Jh(e){let t;function n(e,t){return"graphemy"===e[5].typesetter?ed:Qh}let o=n(e),i=o(e);return{c(){i.c(),t=I()},m(e,n){i.m(e,n),k(e,t,n)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&x(t)}}}function Qh(e){let t,n,o,i=r()+"";function r(){return e[4](e[5])}return{c(){t=E("p"),n=S(i),o=B(),M(t,"font-family",e[5].font)},m(e,i){k(e,t,i),w(t,n),w(t,o)},p(o,s){e=o,7&s&&i!==(i=r()+"")&&O(n,i),4&s&&M(t,"font-family",e[5].font)},d(e){e&&x(t)}}}function ed(e){let t,n,o={ctx:e,current:null,token:null,hasCatch:!0,pending:od,then:nd,catch:td,value:8,error:9};return we(n=e[3](e[0],e[5].font,e[5].name),o),{c(){t=I(),o.block.c()},m(e,n){k(e,t,n),o.block.m(e,o.anchor=n),o.mount=()=>t.parentNode,o.anchor=t},p(t,i){e=t,o.ctx=e,5&i&&n!==(n=e[3](e[0],e[5].font,e[5].name))&&we(n,o)||function(e,t,n){const o=t.slice(),{resolved:i}=e;e.current===e.then&&(o[e.value]=i),e.current===e.catch&&(o[e.error]=i),e.block.p(o,n)}(o,e,i)},d(e){e&&x(t),o.block.d(e),o.token=null,o=null}}}function td(e){let t,n,o,i,r,s=e[9]+"";return{c(){t=E("p"),t.textContent="An error occurred while generating the SVG. The error is printed below. Please contact the developer for assistance.",n=B(),o=E("code"),i=S(s),r=B()},m(e,s){k(e,t,s),k(e,n,s),k(e,o,s),w(o,i),k(e,r,s)},p(e,t){5&t&&s!==(s=e[9]+"")&&O(i,s)},d(e){e&&x(t),e&&x(n),e&&x(o),e&&x(r)}}}function nd(e){let t,n,o=e[8]+"";return{c(){t=E("div"),n=B()},m(e,i){k(e,t,i),t.innerHTML=o,k(e,n,i)},p(e,n){5&n&&o!==(o=e[8]+"")&&(t.innerHTML=o)},d(e){e&&x(t),e&&x(n)}}}function od(t){let n,o;return{c(){n=E("p"),n.innerHTML="<i>generating...</i>",o=B(),L(n,"class","info")},m(e,t){k(e,n,t),k(e,o,t)},p:e,d(e){e&&x(n),e&&x(o)}}}function id(e){let t,n="Romanization"!==e[5].name&&e[5].display&&("rom"===e[5].root||e[5].lect in e[1].pronunciations)&&Jh(e);return{c(){n&&n.c(),t=I()},m(e,o){n&&n.m(e,o),k(e,t,o)},p(e,o){"Romanization"!==e[5].name&&e[5].display&&("rom"===e[5].root||e[5].lect in e[1].pronunciations)?n?n.p(e,o):(n=Jh(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&x(t)}}}function rd(t){let n,o,i=t[2].Orthographies.find(sd).display,r=i&&Zh(t),s=t[2].Orthographies,a=[];for(let e=0;e<s.length;e+=1)a[e]=id(Xh(t,s,e));return{c(){r&&r.c(),n=B();for(let e=0;e<a.length;e+=1)a[e].c();o=I()},m(e,t){r&&r.m(e,t),k(e,n,t);for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(e,t);k(e,o,t)},p(e,[t]){if(4&t&&(i=e[2].Orthographies.find(sd).display),i?r?r.p(e,t):(r=Zh(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),15&t){let n;for(s=e[2].Orthographies,n=0;n<s.length;n+=1){const i=Xh(e,s,n);a[n]?a[n].p(i,t):(a[n]=id(i),a[n].c(),a[n].m(o.parentNode,o))}for(;n<a.length;n+=1)a[n].d(1);a.length=s.length}},i:e,o:e,d(e){r&&r.d(e),e&&x(n),C(a,e),e&&x(o)}}}const sd=e=>"Romanization"===e.name;function ad(e,t,n){let o;h(e,Uo,(e=>n(2,o=e)));let{word:i}=t,{source:r}=t;return e.$$set=e=>{"word"in e&&n(0,i=e.word),"source"in e&&n(1,r=e.source)},[i,r,o,async function(e,t,n){let o=await Ch(e,n);return"No SVG found."===o&&(await Kh(t,e,n),o=await Ch(e,n)),Eh(o)},e=>{const t=bi(e.rules);return mi(t.rules,"rom"===e.root?i:r.pronunciations[e.lect].ipa,t.categories)}]}class ld extends Te{constructor(e){super(),Ee(this,e,ad,rd,a,{word:0,source:1})}}function cd(e,t,n){const o=e.slice();return o[9]=t[n],o[11]=n,o}function hd(e,t,n){const o=e.slice();return o[12]=t[n],o}function dd(e){let t,n,o,i=e[11]+1+"";return{c(){t=E("div"),n=S(i),o=S("."),L(t,"class","sense")},m(e,i){k(e,t,i),w(t,n),w(t,o)},d(e){e&&x(t)}}}function ud(e){let t,n,o=e[12]+"";return{c(){t=E("div"),n=S(o),L(t,"class","tag-item")},m(e,o){k(e,t,o),w(t,n)},p(e,t){2&t&&o!==(o=e[12]+"")&&O(n,o)},d(e){e&&x(t)}}}function pd(e){let t,n=!!e[12]&&ud(e);return{c(){n&&n.c(),t=I()},m(e,o){n&&n.m(e,o),k(e,t,o)},p(e,o){e[12]?n?n.p(e,o):(n=ud(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&x(t)}}}function fd(e){let t,n,o=e[9].lects.join(", ")+"";return{c(){t=E("p"),n=S(o),L(t,"class","lect")},m(e,o){k(e,t,o),w(t,n)},p(e,t){2&t&&o!==(o=e[9].lects.join(", ")+"")&&O(n,o)},d(e){e&&x(t)}}}function gd(e){let t,n;return t=new tr({props:{word:e[0],tags:e[9].tags,readFromReference:e[3]}}),{c(){ye(t.$$.fragment)},m(e,o){ke(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.word=e[0]),2&n&&(o.tags=e[9].tags),8&n&&(o.readFromReference=e[3]),t.$set(o)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){ge(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function md(e){let t,n,o,i,r;return{c(){t=E("div"),t.textContent="etymology",n=B(),o=E("p"),i=E("i"),r=S(e[5]),L(t,"class","tag-item"),L(o,"class","lex-body")},m(e,s){k(e,t,s),k(e,n,s),k(e,o,s),w(o,i),w(i,r)},p(e,t){32&t&&O(r,e[5])},d(e){e&&x(t),e&&x(n),e&&x(o)}}}function bd(e){let t,n,o,i,r,s,a,l,c=Fr(e[9].definition)+"",h=e[1].Senses.length>1&&dd(e),d=e[9].tags,u=[];for(let t=0;t<d.length;t+=1)u[t]=pd(hd(e,d,t));let p=e[4].UseLects&&fd(e),f=(e[4].ShowInflection||e[3])&&gd(e),g=e[4].ShowEtymology&&!!e[5]&&e[2]&&md(e);return{c(){h&&h.c(),t=B();for(let e=0;e<u.length;e+=1)u[e].c();n=B(),p&&p.c(),o=B(),i=E("p"),r=B(),f&&f.c(),s=B(),g&&g.c(),a=I(),M(i,"margin-bottom","-1em")},m(e,d){h&&h.m(e,d),k(e,t,d);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(e,d);k(e,n,d),p&&p.m(e,d),k(e,o,d),k(e,i,d),i.innerHTML=c,k(e,r,d),f&&f.m(e,d),k(e,s,d),g&&g.m(e,d),k(e,a,d),l=!0},p(e,r){if(e[1].Senses.length>1?h||(h=dd(e),h.c(),h.m(t.parentNode,t)):h&&(h.d(1),h=null),2&r){let t;for(d=e[9].tags,t=0;t<d.length;t+=1){const o=hd(e,d,t);u[t]?u[t].p(o,r):(u[t]=pd(o),u[t].c(),u[t].m(n.parentNode,n))}for(;t<u.length;t+=1)u[t].d(1);u.length=d.length}e[4].UseLects?p?p.p(e,r):(p=fd(e),p.c(),p.m(o.parentNode,o)):p&&(p.d(1),p=null),(!l||2&r)&&c!==(c=Fr(e[9].definition)+"")&&(i.innerHTML=c),e[4].ShowInflection||e[3]?f?(f.p(e,r),24&r&&fe(f,1)):(f=gd(e),f.c(),fe(f,1),f.m(s.parentNode,s)):f&&(ue(),ge(f,1,1,(()=>{f=null})),pe()),e[4].ShowEtymology&&e[5]&&e[2]?g?g.p(e,r):(g=md(e),g.c(),g.m(a.parentNode,a)):g&&(g.d(1),g=null)},i(e){l||(fe(f),l=!0)},o(e){ge(f),l=!1},d(e){h&&h.d(e),e&&x(t),C(u,e),e&&x(n),p&&p.d(e),e&&x(o),e&&x(i),e&&x(r),f&&f.d(e),e&&x(s),g&&g.d(e),e&&x(a)}}}function wd(e){let t,n,o,i,r,s,a,l;n=new ld({props:{word:e[0],source:e[1]}}),i=new Ri({props:{pronunciations:e[1].pronunciations}});let c=e[1].Senses,h=[];for(let t=0;t<c.length;t+=1)h[t]=bd(cd(e,c,t));const d=e=>ge(h[e],1,1,(()=>{h[e]=null}));return{c(){t=E("div"),ye(n.$$.fragment),o=B(),ye(i.$$.fragment),r=B();for(let e=0;e<h.length;e+=1)h[e].c();L(t,"id",e[0]),L(t,"class","lex-entry prelined")},m(c,d){k(c,t,d),ke(n,t,null),w(t,o),ke(i,t,null),w(t,r);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(t,null);s=!0,a||(l=_(t,"contextmenu",e[6]),a=!0)},p(e,[o]){const r={};1&o&&(r.word=e[0]),2&o&&(r.source=e[1]),n.$set(r);const a={};if(2&o&&(a.pronunciations=e[1].pronunciations),i.$set(a),63&o){let n;for(c=e[1].Senses,n=0;n<c.length;n+=1){const i=cd(e,c,n);h[n]?(h[n].p(i,o),fe(h[n],1)):(h[n]=bd(i),h[n].c(),fe(h[n],1),h[n].m(t,null))}for(ue(),n=c.length;n<h.length;n+=1)d(n);pe()}(!s||1&o)&&L(t,"id",e[0])},i(e){if(!s){fe(n.$$.fragment,e),fe(i.$$.fragment,e);for(let e=0;e<c.length;e+=1)fe(h[e]);s=!0}},o(e){ge(n.$$.fragment,e),ge(i.$$.fragment,e),h=h.filter(Boolean);for(let e=0;e<h.length;e+=1)ge(h[e]);s=!1},d(e){e&&x(t),xe(n),xe(i),C(h,e),a=!1,l()}}}function vd(e,t,n){let o;h(e,Uo,(e=>n(4,o=e)));const i=K();let{word:r}=t,{source:s}=t,{showEtymology:a}=t,{showInflections:l=!1}=t;let c="";return e.$$set=e=>{"word"in e&&n(0,r=e.word),"source"in e&&n(1,s=e.source),"showEtymology"in e&&n(2,a=e.showEtymology),"showInflections"in e&&n(3,l=e.showInflections)},e.$$.update=()=>{19&e.$$.dirty&&(o.Etymologies,o.Lexicon,n(5,c=function(){const e=[];let t=[r],n=6;for(;Object.keys(o.Etymologies).some((e=>o.Etymologies[e].descendants.some((e=>t.includes(e.name)))))&&n;)n--,e.push(Object.keys(o.Etymologies).filter((i=>{const s=o.Etymologies[i].descendants.some((e=>t.includes(e.name)));return(e.flat().includes(r)||i===r&&s)&&(n=0),s}))),t=e[e.length-1];e.reverse();let i="",s="";return e.forEach((e=>{let t=e.join(", ");t!==s&&(i+=t+" → "),s=t})),i=i?i+r:"",i}()))},[r,s,a,l,o,c,()=>i("edit")]}class yd extends Te{constructor(e){super(),Ee(this,e,vd,wd,a,{word:0,source:1,showEtymology:2,showInflections:3})}}function kd(e,t,n){const o=e.slice();return o[2]=t[n],o}function xd(e){let t,n,o,i=e[2]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[2],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){2&r&&i!==(i=e[2]+"")&&O(n,i),2&r&&o!==(o=e[2])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Cd(t){let n,o,r,s,a=Array.from(new Set(Object.keys(t[1].Lexicon).map(t[4]).flat(1/0))).sort(),l=[];for(let e=0;e<a.length;e+=1)l[e]=xd(kd(t,a,e));return{c(){n=E("select"),o=E("option"),o.textContent="Choose Tags";for(let e=0;e<l.length;e+=1)l[e].c();o.__value="existing tags",o.value=o.__value,void 0===t[0]&&ne((()=>t[5].call(n)))},m(e,i){k(e,n,i),w(n,o);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(n,null);P(n,t[0],!0),r||(s=[_(n,"change",t[5]),_(n,"change",t[6])],r=!0)},p(e,[t]){if(2&t){let o;for(a=Array.from(new Set(Object.keys(e[1].Lexicon).map(e[4]).flat(1/0))).sort(),o=0;o<a.length;o+=1){const i=kd(e,a,o);l[o]?l[o].p(i,t):(l[o]=xd(i),l[o].c(),l[o].m(n,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}3&t&&P(n,e[0])},i:e,o:e,d(e){e&&x(n),C(l,e),r=!1,i(s)}}}function Ed(e,t,n){let o;h(e,Uo,(e=>n(1,o=e)));const i=K();let{tagSelector:r="existing tags"}=t,s="";const a=()=>i("select",s);return e.$$set=e=>{"tagSelector"in e&&n(0,r=e.tagSelector)},[r,o,s,a,e=>o.Lexicon[e].Senses.map((e=>e.tags)),function(){r=N(this),n(0,r)},()=>{n(2,s="existing tags"===r?"":`${r}`),a(),n(0,r="existing tags")}]}class Td extends Te{constructor(e){super(),Ee(this,e,Ed,Cd,s,{tagSelector:0})}}function Sd(e,t,n){const o=e.slice();return o[16]=t[n],o}function Bd(e){let t,n,o,i,r,s=e[3]+1+"";return{c(){t=E("i"),n=S("Sense "),o=S(s),i=B(),r=E("br")},m(e,s){k(e,t,s),w(t,n),w(t,o),k(e,i,s),k(e,r,s)},p(e,t){8&t&&s!==(s=e[3]+1+"")&&O(o,s)},d(e){e&&x(t),e&&x(i),e&&x(r)}}}function Id(e){let t,n,o,i,r,s,a=e[4].Lects,l=[];for(let t=0;t<a.length;t+=1)l[t]=_d(Sd(e,a,t));return{c(){t=E("label"),n=S("Lects"),o=E("br"),i=B();for(let e=0;e<l.length;e+=1)l[e].c();r=B(),s=E("br")},m(e,a){k(e,t,a),w(t,n),w(t,o),w(t,i);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null);k(e,r,a),k(e,s,a)},p(e,n){if(146&n){let o;for(a=e[4].Lects,o=0;o<a.length;o+=1){const i=Sd(e,a,o);l[o]?l[o].p(i,n):(l[o]=_d(i),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}},d(e){e&&x(t),C(l,e),e&&x(r),e&&x(s)}}}function _d(e){let t,n,o,i,r,s,a,l,c,h,d,u,p=e[16]+"";function f(){return e[12](e[16])}return{c(){t=E("label"),n=E("div"),o=E("input"),s=B(),a=E("span"),l=S(p),c=B(),h=E("br"),L(o,"id",i=e[16]),L(o,"type","checkbox"),o.checked=r=e[1].includes(e[16]),M(n,"display","inline-block"),M(a,"display","inline-block")},m(e,i){k(e,t,i),w(t,n),w(n,o),w(t,s),w(t,a),w(a,l),w(t,c),k(e,h,i),d||(u=_(o,"change",f),d=!0)},p(t,n){e=t,16&n&&i!==(i=e[16])&&L(o,"id",i),18&n&&r!==(r=e[1].includes(e[16]))&&(o.checked=r),16&n&&p!==(p=e[16]+"")&&O(l,p)},d(e){e&&x(t),e&&x(h),d=!1,u()}}}function Ld(e){let t,n,o,i,r,s=e[3]+1+"";return{c(){t=E("button"),n=S("Remove Sense "),o=S(s),L(t,"class","hover-highlight hover-shadow")},m(s,a){k(s,t,a),w(t,n),w(t,o),i||(r=_(t,"click",e[5]),i=!0)},p(e,t){8&t&&s!==(s=e[3]+1+"")&&O(o,s)},d(e){e&&x(t),i=!1,r()}}}function Ad(e){let t,n,o,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,C,T,I,A,O,M="hide"!==e[3]&&Bd(e);g=new Td({}),g.$on("select",e[11]);let P=e[4].UseLects&&Id(e),N=!!e[3]&&"hide"!==e[3]&&Ld(e);return{c(){t=E("label"),M&&M.c(),n=B(),o=E("label"),r=S("Definition\n        "),s=E("textarea"),a=B(),l=E("br"),c=B(),h=E("label"),d=S("Tags\n        "),u=E("div"),p=E("textarea"),f=B(),ye(g.$$.fragment),m=B(),b=E("br"),v=B(),P&&P.c(),y=B(),N&&N.c(),C=B(),T=E("br"),L(s,"rows","4"),L(p,"rows","1")},m(i,x){k(i,t,x),M&&M.m(t,null),w(t,n),w(t,o),w(o,r),w(o,s),$(s,e[2]),w(t,a),w(t,l),w(t,c),w(t,h),w(h,d),w(h,u),w(u,p),$(p,e[0]),w(u,f),ke(g,u,null),w(t,m),w(t,b),w(t,v),P&&P.m(t,null),w(t,y),N&&N.m(t,null),w(t,C),w(t,T),I=!0,A||(O=[_(s,"input",e[8]),_(s,"keydown",e[9]),_(p,"input",e[10])],A=!0)},p(e,[o]){"hide"!==e[3]?M?M.p(e,o):(M=Bd(e),M.c(),M.m(t,n)):M&&(M.d(1),M=null),4&o&&$(s,e[2]),1&o&&$(p,e[0]),e[4].UseLects?P?P.p(e,o):(P=Id(e),P.c(),P.m(t,y)):P&&(P.d(1),P=null),e[3]&&"hide"!==e[3]?N?N.p(e,o):(N=Ld(e),N.c(),N.m(t,C)):N&&(N.d(1),N=null)},i(e){I||(fe(g.$$.fragment,e),I=!0)},o(e){ge(g.$$.fragment,e),I=!1},d(e){e&&x(t),M&&M.d(),xe(g),P&&P.d(),N&&N.d(),A=!1,i(O)}}}function Od(e,t,n){let o,i,r;h(e,qo,(e=>n(13,o=e))),h(e,Vo,(e=>n(14,i=e))),h(e,Uo,(e=>n(4,r=e)));let{definition:s=""}=t,{tags:a}=t,{index:l}=t;const c=K(),u=()=>c("commit");let{lects:p}=t;function f(e){p.includes(e)?n(1,p=p.filter((t=>t!==e))):(n(1,p=[...p,e]),d(Vo,i[e]=vi(o,e),i))}return e.$$set=e=>{"definition"in e&&n(2,s=e.definition),"tags"in e&&n(0,a=e.tags),"index"in e&&n(3,l=e.index),"lects"in e&&n(1,p=e.lects)},e.$$.update=()=>{e.$$.dirty,18&e.$$.dirty&&p.filter((e=>!r.Lects.includes(e))).length>0&&p.filter((e=>!r.Lects.includes(e))).forEach((e=>{n(1,p=p.filter((t=>t!==e)))}))},[a,p,s,l,r,()=>c("remove"),u,f,function(){s=this.value,n(2,s)},e=>{"Enter"===e.key&&e.altKey&&u()},function(){a=this.value,n(0,a)},e=>n(0,a+=e.detail?a?" "+e.detail:e.detail:""),e=>f(e)]}class $d extends Te{constructor(e){super(),Ee(this,e,Od,Ad,s,{definition:2,tags:0,index:3,lects:1})}}function Md(e,t,n){const o=e.slice();return o[46]=t[n],o}function Pd(e,t,n){const o=e.slice();return o[49]=t[n],o}function Nd(e,t,n){const o=e.slice();return o[52]=t[n],o[53]=t,o[54]=n,o}function Rd(e,t,n){const o=e.slice();return o[49]=t[n],o[55]=t,o[56]=n,o}function Dd(e){let t,n,o,r;return{c(){t=E("span"),n=E("input"),L(n,"type","text"),L(n,"class","pronunciation"),L(t,"title","This field is for the pronunciation of your word. It will auto-populate based on rules you set in the Phonology tab.")},m(i,s){k(i,t,s),w(t,n),$(n,e[11].General),o||(r=[_(n,"input",e[23]),u(Bi.call(null,t,{position:"bottom"}))],o=!0)},p(e,t){2048&t[0]&&n.value!==e[11].General&&$(n,e[11].General)},d(e){e&&x(t),o=!1,i(r)}}}function zd(e){let t,n=e[9],o=[];for(let t=0;t<n.length;t+=1)o[t]=Fd(Rd(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=I()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);k(e,t,n)},p(e,i){if(2560&i[0]){let r;for(n=e[9],r=0;r<n.length;r+=1){const s=Rd(e,n,r);o[r]?o[r].p(s,i):(o[r]=Fd(s),o[r].c(),o[r].m(t.parentNode,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){C(o,e),e&&x(t)}}}function Fd(e){let t,n,o,r,s,a,l,c,h,d,p,f,g=e[49]+"";function m(){e[22].call(c,e[49])}return{c(){t=E("div"),n=E("div"),o=E("p"),r=S(g),s=B(),a=E("div"),l=E("span"),c=E("input"),d=B(),L(o,"class","lect"),L(n,"class","column text-right"),L(c,"type","text"),L(c,"class","pronunciation text-left"),L(l,"title",h=`This field is for the pronunciation of your word in your ${e[49]} lect. It will auto-populate based on rules you set in the Phonology tab for this lect.`),L(a,"class","column text-left"),L(t,"class","row narrow")},m(i,h){k(i,t,h),w(t,n),w(n,o),w(o,r),w(t,s),w(t,a),w(a,l),w(l,c),$(c,e[11][e[49]]),w(t,d),p||(f=[_(c,"input",m),u(Bi.call(null,l,{position:"bottom"}))],p=!0)},p(t,n){e=t,512&n[0]&&g!==(g=e[49]+"")&&O(r,g),2560&n[0]&&c.value!==e[11][e[49]]&&$(c,e[11][e[49]]),512&n[0]&&h!==(h=`This field is for the pronunciation of your word in your ${e[49]} lect. It will auto-populate based on rules you set in the Phonology tab for this lect.`)&&L(l,"title",h)},d(e){e&&x(t),p=!1,i(f)}}}function Hd(e){let t,n,o,i,r;function s(t){e[24](t,e[52])}function a(t){e[25](t,e[52])}function l(t){e[26](t,e[52])}let c={index:e[54]};return void 0!==e[52].definition&&(c.definition=e[52].definition),void 0!==e[52].tags&&(c.tags=e[52].tags),void 0!==e[52].lects&&(c.lects=e[52].lects),t=new $d({props:c}),Z.push((()=>ve(t,"definition",s))),Z.push((()=>ve(t,"tags",a))),Z.push((()=>ve(t,"lects",l))),t.$on("remove",(function(){return e[27](e[54])})),t.$on("commit",e[28]),{c(){ye(t.$$.fragment)},m(e,n){ke(t,e,n),r=!0},p(r,s){e=r;const a={};!n&&32&s[0]&&(n=!0,a.definition=e[52].definition,oe((()=>n=!1))),!o&&32&s[0]&&(o=!0,a.tags=e[52].tags,oe((()=>o=!1))),!i&&32&s[0]&&(i=!0,a.lects=e[52].lects,oe((()=>i=!1))),t.$set(a)},i(e){r||(fe(t.$$.fragment,e),r=!0)},o(e){ge(t.$$.fragment,e),r=!1},d(e){xe(t,e)}}}function jd(t){let n,o,r,s,a,l;return{c(){n=E("div"),o=E("button"),o.textContent="Overwrite Entry",r=B(),s=E("button"),s.textContent="Append Definition",L(o,"id","overwrite"),L(o,"class","hover-shadow"),L(o,"title","If you want to replace an existing entry with a new one, you can use this button to overwrite it."),L(s,"id","append"),L(s,"class","hover-shadow hover-highlight"),L(s,"title","If you want to add new sense(s) to an existing word, you can use this button to append your work to the existing entry."),L(n,"class","row"),L(n,"id","definition-exists")},m(e,i){k(e,n,i),w(n,o),w(n,r),w(n,s),a||(l=[u(Bi.call(null,o,{position:"bottom"})),_(o,"click",t[31]),u(Bi.call(null,s,{position:"bottom"})),_(s,"click",t[32])],a=!0)},p:e,d(e){e&&x(n),a=!1,i(l)}}}function Ud(t){let n,o,i;return{c(){n=E("button"),n.textContent="Add Word",L(n,"class","hover-highlight hover-shadow"),L(n,"id","add-word-button")},m(e,r){k(e,n,r),o||(i=_(n,"click",t[30]),o=!0)},p:e,d(e){e&&x(n),o=!1,i()}}}function Wd(e){let t;return{c(){t=E("label"),t.textContent="Search by word…",L(t,"for","search-wrd"),M(t,"position","absolute"),M(t,"top","0.5em"),M(t,"left","1em")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function qd(e){let t;return{c(){t=E("label"),t.textContent="Search by tags…",L(t,"for","search-tag"),M(t,"position","absolute"),M(t,"top","0.5em"),M(t,"left","1em")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function Vd(e){let t;return{c(){t=E("label"),t.textContent="Search definitions…",L(t,"for","search-def"),M(t,"position","absolute"),M(t,"top","0.33em"),M(t,"left","1em")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function Gd(e){let t,n,o,i,r,s,a,l=e[6].Lects,c=[];for(let t=0;t<l.length;t+=1)c[t]=Yd(Pd(e,l,t));return{c(){t=E("div"),n=E("label"),o=S("Filter by lect: \n                            "),i=E("select"),r=E("option"),r.textContent="All";for(let e=0;e<c.length;e+=1)c[e].c();r.__value="",r.value=r.__value,void 0===e[3]&&ne((()=>e[36].call(i))),L(t,"class","column")},m(l,h){k(l,t,h),w(t,n),w(n,o),w(n,i),w(i,r);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(i,null);P(i,e[3],!0),s||(a=_(i,"change",e[36]),s=!0)},p(e,t){if(64&t[0]){let n;for(l=e[6].Lects,n=0;n<l.length;n+=1){const o=Pd(e,l,n);c[n]?c[n].p(o,t):(c[n]=Yd(o),c[n].c(),c[n].m(i,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}72&t[0]&&P(i,e[3])},d(e){e&&x(t),C(c,e),s=!1,a()}}}function Yd(e){let t,n,o,i=e[49]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[49],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){64&r[0]&&i!==(i=e[49]+"")&&O(n,i),64&r[0]&&o!==(o=e[49])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Kd(t){let n;return{c(){n=E("p"),n.textContent="Add new words on the left",L(n,"class","info"),L(n,"id","lex-body")},m(e,t){k(e,n,t)},p:e,d(e){e&&x(n)}}}function Xd(e){let t,n;return t=new yd({props:{word:e[46],source:e[6].Lexicon[e[46]],showEtymology:!0}}),t.$on("edit",(function(){return e[37](e[46])})),{c(){ye(t.$$.fragment)},m(e,o){ke(t,e,o),n=!0},p(n,o){e=n;const i={};128&o[0]&&(i.word=e[46]),192&o[0]&&(i.source=e[6].Lexicon[e[46]]),t.$set(i)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){ge(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Zd(e){let t,n,o,i=Object.keys(e[6].Lexicon).length+"",r=1===Object.keys(e[6].Lexicon).length?"Entry":"Entries";return{c(){t=S(i),n=B(),o=S(r)},m(e,i){k(e,t,i),k(e,n,i),k(e,o,i)},p(e,n){64&n[0]&&i!==(i=Object.keys(e[6].Lexicon).length+"")&&O(t,i),64&n[0]&&r!==(r=1===Object.keys(e[6].Lexicon).length?"Entry":"Entries")&&O(o,r)},d(e){e&&x(t),e&&x(n),e&&x(o)}}}function Jd(e){let t,n,o,i=(e[4][0]?e[4].length:"0")+"",r=1===e[4].length&&e[4][0]?"Match":"Matches";return{c(){t=S(i),n=B(),o=S(r)},m(e,i){k(e,t,i),k(e,n,i),k(e,o,i)},p(e,n){16&n[0]&&i!==(i=(e[4][0]?e[4].length:"0")+"")&&O(t,i),16&n[0]&&r!==(r=1===e[4].length&&e[4][0]?"Match":"Matches")&&O(o,r)},d(e){e&&x(t),e&&x(n),e&&x(o)}}}function Qd(e){let t,n,o,r,s,a,l,c,h,d,p,f,g,m,b,v,y,T,S,I,A,O,P,N,D,z,F,H,j,U,W,q,V,G,Y,K,X,Z,J,Q,ee,te,ne,oe,ie,re,se,ae,le,ce,he,de;function me(e,t){return e[6].UseLects?zd:Dd}let be=me(e),we=be(e),ve=e[5],ye=[];for(let t=0;t<ve.length;t+=1)ye[t]=Hd(Nd(e,ve,t));const ke=e=>ge(ye[e],1,1,(()=>{ye[e]=null}));function xe(e,t){return e[10]in e[6].Lexicon?jd:Ud}let Ce=xe(e),Ee=Ce(e),Te=!e[0]&&Wd(),Se=!e[2]&&qd(),Be=!e[1]&&Vd(),Ie=e[6].UseLects&&Gd(e),_e=e[7],Le=[];for(let t=0;t<_e.length;t+=1)Le[t]=Xd(Md(e,_e,t));const Ae=e=>ge(Le[e],1,1,(()=>{Le[e]=null}));let Oe=null;function $e(e,t){return e[4][0]?Jd:Zd}_e.length||(Oe=Kd());let Me=$e(e),Pe=Me(e);return{c(){t=E("div"),n=E("div"),o=E("div"),r=E("label"),r.textContent="Case Sensitivity",s=B(),a=E("input"),l=B(),c=E("div"),h=E("label"),h.textContent="Ignore Diacritics",d=B(),p=E("input"),f=B(),g=E("input"),m=B(),b=E("div"),v=E("div"),y=E("button"),T=B(),S=E("div"),I=E("label"),I.textContent="New Word",A=B(),O=E("input"),P=B(),we.c(),N=B();for(let e=0;e<ye.length;e+=1)ye[e].c();D=B(),z=E("button"),z.textContent="Add Sense",F=B(),Ee.c(),H=B(),j=E("div"),U=B(),W=E("div"),q=E("div"),V=E("div"),Te&&Te.c(),G=B(),Y=E("input"),K=B(),X=E("div"),Se&&Se.c(),Z=B(),J=E("input"),Q=B(),ee=E("div"),te=E("div"),Be&&Be.c(),ne=B(),oe=E("input"),ie=B(),Ie&&Ie.c(),re=B(),se=E("div");for(let e=0;e<Le.length;e+=1)Le[e].c();Oe&&Oe.c(),ae=B(),le=E("p"),Pe.c(),L(r,"for","case-sensitive"),M(r,"margin","auto"),L(r,"title","This setting determines whether or not alphabetization is case sensitive."),L(a,"type","checkbox"),M(a,"width","15px"),M(a,"margin","auto"),L(a,"id","case-sensitive"),L(o,"class","narrow-col"),L(h,"for","ignore-diacritic"),M(h,"margin","auto"),M(h,"text-align","right"),L(h,"title","This setting determines whether or not diacritics are taken into account during alphabetization."),L(p,"type","checkbox"),M(p,"width","15px"),M(p,"margin","auto"),L(p,"id","ignore-diacritic"),L(c,"class","narrow-col"),L(g,"id","alph-input"),L(g,"type","text"),L(n,"class","container row text-center header"),L(y,"class","collapser"),L(I,"for","wrd-input"),L(I,"title","Write your new word here in its romanized form."),L(O,"id","wrd-input"),L(O,"type","text"),L(z,"class","hover-highlight hover-shadow"),L(z,"id","add-sense-button"),L(z,"title","If this word has unrelated definitions, adding multiple senses is a good way to separate them visually and give them separate sets of tags."),M(j,"width","100vw"),L(S,"class","text-center scrolled"),M(S,"height","100%"),M(S,"overflow-x","hidden"),R(S,"collapsed",e[8]),L(v,"class","container collapsible-column"),M(v,"height","100%"),L(Y,"id","search-wrd"),L(Y,"type","text"),L(Y,"class","search"),L(V,"class","column search-container"),L(J,"id","search-tag"),L(J,"type","text"),L(J,"class","search"),L(X,"class","column search-container"),L(q,"class","row"),L(oe,"id","search-def"),L(oe,"type","text"),L(oe,"class","search"),L(te,"class","search-container column"),L(ee,"class","row"),L(se,"class","scrolled"),M(se,"height","88%"),L(le,"id","entry-counter"),L(W,"class","container column text-center"),M(W,"height","100%"),L(b,"class","row"),M(b,"height","84vh"),L(t,"class","tab-pane")},m(i,x){k(i,t,x),w(t,n),w(n,o),w(o,r),w(o,s),w(o,a),a.checked=e[6].CaseSensitive,w(n,l),w(n,c),w(c,h),w(c,d),w(c,p),p.checked=e[6].IgnoreDiacritics,w(n,f),w(n,g),$(g,e[6].Alphabet),w(t,m),w(t,b),w(b,v),w(v,y),w(v,T),w(v,S),w(S,I),w(S,A),w(S,O),$(O,e[10]),w(S,P),we.m(S,null),w(S,N);for(let e=0;e<ye.length;e+=1)ye[e]&&ye[e].m(S,null);w(S,D),w(S,z),w(S,F),Ee.m(S,null),w(S,H),w(S,j),w(b,U),w(b,W),w(W,q),w(q,V),Te&&Te.m(V,null),w(V,G),w(V,Y),$(Y,e[0]),w(q,K),w(q,X),Se&&Se.m(X,null),w(X,Z),w(X,J),$(J,e[2]),w(W,Q),w(W,ee),w(ee,te),Be&&Be.m(te,null),w(te,ne),w(te,oe),$(oe,e[1]),w(ee,ie),Ie&&Ie.m(ee,null),w(W,re),w(W,se);for(let e=0;e<Le.length;e+=1)Le[e]&&Le[e].m(se,null);Oe&&Oe.m(se,null),w(W,ae),w(W,le),Pe.m(le,null),ce=!0,he||(de=[u(Bi.call(null,r,{position:"bottom"})),_(a,"change",e[16]),u(Bi.call(null,h,{position:"bottom"})),_(p,"change",e[17]),_(g,"input",e[18]),_(y,"click",e[19]),u(Bi.call(null,I,{position:"bottom"})),_(O,"input",e[20]),_(O,"input",e[21]),u(Bi.call(null,z,{position:"right"})),_(z,"click",e[29]),_(Y,"input",e[33]),_(Y,"input",e[14]),_(J,"input",e[34]),_(J,"input",e[14]),_(oe,"input",e[35]),_(oe,"input",e[14])],he=!0)},p(e,t){if(64&t[0]&&(a.checked=e[6].CaseSensitive),64&t[0]&&(p.checked=e[6].IgnoreDiacritics),64&t[0]&&g.value!==e[6].Alphabet&&$(g,e[6].Alphabet),1024&t[0]&&O.value!==e[10]&&$(O,e[10]),be===(be=me(e))&&we?we.p(e,t):(we.d(1),we=be(e),we&&(we.c(),we.m(S,N))),8224&t[0]){let n;for(ve=e[5],n=0;n<ve.length;n+=1){const o=Nd(e,ve,n);ye[n]?(ye[n].p(o,t),fe(ye[n],1)):(ye[n]=Hd(o),ye[n].c(),fe(ye[n],1),ye[n].m(S,D))}for(ue(),n=ve.length;n<ye.length;n+=1)ke(n);pe()}if(Ce===(Ce=xe(e))&&Ee?Ee.p(e,t):(Ee.d(1),Ee=Ce(e),Ee&&(Ee.c(),Ee.m(S,H))),(!ce||256&t[0])&&R(S,"collapsed",e[8]),e[0]?Te&&(Te.d(1),Te=null):Te||(Te=Wd(),Te.c(),Te.m(V,G)),1&t[0]&&Y.value!==e[0]&&$(Y,e[0]),e[2]?Se&&(Se.d(1),Se=null):Se||(Se=qd(),Se.c(),Se.m(X,Z)),4&t[0]&&J.value!==e[2]&&$(J,e[2]),e[1]?Be&&(Be.d(1),Be=null):Be||(Be=Vd(),Be.c(),Be.m(te,ne)),2&t[0]&&oe.value!==e[1]&&$(oe,e[1]),e[6].UseLects?Ie?Ie.p(e,t):(Ie=Gd(e),Ie.c(),Ie.m(ee,null)):Ie&&(Ie.d(1),Ie=null),4288&t[0]){let n;for(_e=e[7],n=0;n<_e.length;n+=1){const o=Md(e,_e,n);Le[n]?(Le[n].p(o,t),fe(Le[n],1)):(Le[n]=Xd(o),Le[n].c(),fe(Le[n],1),Le[n].m(se,null))}for(ue(),n=_e.length;n<Le.length;n+=1)Ae(n);pe(),!_e.length&&Oe?Oe.p(e,t):_e.length?Oe&&(Oe.d(1),Oe=null):(Oe=Kd(),Oe.c(),Oe.m(se,null))}Me===(Me=$e(e))&&Pe?Pe.p(e,t):(Pe.d(1),Pe=Me(e),Pe&&(Pe.c(),Pe.m(le,null)))},i(e){if(!ce){for(let e=0;e<ve.length;e+=1)fe(ye[e]);for(let e=0;e<_e.length;e+=1)fe(Le[e]);ce=!0}},o(e){ye=ye.filter(Boolean);for(let e=0;e<ye.length;e+=1)ge(ye[e]);Le=Le.filter(Boolean);for(let e=0;e<Le.length;e+=1)ge(Le[e]);ce=!1},d(e){e&&x(t),we.d(),C(ye,e),Ee.d(),Te&&Te.d(),Se&&Se.d(),Be&&Be.d(),Ie&&Ie.d(),C(Le,e),Oe&&Oe.d(),Pe.d(),he=!1,i(de)}}}function eu(e,t,n){let o,i,r,s,a;h(e,Uo,(e=>n(6,o=e))),h(e,qo,(e=>n(10,i=e))),h(e,Vo,(e=>n(11,r=e))),h(e,ti,(e=>n(38,s=e))),h(e,Wo,(e=>n(39,a=e)));var l=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n};const{ipcRenderer:c}=require("electron"),u=require("vex-js");c.on("update-lexicon-for-gods-sake-please",(()=>{d(Uo,o.Lexicon=Object.assign({},o.Lexicon),o)}));let p,f,g,m=[""],b="",w="",v="",y="",k=[],x=!1,C=[{definition:"",tags:"",lects:[...o.Lects]}];function E(e){const t=document.getElementById(e);t&&(a&&d(Wo,a=0,a),n(1,w=""),n(2,v=""),n(0,b=""),n(3,y=""),t.scrollIntoView({behavior:"smooth",block:"center"}))}function T(e){let t=!0;(i||m[0])&&(t=confirm("There is text in the word entry fields. Are you sure you want to overwrite it?")),t&&(d(qo,i=e,i),d(Vo,r={},r),Object.keys(o.Lexicon[e].pronunciations).forEach((t=>{d(Vo,r[t]=o.Lexicon[e].pronunciations[t].ipa,r)})),n(5,C=[...o.Lexicon[e].Senses].map((e=>({definition:e.definition,tags:e.tags.join(" "),lects:e.lects})))),d(ti,s=!0,s),window.setTimeout((()=>{let t=o.Lexicon,n=e;t[n];let i=l(t,["symbol"==typeof n?n:n+""]);d(Uo,o.Lexicon=i,o),d(ti,s=!1,s)}),100))}function S(e,t){const s=e=>C[""]!==e&&!!e.definition,a=e=>({definition:e.definition,tags:e.tags.split(/\s+/g),lects:e.lects});t?o.Lexicon[e].Senses.push(...C.filter(s).map(a)):d(Uo,o.Lexicon[e]={pronunciations:(()=>{const t={};return Object.keys(r).filter((e=>C.map((e=>e.lects)).flat().includes(e))).forEach((n=>{t[n]={ipa:r[n].trim(),irregular:r[n].trim()!==vi(e,n)}})),t})(),Senses:C.filter(s).map(a),Timestamp:Date.now()},o),d(Uo,o.Lexicon=Object.assign({},o.Lexicon),o),d(qo,i="",i),d(Vo,r=(()=>{const e={};return o.Lects.forEach((t=>{e[t]=""})),e})(),r),n(5,C=[{definition:"",tags:"",lects:[...o.Lects]}])}function B(e){let t=i.trim();t&&C[0].definition&&C.map((e=>e.lects)).flat().length&&(!function(e){const t=ui().Alphabet.trim().split(/\s+/).sort(((e,t)=>t.length-e.length));return e=ui().CaseSensitive?e:e.toLowerCase(),e=ui().IgnoreDiacritics?e.normalize("NFD").replace(/\p{Diacritic}/gu,""):e,t.forEach((t=>{e=e.replaceAll(t,"")})),!e.replaceAll(/\s+/g,"")}(t)?u.dialog.confirm({message:"The word contains characters not present in the alphabet. Are you sure you want to add it?",callback:n=>{n&&(S(t,e),window.setTimeout((()=>E(t)),50))}}):(S(t,e),window.setTimeout((()=>E(t)),50)))}c.on("lexicon link",((e,t)=>{console.log("link:",t),E(t)}));return e.$$.update=()=>{e.$$.dirty[0],80&e.$$.dirty[0]&&n(15,p=k.reduce(((e,t)=>(t in o.Lexicon&&(e[t]=o.Lexicon[t]),e)),{})),32848&e.$$.dirty[0]&&(o.Lexicon,o.Pronunciations,o.ShowEtymology,o.Etymologies,o.ShowInflection,o.Inflections,o.Alphabet,o.Orthographies,n(7,f=pi(k.length?p:o.Lexicon))),96&e.$$.dirty[0]&&(o.Lects,o.UseLects,n(9,g=Array.from(new Set(C.map((e=>[...e.lects])).flat().filter((e=>o.Lects.includes(e)))))))},[b,w,v,y,k,C,o,f,x,g,i,r,T,B,function(){let e=o.CaseSensitive?b.trim():b.toLowerCase().trim(),t=w.toLowerCase().trim(),i=v.toLowerCase().trim();if(n(4,k=[]),e||t||i||y){for(let r in o.Lexicon){let s=o.Lexicon[r],a=!0;if(!y||s.Senses.some((e=>e.lects.includes(y)))){if(e){let t=o.CaseSensitive?r:r.toLowerCase();if("!"===e[0]){if(t!==e.split("!")[1]){a=!1;continue}}else if(!("^"+t.replaceAll(/\s+/g,"^")+"^").includes(e.replaceAll(/\s+/g,"^"))){a=!1;continue}}if(t)if("!"===t[0]){if(!s.Senses.some((e=>e.definition===t.split("!")[1]))){a=!1;continue}}else if(!s.Senses.some((e=>["^",e.definition,"^"].join().replaceAll(/\s+/g,"^").toLowerCase().includes(t.replaceAll(/\s+/g,"^"))))){a=!1;continue}if(i){let e=i.split(/\s+/);for(let t of e)if("!"===t[0]){if(!s.Senses.some((e=>e.tags.some((e=>e.toLowerCase()===t.split("!")[1]))))){a=!1;continue}}else if(!s.Senses.some((e=>e.tags.some((e=>`^${e.toLowerCase()}^`.includes(t)))))){a=!1;continue}}a&&n(4,k=[...k,r])}else a=!1}k.length||n(4,k=[null])}},p,function(){o.CaseSensitive=this.checked,Uo.set(o)},function(){o.IgnoreDiacritics=this.checked,Uo.set(o)},function(){o.Alphabet=this.value,Uo.set(o)},()=>n(8,x=!x),function(){i=this.value,qo.set(i)},()=>{g.forEach((e=>{d(Vo,r[e]=vi(i,e),r)}))},function(e){r[e]=this.value,Vo.set(r)},function(){r.General=this.value,Vo.set(r)},function(t,o){e.$$.not_equal(o.definition,t)&&(o.definition=t,n(5,C))},function(t,o){e.$$.not_equal(o.tags,t)&&(o.tags=t,n(5,C))},function(t,o){e.$$.not_equal(o.lects,t)&&(o.lects=t,n(5,C))},e=>{n(5,C=C.filter(((t,n)=>n!==e)))},()=>{B(!1)},()=>{n(5,C=[...C,{definition:"",tags:"",lects:[...o.Lects]}])},()=>B(!1),()=>B(!1),()=>B(!0),function(){b=this.value,n(0,b)},function(){v=this.value,n(2,v)},function(){w=this.value,n(1,w)},function(){y=N(this),n(3,y)},e=>T(e)]}class tu extends Te{constructor(e){super(),Ee(this,e,eu,Qd,s,{},null,[-1,-1])}}function nu(e,t,n){const o=e.slice();return o[9]=t[n],o[11]=n,o}function ou(e,t,n){const o=e.slice();return o[12]=t[n],o[11]=n,o}function iu(e){let t,n,o,i,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,C,E=e[12].name+"",B=e[12].source+"";function I(){return e[6](e[12])}return{c(){t=T("g"),n=T("rect"),r=T("text"),s=S(E),h=T("text"),d=S(B),g=T("path"),L(n,"class","lex"),L(n,"x",o=e[0]/(e[2].parents.length+1)*(e[11]+1)-60),L(n,"y",i=e[1]/9-e[3][e[11]]-15+Math.max(...e[3])),L(n,"width","120"),L(r,"class","lex-entry"),L(r,"x",a=e[0]/(e[2].parents.length+1)*(e[11]+1)),L(r,"y",l=e[1]/9-e[3][e[11]]+Math.max(...e[3])),L(r,"text-anchor","middle"),L(r,"dominant-baseline","middle"),L(h,"class","tag-item"),L(h,"x",u=e[0]/(e[2].parents.length+1)*(e[11]+1)),L(h,"y",p=e[1]/9-e[3][e[11]]+15+Math.max(...e[3])),L(h,"text-anchor","middle"),L(h,"dominant-baseline","middle"),L(g,"d",m=`M ${e[0]/(e[2].parents.length+1)*(e[11]+1)}, ${e[1]/9-e[3][e[11]]+20+Math.max(...e[3])} C ${e[0]/(e[2].parents.length+1)*(e[11]+1)}, ${e[1]/9-e[3][e[11]]+50+Math.max(...e[3])}  ${e[0]/2}, ${e[1]/2-40}  ${e[0]/2}, ${e[1]/2-10}`),L(g,"fill","none")},m(e,o){k(e,t,o),w(t,n),w(t,r),w(r,s),w(t,h),w(h,d),w(t,g),v=!0,y||(C=_(t,"mousedown",I),y=!0)},p(t,c){e=t,(!v||5&c&&o!==(o=e[0]/(e[2].parents.length+1)*(e[11]+1)-60))&&L(n,"x",o),(!v||10&c&&i!==(i=e[1]/9-e[3][e[11]]-15+Math.max(...e[3])))&&L(n,"y",i),(!v||4&c)&&E!==(E=e[12].name+"")&&O(s,E),(!v||5&c&&a!==(a=e[0]/(e[2].parents.length+1)*(e[11]+1)))&&L(r,"x",a),(!v||10&c&&l!==(l=e[1]/9-e[3][e[11]]+Math.max(...e[3])))&&L(r,"y",l),(!v||4&c)&&B!==(B=e[12].source+"")&&O(d,B),(!v||5&c&&u!==(u=e[0]/(e[2].parents.length+1)*(e[11]+1)))&&L(h,"x",u),(!v||10&c&&p!==(p=e[1]/9-e[3][e[11]]+15+Math.max(...e[3])))&&L(h,"y",p),(!v||15&c&&m!==(m=`M ${e[0]/(e[2].parents.length+1)*(e[11]+1)}, ${e[1]/9-e[3][e[11]]+20+Math.max(...e[3])} C ${e[0]/(e[2].parents.length+1)*(e[11]+1)}, ${e[1]/9-e[3][e[11]]+50+Math.max(...e[3])}  ${e[0]/2}, ${e[1]/2-40}  ${e[0]/2}, ${e[1]/2-10}`))&&L(g,"d",m)},i(e){v||(ne((()=>{v&&(c||(c=be(r,zi,{amount:10,duration:999},!0)),c.run(1))})),ne((()=>{v&&(f||(f=be(h,zi,{amount:10,duration:999},!0)),f.run(1))})),ne((()=>{v&&(b||(b=be(g,Fi,{duration:999},!0)),b.run(1))})),v=!0)},o(e){c||(c=be(r,zi,{amount:10,duration:999},!1)),c.run(0),f||(f=be(h,zi,{amount:10,duration:999},!1)),f.run(0),b||(b=be(g,Fi,{duration:999},!1)),b.run(0),v=!1},d(e){e&&x(t),e&&c&&c.end(),e&&f&&f.end(),e&&b&&b.end(),y=!1,C()}}}function ru(e){let t,n,o,i,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,C,E=e[9].name+"",B=e[9].source+"";function I(){return e[7](e[9])}return{c(){t=T("g"),n=T("rect"),r=T("text"),s=S(E),h=T("text"),d=S(B),g=T("path"),L(n,"class","lex"),L(n,"x",o=e[0]/(e[2].children.length+1)*(e[11]+1)-60),L(n,"y",i=e[1]+e[4][e[11]]-e[1]/9-15-Math.max(...e[4])),L(n,"width","120"),L(r,"class","lex-entry"),L(r,"x",a=e[0]/(e[2].children.length+1)*(e[11]+1)),L(r,"y",l=e[1]+e[4][e[11]]-e[1]/9-Math.max(...e[4])),L(r,"text-anchor","middle"),L(r,"dominant-baseline","middle"),L(h,"class","tag-item"),L(h,"x",u=e[0]/(e[2].children.length+1)*(e[11]+1)),L(h,"y",p=e[1]+e[4][e[11]]-e[1]/9+15-Math.max(...e[4])),L(h,"text-anchor","middle"),L(h,"dominant-baseline","middle"),L(g,"d",m=`M ${e[0]/2}, ${e[1]/2+10} C ${e[0]/2}, ${e[1]/2+40}  ${e[0]/(e[2].children.length+1)*(e[11]+1)}, ${e[1]+e[4][e[11]]-e[1]/9-40-Math.max(...e[4])}  ${e[0]/(e[2].children.length+1)*(e[11]+1)}, ${e[1]+e[4][e[11]]-e[1]/9-10-Math.max(...e[4])}`),L(g,"fill","none")},m(e,o){k(e,t,o),w(t,n),w(t,r),w(r,s),w(t,h),w(h,d),w(t,g),v=!0,y||(C=_(t,"mousedown",I),y=!0)},p(t,c){e=t,(!v||5&c&&o!==(o=e[0]/(e[2].children.length+1)*(e[11]+1)-60))&&L(n,"x",o),(!v||18&c&&i!==(i=e[1]+e[4][e[11]]-e[1]/9-15-Math.max(...e[4])))&&L(n,"y",i),(!v||4&c)&&E!==(E=e[9].name+"")&&O(s,E),(!v||5&c&&a!==(a=e[0]/(e[2].children.length+1)*(e[11]+1)))&&L(r,"x",a),(!v||18&c&&l!==(l=e[1]+e[4][e[11]]-e[1]/9-Math.max(...e[4])))&&L(r,"y",l),(!v||4&c)&&B!==(B=e[9].source+"")&&O(d,B),(!v||5&c&&u!==(u=e[0]/(e[2].children.length+1)*(e[11]+1)))&&L(h,"x",u),(!v||18&c&&p!==(p=e[1]+e[4][e[11]]-e[1]/9+15-Math.max(...e[4])))&&L(h,"y",p),(!v||23&c&&m!==(m=`M ${e[0]/2}, ${e[1]/2+10} C ${e[0]/2}, ${e[1]/2+40}  ${e[0]/(e[2].children.length+1)*(e[11]+1)}, ${e[1]+e[4][e[11]]-e[1]/9-40-Math.max(...e[4])}  ${e[0]/(e[2].children.length+1)*(e[11]+1)}, ${e[1]+e[4][e[11]]-e[1]/9-10-Math.max(...e[4])}`))&&L(g,"d",m)},i(e){v||(ne((()=>{v&&(c||(c=be(r,zi,{amount:10,duration:999},!0)),c.run(1))})),ne((()=>{v&&(f||(f=be(h,zi,{amount:10,duration:999},!0)),f.run(1))})),ne((()=>{v&&(b||(b=be(g,Fi,{duration:999},!0)),b.run(1))})),v=!0)},o(e){c||(c=be(r,zi,{amount:10,duration:999},!1)),c.run(0),f||(f=be(h,zi,{amount:10,duration:999},!1)),f.run(0),b||(b=be(g,Fi,{duration:999},!1)),b.run(0),v=!1},d(e){e&&x(t),e&&c&&c.end(),e&&f&&f.end(),e&&b&&b.end(),y=!1,C()}}}function su(e){let t,n,o,i,r,s,a,l,c=e[2].name+"",h=e[2].parents,d=[];for(let t=0;t<h.length;t+=1)d[t]=iu(ou(e,h,t));const u=e=>ge(d[e],1,1,(()=>{d[e]=null}));let p=e[2].children,f=[];for(let t=0;t<p.length;t+=1)f[t]=ru(nu(e,p,t));const g=e=>ge(f[e],1,1,(()=>{f[e]=null}));return{c(){t=T("svg"),n=T("g");for(let e=0;e<d.length;e+=1)d[e].c();o=T("g"),i=T("text"),r=S(c);for(let e=0;e<f.length;e+=1)f[e].c();L(i,"class","lex-entry"),L(i,"x",s=e[0]/2),L(i,"y",a=e[1]/2),L(i,"text-anchor","middle"),L(i,"dominant-baseline","middle"),L(t,"width",e[0]),L(t,"height",e[1])},m(e,s){k(e,t,s),w(t,n);for(let e=0;e<d.length;e+=1)d[e]&&d[e].m(n,null);w(n,o),w(o,i),w(i,r);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(n,null);l=!0},p(e,[m]){if(47&m){let t;for(h=e[2].parents,t=0;t<h.length;t+=1){const i=ou(e,h,t);d[t]?(d[t].p(i,m),fe(d[t],1)):(d[t]=iu(i),d[t].c(),fe(d[t],1),d[t].m(n,o))}for(ue(),t=h.length;t<d.length;t+=1)u(t);pe()}if((!l||4&m)&&c!==(c=e[2].name+"")&&O(r,c),(!l||1&m&&s!==(s=e[0]/2))&&L(i,"x",s),(!l||2&m&&a!==(a=e[1]/2))&&L(i,"y",a),55&m){let t;for(p=e[2].children,t=0;t<p.length;t+=1){const o=nu(e,p,t);f[t]?(f[t].p(o,m),fe(f[t],1)):(f[t]=ru(o),f[t].c(),fe(f[t],1),f[t].m(n,null))}for(ue(),t=p.length;t<f.length;t+=1)g(t);pe()}(!l||1&m)&&L(t,"width",e[0]),(!l||2&m)&&L(t,"height",e[1])},i(e){if(!l){for(let e=0;e<h.length;e+=1)fe(d[e]);for(let e=0;e<p.length;e+=1)fe(f[e]);l=!0}},o(e){d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)ge(d[e]);f=f.filter(Boolean);for(let e=0;e<f.length;e+=1)ge(f[e]);l=!1},d(e){e&&x(t),C(d,e),C(f,e)}}}function au(e){const t=e.length;if(0===t)return[];const n=[];for(let e=0;e<t;e++){const o=(e+.5)/t,i=1-4*Math.pow(o-.5,2);n.push(Math.round(i*Math.pow(t,2)))}return n}function lu(e,t,n){const o=K(),i=e=>{o("select",e)};let r,s,{width:a}=t,{height:l}=t,{tree:c}=t;return e.$$set=e=>{"width"in e&&n(0,a=e.width),"height"in e&&n(1,l=e.height),"tree"in e&&n(2,c=e.tree)},e.$$.update=()=>{4&e.$$.dirty&&(n(3,r=au(c.parents)),n(4,s=au(c.children)))},[a,l,c,r,s,i,e=>{i(e.name)},e=>{i(e.name)}]}class cu extends Te{constructor(e){super(),Ee(this,e,lu,su,a,{width:0,height:1,tree:2})}}function hu(e,t,n){const o=e.slice();return o[40]=t[n],o}function du(e,t,n){const o=e.slice();return o[43]=t[n],o}function uu(e,t,n){const o=e.slice();return o[43]=t[n],o}function pu(e,t,n){const o=e.slice();return o[48]=t[n],o}function fu(e,t,n){const o=e.slice();return o[43]=t[n],o}function gu(e,t,n){const o=e.slice();return o[43]=t[n],o}function mu(e,t,n){const o=e.slice();return o[43]=t[n],o}function bu(e,t,n){const o=e.slice();return o[43]=t[n],o}function wu(e){let t;return{c(){t=E("label"),t.textContent="Search…",L(t,"for","search"),M(t,"position","absolute"),M(t,"top","0.333em"),M(t,"left","1.2em")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function vu(t){let n;return{c(){n=E("p"),n.textContent="Lexicon entries will appear here.",L(n,"class","info")},m(e,t){k(e,n,t)},p:e,d(e){e&&x(n)}}}function yu(e){let t,n,o,i,r,s=e[43]+"";function a(){return e[19](e[43])}return{c(){t=E("div"),n=S(s),o=B(),L(t,"class","lex-entry"),R(t,"selected",e[43]===e[0])},m(e,s){k(e,t,s),w(t,n),w(t,o),i||(r=_(t,"mousedown",a),i=!0)},p(o,i){e=o,64&i[0]&&s!==(s=e[43]+"")&&O(n,s),65&i[0]&&R(t,"selected",e[43]===e[0])},d(e){e&&x(t),i=!1,r()}}}function ku(t){let n;return{c(){n=E("p"),n.textContent="External-source etymology entries will appear here.",L(n,"class","info")},m(e,t){k(e,n,t)},p:e,d(e){e&&x(n)}}}function xu(e){let t,n,o,i,r,s=e[43]+"";function a(){return e[20](e[43])}return{c(){t=E("div"),n=S(s),o=B(),L(t,"class","lex-entry"),R(t,"selected",e[43]===e[0])},m(e,s){k(e,t,s),w(t,n),w(t,o),i||(r=_(t,"mousedown",a),i=!0)},p(o,i){e=o,128&i[0]&&s!==(s=e[43]+"")&&O(n,s),129&i[0]&&R(t,"selected",e[43]===e[0])},d(e){e&&x(t),i=!1,r()}}}function Cu(t){let n;return{c(){n=E("p"),n.textContent="Select an entry from the left to view and edit its etymology.",L(n,"class","info")},m(e,t){k(e,n,t)},p:e,i:e,o:e,d(e){e&&x(n)}}}function Eu(e){let t,n,o,i,r,s,a;t=new cu({props:{tree:e[9],width:e[10],height:e[11]}}),t.$on("select",e[21]);const l=[Su,Tu],c=[];function h(e,t){return 3&t[0]&&(o=null),e[0]in e[1].Lexicon?0:(null==o&&(o=!!Object.entries(e[1].Relatives).some(e[17])),o?1:-1)}return~(i=h(e,[-1,-1]))&&(r=c[i]=l[i](e)),{c(){ye(t.$$.fragment),n=B(),r&&r.c(),s=I()},m(e,o){ke(t,e,o),k(e,n,o),~i&&c[i].m(e,o),k(e,s,o),a=!0},p(e,n){const o={};512&n[0]&&(o.tree=e[9]),1024&n[0]&&(o.width=e[10]),2048&n[0]&&(o.height=e[11]),t.$set(o);let a=i;i=h(e,n),i===a?~i&&c[i].p(e,n):(r&&(ue(),ge(c[a],1,1,(()=>{c[a]=null})),pe()),~i?(r=c[i],r?r.p(e,n):(r=c[i]=l[i](e),r.c()),fe(r,1),r.m(s.parentNode,s)):r=null)},i(e){a||(fe(t.$$.fragment,e),fe(r),a=!0)},o(e){ge(t.$$.fragment,e),ge(r),a=!1},d(e){xe(t,e),e&&x(n),~i&&c[i].d(e),e&&x(s)}}}function Tu(e){let t,n;return t=new yd({props:{word:e[0],source:e[1].Relatives[Object.entries(e[1].Relatives).find(e[22])[0]][e[0]],showEtymology:!1}}),{c(){ye(t.$$.fragment)},m(e,o){ke(t,e,o),n=!0},p(e,n){const o={};1&n[0]&&(o.word=e[0]),3&n[0]&&(o.source=e[1].Relatives[Object.entries(e[1].Relatives).find(e[22])[0]][e[0]]),t.$set(o)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){ge(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Su(e){let t,n;return t=new yd({props:{word:e[0],source:e[1].Lexicon[e[0]],showEtymology:!1}}),{c(){ye(t.$$.fragment)},m(e,o){ke(t,e,o),n=!0},p(e,n){const o={};1&n[0]&&(o.word=e[0]),3&n[0]&&(o.source=e[1].Lexicon[e[0]]),t.$set(o)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){ge(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Bu(t){let n,o,i;return{c(){n=E("button"),n.textContent="Delete Empty Etymology",L(n,"class","hover-highlight hover-shadow")},m(e,r){k(e,n,r),o||(i=_(n,"click",t[23]),o=!0)},p:e,d(e){e&&x(n),o=!1,i()}}}function Iu(e){let t,n,o,r,s,a,l,c,h;return{c(){t=E("label"),n=S("New Ancestor\n                                "),o=E("input"),r=B(),s=E("label"),a=S("Source Language\n                                "),l=E("input"),L(o,"type","text"),L(l,"type","text")},m(i,d){k(i,t,d),w(t,n),w(t,o),$(o,e[2][0]),k(i,r,d),k(i,s,d),w(s,a),w(s,l),$(l,e[2][1]),c||(h=[_(o,"input",e[27]),_(l,"input",e[28])],c=!0)},p(e,t){196&t[0]&&o.value!==e[2][0]&&$(o,e[2][0]),196&t[0]&&l.value!==e[2][1]&&$(l,e[2][1])},d(e){e&&x(t),e&&x(r),e&&x(s),c=!1,i(h)}}}function _u(e){let t,n,o,r,s,a=e[6],l=[];for(let t=0;t<a.length;t+=1)l[t]=Lu(gu(e,a,t));let c=e[7],h=[];for(let t=0;t<c.length;t+=1)h[t]=Au(fu(e,c,t));return{c(){t=E("select"),n=E("optgroup");for(let e=0;e<l.length;e+=1)l[e].c();o=E("optgroup");for(let e=0;e<h.length;e+=1)h[e].c();L(n,"label","Internal"),L(o,"label","External"),void 0===e[2][0]&&ne((()=>e[25].call(t)))},m(i,a){k(i,t,a),w(t,n);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(n,null);w(t,o);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(o,null);P(t,e[2][0],!0),r||(s=[_(t,"change",e[25]),_(t,"change",e[26])],r=!0)},p(e,i){if(64&i[0]){let t;for(a=e[6],t=0;t<a.length;t+=1){const o=gu(e,a,t);l[t]?l[t].p(o,i):(l[t]=Lu(o),l[t].c(),l[t].m(n,null))}for(;t<l.length;t+=1)l[t].d(1);l.length=a.length}if(128&i[0]){let t;for(c=e[7],t=0;t<c.length;t+=1){const n=fu(e,c,t);h[t]?h[t].p(n,i):(h[t]=Au(n),h[t].c(),h[t].m(o,null))}for(;t<h.length;t+=1)h[t].d(1);h.length=c.length}196&i[0]&&P(t,e[2][0])},d(e){e&&x(t),C(l,e),C(h,e),r=!1,i(s)}}}function Lu(e){let t,n,o,i=e[43]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[43],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){64&r[0]&&i!==(i=e[43]+"")&&O(n,i),64&r[0]&&o!==(o=e[43])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Au(e){let t,n,o,i=e[43]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[43],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){128&r[0]&&i!==(i=e[43]+"")&&O(n,i),128&r[0]&&o!==(o=e[43])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Ou(t){let n;return{c(){n=E("p"),n.textContent="This entry has no ancestors.",L(n,"class","info")},m(e,t){k(e,n,t)},p:e,d(e){e&&x(n)}}}function $u(e){let t,n,o,i,r,s,a,l,c,h,d,u,p,f=e[48].name+"",g=e[48].source+"";function m(){return e[30](e[48])}return{c(){t=E("div"),n=E("div"),o=E("p"),i=S(f),r=B(),s=E("p"),a=S(g),l=B(),c=E("div"),h=E("button"),h.textContent="Sever",d=B(),L(o,"class","lex-body"),L(s,"class","tag-item"),L(n,"class","column"),L(h,"class","hover-highlight hover-shadow"),L(c,"class","column"),L(t,"class","row")},m(e,f){k(e,t,f),w(t,n),w(n,o),w(o,i),w(n,r),w(n,s),w(s,a),w(t,l),w(t,c),w(c,h),w(t,d),u||(p=_(h,"click",m),u=!0)},p(t,n){e=t,512&n[0]&&f!==(f=e[48].name+"")&&O(i,f),512&n[0]&&g!==(g=e[48].source+"")&&O(a,g)},d(e){e&&x(t),u=!1,p()}}}function Mu(e){let t,n,o,r,s,a,l,c,h;return{c(){t=E("label"),n=S("New Descendant\n                                "),o=E("input"),r=B(),s=E("label"),a=S("Source Language\n                                "),l=E("input"),L(o,"type","text"),L(l,"type","text")},m(i,d){k(i,t,d),w(t,n),w(t,o),$(o,e[3][0]),k(i,r,d),k(i,s,d),w(s,a),w(s,l),$(l,e[3][1]),c||(h=[_(o,"input",e[34]),_(l,"input",e[35])],c=!0)},p(e,t){200&t[0]&&o.value!==e[3][0]&&$(o,e[3][0]),200&t[0]&&l.value!==e[3][1]&&$(l,e[3][1])},d(e){e&&x(t),e&&x(r),e&&x(s),c=!1,i(h)}}}function Pu(e){let t,n,o,r,s,a=e[6],l=[];for(let t=0;t<a.length;t+=1)l[t]=Nu(uu(e,a,t));let c=e[7],h=[];for(let t=0;t<c.length;t+=1)h[t]=Ru(du(e,c,t));return{c(){t=E("select"),n=E("optgroup");for(let e=0;e<l.length;e+=1)l[e].c();o=E("optgroup");for(let e=0;e<h.length;e+=1)h[e].c();L(n,"label","Internal"),L(o,"label","External"),void 0===e[3][0]&&ne((()=>e[32].call(t)))},m(i,a){k(i,t,a),w(t,n);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(n,null);w(t,o);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(o,null);P(t,e[3][0],!0),r||(s=[_(t,"change",e[32]),_(t,"change",e[33])],r=!0)},p(e,i){if(64&i[0]){let t;for(a=e[6],t=0;t<a.length;t+=1){const o=uu(e,a,t);l[t]?l[t].p(o,i):(l[t]=Nu(o),l[t].c(),l[t].m(n,null))}for(;t<l.length;t+=1)l[t].d(1);l.length=a.length}if(128&i[0]){let t;for(c=e[7],t=0;t<c.length;t+=1){const n=du(e,c,t);h[t]?h[t].p(n,i):(h[t]=Ru(n),h[t].c(),h[t].m(o,null))}for(;t<h.length;t+=1)h[t].d(1);h.length=c.length}200&i[0]&&P(t,e[3][0])},d(e){e&&x(t),C(l,e),C(h,e),r=!1,i(s)}}}function Nu(e){let t,n,o,i=e[43]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[43],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){64&r[0]&&i!==(i=e[43]+"")&&O(n,i),64&r[0]&&o!==(o=e[43])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Ru(e){let t,n,o,i=e[43]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[43],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){128&r[0]&&i!==(i=e[43]+"")&&O(n,i),128&r[0]&&o!==(o=e[43])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Du(e){let t,n=e[38]()+"";return{c(){t=S(n)},m(e,n){k(e,t,n)},p(e,o){512&o[0]&&n!==(n=e[38]()+"")&&O(t,n)},d(e){e&&x(t)}}}function zu(e){let t,n=e[9].children,o=[];for(let t=0;t<n.length;t+=1)o[t]=Hu(hu(e,n,t));let i=null;return n.length||(i=Fu()),{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=I(),i&&i.c()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);k(e,t,n),i&&i.m(e,n)},p(e,r){if(515&r[0]){let s;for(n=e[9].children,s=0;s<n.length;s+=1){const i=hu(e,n,s);o[s]?o[s].p(i,r):(o[s]=Hu(i),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length,!n.length&&i?i.p(e,r):n.length?i&&(i.d(1),i=null):(i=Fu(),i.c(),i.m(t.parentNode,t))}},d(e){C(o,e),e&&x(t),i&&i.d(e)}}}function Fu(t){let n;return{c(){n=E("p"),n.textContent="This entry has no descendants.",L(n,"class","info")},m(e,t){k(e,n,t)},p:e,d(e){e&&x(n)}}}function Hu(e){let t,n,o,i,r,s,a,l,c,h,d,u,p,f=e[40].name+"",g=e[40].source+"";function m(){return e[37](e[40])}return{c(){t=E("div"),n=E("div"),o=E("p"),i=S(f),r=B(),s=E("p"),a=S(g),l=B(),c=E("div"),h=E("button"),h.textContent="Sever",d=B(),L(o,"class","lex-body"),L(s,"class","tag-item"),L(n,"class","column"),L(h,"class","hover-highlight hover-shadow"),L(c,"class","column"),L(t,"class","row")},m(e,f){k(e,t,f),w(t,n),w(n,o),w(o,i),w(n,r),w(n,s),w(s,a),w(t,l),w(t,c),w(c,h),w(t,d),u||(p=_(h,"click",m),u=!0)},p(t,n){e=t,512&n[0]&&f!==(f=e[40].name+"")&&O(i,f),512&n[0]&&g!==(g=e[40].source+"")&&O(a,g)},d(e){e&&x(t),u=!1,p()}}}function ju(e){let t,n,o,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,T,I,A,O,P,N,R,D,z,F,H,j,U,W,q,V,G,Y,K,X,Z,J,Q,ee,te,ne,oe,ie,re,se,ae,le,ce,he,de,me,be,we,ve=!e[8]&&wu(),ye=e[6],ke=[];for(let t=0;t<ye.length;t+=1)ke[t]=yu(bu(e,ye,t));let xe=null;ye.length||(xe=vu());let Ce=e[7],Ee=[];for(let t=0;t<Ce.length;t+=1)Ee[t]=xu(mu(e,Ce,t));let Te=null;Ce.length||(Te=ku());const Se=[Eu,Cu],Be=[];function Ie(e,t){return e[0]?0:1}N=Ie(e),R=Be[N]=Se[N](e);let _e=!(e[9]?.parents&&e[9].parents[0])&&!(e[9]?.children&&e[9].children[0])&&!!e[0]&&Bu(e);function Le(e,t){return e[4]?Iu:_u}let Ae=Le(e),Oe=Ae(e),$e=e[9].parents,Me=[];for(let t=0;t<$e.length;t+=1)Me[t]=$u(pu(e,$e,t));let Pe=null;function Ne(e,t){return e[5]?Mu:Pu}$e.length||(Pe=Ou());let Re=Ne(e),De=Re(e);function ze(e,t){return e[9]?zu:Du}let Fe=ze(e),He=Fe(e);return{c(){t=E("div"),n=E("div"),o=E("div"),r=E("p"),r.textContent="Entries",s=B(),a=E("hr"),l=B(),c=E("div"),ve&&ve.c(),h=B(),d=E("input"),u=B(),p=E("p"),p.innerHTML="⦓ <i>Internal</i> ⦔",f=B(),g=E("div");for(let e=0;e<ke.length;e+=1)ke[e].c();xe&&xe.c(),m=B(),b=E("br"),v=B(),y=E("p"),y.innerHTML="⦔ <i>External</i> ⦓",T=B(),I=E("div");for(let e=0;e<Ee.length;e+=1)Ee[e].c();Te&&Te.c(),A=B(),O=E("div"),P=E("div"),R.c(),D=B(),z=E("hr"),F=B(),_e&&_e.c(),H=B(),j=E("div"),U=E("div"),W=E("p"),W.textContent="Ancestors",q=B(),V=E("label"),G=S("Manual Entry\n                            "),Y=E("input"),K=B(),Oe.c(),X=B(),Z=E("button"),Z.textContent="Link",J=B(),Q=E("div");for(let e=0;e<Me.length;e+=1)Me[e].c();Pe&&Pe.c(),ee=B(),te=E("div"),ne=E("p"),ne.textContent="Descendants",oe=B(),ie=E("label"),re=S("Manual Entry\n                            "),se=E("input"),ae=B(),De.c(),le=B(),ce=E("button"),ce.textContent="Link",he=B(),de=E("div"),He.c(),L(d,"id","search"),L(d,"type","text"),L(d,"class","search"),M(d,"margin","auto"),M(d,"width","90%"),L(c,"class","search-container"),L(g,"class","column scrolled"),M(g,"max-height","40%"),L(I,"class","column scrolled"),M(I,"max-height","40%"),L(o,"class","container column"),M(o,"max-width","18%"),L(Y,"type","checkbox"),L(Z,"class","hover-highlight hover-shadow"),L(Q,"class","column scrolled"),L(U,"class","column"),L(se,"type","checkbox"),L(ce,"class","hover-highlight hover-shadow"),L(de,"class","column scrolled"),L(te,"class","column"),L(j,"class","row"),L(P,"class","scrolled"),M(P,"max-height","100%"),L(O,"class","container column"),M(O,"height","94vh"),L(n,"class","row"),M(n,"height","94vh"),L(t,"class","tab-pane")},m(i,x){k(i,t,x),w(t,n),w(n,o),w(o,r),w(o,s),w(o,a),w(o,l),w(o,c),ve&&ve.m(c,null),w(c,h),w(c,d),$(d,e[8]),w(o,u),w(o,p),w(o,f),w(o,g);for(let e=0;e<ke.length;e+=1)ke[e]&&ke[e].m(g,null);xe&&xe.m(g,null),w(o,m),w(o,b),w(o,v),w(o,y),w(o,T),w(o,I);for(let e=0;e<Ee.length;e+=1)Ee[e]&&Ee[e].m(I,null);Te&&Te.m(I,null),w(n,A),w(n,O),w(O,P),Be[N].m(P,null),w(P,D),w(P,z),w(P,F),_e&&_e.m(P,null),w(P,H),w(P,j),w(j,U),w(U,W),w(U,q),w(U,V),w(V,G),w(V,Y),Y.checked=e[4],w(U,K),Oe.m(U,null),w(U,X),w(U,Z),w(U,J),w(U,Q);for(let e=0;e<Me.length;e+=1)Me[e]&&Me[e].m(Q,null);Pe&&Pe.m(Q,null),w(j,ee),w(j,te),w(te,ne),w(te,oe),w(te,ie),w(ie,re),w(ie,se),se.checked=e[5],w(te,ae),De.m(te,null),w(te,le),w(te,ce),w(te,he),w(te,de),He.m(de,null),me=!0,be||(we=[_(d,"input",e[18]),_(d,"input",e[12]),_(Y,"change",e[24]),_(Z,"click",e[29]),_(se,"change",e[31]),_(ce,"click",e[36])],be=!0)},p(e,t){if(e[8]?ve&&(ve.d(1),ve=null):ve||(ve=wu(),ve.c(),ve.m(c,h)),256&t[0]&&d.value!==e[8]&&$(d,e[8]),67&t[0]){let n;for(ye=e[6],n=0;n<ye.length;n+=1){const o=bu(e,ye,n);ke[n]?ke[n].p(o,t):(ke[n]=yu(o),ke[n].c(),ke[n].m(g,null))}for(;n<ke.length;n+=1)ke[n].d(1);ke.length=ye.length,!ye.length&&xe?xe.p(e,t):ye.length?xe&&(xe.d(1),xe=null):(xe=vu(),xe.c(),xe.m(g,null))}if(129&t[0]){let n;for(Ce=e[7],n=0;n<Ce.length;n+=1){const o=mu(e,Ce,n);Ee[n]?Ee[n].p(o,t):(Ee[n]=xu(o),Ee[n].c(),Ee[n].m(I,null))}for(;n<Ee.length;n+=1)Ee[n].d(1);Ee.length=Ce.length,!Ce.length&&Te?Te.p(e,t):Ce.length?Te&&(Te.d(1),Te=null):(Te=ku(),Te.c(),Te.m(I,null))}let n=N;if(N=Ie(e),N===n?Be[N].p(e,t):(ue(),ge(Be[n],1,1,(()=>{Be[n]=null})),pe(),R=Be[N],R?R.p(e,t):(R=Be[N]=Se[N](e),R.c()),fe(R,1),R.m(P,D)),e[9]?.parents&&e[9].parents[0]||e[9]?.children&&e[9].children[0]||!e[0]?_e&&(_e.d(1),_e=null):_e?_e.p(e,t):(_e=Bu(e),_e.c(),_e.m(P,H)),16&t[0]&&(Y.checked=e[4]),Ae===(Ae=Le(e))&&Oe?Oe.p(e,t):(Oe.d(1),Oe=Ae(e),Oe&&(Oe.c(),Oe.m(U,X))),515&t[0]){let n;for($e=e[9].parents,n=0;n<$e.length;n+=1){const o=pu(e,$e,n);Me[n]?Me[n].p(o,t):(Me[n]=$u(o),Me[n].c(),Me[n].m(Q,null))}for(;n<Me.length;n+=1)Me[n].d(1);Me.length=$e.length,!$e.length&&Pe?Pe.p(e,t):$e.length?Pe&&(Pe.d(1),Pe=null):(Pe=Ou(),Pe.c(),Pe.m(Q,null))}32&t[0]&&(se.checked=e[5]),Re===(Re=Ne(e))&&De?De.p(e,t):(De.d(1),De=Re(e),De&&(De.c(),De.m(te,le))),Fe===(Fe=ze(e))&&He?He.p(e,t):(He.d(1),He=Fe(e),He&&(He.c(),He.m(de,null)))},i(e){me||(fe(R),me=!0)},o(e){ge(R),me=!1},d(e){e&&x(t),ve&&ve.d(),C(ke,e),xe&&xe.d(),C(Ee,e),Te&&Te.d(),Be[N].d(),_e&&_e.d(),Oe.d(),C(Me,e),Pe&&Pe.d(),De.d(),He.d(),be=!1,i(we)}}}function Uu(e,t,n){let o,i;h(e,ni,(e=>n(16,o=e))),h(e,Uo,(e=>n(1,i=e)));let r,s,a,l,c,u,p,f=["",""],g=["",""],m=!1,b=!1,w="",v=[],y="";return e.$$.update=()=>{8194&e.$$.dirty[0]&&n(14,r=v.reduce(((e,t)=>(t in i.Lexicon&&(e[t]=i.Lexicon[t]),e)),{})),24578&e.$$.dirty[0]&&(i.Alphabet,n(6,s=pi(v.length?r:i.Lexicon))),40962&e.$$.dirty[0]&&(i.Alphabet,i.Relatives,i.Etymologies,(()=>{const e={};Object.keys(i.Relatives).forEach((t=>{Object.keys(i.Relatives[t]).forEach((n=>{n in i.Lexicon||(e[n]=i.Relatives[t][n])}))})),Object.keys(i.Etymologies).forEach((t=>{t in i.Lexicon||(e[t]={Senses:[],pronunciations:{},Timestamp:Date.now()})})),n(15,l=v.reduce(((t,n)=>(n in e&&(t[n]=e[n]),t)),{})),n(7,a=pi(v.length?l:e))})()),65539&e.$$.dirty[0]&&(i.Etymologies,n(9,c=function(){const e=[];Object.keys(i.Etymologies).forEach((t=>{if(t!==w&&i.Etymologies[t].descendants.some((e=>e.name===w))){const n="<< THIS LANGUAGE >>"===i.Etymologies[t].source?i.Name:i.Etymologies[t].source;e.push([t,n])}}));const t=[];return w in i.Etymologies&&i.Etymologies[w].descendants.forEach((e=>{t.push([e.name,"<< THIS LANGUAGE >>"===e.source?i.Name:e.source])})),{name:w,children:t.map((e=>({name:e[0],source:e[1]}))),parents:e.map((e=>({name:e[0],source:e[1]})))}}()),n(10,u=.82*window.innerWidth*(o?.66:1)),n(11,p=.47*window.innerHeight))},[w,i,f,g,m,b,s,a,y,c,u,p,function(){let e={};for(const t in i.Relatives)e=Object.assign(Object.assign({},e),i.Relatives[t]);e=Object.assign(Object.assign({},e),i.Lexicon),n(13,v=Object.keys(e).filter((e=>{let t,n;return t=i.CaseSensitive?e:e.toLowerCase(),t=i.IgnoreDiacritics?e.normalize("NFD"):e,n=i.CaseSensitive?y:y.toLowerCase(),n=i.IgnoreDiacritics?n.normalize("NFD"):n,`^${t.replaceAll(/\s+/g,"^")}^`.includes(n)})))},v,r,l,o,([e,t])=>Object.keys(t).includes(w),function(){y=this.value,n(8,y)},e=>{n(0,w=e),e in i.Etymologies||d(Uo,i.Etymologies[e]={descendants:[],source:"<< THIS LANGUAGE >>"},i)},e=>{n(0,w=e)},e=>n(0,w=e.detail),([e,t])=>Object.keys(t).includes(w),()=>{const{[w]:e,...t}=i.Etymologies;d(Uo,i.Etymologies=t,i),n(0,w="")},function(){m=this.checked,n(4,m)},function(){f[0]=N(this),n(2,f),n(7,a),n(1,i),n(13,v),n(15,l),n(6,s),n(1,i),n(13,v),n(14,r)},()=>n(2,f[1]=i.Name,f),function(){f[0]=this.value,n(2,f),n(7,a),n(1,i),n(13,v),n(15,l),n(6,s),n(1,i),n(13,v),n(14,r)},function(){f[1]=this.value,n(2,f),n(7,a),n(1,i),n(13,v),n(15,l),n(6,s),n(1,i),n(13,v),n(14,r)},()=>{f[0]&&(f[0]in i.Etymologies||d(Uo,i.Etymologies[f[0]]={source:f[1]===i.Name?"<< THIS LANGUAGE >>":f[1],descendants:[]},i),i.Etymologies[f[0]].descendants.push({name:w,source:i.Etymologies[w].source}),d(Uo,i.Etymologies={...i.Etymologies},i),n(2,f=["",""]))},e=>{d(Uo,i.Etymologies[e.name].descendants=i.Etymologies[e.name].descendants.filter((e=>e.name!==w)),i),d(Uo,i.Etymologies={...i.Etymologies},i)},function(){b=this.checked,n(5,b)},function(){g[0]=N(this),n(3,g),n(7,a),n(1,i),n(13,v),n(15,l),n(6,s),n(1,i),n(13,v),n(14,r)},()=>n(3,g[1]=i.Name,g),function(){g[0]=this.value,n(3,g),n(7,a),n(1,i),n(13,v),n(15,l),n(6,s),n(1,i),n(13,v),n(14,r)},function(){g[1]=this.value,n(3,g),n(7,a),n(1,i),n(13,v),n(15,l),n(6,s),n(1,i),n(13,v),n(14,r)},()=>{g[0]&&(g[0]in i.Etymologies||d(Uo,i.Etymologies[g[0]]={source:g[1],descendants:[]},i),i.Etymologies[w].descendants.push({name:g[0],source:g[1]===i.Name?"<< THIS LANGUAGE >>":g[1]}),d(Uo,i.Etymologies={...i.Etymologies},i),n(3,g=["",""]))},e=>{d(Uo,i.Etymologies[w].descendants=i.Etymologies[w].descendants.filter((t=>t.name!==e.name)),i),d(Uo,i.Etymologies={...i.Etymologies},i)},()=>(console.log(c),"")]}class Wu extends Te{constructor(e){super(),Ee(this,e,Uu,ju,s,{},null,[-1,-1])}}function qu(e,t,n){const o=e.slice();return o[11]=t[n],o[13]=n,o}function Vu(e,t,n){const o=e.slice();return o[14]=t[n],o}function Gu(e,t,n){const o=e.slice();return o[17]=t[n],o}function Yu(e){let t,n=e[2]().Phrasebook[e[3]()][e[0]].tags,o=[];for(let t=0;t<n.length;t+=1)o[t]=Ku(Gu(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=I()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);k(e,t,n)},p(e,i){if(13&i){let r;for(n=e[2]().Phrasebook[e[3]()][e[0]].tags,r=0;r<n.length;r+=1){const s=Gu(e,n,r);o[r]?o[r].p(s,i):(o[r]=Ku(s),o[r].c(),o[r].m(t.parentNode,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){C(o,e),e&&x(t)}}}function Ku(e){let t,n,o=e[17]+"";return{c(){t=E("div"),n=S(o),L(t,"class","tag-item")},m(e,o){k(e,t,o),w(t,n)},p(e,t){1&t&&o!==(o=e[17]+"")&&O(n,o)},d(e){e&&x(t)}}}function Xu(e){let t,n,o,i,r=Array(Math.ceil(Object.keys(e[2]().Phrasebook[e[3]()][e[0]].variants).length/3)),s=[];for(let t=0;t<r.length;t+=1)s[t]=Ju(qu(e,r,t));const a=e=>ge(s[e],1,1,(()=>{s[e]=null}));return{c(){t=E("p"),t.textContent="⋲ ᴠᴀʀɪᴀɴᴛꜱ ⋺",n=B();for(let e=0;e<s.length;e+=1)s[e].c();o=I()},m(e,r){k(e,t,r),k(e,n,r);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,r);k(e,o,r),i=!0},p(e,t){if(13&t){let n;for(r=Array(Math.ceil(Object.keys(e[2]().Phrasebook[e[3]()][e[0]].variants).length/3)),n=0;n<r.length;n+=1){const i=qu(e,r,n);s[n]?(s[n].p(i,t),fe(s[n],1)):(s[n]=Ju(i),s[n].c(),fe(s[n],1),s[n].m(o.parentNode,o))}for(ue(),n=r.length;n<s.length;n+=1)a(n);pe()}},i(e){if(!i){for(let e=0;e<r.length;e+=1)fe(s[e]);i=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ge(s[e]);i=!1},d(e){e&&x(t),e&&x(n),C(s,e),e&&x(o)}}}function Zu(e){let t,n,o,i,r,s,a,l=Fr(e[2]().Phrasebook[e[3]()][e[0]].variants[e[14]].description)+"";return n=new ld({props:{word:e[14],source:e[2]().Phrasebook[e[3]()][e[0]].variants[e[14]]}}),i=new Ri({props:{pronunciations:e[2]().Phrasebook[e[3]()][e[0]].variants[e[14]].pronunciations}}),{c(){t=E("div"),ye(n.$$.fragment),o=B(),ye(i.$$.fragment),r=B(),s=E("p"),L(s,"class","prelined"),M(s,"margin","0 1rem 0.5rem 1rem"),L(t,"class","column")},m(e,c){k(e,t,c),ke(n,t,null),w(t,o),ke(i,t,null),w(t,r),w(t,s),s.innerHTML=l,a=!0},p(e,t){const o={};1&t&&(o.word=e[14]),1&t&&(o.source=e[2]().Phrasebook[e[3]()][e[0]].variants[e[14]]),n.$set(o);const r={};1&t&&(r.pronunciations=e[2]().Phrasebook[e[3]()][e[0]].variants[e[14]].pronunciations),i.$set(r),(!a||1&t)&&l!==(l=Fr(e[2]().Phrasebook[e[3]()][e[0]].variants[e[14]].description)+"")&&(s.innerHTML=l)},i(e){a||(fe(n.$$.fragment,e),fe(i.$$.fragment,e),a=!0)},o(e){ge(n.$$.fragment,e),ge(i.$$.fragment,e),a=!1},d(e){e&&x(t),xe(n),xe(i)}}}function Ju(e){let t,n,o,i,r,s=Object.keys(e[2]().Phrasebook[e[3]()][e[0]].variants).slice(3*e[13],3*e[13]+3),a=[];for(let t=0;t<s.length;t+=1)a[t]=Zu(Vu(e,s,t));const l=e=>ge(a[e],1,1,(()=>{a[e]=null}));return{c(){t=E("div");for(let e=0;e<a.length;e+=1)a[e].c();n=B(),o=E("br"),i=B(),L(t,"class","row")},m(e,s){k(e,t,s);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(t,null);w(t,n),w(t,o),w(t,i),r=!0},p(e,o){if(13&o){let i;for(s=Object.keys(e[2]().Phrasebook[e[3]()][e[0]].variants).slice(3*e[13],3*e[13]+3),i=0;i<s.length;i+=1){const r=Vu(e,s,i);a[i]?(a[i].p(r,o),fe(a[i],1)):(a[i]=Zu(r),a[i].c(),fe(a[i],1),a[i].m(t,n))}for(ue(),i=s.length;i<a.length;i+=1)l(i);pe()}},i(e){if(!r){for(let e=0;e<s.length;e+=1)fe(a[e]);r=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)ge(a[e]);r=!1},d(e){e&&x(t),C(a,e)}}}function Qu(e){let t,n,o,i,r,s,a,l,c,h,d,u=!!e[2]().Phrasebook[e[3]()][e[0]].tags[0],p=Fr(e[2]().Phrasebook[e[3]()][e[0]].description)+"",f=!!Object.keys(e[2]().Phrasebook[e[3]()][e[0]].variants).length;n=new ld({props:{word:e[0],source:e[2]().Phrasebook[e[3]()][e[0]]}}),i=new Ri({props:{pronunciations:e[2]().Phrasebook[e[3]()][e[0]].pronunciations}});let g=u&&Yu(e),m=f&&Xu(e);return{c(){t=E("div"),ye(n.$$.fragment),o=B(),ye(i.$$.fragment),r=B(),g&&g.c(),s=B(),a=E("p"),l=B(),m&&m.c(),L(a,"class","prelined"),L(t,"class","lex-entry"),L(t,"id",e[0])},m(u,f){k(u,t,f),ke(n,t,null),w(t,o),ke(i,t,null),w(t,r),g&&g.m(t,null),w(t,s),w(t,a),a.innerHTML=p,w(t,l),m&&m.m(t,null),c=!0,h||(d=_(t,"contextmenu",e[1]),h=!0)},p(e,[o]){const r={};1&o&&(r.word=e[0]),1&o&&(r.source=e[2]().Phrasebook[e[3]()][e[0]]),n.$set(r);const l={};1&o&&(l.pronunciations=e[2]().Phrasebook[e[3]()][e[0]].pronunciations),i.$set(l),1&o&&(u=!!e[2]().Phrasebook[e[3]()][e[0]].tags[0]),u?g?g.p(e,o):(g=Yu(e),g.c(),g.m(t,s)):g&&(g.d(1),g=null),(!c||1&o)&&p!==(p=Fr(e[2]().Phrasebook[e[3]()][e[0]].description)+"")&&(a.innerHTML=p),1&o&&(f=!!Object.keys(e[2]().Phrasebook[e[3]()][e[0]].variants).length),f?m?(m.p(e,o),1&o&&fe(m,1)):(m=Xu(e),m.c(),fe(m,1),m.m(t,null)):m&&(ue(),ge(m,1,1,(()=>{m=null})),pe()),(!c||1&o)&&L(t,"id",e[0])},i(e){c||(fe(n.$$.fragment,e),fe(i.$$.fragment,e),fe(m),c=!0)},o(e){ge(n.$$.fragment,e),ge(i.$$.fragment,e),ge(m),c=!1},d(e){e&&x(t),xe(n),xe(i),g&&g.d(),m&&m.d(),h=!1,d()}}}function ep(e,t,n){let o,i,r;h(e,Xo,(e=>n(8,o=e))),h(e,Uo,(e=>n(9,i=e))),h(e,ni,(e=>n(6,r=e)));const s=K();let{phrase:a=""}=t,l=r,{reference:c=!1}=t,{refCat:d=""}=t;return e.$$set=e=>{"phrase"in e&&n(0,a=e.phrase),"reference"in e&&n(4,c=e.reference),"refCat"in e&&n(5,d=e.refCat)},e.$$.update=()=>{64&e.$$.dirty&&(l=r)},[a,()=>s("edit"),()=>c?l:i,()=>c?d:o,c,d,r]}class tp extends Te{constructor(e){super(),Ee(this,e,ep,Qu,s,{phrase:0,reference:4,refCat:5})}}function np(e,t,n){const o=e.slice();return o[11]=t[n],o[12]=t,o[13]=n,o}function op(e){let t,n,o;return{c(){t=E("input"),L(t,"type","text"),L(t,"class","pronunciation")},m(i,r){k(i,t,r),$(t,e[2].General),n||(o=_(t,"input",e[8]),n=!0)},p(e,n){4&n&&t.value!==e[2].General&&$(t,e[2].General)},d(e){e&&x(t),n=!1,o()}}}function ip(e){let t,n=e[3],o=[];for(let t=0;t<n.length;t+=1)o[t]=rp(np(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=I()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);k(e,t,n)},p(e,i){if(12&i){let r;for(n=e[3],r=0;r<n.length;r+=1){const s=np(e,n,r);o[r]?o[r].p(s,i):(o[r]=rp(s),o[r].c(),o[r].m(t.parentNode,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){C(o,e),e&&x(t)}}}function rp(e){let t,n,o,i,r,s,a,l,c,h=e[11]+"";function d(){e[7].call(s,e[11])}return{c(){t=E("div"),n=E("div"),o=S(h),i=B(),r=E("div"),s=E("input"),a=B(),L(n,"class","column text-right lect"),L(s,"type","text"),L(s,"class","pronunciation text-left"),L(r,"class","column text-left"),L(t,"class","row")},m(h,u){k(h,t,u),w(t,n),w(n,o),w(t,i),w(t,r),w(r,s),$(s,e[2][e[11]]),w(t,a),l||(c=_(s,"input",d),l=!0)},p(t,n){e=t,8&n&&h!==(h=e[11]+"")&&O(o,h),12&n&&s.value!==e[2][e[11]]&&$(s,e[2][e[11]])},d(e){e&&x(t),l=!1,c()}}}function sp(t){let n,o,r,s,a,l,c,h,d;function u(e,t){return e[4].UseLects?ip:op}let p=u(t),f=p(t);return{c(){n=E("div"),o=E("input"),r=B(),f.c(),s=B(),a=E("textarea"),l=B(),c=E("br"),L(o,"type","text"),L(n,"class","variant-div")},m(e,i){k(e,n,i),w(n,o),$(o,t[0]),w(n,r),f.m(n,null),w(n,s),w(n,a),$(a,t[1]),w(n,l),w(n,c),h||(d=[_(o,"keyup",t[5]),_(o,"input",t[6]),_(a,"input",t[9])],h=!0)},p(e,[t]){1&t&&o.value!==e[0]&&$(o,e[0]),p===(p=u(e))&&f?f.p(e,t):(f.d(1),f=p(e),f&&(f.c(),f.m(n,s))),2&t&&$(a,e[1])},i:e,o:e,d(e){e&&x(n),f.d(),h=!1,i(d)}}}function ap(e,t,n){let o;h(e,Uo,(e=>n(4,o=e)));let{phrase:i=""}=t,{description:r=""}=t,{lects:s}=t,{pronunciations:a={}}=t;const l=K();return e.$$set=e=>{"phrase"in e&&n(0,i=e.phrase),"description"in e&&n(1,r=e.description),"lects"in e&&n(3,s=e.lects),"pronunciations"in e&&n(2,a=e.pronunciations)},e.$$.update=()=>{9&e.$$.dirty&&s.forEach((e=>{n(2,a[e]=vi(i,e),a)}))},[i,r,a,s,o,()=>l("update"),function(){i=this.value,n(0,i)},function(e){a[e]=this.value,n(2,a),n(3,s),n(0,i)},function(){a.General=this.value,n(2,a),n(3,s),n(0,i)},function(){r=this.value,n(1,r)}]}class lp extends Te{constructor(e){super(),Ee(this,e,ap,sp,s,{phrase:0,description:1,lects:3,pronunciations:2})}}function cp(e,t,n){const o=e.slice();return o[40]=t[n],o[41]=t,o[42]=n,o}function hp(e,t,n){const o=e.slice();return o[43]=t[n],o[44]=t,o[45]=n,o}function dp(e,t,n){const o=e.slice();return o[46]=t[n],o}function up(e,t,n){const o=e.slice();return o[43]=t[n],o}function pp(e,t,n){const o=e.slice();return o[51]=t[n],o}function fp(t){let n;return{c(){n=E("p"),n.textContent="Categories will appear here.",L(n,"class","info")},m(e,t){k(e,n,t)},p:e,d(e){e&&x(n)}}}function gp(e){let t,n,o,i,r,s=e[51]+"";function a(){return e[19](e[51])}return{c(){t=E("div"),n=S(s),o=B(),L(t,"class","lex-entry capitalize"),R(t,"selected",e[51]===e[5])},m(e,s){k(e,t,s),w(t,n),w(t,o),i||(r=_(t,"mousedown",a),i=!0)},p(o,i){e=o,16&i[0]&&s!==(s=e[51]+"")&&O(n,s),48&i[0]&&R(t,"selected",e[51]===e[5])},d(e){e&&x(t),i=!1,r()}}}function mp(e){let t;return{c(){t=E("label"),t.textContent="Search by phrase…",L(t,"for","search-phrase"),M(t,"position","absolute"),M(t,"top",".5em"),M(t,"left","1em")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function bp(e){let t;return{c(){t=E("label"),t.textContent="Search by tags…",L(t,"for","search-tags"),M(t,"position","absolute"),M(t,"top",".5em"),M(t,"left","1em")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function wp(e){let t;return{c(){t=E("label"),t.textContent="Search descriptions…",L(t,"for","search-description"),M(t,"position","absolute"),M(t,"top",".5em"),M(t,"left","1em")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function vp(e){let t,n,o,i,r,s,a,l=e[4].Lects,c=[];for(let t=0;t<l.length;t+=1)c[t]=yp(up(e,l,t));return{c(){t=E("div"),n=E("label"),o=S("Filter by lect:\n                            "),i=E("select"),r=E("option"),r.textContent="All";for(let e=0;e<c.length;e+=1)c[e].c();r.__value="",r.value=r.__value,void 0===e[3]&&ne((()=>e[23].call(i))),L(t,"class","column")},m(l,h){k(l,t,h),w(t,n),w(n,o),w(n,i),w(i,r);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(i,null);P(i,e[3],!0),s||(a=_(i,"change",e[23]),s=!0)},p(e,t){if(16&t[0]){let n;for(l=e[4].Lects,n=0;n<l.length;n+=1){const o=up(e,l,n);c[n]?c[n].p(o,t):(c[n]=yp(o),c[n].c(),c[n].m(i,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}24&t[0]&&P(i,e[3])},d(e){e&&x(t),C(c,e),s=!1,a()}}}function yp(e){let t,n,o,i=e[43]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[43],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){16&r[0]&&i!==(i=e[43]+"")&&O(n,i),16&r[0]&&o!==(o=e[43])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function kp(t){let n;return{c(){n=E("p"),n.textContent="Select a category from the left or add your first phrase entry.",L(n,"class","info")},m(e,t){k(e,n,t)},p:e,i:e,o:e,d(e){e&&x(n)}}}function xp(e){let t,n,o=e[6],i=[];for(let t=0;t<o.length;t+=1)i[t]=Cp(dp(e,o,t));const r=e=>ge(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=I()},m(e,o){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,o);k(e,t,o),n=!0},p(e,n){if(65600&n[0]){let s;for(o=e[6],s=0;s<o.length;s+=1){const r=dp(e,o,s);i[s]?(i[s].p(r,n),fe(i[s],1)):(i[s]=Cp(r),i[s].c(),fe(i[s],1),i[s].m(t.parentNode,t))}for(ue(),s=o.length;s<i.length;s+=1)r(s);pe()}},i(e){if(!n){for(let e=0;e<o.length;e+=1)fe(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)ge(i[e]);n=!1},d(e){C(i,e),e&&x(t)}}}function Cp(e){let t,n;return t=new tp({props:{phrase:e[46]}}),t.$on("edit",(function(){return e[24](e[46])})),{c(){ye(t.$$.fragment)},m(e,o){ke(t,e,o),n=!0},p(n,o){e=n;const i={};64&o[0]&&(i.phrase=e[46]),t.$set(i)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){ge(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Ep(e){let t,n,o;return{c(){t=E("input"),L(t,"type","text"),L(t,"class","pronunciation")},m(i,r){k(i,t,r),$(t,e[12].General),n||(o=_(t,"input",e[29]),n=!0)},p(e,n){4096&n[0]&&t.value!==e[12].General&&$(t,e[12].General)},d(e){e&&x(t),n=!1,o()}}}function Tp(e){let t,n=e[10],o=[];for(let t=0;t<n.length;t+=1)o[t]=Sp(hp(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=I()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);k(e,t,n)},p(e,i){if(5120&i[0]){let r;for(n=e[10],r=0;r<n.length;r+=1){const s=hp(e,n,r);o[r]?o[r].p(s,i):(o[r]=Sp(s),o[r].c(),o[r].m(t.parentNode,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){C(o,e),e&&x(t)}}}function Sp(e){let t,n,o,i,r,s,a,l,c,h,d=e[43]+"";function u(){e[28].call(a,e[43])}return{c(){t=E("div"),n=E("div"),o=E("p"),i=S(d),r=B(),s=E("div"),a=E("input"),l=B(),L(o,"class","lect"),L(n,"class","column text-right"),L(a,"type","text"),L(a,"class","pronunciation text-left"),L(s,"class","column text-left"),L(t,"class","row narrow")},m(d,p){k(d,t,p),w(t,n),w(n,o),w(o,i),w(t,r),w(t,s),w(s,a),$(a,e[12][e[43]]),w(t,l),c||(h=_(a,"input",u),c=!0)},p(t,n){e=t,1024&n[0]&&d!==(d=e[43]+"")&&O(i,d),5120&n[0]&&a.value!==e[12][e[43]]&&$(a,e[12][e[43]])},d(e){e&&x(t),c=!1,h()}}}function Bp(t){let n;return{c(){n=E("p"),n.textContent="Click the button below to add a variation for this phrase",L(n,"class","info")},m(e,t){k(e,n,t)},p:e,d(e){e&&x(n)}}}function Ip(e){let t,n,o,i,r;function s(t){e[34](t,e[42])}function a(t){e[35](t,e[42])}function l(t){e[36](t,e[42])}let c={lects:e[10]};return void 0!==e[9][e[42]].phrase&&(c.phrase=e[9][e[42]].phrase),void 0!==e[9][e[42]].pronunciations&&(c.pronunciations=e[9][e[42]].pronunciations),void 0!==e[9][e[42]].description&&(c.description=e[9][e[42]].description),t=new lp({props:c}),Z.push((()=>ve(t,"phrase",s))),Z.push((()=>ve(t,"pronunciations",a))),Z.push((()=>ve(t,"description",l))),t.$on("update",(function(){return e[37](e[42])})),{c(){ye(t.$$.fragment)},m(e,n){ke(t,e,n),r=!0},p(r,s){e=r;const a={};1024&s[0]&&(a.lects=e[10]),!n&&512&s[0]&&(n=!0,a.phrase=e[9][e[42]].phrase,oe((()=>n=!1))),!o&&512&s[0]&&(o=!0,a.pronunciations=e[9][e[42]].pronunciations,oe((()=>o=!1))),!i&&512&s[0]&&(i=!0,a.description=e[9][e[42]].description,oe((()=>i=!1))),t.$set(a)},i(e){r||(fe(t.$$.fragment,e),r=!0)},o(e){ge(t.$$.fragment,e),r=!1},d(e){xe(t,e)}}}function _p(e){let t,n,o,r,s,a,l,c,h,d,p,f,g,m,b,v,y,T,S,I,A,O,P,N,D,z,F,H,j,U,W,q,V,G,Y,K,X,J,Q,ee,te,ne,ie,re,se,ae,le,ce,he,de,me,be,we,Ce,Ee,Te,Se,Be,Ie,_e=Object.keys(e[4].Phrasebook),Le=[];for(let t=0;t<_e.length;t+=1)Le[t]=gp(pp(e,_e,t));let Ae=null;_e.length||(Ae=fp());let Oe=!e[0]&&mp(),$e=!e[2]&&bp(),Me=!e[1]&&wp(),Pe=e[4].UseLects&&vp(e);const Ne=[xp,kp],Re=[];function De(e,t){return 16&t[0]&&(F=null),null==F&&(F=!!Object.keys(e[4].Phrasebook).length),F?0:1}function ze(e,t){return e[4].UseLects?Tp:Ep}H=De(e,[-1,-1]),j=Re[H]=Ne[H](e);let Fe=ze(e),He=Fe(e);function je(t){e[30](t)}function Ue(t){e[31](t)}function We(t){e[32](t)}let qe={index:"hide"};void 0!==e[8]&&(qe.definition=e[8]),void 0!==e[11]&&(qe.tags=e[11]),void 0!==e[10]&&(qe.lects=e[10]),ne=new $d({props:qe}),Z.push((()=>ve(ne,"definition",je))),Z.push((()=>ve(ne,"tags",Ue))),Z.push((()=>ve(ne,"lects",We)));let Ve=e[9],Ge=[];for(let t=0;t<Ve.length;t+=1)Ge[t]=Ip(cp(e,Ve,t));const Ye=e=>ge(Ge[e],1,1,(()=>{Ge[e]=null}));let Ke=null;return Ve.length||(Ke=Bp()),{c(){t=E("div"),n=E("div"),o=E("div"),r=E("p"),r.textContent="Categories",s=B(),a=E("hr"),l=B(),c=E("div");for(let e=0;e<Le.length;e+=1)Le[e].c();Ae&&Ae.c(),h=B(),d=E("div"),p=E("div"),f=E("div"),Oe&&Oe.c(),g=B(),m=E("input"),b=B(),v=E("div"),$e&&$e.c(),y=B(),T=E("input"),S=B(),I=E("div"),A=E("div"),Me&&Me.c(),O=B(),P=E("input"),N=B(),Pe&&Pe.c(),D=B(),z=E("div"),j.c(),U=B(),W=E("div"),q=E("div"),V=E("button"),G=B(),Y=E("div"),K=E("div"),X=E("label"),X.textContent="Phrase",J=B(),Q=E("input"),ee=B(),He.c(),te=B(),ye(ne.$$.fragment),ae=B(),le=E("label"),ce=E("p"),ce.textContent="Category",he=B(),de=E("input"),me=B(),be=E("button"),be.textContent="Add Phrase",we=B(),Ce=E("div");for(let e=0;e<Ge.length;e+=1)Ge[e].c();Ke&&Ke.c(),Ee=B(),Te=E("button"),Te.textContent="+ Variant",L(r,"title","This panel will fill with category names as you assign phrases to new ones."),L(c,"class","column scrolled"),M(c,"max-height","90%"),L(c,"id","category-body"),L(o,"class","container column"),M(o,"max-width","18%"),L(m,"id","search-phrase"),L(m,"type","text"),L(m,"class","search"),L(f,"class","column search-container"),L(T,"id","search-tags"),L(T,"type","text"),L(T,"class","search"),L(v,"class","column search-container"),L(p,"class","row"),L(P,"id","search-description"),L(P,"type","text"),L(P,"class","search"),L(A,"class","column search-container"),L(I,"class","row"),L(z,"class","column scrolled"),L(z,"id","phrasebook-body"),M(z,"max-height","88%"),L(d,"class","container column"),M(d,"overflow","hidden"),L(n,"class","row"),M(n,"height","58vh"),L(V,"class","collapser-h"),L(q,"class","row"),M(q,"width","100vh"),L(X,"for","phrase"),L(X,"title","Write a new phrase in your language here. The pronunciation is updated the same as in the Lexicon tab."),L(Q,"type","text"),L(ce,"title","Use this field to assign this phrase to a category, or to create a new one with this phrase as its first member."),L(de,"type","text"),L(be,"class","hover-shadow hover-highlight"),L(K,"class","column scrolled"),M(K,"max-height","100%"),L(Te,"class","hover-shadow hover-highlight"),L(Te,"title","If there are multiple ways to say your phrase, you can add variant entries for it along with descriptions."),L(Ce,"class","column scrolled"),M(Ce,"max-height","100%"),L(Ce,"id","variants-body"),L(Y,"class","row"),M(Y,"height","92%"),R(Y,"collapsed",e[7]),L(W,"class","container collapsible-row"),M(W,"height","34vh"),L(t,"class","tab-pane")},m(i,x){k(i,t,x),w(t,n),w(n,o),w(o,r),w(o,s),w(o,a),w(o,l),w(o,c);for(let e=0;e<Le.length;e+=1)Le[e]&&Le[e].m(c,null);Ae&&Ae.m(c,null),w(n,h),w(n,d),w(d,p),w(p,f),Oe&&Oe.m(f,null),w(f,g),w(f,m),$(m,e[0]),w(p,b),w(p,v),$e&&$e.m(v,null),w(v,y),w(v,T),$(T,e[2]),w(d,S),w(d,I),w(I,A),Me&&Me.m(A,null),w(A,O),w(A,P),$(P,e[1]),w(I,N),Pe&&Pe.m(I,null),w(d,D),w(d,z),Re[H].m(z,null),w(t,U),w(t,W),w(W,q),w(q,V),w(W,G),w(W,Y),w(Y,K),w(K,X),w(K,J),w(K,Q),$(Q,e[13]),w(K,ee),He.m(K,null),w(K,te),ke(ne,K,null),w(K,ae),w(K,le),w(le,ce),w(le,he),w(le,de),$(de,e[14]),w(K,me),w(K,be),w(Y,we),w(Y,Ce);for(let e=0;e<Ge.length;e+=1)Ge[e]&&Ge[e].m(Ce,null);Ke&&Ke.m(Ce,null),w(Ce,Ee),w(Ce,Te),Se=!0,Be||(Ie=[u(Bi.call(null,r,{position:"bottom"})),_(m,"input",e[20]),_(T,"input",e[21]),_(P,"input",e[22]),_(V,"click",e[25]),u(Bi.call(null,X,{position:"right"})),_(Q,"input",e[26]),_(Q,"input",e[27]),u(Bi.call(null,ce,{position:"right"})),_(de,"input",e[33]),_(be,"click",e[18]),_(Te,"click",e[17]),u(Bi.call(null,Te,{position:"bottom",autoPosition:!0}))],Be=!0)},p(e,t){if(32816&t[0]){let n;for(_e=Object.keys(e[4].Phrasebook),n=0;n<_e.length;n+=1){const o=pp(e,_e,n);Le[n]?Le[n].p(o,t):(Le[n]=gp(o),Le[n].c(),Le[n].m(c,null))}for(;n<Le.length;n+=1)Le[n].d(1);Le.length=_e.length,!_e.length&&Ae?Ae.p(e,t):_e.length?Ae&&(Ae.d(1),Ae=null):(Ae=fp(),Ae.c(),Ae.m(c,null))}e[0]?Oe&&(Oe.d(1),Oe=null):Oe||(Oe=mp(),Oe.c(),Oe.m(f,g)),1&t[0]&&m.value!==e[0]&&$(m,e[0]),e[2]?$e&&($e.d(1),$e=null):$e||($e=bp(),$e.c(),$e.m(v,y)),4&t[0]&&T.value!==e[2]&&$(T,e[2]),e[1]?Me&&(Me.d(1),Me=null):Me||(Me=wp(),Me.c(),Me.m(A,O)),2&t[0]&&P.value!==e[1]&&$(P,e[1]),e[4].UseLects?Pe?Pe.p(e,t):(Pe=vp(e),Pe.c(),Pe.m(I,null)):Pe&&(Pe.d(1),Pe=null);let n=H;H=De(e,t),H===n?Re[H].p(e,t):(ue(),ge(Re[n],1,1,(()=>{Re[n]=null})),pe(),j=Re[H],j?j.p(e,t):(j=Re[H]=Ne[H](e),j.c()),fe(j,1),j.m(z,null)),8192&t[0]&&Q.value!==e[13]&&$(Q,e[13]),Fe===(Fe=ze(e))&&He?He.p(e,t):(He.d(1),He=Fe(e),He&&(He.c(),He.m(K,te)));const o={};if(!ie&&256&t[0]&&(ie=!0,o.definition=e[8],oe((()=>ie=!1))),!re&&2048&t[0]&&(re=!0,o.tags=e[11],oe((()=>re=!1))),!se&&1024&t[0]&&(se=!0,o.lects=e[10],oe((()=>se=!1))),ne.$set(o),16384&t[0]&&de.value!==e[14]&&$(de,e[14]),1536&t[0]){let n;for(Ve=e[9],n=0;n<Ve.length;n+=1){const o=cp(e,Ve,n);Ge[n]?(Ge[n].p(o,t),fe(Ge[n],1)):(Ge[n]=Ip(o),Ge[n].c(),fe(Ge[n],1),Ge[n].m(Ce,Ee))}for(ue(),n=Ve.length;n<Ge.length;n+=1)Ye(n);pe(),!Ve.length&&Ke?Ke.p(e,t):Ve.length?Ke&&(Ke.d(1),Ke=null):(Ke=Bp(),Ke.c(),Ke.m(Ce,Ee))}(!Se||128&t[0])&&R(Y,"collapsed",e[7])},i(e){if(!Se){fe(j),fe(ne.$$.fragment,e);for(let e=0;e<Ve.length;e+=1)fe(Ge[e]);Se=!0}},o(e){ge(j),ge(ne.$$.fragment,e),Ge=Ge.filter(Boolean);for(let e=0;e<Ge.length;e+=1)ge(Ge[e]);Se=!1},d(e){e&&x(t),C(Le,e),Ae&&Ae.d(),Oe&&Oe.d(),$e&&$e.d(),Me&&Me.d(),Pe&&Pe.d(),Re[H].d(),He.d(),xe(ne),C(Ge,e),Ke&&Ke.d(),Be=!1,i(Ie)}}}function Lp(e,t,n){let o,i,r,s,a;h(e,Uo,(e=>n(4,o=e))),h(e,Xo,(e=>n(5,i=e))),h(e,Yo,(e=>n(12,r=e))),h(e,Go,(e=>n(13,s=e))),h(e,Ko,(e=>n(14,a=e)));const l=require("vex-js");d(Ko,a=i,a);let c="",u="",p="",f="",g=[],m=!1,b="",w=[],v=[...o.Lects],y="";function k(e){d(Xo,i=e,i),d(Ko,a=e,a)}function x(e){d(Go,s=e,s),d(Ko,a=i,a),d(Yo,r=(()=>{let t={};return Object.keys(o.Phrasebook[i][e].pronunciations).forEach((n=>{t[n]=o.Phrasebook[i][e].pronunciations[n].ipa})),t})(),r),n(8,b=o.Phrasebook[i][e].description),n(9,w=[]);for(let t in o.Phrasebook[i][e].variants)n(9,w=[...w,{phrase:t,pronunciations:o.Phrasebook[i][e].variants[t].pronunciations,description:o.Phrasebook[i][e].variants[t].description}]);delete o.Phrasebook[i][e],0===Object.keys(o.Phrasebook[i]).length&&(delete o.Phrasebook[i],d(Xo,i="",i)),d(Uo,o=Object.assign({},o),o)}return e.$$.update=()=>{63&e.$$.dirty[0]&&(o.Phrasebook,n(6,g=function(){if(!i)return[];const e=o.Phrasebook[i],t=c.trim(),n=u.toLowerCase().trim(),r=p.toLowerCase().trim();let s=[];for(let o in e){let i="^"+o.replaceAll(/\s+/g,"^")+"^";t&&!i.toLowerCase().includes(t)||n&&!e[o].description.toLowerCase().includes(n)||r&&!e[o].tags.join(" ").toLowerCase().includes(r)||f&&!e[o].lects.includes(f)||s.push(o);for(let i in e[o].variants){let r=e[o].variants[i],a="^"+i.replaceAll(/\s+/g,"^")+"^";t&&!a.toLowerCase().includes(t)||n&&!r.description.toLowerCase().includes(n)||s.push(o)}}return[...new Set(s)]}()))},[c,u,p,f,o,i,g,m,b,w,v,y,r,s,a,k,x,function(){n(9,w=[...w,{phrase:"",pronunciations:(()=>{let e={};return v.forEach((t=>e[t]="")),e})(),description:""}])},function(){let e=s.trim();if(!e)return;let t=b.trim();if(!t)return;let c=a.trim();if(!c)return;let h={};function u(){o.Phrasebook.hasOwnProperty(c)||d(Uo,o.Phrasebook[c]={},o),d(Uo,o.Phrasebook[c][e]={pronunciations:h,lects:Object.keys(h),tags:y.split(/\s+/g),description:t,variants:(()=>{let e={};for(const t of w){const n=t.phrase.trim();if(!n)continue;const o=t.description.trim();if(!o)continue;let i={};Object.keys(t.pronunciations).forEach((e=>{i[e]={ipa:t.pronunciations[e].trim(),irregular:t.pronunciations[e].trim()!==vi(n,e)}})),e[n]={pronunciations:i,description:o}}return e})()},o),d(Uo,o=Object.assign({},o),o),d(Go,s="",s),d(Yo,r=(()=>{let e={};return Object.keys(o.Pronunciations).forEach((t=>{e[t]=""})),e})(),r),n(8,b=""),n(9,w=[]),d(Xo,i=c,i)}console.log(r,v),Object.keys(r).filter((e=>v.includes(e))).forEach((t=>{console.log(t),h[t]={ipa:r[t].trim(),irregular:r[t].trim()!==vi(e,t)}})),o.Phrasebook.hasOwnProperty(c)&&o.Phrasebook[c].hasOwnProperty(e)?l.dialog.confirm({message:"This phrase already exists in this category. Are you sure you want to overwrite it?",callback:e=>{e&&u()}}):u()},e=>k(e),function(){c=this.value,n(0,c)},function(){p=this.value,n(2,p)},function(){u=this.value,n(1,u)},function(){f=N(this),n(3,f)},e=>x(e),()=>n(7,m=!m),function(){s=this.value,Go.set(s)},()=>{v.forEach((e=>{d(Yo,r[e]=vi(s,e),r)}))},function(e){r[e]=this.value,Yo.set(r)},function(){r.General=this.value,Yo.set(r)},function(e){b=e,n(8,b)},function(e){y=e,n(11,y)},function(e){v=e,n(10,v)},function(){a=this.value,Ko.set(a)},function(t,o){e.$$.not_equal(w[o].phrase,t)&&(w[o].phrase=t,n(9,w))},function(t,o){e.$$.not_equal(w[o].pronunciations,t)&&(w[o].pronunciations=t,n(9,w))},function(t,o){e.$$.not_equal(w[o].description,t)&&(w[o].description=t,n(9,w))},e=>{v.forEach((t=>{n(9,w[e].pronunciations[t]=vi(w[e].phrase,t),w)}))}]}class Ap extends Te{constructor(e){super(),Ee(this,e,Lp,_p,s,{},null,[-1,-1])}}function Op(e,t,n){const o=e.slice();return o[41]=t[n],o}function $p(e,t,n){const o=e.slice();return o[44]=t[n],o[46]=n,o}function Mp(e,t,n){const o=e.slice();return o[47]=t[n],o}function Pp(e,t,n){const o=e.slice();return o[50]=t[n],o[51]=t,o[46]=n,o}function Np(e){let t,n,o,r,s,a,l,c,h,d,p,f,g,m,b,v,y,C,T,I,A,P,N,R,D,z,F,H,j,U,W,q,V,G,Y,K,X,Z,J,Q,ee,te,ne;return{c(){t=E("label"),t.textContent="Onset Consonants",n=B(),o=E("textarea"),r=B(),s=E("br"),a=B(),l=E("label"),l.textContent="Medial Consonants",c=B(),h=E("textarea"),d=B(),p=E("br"),f=B(),g=E("label"),g.textContent="Coda Consonants",m=B(),b=E("textarea"),v=B(),y=E("br"),C=B(),T=E("label"),T.textContent="Vowels",I=B(),A=E("textarea"),P=B(),N=E("br"),R=B(),D=E("label"),D.textContent="Illegal Combinations",z=B(),F=E("textarea"),H=B(),j=E("br"),U=E("br"),W=B(),q=E("label"),q.textContent="Trial Words",V=B(),G=E("input"),Y=B(),K=E("p"),X=S(e[10]),Z=B(),J=E("br"),Q=B(),ee=E("button"),ee.textContent="Generate Words",L(t,"for","onsets"),L(t,"title","This field is for defining consonants and cluster that can occur word-initially."),L(o,"id","onsets"),L(o,"class","phonology"),L(l,"for","medials"),L(l,"title","This field is for defining consonants and clusters that can occur word-medially."),L(h,"id","medials"),L(h,"class","phonology"),L(g,"for","codas"),L(g,"title","This field is for defining consonants and clusters that can occur word-finally."),L(b,"id","codas"),L(b,"class","phonology"),L(T,"for","vowels"),L(T,"title","This field is for defining vowels or sounds which can occur as a syllable’s nucleus."),L(A,"id","vowels"),L(A,"class","phonology"),L(D,"for","illegals"),L(D,"title","This field is for defining combinations of characters that should never occur."),L(F,"id","illegals"),L(F,"class","phonology"),L(q,"for","trial"),L(q,"title","This field allows you to begin typing a word while being shown possible completions for it."),L(G,"type","text"),L(G,"id","trial"),M(K,"font-family","Gentium"),L(ee,"class","hover-highlight hover-shadow")},m(i,x){k(i,t,x),k(i,n,x),k(i,o,x),$(o,e[3].Phonotactics.General.Onsets),k(i,r,x),k(i,s,x),k(i,a,x),k(i,l,x),k(i,c,x),k(i,h,x),$(h,e[3].Phonotactics.General.Medials),k(i,d,x),k(i,p,x),k(i,f,x),k(i,g,x),k(i,m,x),k(i,b,x),$(b,e[3].Phonotactics.General.Codas),k(i,v,x),k(i,y,x),k(i,C,x),k(i,T,x),k(i,I,x),k(i,A,x),$(A,e[3].Phonotactics.General.Vowels),k(i,P,x),k(i,N,x),k(i,R,x),k(i,D,x),k(i,z,x),k(i,F,x),$(F,e[3].Phonotactics.General.Illegals),k(i,H,x),k(i,j,x),k(i,U,x),k(i,W,x),k(i,q,x),k(i,V,x),k(i,G,x),$(G,e[0]),k(i,Y,x),k(i,K,x),w(K,X),k(i,Z,x),k(i,J,x),k(i,Q,x),k(i,ee,x),te||(ne=[u(Bi.call(null,t,{position:"right"})),_(o,"input",e[28]),u(Bi.call(null,l,{position:"right"})),_(h,"input",e[29]),u(Bi.call(null,g,{position:"right"})),_(b,"input",e[30]),u(Bi.call(null,T,{position:"right"})),_(A,"input",e[31]),u(Bi.call(null,D,{position:"right"})),_(F,"input",e[32]),u(Bi.call(null,q,{position:"right"})),_(G,"input",e[33]),_(ee,"click",e[34])],te=!0)},p(e,t){8&t[0]&&$(o,e[3].Phonotactics.General.Onsets),8&t[0]&&$(h,e[3].Phonotactics.General.Medials),8&t[0]&&$(b,e[3].Phonotactics.General.Codas),8&t[0]&&$(A,e[3].Phonotactics.General.Vowels),8&t[0]&&$(F,e[3].Phonotactics.General.Illegals),1&t[0]&&G.value!==e[0]&&$(G,e[0]),1024&t[0]&&O(X,e[10])},d(e){e&&x(t),e&&x(n),e&&x(o),e&&x(r),e&&x(s),e&&x(a),e&&x(l),e&&x(c),e&&x(h),e&&x(d),e&&x(p),e&&x(f),e&&x(g),e&&x(m),e&&x(b),e&&x(v),e&&x(y),e&&x(C),e&&x(T),e&&x(I),e&&x(A),e&&x(P),e&&x(N),e&&x(R),e&&x(D),e&&x(z),e&&x(F),e&&x(H),e&&x(j),e&&x(U),e&&x(W),e&&x(q),e&&x(V),e&&x(G),e&&x(Y),e&&x(K),e&&x(Z),e&&x(J),e&&x(Q),e&&x(ee),te=!1,i(ne)}}}function Rp(e){let t,n,o,r,s,a,l,c,h,d,p,f,g,m,b,v,y,T,I,A,O,M,P,N,R,D,z,F,H=e[6],j=[];for(let t=0;t<H.length;t+=1)j[t]=Dp(Pp(e,H,t));return{c(){t=E("div"),n=E("div"),o=E("label"),r=S("Categories\n                            "),s=E("textarea"),a=B(),l=E("div"),c=E("label"),h=S("Syllables\n                            "),d=E("textarea"),p=B(),f=E("div"),g=E("div"),m=E("label"),b=S("Structures\n                            ");for(let e=0;e<j.length;e+=1)j[e].c();v=B(),y=E("button"),y.textContent="Add Set",T=B(),I=E("div"),A=E("label"),O=S("Illegals\n                            "),M=E("textarea"),P=B(),N=E("br"),R=B(),D=E("button"),D.textContent="Generate Words",L(s,"class","phonology text-left"),L(s,"rows","8"),L(o,"title","This field is for defining categories of phonemes. See the Help tab for more information."),L(n,"class","column"),L(d,"class","phonology text-left"),L(d,"rows","8"),L(c,"title","This field is for defining syllable structures. See the Help tab for more information."),L(l,"class","column"),L(t,"class","row"),L(y,"class","hover-highlight hover-shadow"),L(m,"title","This field is for defining word structures. See the Help tab for more information."),L(g,"class","column"),L(M,"class","phonology text-left"),L(M,"rows","4"),L(A,"title","This field is for defining illegal combinations in words. See the Help tab for more information."),L(I,"class","column"),L(f,"class","row"),L(D,"class","hover-highlight hover-shadow")},m(i,x){k(i,t,x),w(t,n),w(n,o),w(o,r),w(o,s),$(s,e[4]),w(t,a),w(t,l),w(l,c),w(c,h),w(c,d),$(d,e[5]),k(i,p,x),k(i,f,x),w(f,g),w(g,m),w(m,b);for(let e=0;e<j.length;e+=1)j[e]&&j[e].m(m,null);w(m,v),w(m,y),w(f,T),w(f,I),w(I,A),w(A,O),w(A,M),$(M,e[7]),k(i,P,x),k(i,N,x),k(i,R,x),k(i,D,x),z||(F=[_(s,"input",e[20]),_(s,"blur",e[12]),u(Bi.call(null,o,{position:"right"})),_(d,"input",e[21]),_(d,"blur",e[13]),u(Bi.call(null,c,{position:"left"})),_(y,"click",e[25]),u(Bi.call(null,m,{position:"right"})),_(M,"input",e[26]),_(M,"blur",e[15]),u(Bi.call(null,A,{position:"left"})),_(D,"click",e[27])],z=!0)},p(e,t){if(16&t[0]&&$(s,e[4]),32&t[0]&&$(d,e[5]),16448&t[0]){let n;for(H=e[6],n=0;n<H.length;n+=1){const o=Pp(e,H,n);j[n]?j[n].p(o,t):(j[n]=Dp(o),j[n].c(),j[n].m(m,v))}for(;n<j.length;n+=1)j[n].d(1);j.length=H.length}128&t[0]&&$(M,e[7])},d(e){e&&x(t),e&&x(p),e&&x(f),C(j,e),e&&x(P),e&&x(N),e&&x(R),e&&x(D),z=!1,i(F)}}}function Dp(e){let t,n,o,r,s,a,l,c,h,d,u,p;function f(){e[22].call(r,e[51],e[46])}function g(){return e[23](e[46])}function m(){e[24].call(d,e[51],e[46])}return{c(){t=E("div"),n=E("div"),o=E("div"),r=E("input"),s=B(),a=E("div"),l=E("button"),l.textContent="-",c=B(),h=E("div"),d=E("textarea"),L(r,"type","checkbox"),L(o,"class","row"),L(l,"class","hover-highlight hover-shadow"),L(a,"class","row"),L(n,"class","column narrow"),L(d,"class","phonology text-left"),L(d,"rows","3"),L(h,"class","column"),L(t,"class","row")},m(i,b){k(i,t,b),w(t,n),w(n,o),w(o,r),r.checked=e[50].enabled,w(n,s),w(n,a),w(a,l),w(t,c),w(t,h),w(h,d),$(d,e[50].structures),u||(p=[_(r,"change",f),_(r,"change",e[14]),_(l,"click",g),_(d,"input",m),_(d,"blur",e[14])],u=!0)},p(t,n){e=t,64&n[0]&&(r.checked=e[50].enabled),64&n[0]&&$(d,e[50].structures)},d(e){e&&x(t),u=!1,i(p)}}}function zp(e){let t,n,o,i=e[47]+"";return{c(){t=E("div"),n=E("p"),o=S(i),L(n,"class","prelined"),M(n,"font-family","Gentium"),L(t,"class","column")},m(e,i){k(e,t,i),w(t,n),w(n,o)},p(e,t){256&t[0]&&i!==(i=e[47]+"")&&O(o,i)},d(e){e&&x(t)}}}function Fp(e){let t,n,o=e[8].slice(3*e[46],3*e[46]+3),i=[];for(let t=0;t<o.length;t+=1)i[t]=zp(Mp(e,o,t));return{c(){t=E("div");for(let e=0;e<i.length;e+=1)i[e].c();n=B(),L(t,"class","row")},m(e,o){k(e,t,o);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null);w(t,n)},p(e,r){if(256&r[0]){let s;for(o=e[8].slice(3*e[46],3*e[46]+3),s=0;s<o.length;s+=1){const a=Mp(e,o,s);i[s]?i[s].p(a,r):(i[s]=zp(a),i[s].c(),i[s].m(t,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=o.length}},d(e){e&&x(t),C(i,e)}}}function Hp(e){let t,n,o,r=e[3].Lects,s=[];for(let t=0;t<r.length;t+=1)s[t]=jp(Op(e,r,t));return{c(){t=E("select");for(let e=0;e<s.length;e+=1)s[e].c();void 0===e[2]&&ne((()=>e[35].call(t)))},m(i,r){k(i,t,r);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);P(t,e[2],!0),n||(o=[_(t,"change",e[35]),_(t,"change",e[17])],n=!0)},p(e,n){if(8&n[0]){let o;for(r=e[3].Lects,o=0;o<r.length;o+=1){const i=Op(e,r,o);s[o]?s[o].p(i,n):(s[o]=jp(i),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}12&n[0]&&P(t,e[2])},d(e){e&&x(t),C(s,e),n=!1,i(o)}}}function jp(e){let t,n,o,i=e[41]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[41],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){8&r[0]&&i!==(i=e[41]+"")&&O(n,i),8&r[0]&&o!==(o=e[41])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Up(t){let n,o,r,s,a,l,c,h,d,p,f,g,m,b,v,y,T,I,A,O,P,N,R,D,z,F,H,j,U;function W(e,t){return e[3].UseAdvancedPhonotactics?Rp:Np}let q=W(t),V=q(t),G=Array(t[8].length/3).fill(null),Y=[];for(let e=0;e<G.length;e+=1)Y[e]=Fp($p(t,G,e));let K=t[3].UseLects&&Hp(t);return{c(){n=E("div"),o=E("div"),r=E("div"),s=E("label"),a=E("input"),l=S("\n                Use Advanced Phonotactics"),c=B(),h=E("br"),d=E("br"),p=B(),V.c(),f=B();for(let e=0;e<Y.length;e+=1)Y[e].c();g=B(),m=E("div"),b=E("label"),v=S("Pronunciations\n                "),K&&K.c(),y=B(),T=E("textarea"),A=B(),O=E("br"),P=E("br"),N=B(),R=E("label"),D=S("Rule Testing\n                "),z=E("textarea"),F=B(),H=E("textarea"),L(a,"type","checkbox"),L(s,"title","Turn this on to show a type of word generator better suited for complex structures."),L(r,"class","container column scrolled"),M(r,"height","100%"),L(T,"class","prelined"),L(T,"rows","24"),M(T,"text-align","left"),L(T,"id","pronunciations-input"),T.value=I=t[3].Pronunciations[t[2]],L(b,"title","This field is for writing pronunciation rules to convert your romanization to phonetic notation. See the Help tab for more information."),L(z,"class","prelined"),L(z,"rows","2"),L(R,"title","This field allows you to test that your rules are working as expected."),L(H,"class","pronunciation"),L(H,"rows","2"),H.readOnly=!0,L(m,"class","container column scrolled"),M(m,"height","100%"),L(o,"class","row"),M(o,"height","92vh"),L(n,"class","tab-pane")},m(e,i){k(e,n,i),w(n,o),w(o,r),w(r,s),w(s,a),a.checked=t[3].UseAdvancedPhonotactics,w(s,l),w(r,c),w(r,h),w(r,d),w(r,p),V.m(r,null),w(r,f);for(let e=0;e<Y.length;e+=1)Y[e]&&Y[e].m(r,null);w(o,g),w(o,m),w(m,b),w(b,v),K&&K.m(b,null),w(b,y),w(b,T),w(m,A),w(m,O),w(m,P),w(m,N),w(m,R),w(R,D),w(R,z),$(z,t[1]),w(m,F),w(m,H),$(H,t[9]),j||(U=[_(a,"change",t[19]),u(Bi.call(null,s,{position:"right"})),_(T,"blur",t[36]),u(Bi.call(null,b,{position:"bottom"})),_(z,"input",t[37]),u(Bi.call(null,R,{position:"top"})),_(H,"input",t[38])],j=!0)},p(e,t){if(8&t[0]&&(a.checked=e[3].UseAdvancedPhonotactics),q===(q=W(e))&&V?V.p(e,t):(V.d(1),V=q(e),V&&(V.c(),V.m(r,f))),256&t[0]){let n;for(G=Array(e[8].length/3).fill(null),n=0;n<G.length;n+=1){const o=$p(e,G,n);Y[n]?Y[n].p(o,t):(Y[n]=Fp(o),Y[n].c(),Y[n].m(r,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=G.length}e[3].UseLects?K?K.p(e,t):(K=Hp(e),K.c(),K.m(b,y)):K&&(K.d(1),K=null),12&t[0]&&I!==(I=e[3].Pronunciations[e[2]])&&(T.value=I),2&t[0]&&$(z,e[1]),512&t[0]&&$(H,e[9])},i:e,o:e,d(e){e&&x(n),V.d(),C(Y,e),K&&K.d(),j=!1,i(U)}}}function Wp(e,t,n){let o,i,r,s;h(e,Uo,(e=>n(3,r=e))),h(e,ei,(e=>n(18,s=e)));var a=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n};let l="",c="";function u(e){const t=e.target.value.trim(),n=r.Pronunciations,o=w;n[o];const i=a(n,["symbol"==typeof o?o:o+""]);d(Uo,r.Pronunciations=Object.assign(Object.assign({},i),{[w]:t}),r)}let p="",f="",g=[{enabled:!0,structures:""}],m="";function b(e=1){let t="";const n=t=>{for(let n of r.AdvancedPhonotactics.Illegals)if(t.includes(n)&&""!==n)return e<=20?b(e+1):"[ ∅ ]";return t};if(r.AdvancedPhonotactics.Constructs.every((e=>!e.enabled||""===e.structures.trim()))){for(let e=0;e<Math.floor(4*Math.random())+1;e++){let e=r.AdvancedPhonotactics.Syllables[Math.floor(Math.random()*r.AdvancedPhonotactics.Syllables.length)];e.includes("::")&&(e=e.split("::")[1].trim().split(/\s+/g)[Math.floor(Math.random()*e.split("::")[1].trim().split(/\s+/g).length)]),e.split("").forEach((e=>{r.AdvancedPhonotactics.Categories[e]?t+=r.AdvancedPhonotactics.Categories[e][Math.floor(Math.random()*r.AdvancedPhonotactics.Categories[e].length)]:t+=e}))}return n(t)}let o=[];for(let e of r.AdvancedPhonotactics.Constructs)e.enabled&&(o=o.concat(e.structures.split(/\s+/g)));let i=o[Math.floor(Math.random()*o.length)].split(""),s=new Array(i.length).fill([]);for(let e=0;e<i.length;e++){let t=i[e];for(let n=0;n<r.AdvancedPhonotactics.Syllables.length;n++)r.AdvancedPhonotactics.Syllables[n].replaceAll(/\s+/g,"").slice(0,3)===t+"::"&&(s[e]=s[e].concat(r.AdvancedPhonotactics.Syllables[n].split("::")[1].trim().split(/\s+/g)));0===s[e].length&&(s[e]=[t])}let a="";for(let e=0;e<s.length;e++){a+=s[e][Math.floor(Math.random()*s[e].length)]}for(let e=0;e<a.length;e++){let n=a[e];r.AdvancedPhonotactics.Categories[n]?t+=r.AdvancedPhonotactics.Categories[n][Math.floor(Math.random()*r.AdvancedPhonotactics.Categories[n].length)]:t+=n}return n(t)}let w=r.Lects[0],v=Array(24).fill("");return e.$$.update=()=>{262144&e.$$.dirty[0]&&s&&(n(4,p=Object.keys(r.AdvancedPhonotactics.Categories).map((e=>`${e} :: ${r.AdvancedPhonotactics.Categories[e].join(" ")}`)).join("\n")),n(5,f=r.AdvancedPhonotactics.Syllables.join("\n")),n(6,g=r.AdvancedPhonotactics.Constructs),n(7,m=r.AdvancedPhonotactics.Illegals.join(" "))),1&e.$$.dirty[0]&&n(10,o=function(e){const t=()=>0===Math.floor(2*Math.random()),n=e=>e[Math.floor(Math.random()*e.length)],o={Onsets:wi().Phonotactics.General.Onsets.split(/\s+/g),Medials:wi().Phonotactics.General.Medials.split(/\s+/g),Codas:wi().Phonotactics.General.Codas.split(/\s+/g),Vowels:wi().Phonotactics.General.Vowels.split(/\s+/g),Illegals:wi().Phonotactics.General.Illegals.split(/\s+/g)};let i="^"+e;const r=e=>(e+="^",o.Illegals.some((t=>e.includes(t)))&&o.Illegals[0]?"":e.replace(/\^/g,""));let s=!1;for(const e of o.Vowels)if(i.includes(e)&&i.lastIndexOf(e)===i.length-e.length){if(t()){i+=n(o.Medials)+n(o.Vowels),s=!0;break}return i+=n(o.Codas),r(i)}return!s&&(i+=n(o.Vowels),t())?(t()&&(i+=n(o.Codas)),r(i)):(t()?i+=n(o.Codas):(i+=n(o.Medials)+n(o.Vowels),t()&&(i+=n(o.Codas))),r(i))}(l)),12&e.$$.dirty[0]&&(r.Lects,n(2,w=r.UseLects?w:r.Lects[0]),r.Lects.includes(w)||n(2,w=r.Lects[0])),6&e.$$.dirty[0]&&n(9,i=vi(c,w))},[l,c,w,r,p,f,g,m,v,i,o,u,function(){d(Uo,r.AdvancedPhonotactics.Categories={},r),p.split("\n").forEach((e=>{let t=e.split("::")[0].trim();r.AdvancedPhonotactics.Categories[t]||d(Uo,r.AdvancedPhonotactics.Categories[t]=[],r),e.split("::")[1].trim().split(/\s+/g).forEach((e=>{r.AdvancedPhonotactics.Categories[t].push(e)}))}))},function(){d(Uo,r.AdvancedPhonotactics.Syllables=[],r),f.split("\n").forEach((e=>{r.AdvancedPhonotactics.Syllables.push(e.trim())}))},function(){d(Uo,r.AdvancedPhonotactics.Constructs=[],r);for(let e of g)r.AdvancedPhonotactics.Constructs.push({enabled:e.enabled,structures:e.structures.trim()})},function(){d(Uo,r.AdvancedPhonotactics.Illegals=[],r),m.split(/\s+/g).forEach((e=>{r.AdvancedPhonotactics.Illegals.push(e.trim())}))},b,function(){document.getElementById("pronunciations-input").value=r.Pronunciations[w]},s,function(){r.UseAdvancedPhonotactics=this.checked,Uo.set(r)},function(){p=this.value,n(4,p)},function(){f=this.value,n(5,f)},function(e,t){e[t].enabled=this.checked,n(6,g)},e=>{g.length>1&&(g.splice(e,1),g[0].structures,n(6,g[0].structures=g[0].structures.trim(),g))},function(e,t){e[t].structures=this.value,n(6,g)},()=>{g.push({enabled:!0,structures:" "}),g[0].structures,n(6,g[0].structures=g[0].structures.trim(),g)},function(){m=this.value,n(7,m)},()=>n(8,v=Array(24).fill(null).map((e=>b()))),function(){r.Phonotactics.General.Onsets=this.value,Uo.set(r)},function(){r.Phonotactics.General.Medials=this.value,Uo.set(r)},function(){r.Phonotactics.General.Codas=this.value,Uo.set(r)},function(){r.Phonotactics.General.Vowels=this.value,Uo.set(r)},function(){r.Phonotactics.General.Illegals=this.value,Uo.set(r)},function(){l=this.value,n(0,l)},()=>n(8,v=Array(24).fill(null).map((e=>function(){const e=()=>{const e={Onsets:wi().Phonotactics.General.Onsets.split(/\s+/g),Medials:wi().Phonotactics.General.Medials.split(/\s+/g),Codas:wi().Phonotactics.General.Codas.split(/\s+/g),Vowels:wi().Phonotactics.General.Vowels.split(/\s+/g),Illegals:wi().Phonotactics.General.Illegals.split(/\s+/g)},t=()=>0===Math.floor(2*Math.random()),n=e=>e[Math.floor(Math.random()*e.length)];let o="^";t()||(o+=n(e.Onsets)),o+=n(e.Vowels);for(let i=0;i<2;i++)(t()||2===o.length)&&(o+=n(e.Medials),o+=n(e.Vowels));return t()&&(o+=n(e.Codas)),o+="^",e.Illegals.some((e=>o.includes(e)))&&e.Illegals[0]?"":o.replace(/\^/g,"")};for(let t=0;t<50;t++){const t=e();if(t)return t}return""}()))),function(){w=N(this),n(2,w),n(3,r)},e=>{u(e),yi(w)},function(){c=this.value,n(1,c)},function(){i=this.value,n(9,i),n(1,c),n(2,w),n(3,r)}]}class qp extends Te{constructor(e){super(),Ee(this,e,Wp,Up,s,{},null,[-1,-1])}}function Vp(t){let n;return{c(){n=E("div"),n.innerHTML='<div class="container row text-center" style="height: 92vh; overflow-y: auto;"><div class="column" style="font-family: Gentium" id="docs-tab"></div></div>',L(n,"class","tab-pane"),L(n,"spellcheck","false")},m(e,t){k(e,n,t)},p:e,i:e,o:e,d(e){e&&x(n)}}}function Gp(e){return gs(!1),[]}class Yp extends Te{constructor(e){super(),Ee(this,e,Gp,Vp,s,{})}}function Kp(e,t,n){const o=e.slice();return o[17]=t[n],o}function Xp(e){let t,n,o,i,r,s,a,l=e[5].Lects,c=[];for(let t=0;t<l.length;t+=1)c[t]=Zp(Kp(e,l,t));return{c(){t=E("br"),n=B(),o=E("label"),i=S("Lect\n                        "),r=E("select");for(let e=0;e<c.length;e+=1)c[e].c();void 0===e[4]&&ne((()=>e[12].call(r)))},m(l,h){k(l,t,h),k(l,n,h),k(l,o,h),w(o,i),w(o,r);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(r,null);P(r,e[4],!0),s||(a=_(r,"change",e[12]),s=!0)},p(e,t){if(32&t){let n;for(l=e[5].Lects,n=0;n<l.length;n+=1){const o=Kp(e,l,n);c[n]?c[n].p(o,t):(c[n]=Zp(o),c[n].c(),c[n].m(r,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}48&t&&P(r,e[4])},d(e){e&&x(t),e&&x(n),e&&x(o),C(c,e),s=!1,a()}}}function Zp(e){let t,n,o,i=e[17]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[17],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){32&r&&i!==(i=e[17]+"")&&O(n,i),32&r&&o!==(o=e[17])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Jp(t){let n,o,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,C,T,I,A,O,M,P,N,R,D,z,F=t[3]&&t[5].UseLects&&Xp(t);return{c(){n=E("div"),o=E("div"),r=E("label"),s=S("Sound Changes\n            "),a=E("br"),l=B(),c=E("label"),h=S("Base From Pronunciations\n                    "),d=E("input"),u=B(),F&&F.c(),p=B(),f=E("textarea"),g=B(),m=E("label"),b=S("Test Changes\n            "),v=E("textarea"),y=B(),C=E("textarea"),I=B(),A=E("div"),O=E("label"),M=S("New Language Name\n            "),P=E("input"),N=B(),R=E("button"),R.textContent="Save File and Evolve Lexicon",L(d,"type","checkbox"),L(f,"rows","5"),L(f,"class","text-left"),L(v,"rows","3"),L(C,"rows","3"),L(C,"class","pronunciation"),C.value=T=t[10](t[1]),C.readOnly=!0,L(o,"class","column"),L(P,"type","text"),L(R,"class","hover-highlight hover-shadow"),L(A,"class","column"),L(n,"class","row narrow")},m(e,i){k(e,n,i),w(n,o),w(o,r),w(r,s),w(r,a),w(r,l),w(r,c),w(c,h),w(c,d),d.checked=t[3],w(c,u),F&&F.m(c,null),w(r,p),w(r,f),$(f,t[0]),w(o,g),w(o,m),w(m,b),w(m,v),$(v,t[1]),w(m,y),w(m,C),w(n,I),w(n,A),w(A,O),w(O,M),w(O,P),$(P,t[2]),w(A,N),w(A,R),D||(z=[_(d,"change",t[11]),_(f,"input",t[13]),_(v,"input",t[14]),_(P,"input",t[15]),_(R,"click",t[16])],D=!0)},p(e,[t]){8&t&&(d.checked=e[3]),e[3]&&e[5].UseLects?F?F.p(e,t):(F=Xp(e),F.c(),F.m(c,null)):F&&(F.d(1),F=null),1&t&&$(f,e[0]),2&t&&$(v,e[1]),2&t&&T!==(T=e[10](e[1]))&&(C.value=T),4&t&&P.value!==e[2]&&$(P,e[2])},i:e,o:e,d(e){e&&x(n),F&&F.d(),D=!1,i(z)}}}function Qp(e,t,n){let o,i,r,s;h(e,Uo,(e=>n(5,o=e))),h(e,ni,(e=>n(6,i=e))),h(e,jo,(e=>n(7,r=e))),h(e,Zo,(e=>n(8,s=e)));const a=require("vex-js");let l="",c="",u="",p=!1,f=o.Lects[0];function g(e){const t=bi(l);return mi(t.rules,e,t.categories)}return[l,c,u,p,f,o,i,r,s,a,g,function(){p=this.checked,n(3,p)},function(){f=N(this),n(4,f)},function(){l=this.value,n(0,l)},function(){c=this.value,n(1,c)},function(){u=this.value,n(2,u)},()=>{u!==o.Name?(Th(),window.setTimeout((()=>{i&&d(ni,i=!1,i),d(ni,i=structuredClone(o),i);const e=structuredClone(r);e.Name=u,e.ShowEtymology=!0,Object.keys(o.Lexicon).forEach((t=>{let n=`${t}`;if(p){if(!o.Lexicon[t].pronunciations.hasOwnProperty(f))return;n=o.Lexicon[t].pronunciations[f].ipa}const i=g(n);e.Lexicon[i]=structuredClone(o.Lexicon[t]),e.Lexicon[i].pronunciations={General:{ipa:i,irregular:!1}},e.Lexicon[i].Senses.forEach((e=>{e.lects=["General"]})),e.Relatives[o.Name]=structuredClone(o.Lexicon),o.Etymologies[t]?(e.Etymologies[t]=o.Etymologies[t],e.Etymologies[t].source=o.Name,e.Etymologies[t].descendants.forEach((e=>{"<< THIS LANGUAGE >>"===e.source&&(e.source=o.Name)}))):e.Etymologies[t]={descendants:[],source:o.Name},e.Etymologies[i]={descendants:[],source:"<< THIS LANGUAGE >>"},e.Etymologies[t].descendants.push({name:i,source:"<< THIS LANGUAGE >>"})})),s.destroy(),gs(!1),d(Uo,o=e,o),Th()}),333)):a.dialog.alert("The new language must have a different name.")}]}class ef extends Te{constructor(e){super(),Ee(this,e,Qp,Jp,s,{})}}const tf=require("node:crypto");function nf(e,t){return function(e){e=e.trim()+" -> salt, pewter, copper, tin, iron, lead, wolfram, quicksilver, and gold.";const t=tf.createHash("sha256");return t.update(e),t.digest("hex")}(e)===t}function of(e,t,n){const o=e.slice();return o[35]=t[n],o}function rf(t){let n;return{c(){n=E("div"),L(n,"class","planet "+t[35])},m(e,t){k(e,n,t)},p:e,d(e){e&&x(n)}}}function sf(e){let t,n,o,i,r,s,a,l,c,h=e[3].Name+"",d=e[4].ShowEtymology&&af(e);return{c(){t=E("p"),n=S("Reference Language: "),o=S(h),i=B(),r=E("button"),r.textContent="Close Reference File",s=B(),d&&d.c(),a=I(),L(r,"class","hover-highlight hover-shadow")},m(h,u){k(h,t,u),w(t,n),w(t,o),k(h,i,u),k(h,r,u),k(h,s,u),d&&d.m(h,u),k(h,a,u),l||(c=_(r,"click",e[13]),l=!0)},p(e,t){8&t[0]&&h!==(h=e[3].Name+"")&&O(o,h),e[4].ShowEtymology?d?d.p(e,t):(d=af(e),d.c(),d.m(a.parentNode,a)):d&&(d.d(1),d=null)},d(e){e&&x(t),e&&x(i),e&&x(r),e&&x(s),d&&d.d(e),e&&x(a),l=!1,c()}}}function af(t){let n,o,r;return{c(){n=E("button"),n.textContent="Import Reference Lexicon as Related Lexicon",L(n,"title","If you are using Etymology features, this allows you to import a lexicon from another language file as a relative you can which link words to and from.")},m(e,i){k(e,n,i),o||(r=[u(Bi.call(null,n,{position:"top"})),_(n,"click",t[14])],o=!0)},p:e,d(e){e&&x(n),o=!1,i(r)}}}function lf(e){let t,n,o;return{c(){t=E("input"),L(t,"type","number")},m(i,r){k(i,t,r),$(t,e[0].pronunciations),n||(o=_(t,"input",e[17]),n=!0)},p(e,n){1&n[0]&&A(t.value)!==e[0].pronunciations&&$(t,e[0].pronunciations)},d(e){e&&x(t),n=!1,o()}}}function cf(e){let t,n,o;return{c(){t=E("input"),L(t,"type","number")},m(i,r){k(i,t,r),$(t,e[0].tags),n||(o=_(t,"input",e[20]),n=!0)},p(e,n){1&n[0]&&A(t.value)!==e[0].tags&&$(t,e[0].tags)},d(e){e&&x(t),n=!1,o()}}}function hf(e){let t,n,o,r,s,a,l,c,h,d,p,f,g,m,b,v,y,T,I,P,N,R,D,z,F,H,j,U,W,q,V,G,Y,K,X,Z,J,Q,ee,te,ne,oe,ie,re,se,ae,le,ce,he,de,ue,pe,me,be,we,ve,Ce,Ee,Te,Se,Be,Ie,_e,Le,Ae,Oe,$e,Me,Pe,Ne,Re,De,ze,Fe,He,je,Ue,We,qe,Ve,Ge,Ye,Ke,Xe,Ze,Je,Qe,et,tt,nt,ot,it,rt,st,at,lt,ct,ht,dt,ut,pt,ft,gt,mt,bt,wt,vt,yt,kt,xt,Ct,Et,Tt,St,Bt,It,_t,Lt,At,Ot,$t,Mt,Pt,Nt,Rt,Dt,zt,Ft,Ht,jt,Ut,Wt,qt,Vt,Gt,Yt,Kt,Xt,Zt,Jt=e[4].SaveLocation+"",Qt=["mercury","venus","earth","mars","jupiter","saturn","uranus","neptune","pluto"],en=[];for(let t=0;t<9;t+=1)en[t]=rf(of(e,Qt,t));let tn="object"==typeof e[3]&&sf(e);Oe=new ef({});let nn=e[0].pronunciations_bool&&lf(e),on=e[0].tags_bool&&cf(e);return{c(){t=E("div"),n=E("div"),o=E("div"),r=E("p"),r.textContent="Document",s=B(),a=E("label"),l=S("Name"),h=B(),d=E("input"),p=B(),f=E("br"),g=B(),m=E("div"),b=E("div"),v=E("button"),v.textContent="Save…",y=B(),T=E("button"),T.textContent="Open…",I=B(),P=E("p"),P.textContent="Save your lexicon or open a previously saved one.",N=B(),R=E("div"),D=E("div"),z=E("div"),F=B();for(let e=0;e<9;e+=1)en[e].c();H=B(),j=E("p"),U=S(e[2]),W=B(),q=E("div"),V=E("button"),V.textContent="Export…",G=B(),Y=E("button"),Y.textContent="Import…",K=B(),X=E("p"),X.textContent="Export and import your own copies of the lexicon file.",Z=B(),J=E("div"),Q=E("label"),Q.textContent="Secondary Save Locations",ee=B(),te=E("button"),te.textContent="Choose Location…",ne=B(),oe=E("p"),ie=S("Selected location: "),re=E("u"),se=S(Jt),ae=E("u"),le=B(),ce=E("br"),he=B(),de=E("p"),de.textContent="Lexicon Header Tags",ue=B(),pe=E("div"),me=E("textarea"),be=B(),we=E("p"),we.textContent="Entries with these tags will be sorted separately at the top of the lexicon.",ve=B(),Ce=E("br"),Ee=B(),Te=E("button"),Te.textContent="Open Reference File",Se=B(),tn&&tn.c(),Be=B(),Ie=E("br"),_e=B(),Le=E("p"),Le.textContent="Evolve Language",Ae=B(),ye(Oe.$$.fragment),$e=B(),Me=E("br"),Pe=B(),Ne=E("p"),Ne.textContent="Export Lexicon",Re=B(),De=E("p"),De.textContent="HTML",ze=B(),Fe=E("div"),He=E("div"),je=E("button"),je.textContent="Lexicon Only",Ue=B(),We=E("div"),qe=E("button"),qe.textContent="Lexicon & Docs",Ve=B(),Ge=E("div"),Ye=E("button"),Ye.textContent="Documentation Only",Ke=B(),Xe=E("button"),Xe.textContent="Text File",Ze=B(),Je=E("button"),Je.textContent="CSV",Qe=B(),et=E("button"),et.textContent="JSON",tt=B(),nt=E("br"),ot=B(),it=E("p"),it.textContent="Import Lexicon from CSV",rt=B(),st=E("div"),at=E("div"),lt=E("div"),ct=E("label"),ht=S("Words Column\n                            "),dt=E("input"),ut=B(),pt=E("div"),ft=E("label"),gt=S("Pronunciations Column\n                            "),mt=E("input"),bt=B(),nn&&nn.c(),wt=B(),vt=E("div"),yt=E("label"),kt=S("Definitions Column\n                            "),xt=E("input"),Ct=B(),Et=E("div"),Tt=E("label"),St=S("Tags Column\n                            "),Bt=E("input"),It=B(),on&&on.c(),_t=B(),Lt=E("label"),Lt.textContent="First Row Is Column Labels",At=B(),Ot=E("input"),$t=B(),Mt=E("button"),Mt.textContent="Import",Pt=B(),Nt=E("br"),Rt=B(),Dt=E("p"),Dt.textContent="Import Lexicon from Plain Text",zt=B(),Ft=E("p"),Ft.textContent="Check the Help tab to read about the plain text format Lexicanter can convert into lexicon entries.",Ht=B(),jt=E("div"),Ut=E("textarea"),Wt=B(),qt=E("button"),qt.textContent="Import",Vt=B(),Gt=E("br"),Yt=E("br"),L(a,"for","file-name"),L(a,"title",c=`Your file will be saved as: ${e[4].Name}.lexc`),L(d,"type","text"),L(d,"id","file-name"),L(v,"class","hover-highlight hover-shadow"),L(T,"class","hover-highlight hover-shadow"),L(P,"class","info"),L(b,"class","column"),L(z,"class","sun"),L(D,"class","milkyWay"),L(R,"class","column"),L(V,"class","hover-highlight hover-shadow"),L(V,"title","Allows you to save your file to a custom location."),L(Y,"class","hover-highlight hover-shadow"),L(Y,"title","Makes it easier to import files from a custom location."),L(X,"class","info"),L(q,"class","column"),L(m,"class","narrow row"),L(Q,"for","save-locations"),L(te,"id","save-locations"),L(te,"class","hover-highlight hover-shadow"),L(J,"class","narrow"),L(de,"title","Here you can define Header Tags. Words in the lexicon with these tags will be sorted above the rest."),L(we,"class","info"),L(pe,"class","narrow"),L(Te,"class","hover-highlight hover-shadow"),L(Te,"title","This allows you to open a second language file in read-only mode for referencing."),L(Le,"title","This feature allows you to apply sound change rules across your lexicon, and then save the result as a new language file."),L(je,"class","hover-highlight hover-shadow"),L(He,"class","column"),L(qe,"class","hover-highlight hover-shadow"),L(We,"class","column"),L(Ye,"class","hover-highlight hover-shadow"),L(Ge,"class","column"),L(Fe,"class","row narrow"),L(Xe,"class","hover-highlight hover-shadow"),L(Je,"class","hover-highlight hover-shadow"),L(et,"class","hover-highlight hover-shadow"),L(dt,"type","number"),L(lt,"class","column"),L(mt,"type","checkbox"),L(pt,"class","column"),L(xt,"type","number"),L(vt,"class","column"),L(Bt,"type","checkbox"),L(Et,"class","column"),L(at,"class","row"),L(st,"class","narrow"),L(Lt,"for","row-one-is-labels"),L(Ot,"type","checkbox"),L(Ot,"id","row-one-is-labels"),L(Mt,"class","hover-highlight hover-shadow"),L(Ft,"class","info"),L(Ut,"class","text-left"),L(Ut,"rows","6"),L(qt,"class","hover-highlight hover-shadow"),L(jt,"class","narrow"),L(o,"class","column container"),M(o,"overflow-y","auto"),L(n,"class","row"),M(n,"height","95vh"),L(t,"class","tab-pane")},m(i,c){k(i,t,c),w(t,n),w(n,o),w(o,r),w(o,s),w(o,a),w(a,l),w(o,h),w(o,d),$(d,e[4].Name),w(o,p),w(o,f),w(o,g),w(o,m),w(m,b),w(b,v),w(b,y),w(b,T),w(b,I),w(b,P),w(m,N),w(m,R),w(R,D),w(D,z),w(D,F);for(let e=0;e<9;e+=1)en[e]&&en[e].m(D,null);w(R,H),w(R,j),w(j,U),w(m,W),w(m,q),w(q,V),w(q,G),w(q,Y),w(q,K),w(q,X),w(o,Z),w(o,J),w(J,Q),w(J,ee),w(J,te),w(J,ne),w(J,oe),w(oe,ie),w(oe,re),w(re,se),w(re,ae),w(o,le),w(o,ce),w(o,he),w(o,de),w(o,ue),w(o,pe),w(pe,me),$(me,e[4].HeaderTags),w(pe,be),w(pe,we),w(o,ve),w(o,Ce),w(o,Ee),w(o,Te),w(o,Se),tn&&tn.m(o,null),w(o,Be),w(o,Ie),w(o,_e),w(o,Le),w(o,Ae),ke(Oe,o,null),w(o,$e),w(o,Me),w(o,Pe),w(o,Ne),w(o,Re),w(o,De),w(o,ze),w(o,Fe),w(Fe,He),w(He,je),w(Fe,Ue),w(Fe,We),w(We,qe),w(Fe,Ve),w(Fe,Ge),w(Ge,Ye),w(o,Ke),w(o,Xe),w(o,Ze),w(o,Je),w(o,Qe),w(o,et),w(o,tt),w(o,nt),w(o,ot),w(o,it),w(o,rt),w(o,st),w(st,at),w(at,lt),w(lt,ct),w(ct,ht),w(ct,dt),$(dt,e[0].words),w(at,ut),w(at,pt),w(pt,ft),w(ft,gt),w(ft,mt),$(mt,e[0].pronunciations_bool),w(ft,bt),nn&&nn.m(ft,null),w(at,wt),w(at,vt),w(vt,yt),w(yt,kt),w(yt,xt),$(xt,e[0].definitions),w(at,Ct),w(at,Et),w(Et,Tt),w(Tt,St),w(Tt,Bt),$(Bt,e[0].tags_bool),w(Tt,It),on&&on.m(Tt,null),w(o,_t),w(o,Lt),w(o,At),w(o,Ot),Ot.checked=e[0].headers,w(o,$t),w(o,Mt),w(o,Pt),w(o,Nt),w(o,Rt),w(o,Dt),w(o,zt),w(o,Ft),w(o,Ht),w(o,jt),w(jt,Ut),$(Ut,e[1]),w(jt,Wt),w(jt,qt),w(o,Vt),w(o,Gt),w(o,Yt),Kt=!0,Xt||(Zt=[u(Bi.call(null,a,{position:"right"})),_(d,"input",e[11]),_(v,"click",Th),_(T,"click",e[7]),_(V,"click",Sh),u(Bi.call(null,V,{position:"left"})),_(Y,"click",e[8]),u(Bi.call(null,Y,{position:"left"})),_(te,"click",e[6]),u(Bi.call(null,de,{position:"top"})),_(me,"input",e[12]),u(Bi.call(null,Te,{position:"top"})),_(Te,"click",e[10]),u(Bi.call(null,Le,{position:"top"})),_(je,"click",Lh.lexicon),_(qe,"click",Lh.all),_(Ye,"click",Lh.docs),_(Xe,"click",Bh),_(Je,"click",Ih),_(et,"click",_h),_(dt,"input",e[15]),_(mt,"change",e[16]),_(xt,"input",e[18]),_(Bt,"change",e[19]),_(Ot,"change",e[21]),_(Mt,"click",e[22]),_(Ut,"input",e[23]),_(qt,"click",e[24])],Xt=!0)},p(e,t){(!Kt||16&t[0]&&c!==(c=`Your file will be saved as: ${e[4].Name}.lexc`))&&L(a,"title",c),16&t[0]&&d.value!==e[4].Name&&$(d,e[4].Name),(!Kt||4&t[0])&&O(U,e[2]),(!Kt||16&t[0])&&Jt!==(Jt=e[4].SaveLocation+"")&&O(se,Jt),16&t[0]&&$(me,e[4].HeaderTags),"object"==typeof e[3]?tn?tn.p(e,t):(tn=sf(e),tn.c(),tn.m(o,Be)):tn&&(tn.d(1),tn=null),1&t[0]&&A(dt.value)!==e[0].words&&$(dt,e[0].words),1&t[0]&&$(mt,e[0].pronunciations_bool),e[0].pronunciations_bool?nn?nn.p(e,t):(nn=lf(e),nn.c(),nn.m(ft,null)):nn&&(nn.d(1),nn=null),1&t[0]&&A(xt.value)!==e[0].definitions&&$(xt,e[0].definitions),1&t[0]&&$(Bt,e[0].tags_bool),e[0].tags_bool?on?on.p(e,t):(on=cf(e),on.c(),on.m(Tt,null)):on&&(on.d(1),on=null),1&t[0]&&(Ot.checked=e[0].headers),2&t[0]&&$(Ut,e[1])},i(e){Kt||(fe(Oe.$$.fragment,e),Kt=!0)},o(e){ge(Oe.$$.fragment,e),Kt=!1},d(e){e&&x(t),C(en,e),tn&&tn.d(),xe(Oe),nn&&nn.d(),on&&on.d(),Xt=!1,i(Zt)}}}function df(e,t,n){let o,i,r,s,a,l,c,u,p;h(e,ni,(e=>n(3,i=e))),h(e,Uo,(e=>n(4,r=e))),h(e,ei,(e=>n(26,s=e))),h(e,ii,(e=>n(27,a=e))),h(e,oi,(e=>n(28,l=e))),h(e,Zo,(e=>n(29,c=e))),h(e,Xo,(e=>n(30,u=e))),h(e,jo,(e=>n(31,p=e)));const f=require("fs"),g=require("path"),m=require("vex-js");Y((()=>{undefined.webkitdirectory=!0}));let b={headers:!0,words:1,pronunciations_bool:!1,pronunciations:2,definitions:3,tags_bool:!1,tags:4},w="";async function v(e){if("number"==typeof e.Version||"1.8.x"===e.Version){try{Oh[e.Version](e)}catch(t){m.dialog.alert(` \n                    The file you attempted to open was saved by an old version of Lexicanter (Version ~${e.Version}), \n                    which is no longer supported. Please contact the developer for assistance; the file is likely recoverable.\n                `)}return}let t;try{if(d(Uo,r=structuredClone(p),r),t="There was a problem loading the settings of the file.",d(Uo,r.CaseSensitive=e.CaseSensitive,r),d(Uo,r.IgnoreDiacritics=e.IgnoreDiacritics,r),d(Uo,r.HeaderTags=e.HeaderTags,r),d(Uo,r.UseLects=e.UseLects,r),d(Uo,r.ShowEtymology=e.ShowEtymology,r),d(Uo,r.ShowInflection=e.ShowInflection,r),e.hasOwnProperty("ShowPronunciation")&&d(Uo,r.ShowPronunciation=e.ShowPronunciation,r),e.hasOwnProperty("OrderByDate"))d(Uo,r.OrderByDate=e.OrderByDate,r);else for(let t in e.Lexicon)e.Lexicon[t].Timestamp=Date.now();e.hasOwnProperty("SaveLocation")&&d(Uo,r.SaveLocation=e.SaveLocation,r),e.hasOwnProperty("FileVersion")&&d(Uo,r.FileVersion=e.FileVersion,r),t="There was a problem loading the alphabet from the file.",d(Uo,r.Alphabet=e.Alphabet,r),t="There was a problem loading the file’s lexicon data.",d(Uo,r.Lexicon=e.Lexicon,r),d(Uo,r.Lects=e.Lects,r),t="There was a problem loading the file’s phrasebook data.",d(Uo,r.Phrasebook=e.Phrasebook,r),d(Xo,u=Object.keys(r.Phrasebook)[0],u),t="There was a problem loading the file’s documentation data.";let n=e.Docs;d(Uo,r.Docs=n,r),c.destroy(),gs(n),t="There was a problem loading the pronunciations rules from the file.",d(Uo,r.Pronunciations=e.Pronunciations,r),r.Lects.forEach(yi),t="There was a problem loading the orthography data from the file.",e.hasOwnProperty("Orthographies")&&(d(Uo,r.Orthographies=e.Orthographies,r),d(Uo,r.ShowOrthography=e.ShowOrthography,r)),t="There was a problem loading the phonotactics rules from the file.",d(Uo,r.Phonotactics=e.Phonotactics,r),t="There was a problem loading the inflection rules from the file.";let o=e.Inflections;if(e.Inflections.categories||(o.categories=""),d(Uo,r.Inflections=e.Inflections,r),t="There was a problem loading the etymology data from the file.",d(Uo,r.Etymologies=e.Etymologies,r),t="There was a problem loading the advanced phonotactics.",e.hasOwnProperty("AdvancedPhonotactics")&&(d(Uo,r.UseAdvancedPhonotactics=e.UseAdvancedPhonotactics,r),e.AdvancedPhonotactics.hasOwnProperty("Constructs")||(e.AdvancedPhonotactics.Constructs=[{enabled:!0,structures:""}],e.AdvancedPhonotactics.Illegals=[]),d(Uo,r.AdvancedPhonotactics=e.AdvancedPhonotactics,r)),t="There was a problem loading the file’s theme.",e.hasOwnProperty("FileTheme")&&d(Uo,r.FileTheme=e.FileTheme,r),t="There was a problem syncing with the database.",e.hasOwnProperty("UploadToDatabase")&&(d(Uo,r.UploadToDatabase=e.UploadToDatabase,r),r.UploadToDatabase)){if(""===l||""===a)return void m.dialog.alert("The file you opened has database syncing turned on, but your user ID or account key are blank.");if(nf(l,a)){const t=await Ph(e.Name);!1!==t?void 0===t.FileVersion?m.dialog.confirm({message:"The file in the database has no FileVersion number. Would you like to overwrite it with your local version?",yesText:"Upload Local Version",callback:e=>{e&&(Th(),m.dialog.alert("Saved and uploaded local file."))}}):parseInt(r.FileVersion,36)<parseInt(t.FileVersion,36)&&m.dialog.confirm({message:`Detected a newer version of the file in the database (local: ${r.FileVersion} | online: ${t.FileVersion}). Would you like to download the changes?`,yesText:"Download Changes",callback:(e,n=t)=>{e?(d(Uo,r=n,r),gs(n.Docs),Th(),m.dialog.alert("Downloaded changes and saved.")):m.dialog.alert("Did not download changes. If you change your mind, click the Sync From Database button in the Settings tab. This will overwrite local changes.")}}):m.dialog.alert("No file of this name was found in your ownership in the database.")}else m.dialog.alert("One or both of your User ID and Key is invalid.")}}catch(n){m.dialog.alert(t+" Please contact the developer for assistance."),li(t,n),di.logObj(e,"File Contents")}finally{d(ei,s++,s),ci(`Opened and read the contents of '${r.Name}'.'`)}}function y(e){let t=w.split("\n\n");for(let e of t){let t=e.split("\n"),n=[],o=[],i=t[0].trim();t.shift();let s="";t[0].match(/^[0-9]+\./g)||(s=t[0].trim(),t.shift(),s.match(/^[\/\[].+[\/\]]$/)&&(s=s.slice(1,s.length-1)));for(let e of t)e.match(/^[0-9]+\./g)&&(n.push(e),t[t.indexOf(e)+1].startsWith("Tags: ")?o.push(t[t.indexOf(e)+1].slice(6).split(/\s+/g)):o.push([]));let a=[];for(let e of n)a.push({definition:e.slice(e.indexOf(".")+1).trim(),tags:o[n.indexOf(e)],lects:r.Lects});let l={};l[r.Lects[0]]=s?{ipa:s,irregular:!0}:{ipa:vi(i,r.Lects[0]),irregular:!1};let c={pronunciations:l,Senses:a,Timestamp:Date.now()};i in r.Lexicon?m.dialog.alert(`The word ${i} is already in the lexicon.`):d(Uo,r.Lexicon[i]=c,r)}n(1,w="")}return e.$$.update=()=>{e.$$.dirty[0],e.$$.dirty[0]},n(2,o=""),[b,w,o,i,r,m,function(){yh({properties:["openDirectory"]},(e=>{void 0!==e&&d(Uo,r.SaveLocation=e[0],r)}))},async function(){let e,t=t=>{yh({title:"Open Lexicon",defaultPath:`${t}${g.sep}Lexicons${g.sep}`,properties:["openFile"]},(t=>{if(void 0===t)return document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(2,o="No file selected."),void window.setTimeout((()=>{n(2,o="")}),5e3);f.readFile(t[0],"utf8",((i,s)=>{if(i)return console.log(i),window.alert("There was an issue loading your file. Please contact the developer."),li("Attempted to open a file.",i),document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(2,o="Couldn’t open file."),void window.setTimeout((()=>{n(2,o="")}),5e3);e=JSON.parse(s),v(e),d(Uo,r.Name=g.basename(t[0],".lexc"),r),document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(2,o="Done!"),window.setTimeout((()=>{n(2,o="")}),5e3)}))}))};document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="running"})),n(2,o="Loading..."),await vh((e=>{f.existsSync(`${e}${g.sep}Lexicons${g.sep}`)?t(e):f.mkdir(`${e}${g.sep}Lexicons${g.sep}`,(()=>{ci(`Created the 'Lexicons' folder in the user data folder at '${e}'.`),t(e)}))}))},async function(){document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="running"})),n(2,o="Loading...");let[e]=await window.showOpenFilePicker();await e.requestPermission({mode:"read"});let t=await e.getFile();if(!t.name.includes(".lexc"))return window.alert("The selected file was not a .lexc file."),document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(2,o="Incorrect file type."),void window.setTimeout((()=>{n(2,o="")}),5e3);let i=await t.text();v(JSON.parse(i)),d(Uo,r.Name=t.name.split(".")[0],r),document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(2,o="Done!"),window.setTimeout((()=>{n(2,o="")}),5e3)},y,async function(){let e;await vh((t=>{(t=>{yh({title:"Open Lexicon",defaultPath:`${t}${g.sep}Lexicons${g.sep}`,properties:["openFile"]},(t=>{if(void 0===t)return document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(2,o="No file selected."),void window.setTimeout((()=>{n(2,o="")}),5e3);f.readFile(t[0],"utf8",((t,s)=>t?(console.log(t),m.dialog.alert("There was an issue loading your file. Please contact the developer."),li("Attempted to open a file.",t),document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(2,o="Couldn’t open file."),void window.setTimeout((()=>{n(2,o="")}),5e3)):(e=JSON.parse(s),"2"!==String(e.Version).split(".")[0]?(m.dialog.alert(`The file you are attempting to open as a reference was last saved in v${e.Version}                                 and is not compatible with the current version. Contact the developer for assistance.`),document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(2,o="Incompatible file."),void window.setTimeout((()=>{n(2,o="")}),5e3)):e.Name===r.Name?(m.dialog.alert("You cannot open a reference to the same language."),document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(2,o="Same language."),void window.setTimeout((()=>{n(2,o="")}),5e3)):(d(ni,i=!1,i),void window.setTimeout((()=>{d(ni,i=e,i)}),100)))))}))})(t)}))},function(){r.Name=this.value,Uo.set(r)},function(){r.HeaderTags=this.value,Uo.set(r)},()=>d(ni,i=!1,i),()=>{if("object"==typeof i){if(i.Name in r.Relatives)return void m.dialog.alert(`There is already a relative lexicon with the name ${i.Name}.`);d(Uo,r.Relatives[i.Name]=i.Lexicon,r),m.dialog.alert(`Successfully imported ${i.Name} as a relative lexicon.`)}},function(){b.words=A(this.value),n(0,b)},function(){b.pronunciations_bool=this.value,n(0,b)},function(){b.pronunciations=A(this.value),n(0,b)},function(){b.definitions=A(this.value),n(0,b)},function(){b.tags_bool=this.value,n(0,b)},function(){b.tags=A(this.value),n(0,b)},function(){b.headers=this.checked,n(0,b)},()=>Mh(b.headers,b.words,b.definitions,!!b.pronunciations_bool&&b.pronunciations,!!b.tags_bool&&b.tags),function(){w=this.value,n(1,w)},()=>{y(),n(1,w="")}]}class uf extends Te{constructor(e){super(),Ee(this,e,df,hf,s,{},null,[-1,-1])}}function pf(e,t,n){const o=e.slice();return o[52]=t[n],o[53]=t,o[54]=n,o}function ff(e,t,n){const o=e.slice();return o[55]=t[n],o}function gf(e,t,n){const o=e.slice();return o[58]=t[n],o[60]=n,o}function mf(e){let t,n,o,i,r,s,a,l,c,h,d,u;return{c(){t=S("Local File Version: "),n=S(e[3]),o=B(),i=E("br"),r=S("\n                        Online File Version: "),s=S(e[2]),a=B(),l=E("br"),c=B(),h=E("button"),h.textContent="Refresh",L(h,"class","hover-highlight hover-shadow")},m(p,f){k(p,t,f),k(p,n,f),k(p,o,f),k(p,i,f),k(p,r,f),k(p,s,f),k(p,a,f),k(p,l,f),k(p,c,f),k(p,h,f),d||(u=_(h,"click",e[14]),d=!0)},p(e,t){8&t[0]&&O(n,e[3]),4&t[0]&&O(s,e[2])},d(e){e&&x(t),e&&x(n),e&&x(o),e&&x(i),e&&x(r),e&&x(s),e&&x(a),e&&x(l),e&&x(c),e&&x(h),d=!1,u()}}}function bf(t){let n,o,r,s,a;return{c(){n=E("button"),n.textContent="Delete Tag",o=B(),r=E("button"),r.textContent="Edit Tag",L(n,"class","hover-highlight hover-shadow"),L(r,"class","hover-highlight hover-shadow")},m(e,i){k(e,n,i),k(e,o,i),k(e,r,i),s||(a=[_(n,"click",t[33]),_(r,"click",t[34])],s=!0)},p:e,d(e){e&&x(n),e&&x(o),e&&x(r),s=!1,i(a)}}}function wf(e){let t,n,o,i,r=e[0].Lects,s=[];for(let t=0;t<r.length;t+=1)s[t]=vf(gf(e,r,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=B(),n=E("button"),n.textContent="+ Lect",L(n,"class","hover-highlight hover-shadow")},m(r,a){for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(r,a);k(r,t,a),k(r,n,a),o||(i=_(n,"click",e[39]),o=!0)},p(e,n){if(3153921&n[0]){let o;for(r=e[0].Lects,o=0;o<r.length;o+=1){const i=gf(e,r,o);s[o]?s[o].p(i,n):(s[o]=vf(i),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(e){C(s,e),e&&x(t),e&&x(n),o=!1,i()}}}function vf(e){let t,n,o,r,s,a,l,c,h,d,u,p=e[58]+"";function f(){return e[36](e[58],e[60])}function g(){return e[37](e[58],e[60])}function m(){return e[38](e[58])}return{c(){t=E("div"),n=E("p"),o=S(p),r=B(),s=E("button"),s.textContent="⌫",a=B(),l=E("button"),l.textContent="✎",c=B(),h=E("button"),h.textContent="◎",M(n,"display","inline-block"),L(n,"id",`${e[60]}`),L(s,"class","hover-highlight hover-shadow"),M(s,"display","inline-block"),L(l,"class","hover-highlight hover-shadow"),M(l,"display","inline-block"),L(h,"class","hover-highlight hover-shadow"),M(h,"display","inline-block"),L(t,"class","narrow")},m(e,i){k(e,t,i),w(t,n),w(n,o),w(t,r),w(t,s),w(t,a),w(t,l),w(t,c),w(t,h),d||(u=[_(s,"click",f),_(l,"click",g),_(h,"click",m)],d=!0)},p(t,n){e=t,1&n[0]&&p!==(p=e[58]+"")&&O(o,p)},d(e){e&&x(t),d=!1,i(u)}}}function yf(e){let t,n,o,i,r,s=Object.keys(e[0].Relatives),a=[];for(let t=0;t<s.length;t+=1)a[t]=kf(ff(e,s,t));return{c(){t=E("button"),t.textContent="Import Related Lexicon",n=B();for(let e=0;e<a.length;e+=1)a[e].c();o=I(),L(t,"class","hover-highlight hover-shadow")},m(s,l){k(s,t,l),k(s,n,l);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(s,l);k(s,o,l),i||(r=_(t,"click",e[42]),i=!0)},p(e,t){if(8193&t[0]){let n;for(s=Object.keys(e[0].Relatives),n=0;n<s.length;n+=1){const i=ff(e,s,n);a[n]?a[n].p(i,t):(a[n]=kf(i),a[n].c(),a[n].m(o.parentNode,o))}for(;n<a.length;n+=1)a[n].d(1);a.length=s.length}},d(e){e&&x(t),e&&x(n),C(a,e),e&&x(o),i=!1,r()}}}function kf(e){let t,n,o,i,r,s,a,l,c=e[55]+"";function h(){return e[43](e[55])}return{c(){t=E("div"),n=E("p"),o=S(c),i=B(),r=E("button"),r.textContent="⌫",s=B(),M(n,"display","inline-block"),L(r,"class","hover-highlight hover-shadow"),M(r,"display","inline-block"),L(t,"class","narrow")},m(e,c){k(e,t,c),w(t,n),w(n,o),w(t,i),w(t,r),w(t,s),a||(l=_(r,"click",h),a=!0)},p(t,n){e=t,1&n[0]&&c!==(c=e[55]+"")&&O(o,c)},d(e){e&&x(t),a=!1,l()}}}function xf(e){let t,n,o=e[0].Orthographies,i=[];for(let t=0;t<o.length;t+=1)i[t]=Cf(pf(e,o,t));return{c(){t=E("label"),n=S("Display Orthographies\n                        ");for(let e=0;e<i.length;e+=1)i[e].c()},m(e,o){k(e,t,o),w(t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,n){if(1&n[0]){let r;for(o=e[0].Orthographies,r=0;r<o.length;r+=1){const s=pf(e,o,r);i[r]?i[r].p(s,n):(i[r]=Cf(s),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}},d(e){e&&x(t),C(i,e)}}}function Cf(e){let t,n,o,i,r,s,a,l,c,h,d=e[52].name+"";function u(){e[46].call(o,e[53],e[54])}return{c(){t=E("div"),n=E("div"),o=E("input"),i=B(),r=E("div"),s=E("p"),a=S(d),l=B(),L(o,"type","checkbox"),L(n,"class","column"),M(n,"align","right"),L(r,"class","column text-left"),L(t,"class","row narrow")},m(d,p){k(d,t,p),w(t,n),w(n,o),o.checked=e[52].display,w(t,i),w(t,r),w(r,s),w(s,a),w(t,l),c||(h=_(o,"change",u),c=!0)},p(t,n){e=t,1&n[0]&&(o.checked=e[52].display),1&n[0]&&d!==(d=e[52].name+"")&&O(a,d)},d(e){e&&x(t),c=!1,h()}}}function Ef(e){let t,n,o,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,C,T,I,A,N,D,z,F,H,j,U,W,q,V,G,Y,K,X,Z,J,Q,ee,te,oe,ie,re,se,ae,le,ce,he,de,ue,pe,me,be,we,ve,Ce,Ee,Te,Se,Be,Ie,_e,Le,Ae,Oe,$e,Me,Pe,Ne,Re,De,ze,Fe,He,je,Ue,We,qe,Ve,Ge,Ye,Ke,Xe,Ze,Je,Qe,et,tt,nt,ot,it,rt,st,at,lt,ct,ht,dt,ut,pt,ft,gt,mt,bt,wt,vt,yt,kt,xt,Ct,Et,Tt,St,Bt,It,_t,Lt,At,Ot,$t,Mt,Pt,Nt,Rt,Dt,zt,Ft,Ht,jt,Ut,Wt,qt,Vt,Gt,Yt,Kt,Xt,Zt,Jt,Qt,en,tn,nn,on,rn,sn,an,ln,cn=e[0].UploadToDatabase?"On":"Off",hn=e[0].UploadToDatabase&&nf(e[10],e[9]),dn=hn&&mf(e);pt=new Td({}),pt.$on("select",e[32]);let un=!!e[1]&&bf(e),pn=e[0].UseLects&&wf(e),fn=e[0].ShowEtymology&&yf(e),gn=e[0].ShowOrthography&&xf(e);return{c(){t=E("div"),n=E("div"),o=E("div"),r=E("br"),s=E("br"),a=B(),l=E("p"),l.textContent="Appearance Settings",c=B(),h=E("br"),d=B(),u=E("label"),p=S("Color Theme\n                "),f=E("select"),g=E("optgroup"),m=E("option"),m.textContent="☾ Dark",b=E("option"),b.textContent="☀ Light",v=E("optgroup"),y=E("option"),y.textContent="☾ Marine",C=E("option"),C.textContent="☾ Glade",T=E("option"),T.textContent="☾ Pomegranate",I=E("option"),I.textContent="☾ Magnolia",A=E("option"),A.textContent="☀ Juniper",N=E("option"),N.textContent="☀ Leatherbound",D=E("option"),D.textContent="☀ Wisteria",z=E("optgroup"),F=E("option"),F.textContent="☾ Purple Maar",H=E("option"),H.textContent="☾ Terminal",j=E("option"),j.textContent="☾ Midnight",U=E("option"),U.textContent="☾ Crabapple",W=E("option"),W.textContent="☀ Bone",q=E("optgroup"),V=E("option"),V.textContent="☀ Ēostre 2023",G=E("option"),G.textContent="☾ All Hallow's Eve 2023",Y=B(),K=E("br"),X=B(),Z=E("button"),Z.textContent="Set Current Theme as Default for This File",J=B(),Q=E("button"),Q.textContent="Clear File Theme",ee=B(),te=E("br"),oe=B(),ie=E("button"),ie.textContent="Load Custom Theme…",re=B(),se=E("br"),ae=E("hr"),le=E("br"),ce=B(),he=E("p"),he.textContent="Save Settings",de=B(),ue=E("br"),pe=B(),me=E("label"),be=S("Auto-Save\n                "),we=E("input"),ve=B(),Ce=E("div"),Ee=E("label"),Te=S("Database Uploading\n                    "),Se=E("p"),Se.innerHTML="If you wish, your files can be saved to an online database so that you can sync your files across multiple \n                        devices and the discord bot. To get your User ID and Key, please go to the Saturn&#39;s Sojourn discord server and use \n                        the command <code>/account</code>.",Be=B(),Ie=E("span"),_e=S("Uploading is "),Le=S(cn),Ae=S(" for this file.\n                        "),Oe=E("input"),$e=B(),dn&&dn.c(),Me=B(),Pe=E("span"),Ne=S("User ID: "),Re=E("input"),De=B(),ze=E("br"),Fe=B(),He=E("span"),je=S("Key: "),Ue=E("input"),We=B(),qe=E("button"),qe.textContent="Authenticate",Ve=B(),Ge=E("p"),Ge.textContent="Your ID and Key are saved to the app's internal settings, not to your file, but turning on uploading is saved per-file.",Ye=B(),Ke=E("br"),Xe=B(),Ze=E("button"),Ze.textContent="Sync From Database",Je=B(),Qe=E("p"),Qe.textContent="This will overwrite the current file with the latest version of the file with the same name and User ID in the database.",et=B(),tt=E("br"),nt=E("hr"),ot=E("br"),it=B(),rt=E("p"),rt.textContent="Lexicon Settings",st=B(),at=E("br"),lt=B(),ct=E("label"),ht=S("Manage Tags"),dt=E("br"),ut=B(),ye(pt.$$.fragment),ft=B(),gt=E("p"),mt=S("Selected: "),bt=S(e[1]),wt=B(),un&&un.c(),vt=B(),yt=E("br"),kt=E("hr"),xt=E("br"),Ct=B(),Et=E("p"),Et.textContent="Advanced Settings",Tt=B(),St=E("br"),Bt=B(),It=E("label"),_t=S("Show Multi-Lect Features\n                "),Lt=E("input"),At=B(),pn&&pn.c(),Ot=B(),$t=E("label"),Mt=S("Show Pronunciations\n                "),Pt=E("input"),Nt=B(),Rt=E("br"),Dt=E("br"),zt=B(),Ft=E("label"),Ht=S("Show Etymology Features\n                "),jt=E("input"),Ut=B(),fn&&fn.c(),Wt=B(),qt=E("br"),Vt=E("br"),Gt=B(),Yt=E("label"),Kt=S("Show Automatic Inflection Features\n                "),Xt=E("input"),Zt=B(),Jt=E("br"),Qt=E("br"),en=B(),tn=E("label"),nn=S("Show Alternate Orthography Features\n                "),on=E("input"),rn=B(),gn&&gn.c(),m.__value="styles/dark.css",m.value=m.__value,b.__value="styles/light.css",b.value=b.__value,L(g,"label","Simple Themes"),y.__value="styles/marine.css",y.value=y.__value,C.__value="styles/glade.css",C.value=C.__value,T.__value="styles/pomegranate.css",T.value=T.__value,I.__value="styles/magnolia.css",I.value=I.__value,A.__value="styles/juniper.css",A.value=A.__value,N.__value="styles/leatherbound.css",N.value=N.__value,D.__value="styles/wisteria.css",D.value=D.__value,L(v,"label","The Saturnine Collection"),F.__value="styles/purple_maar.css",F.value=F.__value,H.__value="styles/terminal_green.css",H.value=H.__value,j.__value="styles/midnight.css",j.value=j.__value,U.__value="styles/crabapple.css",U.value=U.__value,W.__value="styles/bone.css",W.value=W.__value,L(z,"label","The Maarz Collection"),V.__value="styles/eostre2023.css",V.value=V.__value,G.__value="styles/hallowseve2023.css",G.value=G.__value,L(q,"label","The Holiday Collection"),L(f,"name","theme-select"),L(f,"id","theme-select"),void 0===e[11]&&ne((()=>e[25].call(f))),L(Z,"class","hover-highlight hover-shadow"),L(Q,"class","hover-highlight hover-shadow"),L(ie,"class","hover-highlight hover-shadow"),L(we,"type","checkbox"),L(Se,"class","info"),L(Oe,"type","checkbox"),L(Re,"type","text"),Re.disabled=e[6],R(Re,"pronunciation",e[6]),L(Ue,"type","text"),Ue.disabled=e[6],R(Ue,"pronunciation",e[6]),L(Ge,"class","info"),L(Ze,"class","hover-highlight hover-shadow"),L(Qe,"class","info"),L(Ce,"class","narrow"),L(Lt,"type","checkbox"),L(Pt,"type","checkbox"),L(jt,"type","checkbox"),L(Xt,"type","checkbox"),L(on,"type","checkbox"),L(o,"class","container column scrolled"),M(o,"height","90vh"),L(n,"class","row"),M(n,"height","95vh"),L(t,"class","tab-pane")},m(i,x){k(i,t,x),w(t,n),w(n,o),w(o,r),w(o,s),w(o,a),w(o,l),w(o,c),w(o,h),w(o,d),w(o,u),w(u,p),w(u,f),w(f,g),w(g,m),w(g,b),w(f,v),w(v,y),w(v,C),w(v,T),w(v,I),w(v,A),w(v,N),w(v,D),w(f,z),w(z,F),w(z,H),w(z,j),w(z,U),w(z,W),w(f,q),w(q,V),w(q,G),P(f,e[11],!0),w(o,Y),w(o,K),w(o,X),w(o,Z),w(o,J),w(o,Q),w(o,ee),w(o,te),w(o,oe),w(o,ie),w(o,re),w(o,se),w(o,ae),w(o,le),w(o,ce),w(o,he),w(o,de),w(o,ue),w(o,pe),w(o,me),w(me,be),w(me,we),we.checked=e[8],w(o,ve),w(o,Ce),w(Ce,Ee),w(Ee,Te),w(Ee,Se),w(Ee,Be),w(Ee,Ie),w(Ie,_e),w(Ie,Le),w(Ie,Ae),w(Ie,Oe),Oe.checked=e[0].UploadToDatabase,w(Ee,$e),dn&&dn.m(Ee,null),w(Ee,Me),w(Ee,Pe),w(Pe,Ne),w(Pe,Re),$(Re,e[4]),w(Ee,De),w(Ee,ze),w(Ee,Fe),w(Ee,He),w(He,je),w(He,Ue),$(Ue,e[5]),w(Ee,We),w(Ee,qe),w(Ee,Ve),w(Ee,Ge),w(Ee,Ye),w(Ee,Ke),w(Ee,Xe),w(Ee,Ze),w(Ee,Je),w(Ee,Qe),w(o,et),w(o,tt),w(o,nt),w(o,ot),w(o,it),w(o,rt),w(o,st),w(o,at),w(o,lt),w(o,ct),w(ct,ht),w(ct,dt),w(ct,ut),ke(pt,ct,null),w(ct,ft),w(ct,gt),w(gt,mt),w(gt,bt),w(ct,wt),un&&un.m(ct,null),w(o,vt),w(o,yt),w(o,kt),w(o,xt),w(o,Ct),w(o,Et),w(o,Tt),w(o,St),w(o,Bt),w(o,It),w(It,_t),w(It,Lt),Lt.checked=e[0].UseLects,w(It,At),pn&&pn.m(It,null),w(o,Ot),w(o,$t),w($t,Mt),w($t,Pt),Pt.checked=e[0].ShowPronunciation,w(o,Nt),w(o,Rt),w(o,Dt),w(o,zt),w(o,Ft),w(Ft,Ht),w(Ft,jt),jt.checked=e[0].ShowEtymology,w(Ft,Ut),fn&&fn.m(Ft,null),w(o,Wt),w(o,qt),w(o,Vt),w(o,Gt),w(o,Yt),w(Yt,Kt),w(Yt,Xt),Xt.checked=e[0].ShowInflection,w(o,Zt),w(o,Jt),w(o,Qt),w(o,en),w(o,tn),w(tn,nn),w(tn,on),on.checked=e[0].ShowOrthography,w(tn,rn),gn&&gn.m(tn,null),sn=!0,an||(ln=[_(f,"change",e[25]),_(f,"change",e[17]),_(Z,"click",e[26]),_(Q,"click",e[27]),_(ie,"click",e[18]),_(we,"change",e[28]),_(we,"change",e[19]),_(Oe,"change",e[29]),_(Re,"input",e[30]),_(Ue,"input",e[31]),_(qe,"click",e[15]),_(Ze,"click",e[16]),_(Lt,"change",e[35]),_(Lt,"change",e[22]),_(Pt,"change",e[40]),_(jt,"change",e[41]),_(Xt,"change",e[44]),_(on,"change",e[45])],an=!0)},p(e,t){2048&t[0]&&P(f,e[11]),256&t[0]&&(we.checked=e[8]),(!sn||1&t[0])&&cn!==(cn=e[0].UploadToDatabase?"On":"Off")&&O(Le,cn),1&t[0]&&(Oe.checked=e[0].UploadToDatabase),1537&t[0]&&(hn=e[0].UploadToDatabase&&nf(e[10],e[9])),hn?dn?dn.p(e,t):(dn=mf(e),dn.c(),dn.m(Ee,Me)):dn&&(dn.d(1),dn=null),(!sn||64&t[0])&&(Re.disabled=e[6]),16&t[0]&&Re.value!==e[4]&&$(Re,e[4]),(!sn||64&t[0])&&R(Re,"pronunciation",e[6]),(!sn||64&t[0])&&(Ue.disabled=e[6]),32&t[0]&&Ue.value!==e[5]&&$(Ue,e[5]),(!sn||64&t[0])&&R(Ue,"pronunciation",e[6]),(!sn||2&t[0])&&O(bt,e[1]),e[1]?un?un.p(e,t):(un=bf(e),un.c(),un.m(ct,null)):un&&(un.d(1),un=null),1&t[0]&&(Lt.checked=e[0].UseLects),e[0].UseLects?pn?pn.p(e,t):(pn=wf(e),pn.c(),pn.m(It,null)):pn&&(pn.d(1),pn=null),1&t[0]&&(Pt.checked=e[0].ShowPronunciation),1&t[0]&&(jt.checked=e[0].ShowEtymology),e[0].ShowEtymology?fn?fn.p(e,t):(fn=yf(e),fn.c(),fn.m(Ft,null)):fn&&(fn.d(1),fn=null),1&t[0]&&(Xt.checked=e[0].ShowInflection),1&t[0]&&(on.checked=e[0].ShowOrthography),e[0].ShowOrthography?gn?gn.p(e,t):(gn=xf(e),gn.c(),gn.m(tn,null)):gn&&(gn.d(1),gn=null)},i(e){sn||(fe(pt.$$.fragment,e),sn=!0)},o(e){ge(pt.$$.fragment,e),sn=!1},d(e){e&&x(t),dn&&dn.d(),xe(pt),un&&un.d(),pn&&pn.d(),fn&&fn.d(),gn&&gn.d(),an=!1,i(ln)}}}function Tf(e,t,n){let o,i,r,s,a,l,c,u,p,f;h(e,Uo,(e=>n(0,i=e))),h(e,Vo,(e=>n(7,r=e))),h(e,Qo,(e=>n(8,s=e))),h(e,ii,(e=>n(9,a=e))),h(e,oi,(e=>n(10,l=e))),h(e,Jo,(e=>n(11,c=e))),h(e,Zo,(e=>n(47,u=e))),h(e,ei,(e=>n(24,p=e))),h(e,qo,(e=>n(12,f=e)));var g=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n};const m=require("fs"),b=require("path"),w=require("vex-js");let v="",y="",k=i.FileVersion;async function x(){n(2,y=await async function(){if(nf(l,a)){let e=await Ph();return e?e.FileVersion:null}}()),n(3,k=i.FileVersion)}vh((e=>{let t={autosave:!0,theme:"styles/dark.css",dbid:"",dbkey:""};m.existsSync(e+b.sep+"settings.json")?(t=JSON.parse(m.readFileSync(e+b.sep+"settings.json","utf8")),d(Qo,s=t.autosave,s),d(Jo,c=t.theme,c),d(oi,l=t.dbid,l),n(4,C=t.dbid),d(ii,a=t.dbkey,a),n(5,E=t.dbkey)):(m.existsSync(e+b.sep+"autosave_pref.txt")?(t.autosave="true"===m.readFileSync(e+b.sep+"autosave_pref.txt","utf8"),d(Qo,s="true"===m.readFileSync(e+b.sep+"autosave_pref.txt","utf8"),s),m.unlinkSync(e+b.sep+"autosave_pref.txt")):t.autosave=!0,m.writeFileSync(e+b.sep+"settings.json","styles/dark.css"),m.existsSync(e+b.sep+"theme.txt")?(t.theme=m.readFileSync(e+b.sep+"theme.txt","utf8").readFileSync(e+b.sep+"theme.txt","utf8").toString(),d(Jo,c=t.theme,c),m.unlinkSync(e+b.sep+"theme.txt")):t.theme="styles/dark.css",d(oi,l="",l),d(ii,a="",a),m.writeFileSync(e+b.sep+"settings.json",JSON.stringify(t,null,4)))}));let C="",E="";function T(e,t,n){""!==t?t!==e?i.Lects.includes(t)?w.dialog.alert("A lect with that name already exists."):(d(Uo,i.Lects[n]=t,i),d(Uo,i.Lects=[...i.Lects],i),Object.keys(i.Lexicon).forEach((n=>{i.Lexicon[n].pronunciations.hasOwnProperty(e)&&(d(Uo,i.Lexicon[n].pronunciations[t]=i.Lexicon[n].pronunciations[e],i),delete i.Lexicon[n].pronunciations[e]),i.Lexicon[n].Senses.forEach((n=>{n.lects.includes(e)&&(n.lects.splice(n.lects.indexOf(e),1),n.lects.push(t))}))})),Object.keys(i.Phrasebook).forEach((n=>{Object.keys(i.Phrasebook[n]).forEach(((o,r)=>{const s=i.Phrasebook[n][o];s.pronunciations.hasOwnProperty(e)&&(s.pronunciations[t]=s.pronunciations[e],delete s.pronunciations[e]),s.lects.includes(e)&&(i.Phrasebook[n][o].lects.splice(s.lects.indexOf(e),1),i.Phrasebook[n][o].lects.push(t))}))})),i.Orthographies.forEach((n=>{n.lect===e&&(n.lect=t)})),d(Uo,i.Pronunciations[t]=i.Pronunciations[e],i),r.hasOwnProperty(e)&&(d(Vo,r[t]=r[e],r),delete r[e]),delete i.Pronunciations[e]):w.dialog.alert("The lect name is unchanged."):w.dialog.alert("The lect name cannot be blank.")}function S(e,t){i.Lects.splice(t,1),d(Uo,i.Lects=[...i.Lects],i),delete i.Pronunciations[e],delete r[e],Object.keys(i.Lexicon).forEach((t=>{i.Lexicon[t].pronunciations[e]&&delete i.Lexicon[t].pronunciations[e],i.Lexicon[t].Senses.forEach(((n,o)=>{n.lects.includes(e)&&n.lects.splice(n.lects.indexOf(e),1),n.lects||i.Lexicon[t].Senses.splice(o,1)}))})),Object.keys(i.Phrasebook).forEach((t=>{Object.keys(i.Phrasebook[t]).forEach(((n,o)=>{const r=i.Phrasebook[t][n];if(r.pronunciations[e]&&delete r.pronunciations[e],r.lects.includes(e)&&i.Phrasebook[t][n].lects.splice(r.lects.indexOf(e),1),!r.lects){const e=i.Phrasebook[t],o=n;e[o];const r=g(e,["symbol"==typeof o?o:o+""]);d(Uo,i.Phrasebook[t]=r,i)}}))})),i.Orthographies.forEach((t=>{t.lect===e&&(t.lect=i.Lects[0])})),d(Uo,i.Lexicon=Object.assign({},i.Lexicon),i)}function B(){let e;const t=t=>{yh({title:"Import Related Lexicon",defaultPath:`${t}${b.sep}Lexicons${b.sep}`,properties:["openFile"]},(t=>{t&&m.readFile(t[0],"utf8",((t,n)=>{t&&(console.log(t),w.dialog.alert("There was an issue loading your file. Please contact the developer."));try{if(e=JSON.parse(n),!String(e.Version).match(/^2\.[0-9]*\.[0-9]*$/))return void w.dialog.alert(`\n                                    This file was saved with an old version of the app (~${e.Version})\n                                    and is not compatible with the current version of Lexicanter. Please contact\n                                    the developer; the file may be recoverable.\n                                `);const t=t=>{for(const n in e.Lexicon)i.Lexicon[n]||i.Etymologies[n]&&!t||d(Uo,i.Etymologies[n]={descendants:[],source:e.Name},i)};e.Name in i.Relatives?w.dialog.confirm({message:`A relative lexicon with the name "${e.Name}" already exists. Would you like to overwrite it?`,callback:n=>{n&&(d(Uo,i.Relatives[e.Name]=e.Lexicon,i),t(!0))}}):(d(Uo,i.Relatives=Object.assign(Object.assign({},i.Relatives),{[e.Name]:e.Lexicon}),i),t(!1))}catch(t){return void w.dialog.alert("There was an issue loading the file. Please contact the developer.")}}))}))};vh((e=>{m.existsSync(`${e}${b.sep}Lexicons${b.sep}`)?t(e):m.mkdir(`${e}${b.sep}Lexicons${b.sep}`,(()=>{ci(`Created the 'Lexicons' folder in the user data folder at '${e}'.`),t(e)}))}))}return e.$$.update=()=>{16777216&e.$$.dirty[0]&&x(),1&e.$$.dirty[0]&&n(6,o=!i.UploadToDatabase)},[i,v,y,k,C,E,o,r,s,a,l,c,f,w,x,function(){""!==C&&""!==E?nf(C,E)?(d(oi,l=C,l),d(ii,a=E,a),vh((e=>{let t={autosave:s,theme:c,dbid:l,dbkey:a};m.writeFileSync(e+b.sep+"settings.json",JSON.stringify(t,null,4))})),w.dialog.alert("Successfully verified your User ID and Key.")):w.dialog.alert("One or both of the User ID and Key you entered is invalid."):w.dialog.alert("Please enter both your User ID and Key.")},async function(){if(""!==l&&""!==a)if(nf(l,a)){const e=await Ph();!1!==e?(d(Uo,i=e,i),u.destroy(),gs(e.Docs),w.dialog.alert("Successfully synced from database.")):w.dialog.alert("No file of this name was found in your ownership in the database.")}else w.dialog.alert("One or both of your User ID and Key is invalid.");else w.dialog.alert("Please enter both your User ID and Key.")},function(){vh((e=>{let t={autosave:s,theme:c,dbid:l,dbkey:a};m.writeFileSync(e+b.sep+"settings.json",JSON.stringify(t,null,4))}))},async function(){let[e]=await window.showOpenFilePicker();await e.requestPermission({mode:"read"});let t=await e.getFile();if(!t.name.includes(".css"))return void w.dialog.alert("The selected file was not a .css file.");let n,o=await t.text();await vh((e=>{let i=e+b.sep+"user_themes"+b.sep;m.existsSync(i)||m.mkdirSync(i),n=e+b.sep+"user_themes"+b.sep+t.name,m.writeFile(n,o,"utf8",(e=>{if(e)throw e;d(Jo,c=n,c)})),m.writeFile(e+b.sep+"theme.txt",n,(e=>{if(e)throw e}))}))},function(){let e={autosave:s,theme:c,dbid:l,dbkey:a};if(vh((t=>{m.writeFileSync(t+b.sep+"settings.json",JSON.stringify(e,null,4))})),s)var t=window.setInterval(Th,6e5,!1);else window.clearInterval(t)},T,S,function(){i.UseLects||w.dialog.confirm({message:`Are you sure you want to disable lect features? Only the data for the lect "${i.Lects[0]}" will be kept.`,callback:e=>{if(e){let e=i.Lects[0];d(Uo,i.Lects=["General"],i),Object.keys(i.Lexicon).forEach((t=>{d(Uo,i.Lexicon[t].Senses=i.Lexicon[t].Senses.filter((t=>t.lects.includes(e))),i),i.Lexicon[t].Senses.forEach((e=>{e.lects=["General"]})),i.Lexicon[t].Senses||delete i.Lexicon[t],d(Uo,i.Lexicon[t].pronunciations={General:i.Lexicon[t].pronunciations[e]},i)})),d(Uo,i.Pronunciations={General:i.Pronunciations[e]},i),d(Vo,r={General:r[e]},r)}else d(Uo,i.UseLects=!0,i)}})},B,p,function(){c=N(this),Jo.set(c)},()=>{d(Uo,i.FileTheme=c,i)},()=>{d(Uo,i.FileTheme="default",i)},function(){s=this.checked,Qo.set(s)},function(){i.UploadToDatabase=this.checked,Uo.set(i)},function(){C=this.value,n(4,C)},function(){E=this.value,n(5,E)},e=>n(1,v=e.detail?e.detail.trim():""),()=>{Object.keys(i.Lexicon).forEach((e=>{i.Lexicon[e].Senses.forEach(((t,n)=>{t.tags.includes(v)&&i.Lexicon[e].Senses[n].tags.splice(t.tags.indexOf(v),1)}))})),n(1,v="")},()=>{w.dialog.prompt({message:"New tag name:",callback:e=>{e&&(Object.keys(i.Lexicon).forEach((t=>{i.Lexicon[t].Senses.forEach(((n,o)=>{n.tags.includes(v)&&(i.Lexicon[t].Senses[o].tags.splice(n.tags.indexOf(v),1),i.Lexicon[t].Senses[o].tags.push(e))}))})),n(1,v=e))}})},function(){i.UseLects=this.checked,Uo.set(i)},(e,t)=>{1!==i.Lects.length?w.dialog.confirm({message:`Are you sure you want to delete the lect "${e}"? This action cannot be undone.`,callback(n){n&&(S(e,t),di.log(`Deleted lect: ${e}`))}}):w.dialog.alert("You cannot delete the last lect.")},(e,t)=>{w.dialog.prompt({message:"Edit Lect Name",placeholder:`${e}`,callback(n){if(!1===n)return di.log("User cancelled the Edit Lect Name dialog.");T(e,n,t),di.log(`Edited lect name: ${e} to ${n}`)}})},e=>{w.dialog.confirm({message:`Add all words in the lexicon to the lect ‘${e}’?`,callback(t){if(t){for(let t in i.Lexicon)i.Lexicon[t].Senses.forEach((t=>{t.lects.includes(e)||t.lects.push(e)}));di.log(`Added all words to lect: ${e}`),w.dialog.alert(`Added all senses of all words to the lect ‘${e}’.`)}}})},()=>{w.dialog.prompt({message:"Add a New Lect",placeholder:`New ${i.Name} Lect`,callback(e){if(!1===e)return di.log("User cancelled the Add Lect dialog.");d(Uo,i.Lects=[...i.Lects,e],i),d(Uo,i.Pronunciations[e]="place > holder",i),d(Vo,r[e]=vi(f,e),r),ci(`Added a new lect: ${e}`)}})},function(){i.ShowPronunciation=this.checked,Uo.set(i)},function(){i.ShowEtymology=this.checked,Uo.set(i)},()=>{B()},e=>{w.dialog.confirm({message:`Are you sure you want to delete "${e}"? This will remove any etymology connections its entries may have.`,callback(t){t&&(d(Uo,i.Etymologies=Object.fromEntries(Object.entries(i.Etymologies).filter((([t,n])=>n.source!==e))),i),delete i.Relatives[e],ci(`Deleted relative: ${e}`))}})},function(){i.ShowInflection=this.checked,Uo.set(i)},function(){i.ShowOrthography=this.checked,Uo.set(i)},function(e,t){e[t].display=this.checked,Uo.set(i)}]}class Sf extends Te{constructor(e){super(),Ee(this,e,Tf,Ef,s,{},null,[-1,-1])}}function Bf(e,t,n){const o=e.slice();return o[5]=t[n],o}function If(e,t,n){const o=e.slice();return o[8]=t[n],o}function _f(t){let n,o,i,r,s=t[8]+"";return{c(){n=S("• "),o=new z(!1),i=B(),r=E("br"),o.a=i},m(e,t){k(e,n,t),o.m(s,e,t),k(e,i,t),k(e,r,t)},p:e,d(e){e&&x(n),e&&o.d(),e&&x(i),e&&x(r)}}}function Lf(e){let t,n,o,i,r,s,a,l,c,h=["Overhaul","Update","Patch","Pre-release"][e[0][e[5]].type]+"",d=e[5]+"",u=e[0][e[5]].notes,p=[];for(let t=0;t<u.length;t+=1)p[t]=_f(If(e,u,t));return{c(){t=E("p"),n=E("u"),o=S(h),i=B(),r=S(d),s=B(),a=E("p");for(let e=0;e<p.length;e+=1)p[e].c();l=B(),c=E("br"),M(a,"width","70%"),M(a,"margin","auto"),M(a,"text-align","left"),M(a,"line-height","1.6")},m(e,h){k(e,t,h),w(t,n),w(n,o),w(n,i),w(n,r),k(e,s,h),k(e,a,h);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(a,null);k(e,l,h),k(e,c,h)},p(e,t){if(1&t){let n;for(u=e[0][e[5]].notes,n=0;n<u.length;n+=1){const o=If(e,u,n);p[n]?p[n].p(o,t):(p[n]=_f(o),p[n].c(),p[n].m(a,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=u.length}},d(e){e&&x(t),e&&x(s),e&&x(a),C(p,e),e&&x(l),e&&x(c)}}}function Af(t){let n,o,i,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,T,I,_,A,O,$,P,N,R,D,z,F,H=Object.keys(t[0]),j=[];for(let e=0;e<H.length;e+=1)j[e]=Lf(Bf(t,H,e));return{c(){n=E("div"),o=E("div"),i=E("div"),r=E("p"),r.innerHTML='Interested in testing the beta versions, talking about languages, or worldbuilding? <br/>\n                Join <a rel="noreferrer" target="_blank" href="https://discord.gg/uDk2XDhh8K">Saturn&#39;s Sojourn</a>, \n                the home of Lexicanter on <a rel="noreferrer" target="_blank" href="https://discord.gg/uDk2XDhh8K">Discord</a>!',s=B(),a=E("br"),l=B(),c=E("p"),c.innerHTML='Support the continued developement of the app as a <a rel="noreferrer" target="_blank" href="https://patreon.com/saturnine_softworks">patron</a>,',h=B(),d=E("p"),d.innerHTML='or by buying me a <a rel="noreferrer" target="_blank" href="https://ko-fi.com/saturnine_softworks">coffee</a>!',u=B(),p=E("br"),f=E("br"),g=S("\n\n            Below is a list of all changes made to the app since version 1.8, which is when the changelog was first added."),m=E("br"),b=S("\n            If you're looking for more information about how to use the app, check the Help tab or visit the \n            "),v=E("a"),v.textContent="Wiki",y=S("."),T=E("br"),I=S(" There is also\n            an overview "),_=E("a"),_.textContent="tutorial video",A=S(" for release 2.0.\n            "),O=E("br"),$=S(" If you're still having trouble, or need to contact the developer, visit us in the \n            "),P=E("a"),P.textContent="Discord server",N=S(". \n            \n            "),R=E("br"),D=E("hr"),z=E("br"),F=B();for(let e=0;e<j.length;e+=1)j[e].c();L(r,"class","info"),L(c,"class","info"),L(d,"class","info"),L(v,"rel","noreferrer"),L(v,"target","_blank"),L(v,"href","https://github.com/Saturnine-Softworks/Lexicanter/wiki"),L(_,"rel","noreferrer"),L(_,"target","_blank"),L(_,"href","https://www.youtube.com/watch?v=6_AwCC4XlvU&t=151s"),L(P,"rel","noreferrer"),L(P,"target","_blank"),L(P,"href","https://discord.gg/uDk2XDhh8K"),L(i,"class","container column scrolled"),M(i,"height","90vh"),L(o,"class","row"),M(o,"height","95vh"),L(n,"class","tab-pane")},m(e,t){k(e,n,t),w(n,o),w(o,i),w(i,r),w(i,s),w(i,a),w(i,l),w(i,c),w(i,h),w(i,d),w(i,u),w(i,p),w(i,f),w(i,g),w(i,m),w(i,b),w(i,v),w(i,y),w(i,T),w(i,I),w(i,_),w(i,A),w(i,O),w(i,$),w(i,P),w(i,N),w(i,R),w(i,D),w(i,z),w(i,F);for(let e=0;e<j.length;e+=1)j[e]&&j[e].m(i,null)},p(e,[t]){if(1&t){let n;for(H=Object.keys(e[0]),n=0;n<H.length;n+=1){const o=Bf(e,H,n);j[n]?j[n].p(o,t):(j[n]=Lf(o),j[n].c(),j[n].m(i,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=H.length}},i:e,o:e,d(e){e&&x(n),C(j,e)}}}function Of(e){const[t,n,o,i]=[0,1,2,3];return[{"2.2.0":{type:i,notes:["Graphemy Integration: You can now use your Graphemy typesetter files as sources for an orthography."]},"2.1.19":{type:o,notes:["Fixed a bug with the lexicon description search which caused the exact match <code>!</code> and begins-word <code>^</code> functions not to work.","Fixed a bug causing the alphabetizer to soft crash the app if you used parentheses in your alphabet. Other RegEx-reserved characters will work now as well."]},"2.1.18":{type:o,notes:["Fixed problems with the search bars in the Phrasebook tab which made them virtually useless.","Fixed another case where documentations would not be initialized when loading a database synced file on multiple devices.","Changes to how the changelog in managed under the hood (yes, really)."]},"2.1.17":{type:o,notes:["Fixed a bug with downloading lexicons on multiple devices and the documentation being left out."]},"2.1.16":{type:o,notes:["Fixed a bug that occurred with lexicon searching in some files, related to case-sensitivity."]},"2.1.15":{type:o,notes:["Fixed a reported bug which caused the search fields in the lexicon and phrasebook to find no matches in certain cases.","Changed the way that the app recognizes when changes have been made to the version of your file in the database.","A few quality of life features related to the previous change, including the ability to see the local and online file version numbers in Settings."]},"2.1.14":{type:o,notes:["Fixed a bug with the orthography pattern replacement features which caused it to only replace the first instance of a pattern in each word.","Added the ability to use ^ or # as word-end characters in the orthography pattern replacement fields.","Fixed a reported bug with the Illegals field of the Advanced Phonotactics word generator which caused that field not to save its contents.","Fixed a bug with database syncing which caused the setting to not save for files.","Files should now automatically detect when you have changes in the database on loading, and will prompt you to download the changes."]},"2.1.13":{type:o,notes:["Added an Illegals field to the Advanced Phonotactics word generator options.","Added the Structures inputs to the Advanced Phonotactics word generator options and the corresponding syllable category syntax for this feature.","(Finally) wrote the documentation on the word generator, which can be found in the Help tab."]},"2.1.12":{type:o,notes:["Added a new default text to the Pronunciations field in the Phonology tab to better guide beginners.","Added an indicator on entries in the lexicon tab to show if their pronunciation was manually edited and thus not automatically updated by pronunciation rules."]},"2.1.11":{type:o,notes:["Added secondary location file saving, for those of you who want your lexicon files to save to another location on your computer every time you save.","Added database syncing! Get your account credentials from the Lexicanter Discord bot, and then you can sync your files to the bot and between devices.","A minor change to how app settings are saved. The old app settings files are now deprecated and will eventually no longer be supported."]},"2.1.10":{type:o,notes:["New tooltips have been added throughout the app.","New All Hallow's Eve 2023 theme in the Holiday collection!"]},"2.1.9":{type:o,notes:["Hot fix for a bug which caused data saved by the advanced word generator not to be loaded open re-opening a file.","A new feature will be coming in 2.2 which requires a change to the way lexicon entries are formatted internally, which this update prepares for."]},2.1:{type:n,notes:["Introduced a plain text import feature for convenient clonging on the move.","Added a reference window for loading secondary files in read-only mode.","Support for custom fonts via new Orthographies feature.","Under-the-hood file structure adjustments and read logic improvements.","New phonological evolution tools!","An alternative type of word generator for more advanced syllable structures.","The option to save theme preferences on a file-by-file basis.","New themes: Magnolia by Saturnine, Crabapple by Maarz, and Eostre 2023 (a holiday theme released for beta users earlier this year).","A number of bugs removed; probably some bugs added. Please report them if you find them!"]},"2.0.18":{type:o,notes:["By request, added a new dropdown to Tag inputs which allows you to select from pre-existing tags in your lexicon.","By request, added a new Help tab. It hosts the same information as the wiki, but is accessible offline.","The Settings, Changelog, and Help tabs, as well as the window control buttons, now use Material Icons."]},"2.0.17":{type:o,notes:["Fixed a reported bug with the inflections generation.","Fixed an issue with tag searching.","The font weight has been changed to an appropriate Book weight to improve readability on some systems and to many eyes."]},"2.0.16":{type:o,notes:["Fixed a small bug with the new sound change engine."]},"2.0.15":{type:o,notes:["Fixed a reported bug with HTML export.","Related to the above fix, technical limitations now prevent your theme from being exported with your HTML. Solutions are being investigated."]},"2.0.14":{type:o,notes:["Fixed CSV export.","Fixed a reported bug with HTML export.","Fixed some reported and unreported issues with the sound change engine.","There is now a text input designated for specifying categories for sound changes in an inflection group, to make everyone's life easier.","Minor optimizations and performance improvements."]},"2.0.13":{type:o,notes:["Linux support!"]},"2.0.12":{type:o,notes:["Fixed a reported bug which caused HTML export to fail. Expect expanded HTML export options in the future.","Minor optimizations."]},"2.0.11":{type:o,notes:["Fixed a reported bug which caused a semi-rare soft-crash in certain cases when dealing with multiple lects. Again."]},"2.0.10":{type:o,notes:["Fixed a reported bug which caused a semi-rare soft-crash in certain cases when dealing with multiple lects.","Fixed a reported bug which caused CSV import to fail, and improved CSV import options."]},"2.0.9":{type:o,notes:["You can now write multiple rules separated by a semicolon, which allows for multiple rules per table cell in the inflection tables.","Fixed a reported bug which caused a soft crash when attempting to edit the last word in the lexicon if it had an inflections dropdown open."]},"2.0":{type:t,notes:["There is now a new sound change engine under the hood. Your old rules may no longer work; for assistance, you can contact the developer.","Lexicon entries can now be separated into multiple Senses, each of which can have their own tags.","There are new features accessible via new Advanced Settings. These include:","New Lect features allow you to denote the ways your language may vary, particularly in semantics and pronunciation.","New Inflection features, which include a new tab, which allows you to create inflectional paradigms for your language.","New Etymology features, which include a new tab, allows you to create etymologies trees and view them in the lexicon.","Check out the new wiki page or tutorial video for more in-depth information!","New app icons by Lyiusa!","New themes: Juniper by Saturnine, and Midnight and Bone by Maarz!"]},"1.11.4":{type:o,notes:["Fixed a reported bug causing markdown not to work in variant descriptions of phrases."]},"1.11.3":{type:o,notes:["Fixed a reported bug causing the alphabetizer pre-check to send false alerts when certain combining diacritics on certain characters were in the alphabet in certain orders."]},"1.11.2":{type:o,notes:["The app now saves backup versions of your files in case things go wrong.","Fixed a reported bug that caused the app to sometimes exit too quickly and not save when autosave was enabled."]},"1.11.1":{type:o,notes:["Fixed a reported bug causing the Ignore Diacritics setting to be ignored during alphabet checks when adding words to the lexicon."]},1.11:{type:n,notes:["When you attempt to add a word to the lexicon, there is now an alert if the word contains characters (or polygraphs) not present in your alphabet.","Fixed a reported bug causing external links to not display correctly in the Lexicon tab specifically.","Fixed a reported bug preventing the app from warning you that it will not save if there is no file name given.","Fixed a minor bug with the Terminal theme when exported for HTML."]},"1.10":{type:n,notes:["Added three new themes: Pomegranate, Wisteria, and Terminal.","The word entry panel in the Lexicon tab is now collapsible.","The Phrasebook now has active overwrite protection to prevent you from deleting your work by mistake.","You can now search for an exact whole-word match in definitions and tags fields by using ! as a prefix.","For HTML exports, the appearance on mobile devices has been improved.","Minor bug fixes for opening new windows from the File tab.","Lots of under-the-hood changes for the app's appearance in preparation for future features."]},"1.9.5":{type:o,notes:["Fixed a bug causing app-quit to be impossible sometimes.","Fixed some minor bugs with the styles.","Fixed a bug causing monospace toggle in the docs tab to be undoable.","Fixed a bug causing external hyperlinks not to use the preferred browser, and in some cases not open at all."]},"1.9.4":{type:o,notes:["You can now hyperlink to entries in the lexicon. The link format is lex::word.","The documentation tab would previously not adjust to the width of the window. That has been fixed."]},1.9:{type:n,notes:["Overhauled the Documentation tab, which now uses integrated EditorJS technology. Markdown is no longer supported in this tab, in favor of the new WYSIWYG style with a toolbar visible when you highlight text.","Note: The first time you load a file from an older version, there may be some formatting quirks. Most of these should sort themselves out after saving in the new version and re-loading. Please contact the developer if you run into persistent issues.","Fixed a bug with the Open New Window button which caused it to fail to open new windows.","The button to edit phrasebook entries has been changed to right-click instead of left-click to make it more difficult to accidentally overwrite work in progress, and to allow for highlighting text.","An HTML Docs-Only export option has been added."]},"1.8.14":{type:o,notes:["Fixed a few minor bugs with markdown parsing.","Added monospace markdown with ``this`` syntax.","Fixed a reported bug which affected the orthography testing area."]},1.8:{type:n,notes:["File storage has been migrated to make auto-save possible.","Categories can now be defined and used in your Pronunciations rules. See the docs page for more info.","Five new color themes: Light, Marine, Glade, Leatherbound, and Purple Maar (contributed by Maarz).","You can now load in your own custom CSS color themes.","Definitions, descriptions, and documentation sections now support simple markdown.","There's a new space in the Phonology tab to test your pronunciation rules.","Tag searches no longer require an exact match.","Several minor bug fixes, including one reported about tables being editable in the HTML export."]}}]}class $f extends Te{constructor(e){super(),Ee(this,e,Of,Af,s,{})}}function Mf(e,t,n){const o=e.slice();return o[14]=t[n],o[15]=t,o[16]=n,o}function Pf(e){let t,n,o,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,C,T,I,A,O,P,N,R,D,z,F,H,j,U;function W(...t){return e[7](e[16],...t)}function q(){e[8].call(g,e[15],e[16])}function V(){e[9].call(A,e[15],e[16])}function G(){return e[10](e[16])}return{c(){t=E("div"),n=E("div"),o=E("label"),r=S("Tags\n                            "),s=E("div"),a=E("textarea"),c=B(),h=E("label"),d=S("RegEx Filter\n                            "),u=E("div"),p=E("p"),p.textContent="/",f=B(),g=E("input"),m=B(),b=E("p"),b.textContent="/",v=B(),y=E("div"),C=E("label"),T=S("Rule Categories\n                            "),I=E("div"),A=E("textarea"),O=B(),P=E("div"),N=B(),R=E("div"),D=E("button"),D.textContent="Delete",z=B(),F=E("br"),H=E("br"),L(a,"rows","1"),a.value=l=e[14].tags.join(" "),M(p,"display","inline"),M(g,"display","inline"),L(g,"type","text"),M(b,"display","inline"),L(n,"class","column"),L(A,"class","text-left"),L(A,"rows","3"),L(y,"class","column"),L(t,"class","row"),M(t,"width","66%"),L(P,"class","codex-editor"),L(P,"id",`inflection ${e[16]}`),M(P,"font-family","Gentium"),L(D,"class","hover-highlight hover-shadow"),M(D,"display","inline"),L(R,"class","narrow")},m(i,l){k(i,t,l),w(t,n),w(n,o),w(o,r),w(o,s),w(s,a),w(n,c),w(n,h),w(h,d),w(h,u),w(u,p),w(u,f),w(u,g),$(g,e[14].filter),w(u,m),w(u,b),w(t,v),w(t,y),w(y,C),w(C,T),w(C,I),w(I,A),$(A,e[14].categories),k(i,O,l),k(i,P,l),k(i,N,l),k(i,R,l),w(R,D),k(i,z,l),k(i,F,l),k(i,H,l),j||(U=[_(a,"change",W),_(g,"input",q),_(A,"input",V),_(D,"click",G)],j=!0)},p(t,n){e=t,1&n&&l!==(l=e[14].tags.join(" "))&&(a.value=l),1&n&&g.value!==e[14].filter&&$(g,e[14].filter),1&n&&$(A,e[14].categories)},d(e){e&&x(t),e&&x(O),e&&x(P),e&&x(N),e&&x(R),e&&x(z),e&&x(F),e&&x(H),j=!1,i(U)}}}function Nf(t){let n,o,r,s,a,l,c,h=t[0].Inflections,d=[];for(let e=0;e<h.length;e+=1)d[e]=Pf(Mf(t,h,e));return{c(){n=E("div"),o=E("div"),r=E("div");for(let e=0;e<d.length;e+=1)d[e].c();s=B(),a=E("button"),a.textContent="Add Inflections Group",L(a,"style","hover-highlight hover-shadow"),L(r,"class","container column scrolled"),L(o,"class","row"),M(o,"height","92vh"),L(n,"class","tab-pane"),L(n,"spellcheck","false")},m(e,i){k(e,n,i),w(n,o),w(o,r);for(let e=0;e<d.length;e+=1)d[e]&&d[e].m(r,null);w(r,s),w(r,a),l||(c=[_(a,"click",t[11]),_(r,"mouseleave",t[5])],l=!0)},p(e,[t]){if(47&t){let n;for(h=e[0].Inflections,n=0;n<h.length;n+=1){const o=Mf(e,h,n);d[n]?d[n].p(o,t):(d[n]=Pf(o),d[n].c(),d[n].m(r,s))}for(;n<d.length;n+=1)d[n].d(1);d.length=h.length}},i:e,o:e,d(e){e&&x(n),C(d,e),l=!1,i(c)}}}function Rf(e,t,n){let o,i;h(e,Uo,(e=>n(0,o=e))),h(e,ei,(e=>n(6,i=e)));const r=require("vex-js");var s;function a(e,t){const n=e.currentTarget;d(Uo,o.Inflections[t].tags=n.value.split(/\s+/g),o)}function l(e){for(let e=p.length;e>0;e--)p[e-1].destroy(),p.pop();o.Inflections.filter(((t,n)=>n!==e)).forEach(((e,t)=>{const n={holder:`inflection ${t}`,data:e.tables,tools:{underline:ps,monospace:fs,table:{class:cs,inlineToolbar:!0,config:{rows:3,cols:3,withHeadings:!0}},header:{class:Hr,inlineToolbar:!0}},minHeight:30,logLevel:s.ERROR},o=new Fo(n);p.push(o)}))}function c(){const e={holder:"inflection "+(o.Inflections.length-1),data:{blocks:[{type:"header",data:{text:"New Inflections Group",level:1}},{type:"table",data:{withHeadings:!1,content:[["","",""],["","",""],["","",""]]}},{type:"paragraph",data:{text:"Table cells containing sound change rules will be used to generate inflected forms.                             Apply them to your words in your lexicon by providing the lexicon tags they apply to and an                             optional Regular Expression filter."}}]},tools:{underline:ps,monospace:fs,table:{class:cs,inlineToolbar:!0,config:{rows:3,cols:3,withHeadings:!0}},header:{class:Hr,inlineToolbar:!0}},minHeight:30,logLevel:s.ERROR},t=new Fo(e);p.push(t)}async function u(){for(let e=0;e<p.length;e++)p[e].save().then((t=>{d(Uo,o.Inflections[e].tables=t,o)})).catch((t=>{di.error(`Error while saving editor.\nindex: ${e}\nobject at i: ${p[e]}\neditors.length: ${p.length}\nmessage:\n ${String(t)}`)})),await p[e].isReady;return Uo.set(o),"done"}!function(e){e.VERBOSE="VERBOSE",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR"}(s||(s={}));let p=[];return e.$$.update=()=>{64&e.$$.dirty&&l(1/0)},[o,r,a,l,c,u,i,(e,t)=>a(t,e),function(e,t){e[t].filter=this.value,Uo.set(o)},function(e,t){e[t].categories=this.value,Uo.set(o)},e=>{r.dialog.confirm({message:"Are you sure you want to delete this inflection group? This action is irreversible.",callback:t=>{t&&(u(),window.setTimeout((()=>{l(e),d(Uo,o.Inflections=o.Inflections.filter(((t,n)=>n!==e)),o)}),500))}})},()=>{u().then((()=>{d(Uo,o.Inflections=[...o.Inflections,{tags:[],filter:".+",categories:"",tables:{blocks:[{type:"header",data:{text:"New Inflections Group",level:1}},{type:"table",data:{withHeadings:!1,content:[["","",""],["","",""],["","",""]]}},{type:"paragraph",data:{text:"Table cells containing sound change rules will be used to generate inflected forms.                                             Apply them to your words in your lexicon by providing the lexicon tags they apply to and an                                             optional Regular Expression filter."}}]}}],o),c()}))}]}class Df extends Te{constructor(e){super(),Ee(this,e,Rf,Nf,s,{})}}function zf(e,t,n){const o=e.slice();return o[28]=t[n],o}function Ff(e,t,n){const o=e.slice();return o[28]=t[n],o[31]=t,o[32]=n,o}function Hf(e,t,n){const o=e.slice();return o[33]=t[n],o}function jf(e){let t,n,o,i,r;function s(){e[10].call(t,e[32])}return{c(){t=E("select"),n=E("option"),n.textContent="Use an installed font",o=E("option"),o.textContent="Use a Graphemy file",n.__value="font",n.value=n.__value,o.__value="graphemy",o.value=o.__value,void 0===e[3].Orthographies[e[32]].typesetter&&ne(s)},m(a,l){k(a,t,l),w(t,n),w(t,o),P(t,e[3].Orthographies[e[32]].typesetter,!0),i||(r=_(t,"change",s),i=!0)},p(n,o){e=n,8&o[0]&&P(t,e[3].Orthographies[e[32]].typesetter)},d(e){e&&x(t),i=!1,r()}}}function Uf(t){let n;return{c(){n=E("span"),n.textContent=": Packaged Font"},m(e,t){k(e,n,t)},p:e,d(e){e&&x(n)}}}function Wf(e){let t,n,o,r,s;function a(){return e[12](e[32])}function l(){e[13].call(o,e[31],e[32])}return{c(){t=E("button"),t.textContent="Locate File",n=B(),o=E("input"),L(o,"type","text"),L(o,"id",`graphemy-file-input${e[32]}`),o.readOnly=!0},m(i,c){k(i,t,c),k(i,n,c),k(i,o,c),$(o,e[28].font),r||(s=[_(t,"click",a),_(o,"input",l)],r=!0)},p(t,n){e=t,8&n[0]&&o.value!==e[28].font&&$(o,e[28].font)},d(e){e&&x(t),e&&x(n),e&&x(o),r=!1,i(s)}}}function qf(e){let t,n,o,i,r;function s(...t){return e[11](e[32],...t)}return{c(){t=E("input"),L(t,"type","text"),t.value=n=e[28].font,t.readOnly=o="Romanization"===e[28].name,M(t,"background-color","Romanization"===e[28].name?"transparent":"")},m(e,n){k(e,t,n),i||(r=_(t,"blur",s),i=!0)},p(i,r){e=i,8&r[0]&&n!==(n=e[28].font)&&t.value!==n&&(t.value=n),8&r[0]&&o!==(o="Romanization"===e[28].name)&&(t.readOnly=o),8&r[0]&&M(t,"background-color","Romanization"===e[28].name?"transparent":"")},d(e){e&&x(t),i=!1,r()}}}function Vf(e){let t,n,o,i,r;function s(){e[14].call(t,e[31],e[32])}return{c(){t=E("select"),n=E("option"),n.textContent="Base from pronunciation",o=E("option"),o.textContent="Base from romanization",n.__value="ipa",n.value=n.__value,o.__value="rom",o.value=o.__value,void 0===e[28].root&&ne(s)},m(a,l){k(a,t,l),w(t,n),w(t,o),P(t,e[28].root,!0),i||(r=_(t,"change",s),i=!0)},p(n,o){e=n,8&o[0]&&P(t,e[28].root)},d(e){e&&x(t),i=!1,r()}}}function Gf(t){let n;return{c(){n=E("span"),n.textContent=": Base input"},m(e,t){k(e,n,t)},p:e,d(e){e&&x(n)}}}function Yf(e){let t,n,o,i,r,s=e[3].Lects,a=[];for(let t=0;t<s.length;t+=1)a[t]=Kf(Hf(e,s,t));function l(){e[15].call(o,e[31],e[32])}return{c(){t=E("label"),n=S("Lect\n                        "),o=E("select");for(let e=0;e<a.length;e+=1)a[e].c();void 0===e[28].lect&&ne(l)},m(s,c){k(s,t,c),w(t,n),w(t,o);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(o,null);P(o,e[28].lect,!0),i||(r=_(o,"change",l),i=!0)},p(t,n){if(e=t,8&n[0]){let t;for(s=e[3].Lects,t=0;t<s.length;t+=1){const i=Hf(e,s,t);a[t]?a[t].p(i,n):(a[t]=Kf(i),a[t].c(),a[t].m(o,null))}for(;t<a.length;t+=1)a[t].d(1);a.length=s.length}8&n[0]&&P(o,e[28].lect)},d(e){e&&x(t),C(a,e),i=!1,r()}}}function Kf(e){let t,n,o,i=e[33]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[33],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){8&r[0]&&i!==(i=e[33]+"")&&O(n,i),8&r[0]&&o!==(o=e[33])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Xf(e){let t,n,o;function i(){return e[17](e[32])}return{c(){t=E("button"),t.textContent="Delete",L(t,"class","hover-highlight hover-shadow")},m(e,r){k(e,t,r),n||(o=_(t,"click",i),n=!0)},p(t,n){e=t},d(e){e&&x(t),n=!1,o()}}}function Zf(e){let t,n,o,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,C,T,A,O,$,P,N,R;function D(...t){return e[9](e[32],...t)}function z(e,t){return"Romanization"===e[28].name?Uf:jf}let F=z(e),H=F(e);function j(e,t){return"font"===e[28].typesetter?qf:"graphemy"===e[28].typesetter?Wf:void 0}let U=j(e),W=U&&U(e);function q(e,t){return"Romanization"===e[28].name?Gf:Vf}let V=q(e),G=V(e),Y=e[3].UseLects&&"ipa"===e[28].root&&Yf(e);function K(...t){return e[16](e[32],...t)}let X="Romanization"!==e[28].name&&Xf(e);return{c(){t=E("label"),n=S("Name\n                    "),o=E("input"),a=B(),l=E("label"),c=S("Typesetter\n                    "),H.c(),h=B(),W&&W.c(),d=B(),u=E("label"),p=S("Root\n                    "),G.c(),f=B(),Y&&Y.c(),g=B(),m=E("br"),b=B(),v=E("label"),y=S("Conversion Rules\n                    "),C=E("textarea"),$=B(),X&&X.c(),P=I(),L(o,"type","text"),o.value=r=e[28].name,o.readOnly=s="Romanization"===e[28].name,M(o,"background-color","Romanization"===e[28].name?"transparent":""),L(C,"rows","3"),L(C,"class",T="Romanization"===e[28].name?"text-center":"text-left"),C.value=A=e[28].rules,C.readOnly=O="Romanization"===e[28].name,M(C,"background-color","Romanization"===e[28].name?"transparent":"")},m(e,i){k(e,t,i),w(t,n),w(t,o),k(e,a,i),k(e,l,i),w(l,c),H.m(l,null),k(e,h,i),W&&W.m(e,i),k(e,d,i),k(e,u,i),w(u,p),G.m(u,null),k(e,f,i),Y&&Y.m(e,i),k(e,g,i),k(e,m,i),k(e,b,i),k(e,v,i),w(v,y),w(v,C),k(e,$,i),X&&X.m(e,i),k(e,P,i),N||(R=[_(o,"blur",D),_(C,"blur",K)],N=!0)},p(t,n){e=t,8&n[0]&&r!==(r=e[28].name)&&o.value!==r&&(o.value=r),8&n[0]&&s!==(s="Romanization"===e[28].name)&&(o.readOnly=s),8&n[0]&&M(o,"background-color","Romanization"===e[28].name?"transparent":""),F===(F=z(e))&&H?H.p(e,n):(H.d(1),H=F(e),H&&(H.c(),H.m(l,null))),U===(U=j(e))&&W?W.p(e,n):(W&&W.d(1),W=U&&U(e),W&&(W.c(),W.m(d.parentNode,d))),V===(V=q(e))&&G?G.p(e,n):(G.d(1),G=V(e),G&&(G.c(),G.m(u,null))),e[3].UseLects&&"ipa"===e[28].root?Y?Y.p(e,n):(Y=Yf(e),Y.c(),Y.m(g.parentNode,g)):Y&&(Y.d(1),Y=null),8&n[0]&&T!==(T="Romanization"===e[28].name?"text-center":"text-left")&&L(C,"class",T),8&n[0]&&A!==(A=e[28].rules)&&(C.value=A),8&n[0]&&O!==(O="Romanization"===e[28].name)&&(C.readOnly=O),8&n[0]&&M(C,"background-color","Romanization"===e[28].name?"transparent":""),"Romanization"!==e[28].name?X?X.p(e,n):(X=Xf(e),X.c(),X.m(P.parentNode,P)):X&&(X.d(1),X=null)},d(e){e&&x(t),e&&x(a),e&&x(l),H.d(),e&&x(h),W&&W.d(e),e&&x(d),e&&x(u),G.d(),e&&x(f),Y&&Y.d(e),e&&x(g),e&&x(m),e&&x(b),e&&x(v),e&&x($),X&&X.d(e),e&&x(P),N=!1,i(R)}}}function Jf(e){let t,n,o,i=e[28].name+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[28].name,t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){8&r[0]&&i!==(i=e[28].name+"")&&O(n,i),8&r[0]&&o!==(o=e[28].name)&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Qf(e){let t,n;return{c(){t=E("textarea"),L(t,"rows","6"),t.value=n=e[22](),t.readOnly=!0,M(t,"background-color","transparent"),M(t,"font-family",e[3].Orthographies.find(e[23])?.font||"Gentium")},m(e,n){k(e,t,n)},p(e,o){11&o[0]&&n!==(n=e[22]())&&(t.value=n),9&o[0]&&M(t,"font-family",e[3].Orthographies.find(e[23])?.font||"Gentium")},d(e){e&&x(t)}}}function eg(e){let t,n,o,i,r,s,a;return{c(){t=E("button"),t.textContent="Generate SVG",n=B(),o=E("br"),i=B(),r=E("div")},m(l,c){k(l,t,c),k(l,n,c),k(l,o,c),k(l,i,c),k(l,r,c),r.innerHTML=e[6],s||(a=_(t,"click",e[21]),s=!0)},p(e,t){64&t[0]&&(r.innerHTML=e[6])},d(e){e&&x(t),e&&x(n),e&&x(o),e&&x(i),e&&x(r),s=!1,a()}}}function tg(t){let n,o,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,T,I,A,N,R,D,z,F,H,j,U,W,q,V,G,Y,K=t[3].Orthographies,X=[];for(let e=0;e<K.length;e+=1)X[e]=Zf(Ff(t,K,e));let Z=t[3].Orthographies,J=[];for(let e=0;e<Z.length;e+=1)J[e]=Jf(zf(t,Z,e));function Q(e,t){return 9&t[0]&&(m=null),null==m&&(m=!("graphemy"!==e[3].Orthographies.find(e[8])?.typesetter)),m?eg:Qf}let ee=Q(t,[-1,-1]),te=ee(t);return{c(){n=E("div"),o=E("div"),r=E("div");for(let e=0;e<X.length;e+=1)X[e].c();s=B(),a=E("button"),a.textContent="New Orthography",l=B(),c=E("div"),h=E("select");for(let e=0;e<J.length;e+=1)J[e].c();d=B(),u=E("label"),p=S("Test Input\n                "),f=E("textarea"),g=B(),te.c(),b=B(),v=E("br"),y=B(),T=E("br"),I=B(),A=E("label"),N=S("Change Orthography\n                "),R=E("div"),D=S("Pattern: "),z=E("input"),F=S("\n                    Replacement: "),H=E("input"),j=B(),U=E("button"),U.textContent="Apply",W=B(),q=E("span"),V=S(t[5]),L(a,"class","hover-highlight hover-shadow"),L(r,"class","column container scrolled"),M(r,"height","92vh"),void 0===t[0]&&ne((()=>t[19].call(h))),L(f,"rows","6"),L(z,"type","text"),L(H,"type","text"),M(q,"color","red"),L(R,"class","narrow"),L(c,"class","column container scrolled"),M(c,"height","92vh"),L(o,"class","row"),M(o,"height","100%"),L(n,"class","tab-pane")},m(e,i){k(e,n,i),w(n,o),w(o,r);for(let e=0;e<X.length;e+=1)X[e]&&X[e].m(r,null);w(r,s),w(r,a),w(o,l),w(o,c),w(c,h);for(let e=0;e<J.length;e+=1)J[e]&&J[e].m(h,null);P(h,t[0],!0),w(c,d),w(c,u),w(u,p),w(u,f),$(f,t[1]),w(u,g),te.m(u,null),w(c,b),w(c,v),w(c,y),w(c,T),w(c,I),w(c,A),w(A,N),w(A,R),w(R,D),w(R,z),$(z,t[4].pattern),w(R,F),w(R,H),$(H,t[4].replacement),w(R,j),w(R,U),w(R,W),w(R,q),w(q,V),G||(Y=[_(a,"click",t[18]),_(h,"change",t[19]),_(f,"input",t[20]),_(z,"input",t[24]),_(H,"input",t[25]),_(U,"click",t[26])],G=!0)},p(e,t){if(136&t[0]){let n;for(K=e[3].Orthographies,n=0;n<K.length;n+=1){const o=Ff(e,K,n);X[n]?X[n].p(o,t):(X[n]=Zf(o),X[n].c(),X[n].m(r,s))}for(;n<X.length;n+=1)X[n].d(1);X.length=K.length}if(8&t[0]){let n;for(Z=e[3].Orthographies,n=0;n<Z.length;n+=1){const o=zf(e,Z,n);J[n]?J[n].p(o,t):(J[n]=Jf(o),J[n].c(),J[n].m(h,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=Z.length}9&t[0]&&P(h,e[0]),2&t[0]&&$(f,e[1]),ee===(ee=Q(e,t))&&te?te.p(e,t):(te.d(1),te=ee(e),te&&(te.c(),te.m(u,null))),16&t[0]&&z.value!==e[4].pattern&&$(z,e[4].pattern),16&t[0]&&H.value!==e[4].replacement&&$(H,e[4].replacement),32&t[0]&&O(V,e[5])},i:e,o:e,d(e){e&&x(n),C(X,e),C(J,e),te.d(),G=!1,i(Y)}}}function ng(e,t,n){let o;h(e,Uo,(e=>n(3,o=e)));let i="",r="";const s=require("vex-js");let a={pattern:"",replacement:""},l="",c="",u="";function p(e,t,n){const i=e.target,r=i.value.trim();if("name"===t){if([r,...o.Orthographies.filter((e=>e.name===r))].length-1>1)return s.dialog.alert("The name must be unique."),void(i.value=`New Orthography ${n}`);if(""===r)return s.dialog.alert("The name cannot be blank."),void(i.value=`New Orthography ${n}`)}d(Uo,o.Orthographies[n][t]=r,o)}return e.$$.update=()=>{15&e.$$.dirty[0]&&(async()=>{var e;n(6,c=Eh(await Ch(r,null===(e=o.Orthographies.find((e=>e.name===i)))||void 0===e?void 0:e.name)))})()},[i,r,u,o,a,l,c,p,e=>e.name===i,(e,t)=>{p(t,"name",e)},function(e){o.Orthographies[e].typesetter=N(this),Uo.set(o)},(e,t)=>p(t,"font",e),e=>{yh({title:"Select Graphemy File",properties:["openFile"]},(t=>{d(Uo,o.Orthographies[e].font=t[0],o)}))},function(e,t){e[t].font=this.value,Uo.set(o)},function(e,t){e[t].root=N(this),Uo.set(o)},function(e,t){e[t].lect=N(this),Uo.set(o)},(e,t)=>{p(t,"rules",e)},e=>{d(Uo,o.Orthographies=[...o.Orthographies.slice(0,e),...o.Orthographies.slice(e+1)],o)},()=>{d(Uo,o.Orthographies=[...o.Orthographies,{name:`New Orthography ${o.Orthographies.length}`,font:"Gentium",root:"ipa",lect:o.Lects[0],rules:"",display:!0,typesetter:"font"}],o)},function(){i=N(this),n(0,i)},function(){r=this.value,n(1,r)},async()=>{n(2,u=await Kh(o.Orthographies.find((e=>e.name===i))?.font,(()=>{const e=bi(o.Orthographies.find((e=>e.name===i))?.rules||"");return mi(e.rules,r,e.categories)})(),o.Orthographies.find((e=>e.name===i))?.name))},()=>{const e=bi(o.Orthographies.find((e=>e.name===i))?.rules||"");return mi(e.rules,r,e.categories)},e=>e.name===i,function(){a.pattern=this.value,n(4,a)},function(){a.replacement=this.value,n(4,a)},()=>{for(let e in o.Lexicon)if(e.includes(a.pattern))try{let t="#"+e+"#",i=a.pattern.replaceAll("^","#");t=t.replaceAll(i,a.replacement),d(Uo,o.Lexicon[t]=o.Lexicon[e],o),delete o.Lexicon[e],n(5,l="Change applied successfully.")}catch(e){console.log(e),n(5,l="An error occurred while applying the change. Please contact the developer for assistance and check the console.")}}]}class og extends Te{constructor(e){super(),Ee(this,e,ng,tg,s,{},null,[-1,-1])}}function ig(e,t,n){const o=e.slice();return o[4]=t[n],o}function rg(e){let t,n,o,i,r,s=e[4]+"";function a(){return e[3](e[4])}return{c(){t=E("div"),n=S(s),o=B(),L(t,"class","lex-entry"),R(t,"selected",e[4]===e[0])},m(e,s){k(e,t,s),w(t,n),w(t,o),i||(r=_(t,"mousedown",a),i=!0)},p(n,o){e=n,5&o&&R(t,"selected",e[4]===e[0])},d(e){e&&x(t),i=!1,r()}}}function sg(t){let n,o,i,r,s,a=Fr(t[1][t[0]])+"",l=t[2],c=[];for(let e=0;e<l.length;e+=1)c[e]=rg(ig(t,l,e));return{c(){n=E("div"),o=E("div"),i=E("div");for(let e=0;e<c.length;e+=1)c[e].c();r=B(),s=E("div"),L(i,"class","column"),M(i,"max-width","9vw"),L(s,"class","column scrolled"),M(s,"height","100%"),M(s,"text-align","left"),M(s,"margin","3em"),M(s,"margin-top","0em"),L(o,"class","row"),M(o,"height","100%"),L(n,"class","tab-pane container"),M(n,"height","92vh")},m(e,t){k(e,n,t),w(n,o),w(o,i);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(i,null);w(o,r),w(o,s),s.innerHTML=a},p(e,[t]){if(5&t){let n;for(l=e[2],n=0;n<l.length;n+=1){const o=ig(e,l,n);c[n]?c[n].p(o,t):(c[n]=rg(o),c[n].c(),c[n].m(i,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}1&t&&a!==(a=Fr(e[1][e[0]])+"")&&(s.innerHTML=a)},i:e,o:e,d(e){e&&x(n),C(c,e)}}}function ag(e,t,n){const o={Lexicon:"# The Lexicon Tab\nWhen you first open Lexicanter, you’ll find yourself on the Lexicon tab. This is the place where you will be adding words to your lexicon. This tab is composed of three panels: the alphabet panel, the editor panel, and the lexicon panel itself.\n\n## The Alphabet Panel\nUnder the tab navigation at the top of the app, you’ll see two checkboxes and the alphabet text input.\n### Alphabet Settings\n- Case Sensitivity will make letters case sensitive making the app alphabetize ‘A’ differently for ‘a’, for example.\n- Ignore Diacritics is on by default and turning it off will make the app alphabetize ‘a’ separately from ‘â’.\n### The Alphabet\nThe alphabet field is where you organize the alphabet of your conlang. This will determine the order of your words in the lexicon. Any letters or symbols you use in your words can be added here and will alphabetize the lexicon according to the order you write here. Each alphabetization token should be separated by a space: this way, it is possible to alphabetize multi-character tokens (ie 'sh') separately from single-character tokens and other multi-character tokens (ie 's', 'sz'). \n\n## Editor Panel\nBelow the Alphabet panel we have the Editor panel on the left, where you can add new words and edit existing words.\nIn the Editor panel, you’ll see three text boxes when using the default settings. There are some advanced settings which alter the appearance of this tab, which you can read about on other pages in this wiki. \n### New Word & Pronunciation\nThe text box under ‘New Word’ is where you type your new words. The intention is that you use your romanized orthography here, although technically this is not necessary. Under this text box is where the pronunciation will automatically fill in. Lexicanter automatically updates pronunciations in your lexicon based on rules you can specify in the Phonology tab. See [Pronunciation Rules](https://github.com/Saturnine-Softworks/Lexicanter/wiki/Pronunciation-Rules) to read up on how to write these. \n### Irregular Pronunciations\nIf the pronunciation is manually altered, it will not automatically update unless the word itself is edited, so keep this in mind when making manual changes.\n\n### Definitions and Senses\nThe next text field is for the definition of the word. If the word has multiple definitions, you may write all of them in this first text box if you wish; however, Lexicanter offers a way you can format multiple definitions separately. By clicking the ‘Add Sense’ button, you can create another set of text boxes for another definition and its tags. \n\n### Tags\nTags are a useful way to organize and filter through the words in your lexicon, and they can also be utilized by advanced users for setting up automatic inflection tables. Each sense of a word is allowed to have its own set of tags. Tags are arbitrary space-separated terms which will appear above the sense definition in the lexicon, and can be searched by. One advantage to using multiple senses for separate definitions is that they can each have their own tags. \n\n## Lexicon Panel\n### Adding and Editing Words\nClicking the ‘Add Word’ button will add your new word to the lexicon on the right.\nIf you attempt to add a word that already exists, you will be given the option to ‘overwrite’ or ‘append the definition’ to the existing word. To edit the word, right-click on it in the lexicon panel. \n\n### Searching\nIn the lexicon panel, there are three text boxes along the top. These are the lexicon’s search functions. You can search the lexicon for specific words, definitions, and tags. \n\nThere are some special functions which can be applied to help find specific entries. The character `^` means *word boundary*. \nSearching for `^an` will only show results which *start* with 'an', and searching `an^` will only show results that *end* with 'an'. Just searching 'an' will show results which have 'an' anywhere in the word. \nIn both the tags and definition searches, you can prefix your search with `!` to only show results which have your search term as a whole word. For example, searching for the tag `culture` will also show words tagged 'agriculture' and 'horticulture', but searching for `!culture` will only show words tagged 'culture'. \n",Phrasebook:"# Phrasebook Tab\nLexicanter’s Phrasebook feature allows you to add phrases with all the features of the main Lexicon. When opening the Phrasebook tab, you’ll see three panels. At the left are the Categories where you can organize your phrases; to the right is where your phrases will be displayed depending on what category is selected; and at the bottom is where you can add and edit phrases.\n\nWhen adding new phrases, it functions the same as the Lexicon tab. On the bottom left, when the phrase is added it will have pronunciation rules applied automatically. You can add the definition and tags to organize it even further. Under that is a fourth textbox to enter the category of the phrase. This can be a single or multi-word phrase. If you are already viewing the phrases in a category, this text box will be filled in for you.\n\nOn the right side of the phrase editor panel, you can add variants - or other versions - of the new phrase. You can add as many variants as needed.\nThe ‘Add Phrase’ button will add the new phrase, as well as the category if it is not already present.\nOn the top right panel, there are search functions just like in the Lexicon tab and can be used to search the Phrasebook.\n",Documenting:"# The Documentation Tab\nWhen you first open the Documentation tab, you’ll notice that it is empty save for a single line of text and a `+` on the far right. This tab can be used to add details about your conlang using text and tables. When you click on the `+`, you’ll see three options: Text, Heading, and Table. Clicking any of these will create the corresponding block section.\n\n## Tools for Documenting Your Language\n### Headings\nA heading will place your cursor and all you need to do is type. A large, bold font will be used by default. To the left of that new text, you’ll see a `+` and a new button with 6 dots. Clicking this will give you the option to fine tune that section of text. You can change the heading type, move it up or down and delete it entirely.\n\n### Paragraphs and Formatting\nClicking the `+` again will give you the options for other sections to add, such as a paragraph section. Additionally, in any type of block, you can highlight text to apply a range of styles to it, such as italics, bolding, underlining, and hyperlinking. If you wish to have linebreaks within the same paragraph block, you can press Shift+Enter. Pressing Enter alone will make a create a new paragraph block.\n\n### Tables\nThe last type of section to add is the table. When you first add it, there will be three rows and three columns. You can click the `+`’s just right and to the bottom of the table to add new rows or columns. Hovering over a specific table cell will bring up a button with 4 dots, which can be used to add rows above/below, columns to the left/right or to delete an entire row or column. For fine tuning the table, you have two different options along with the standard move up/down and delete: 'With headings' and 'Without headings'. By default, the table is set to 'Without headings'. Selecting 'With headings' will make the text in the top row of cells bold, and add a slightly thicker border to the bottom of that row.\nTo navigate rows and columns within the table, you can use the arrow keys to go left and right, the Enter key to go directly down, or simply click in the cell you want to edit.\n","Pronunciation Rules":"# The Sound Change Engine\nLexicanter uses a custom-built sound change engine to allow you to configure automatic orthography to phonetic notation conversion.\n\nIf you're not familiar with sound change appliers, you might be lost here, and if you *are* familiar with sound change appliers, you might be wondering how such a thing is supposed to be used to convert your romanization to IPA. In any case, let's start from the beginning. \n\n## The Basics\n### Defining Rules\nLet's say you write the phoneme /θ/ as ⟨th⟩. To convert your *orthograph* ⟨th⟩ to *phonetic notation* /θ/, we can use a rule. \n```\nth > θ\n```\n### Using Contexts\nThis is straightforward enough. ⟨th⟩ becomes /θ/. But what if /θ/ only occurs before front-vowels, and everywhere else it's /tʰ/. How would we write a rule to accomodate for this? One way is to use a *context*. \n```\nth > θ / _e\nth > θ / _i\nth > tʰ\n```\n### Anonymous Categories\nNow we're telling it only to turn ⟨th⟩ into /θ/ if it comes before /e/ or /i/. But this is a little bulky; we can condense these rules. \n```\nth > θ / _{e, i}\nth > tʰ\n```\nThese two rules do the exact same thing as the last set, but now we're using an *anonymous category* `{e, i}` to mean 'either e or i'. \n### Named Categories\nBut let's say we have several rules which make use of the same anonymous category:\n```\nth > θ / _{e, i}\nth > tʰ\nc > s / _{e, i}\nc > k\ng > ʤ / _{e, i}\n```\nWe can avoid writing `{e, i}` a bunch of times by defining a *named category*. \n```\nE :: e, i\nth > θ / _E\nth > tʰ\nc > s / _E\nc > k\ng > ʤ / _E\n```\nThat's a little better. \n### Category Conversion\nBut several of these rules are very similar. There's something we can do about that:\n```\nE :: e, i\n{th, c, g} > {θ, s, ʤ} / _E\n{th, c} > {tʰ, k}\n```\nWe can create anonymous categories of equal length on both sides of the conversion in order to convert between them. We can also do this with named categories, if we prefer:\n```\nP :: th, c, g\nF :: θ, s, ʤ\nK :: tʰ, k, g\nE :: e, i\nP > F / _E\nP > K\n```\nThis takes up a few more lines, but now we can re-use these named categories in further rules should we need to. \n\n## Advanced Usage\nNow that we understand the basics, let's look at how Lexicanter's sound change engine can deal with common and important edge cases.\n\n### Alternate Rule Formats\nBefore we get into those, though, let's briefly talk about the rule format. On this page, I've been using the formats\n```\npattern > substitution\npattern > substitution / context\n```\nIn the first case, the implicit context is just `_`, or 'always'. \nBut many of you may be familiar with another standard sound change notation format:\n```\npattern/substitution/context\n```\nLexicanter accepts rules written this way as well. In fact, all of the following are valid and will be accepted:\n```\npattern>substitution\npattern / substitution\npattern/substitution / context\npattern  > substitution/context\n```\nThe rule parser ignores all spaces, and the implicit 'always' context shorthand can be done with either `>` or `/` rules.\n\n### Word Boundaries\nOften times, the pronunciation of a grapheme changes depending on whether or not it's at the beginning or end of a word. Lexicanter reserves two symbols for this purpose: `^` and `#`. Both of them have the exact same purpose, and which one you use is a matter of personal preference. I'll be using `^`. \n\nTurn ⟨e⟩ into /ə/ at the end of words:\n```\ne > ə / _^\n```\nTurn ⟨y⟩ to /ɪ/ at the beginning of words:\n```\ny > ɪ / ^_\n```\n\n### Exceptions\nSometimes a grapheme has a pronunciation in all except a specific case. \nFor example, this rule turns all ⟨x⟩ into /ks/ as long as they are preceded by anything except /e/ or /i/:\n```\nx > ks / {!e, i}_\n```\nNote that this does assume `{!e}` must be *some* character, just not the ones in the group. If you would like to make this rule also apply at word boundaries, you can write it as so:\n```\nx > ks / {^, {!e, i}}_\n```\nor write it as two rules:\n```\nx > ks / {e, i}_\nx > ks / ^_\n```\nThere are usually multiple ways to get things to happen. \n\n### Wildcards\nSometimes, you just need to specify *any character at all* must be in a certain position. For that, another character is reserved: `.`.\nThe following rules turns ⟨h⟩ to /ç/ when it comes before /u/ and two other character:\n```\nh > ç / _u..\n```\nOther times, you may need to specify that any number of certain characters can appear. Two more symbols are reserved: `*` for 0 or more and `+` for 1 or more. \nThe following rule turns ⟨y⟩ to /i/ when it comes before any number of optional /d/ and at least one /o/ before the end of a word:\n```\ny > i / _ d* o+ ^\n```\nThese two symbols can also be used with categories. Note that the spaces here will be ignored and are just for readability; the parser ignores all spaces.\n\n### Optional Members\nThere is also a way to specify that something is optional without necessarily being allowed to repeat indefinitely. The character `?` is reserved for this.\nThe following rule changes ⟨n⟩ to /ŋ/ before a single optional /g/ or /k/ followed by the end of the word. \n```\nn > ŋ / _ {g, k}? ^\n```\nAs you can see, this works with categories as well. \n\n### Reduplication\nIn rare cases, a grapheme or sequence of graphemes may always be pronounced multiple times. For these cases, we can use `_` in the substitution to represent the entire captured pattern.\nThis is also useful in some cases for auto-inflection rules. \nThe following rule turns /er/ into /erer/ wherever it comes in the middle of a word:\n```\ner > __ / ._.\n```\n\n### Prefixes & Suffixes\nWhen writing rules for auto-inflections, you may need to add prefixes and suffixes to a word. You can write such rules using an insertion format. (For these, `#` typically looks better than `^`). \nAdds a suffix:\n```\n/ate/._#\n```\nAdds a prefix:\n```\n/eta/#_.\n```\nAlternatively, you can replace the word boundary itself. Equivalent to the rules above:\n```\n# > ate / ._\n# > eta / _.\n```","Word Generator":"# Generator Modes\nThe word generator in this app has two modes. The first is designed to be as straightforward as possible, while the second mode is more complex, but also much more powerful.\n\n## Basic Phonotactics\nThere are fields for what consonants and clusters can go word-initially, medially, finally, as well as vowels and polyphthongs are available, and what sounds should never appear next to one another. The Trial Words field will try to autocomplete a word as you type based on those simple rules, and the Generate Words button will make around 24 fresh words. \n\n## Advanced Phonotactics\nAt the top of the word generator, there is a checkbox labelled Use Advanced Phonotactics. Checking it will switch the UI below it to an entirely different set-up (this does *not* delete any information you have in the default fields).\n\n### Categories\nThe first of these new fields is the Categories field. Here, you can define groups of sounds as you wish. The format is as follows in this example:\n```\nC:: m n p b t d k g f v l r th sh\nV:: a e i o u ai au ei eu oi ou\n```\nNote that each token is space-separated, unlike categories in the pronunciation rules (which are comma-separated). You can have multiple-character length tokens here. It's up to you whether to use IPA or your romanization/other orthography here.\n\n### Syllables\nThe next field is for defining, as you might guess, syllables. There are two ways you can do this. The first way is to simply write out all the allowed syllables line by line, such as\n```\nV\nCV\nClV\nCVC\nClVC\n```\nNote that non-category symbols used here are interpreted literally (the `l`'s in the above example will actually just be `l`'s).\n\nThe second way is to define categories of syllables: this will be useful for the next step, so we'll try that out. \n```\nS:: V CV ClV\n1:: o Co a Ca\n2:: ete Cete Clete\n```\n\n### Structures\nWords in your language usually aren't actually allowed to freely follow generic phonotactic rules. You usually have some sort of morphological rules as well, such as all verbs having specific endings, nouns genders being marked, et cetera. Structures allow you to fully control how syllables are put together to form words. Let's start with a set for nouns that all end in `o` or `a`. \n```\nS1 SS1 SSS1\n```\nThat's it, for this simple example. All of the generated words will be 2 to 4 syllables and end in `o` or `a`. Let's now add a new set of structures by clicking the Add Set button and create a set for our verbs. \n```\n1S2 1SS2 1SSS2\n```\nIn this hypothetical language, all verbs start with a gendered prefix and end with `-ete`. Now we can generate that.\n\nLet's say we only want to have one of these sets active at a time. You can click on the checkboxes next to each set to toggle them, and when you click the Generate Words button, only the structures in enabled sets will be selected from. If you create too many sets, the `-` button next to each one will delete it. You can't delete your last set, but if all of your structure sets are empty or disabled, the word generator will just construct 1-4 syllable words composed of random syllable types from your syllables field. \n\n### Illegals\nIf there are specific sounds that should never appear next to each other, this is the place to specify those.\n```\nji wu mn ou ao\n```\nAgain, space-separated tokens. \n\nBecause it's possible to accidentally (or perhaps intentionally) ban *all* of your syllables this way, the app will only try to come up with a word that doesn't have any illegals in it 20 times. If it fails, it will show `[ ∅ ]`. If you see this show up when you try to generate words, it means that it tried and failed to generate a legal word 20 times.",Lects:"# What is a 'Lect'? \nThe term 'lect' refers agnostically to any kind of variation of a language that may be classified as a dialect, ethnolect, regiolect, cryptolect, idiolect, et cetera. Lexicanter offers a suite of features which make it easier to document your language's various lects, should you have any. \n\n## Adding, Removing, and Renaming\n### Adding\nAdding new lects can always be done safely, as adding a new lect does not change the contents of the lexicon. When you add a lect, you will be prompted to name it. Then its name will appear in a list under the other lect-related settings, with three buttons. One of these is for deleting the lect, one of these is for renaming the lect, and one of these has a special purpose: adding all words in your lexicon to this lect. This is a useful features if you create a new lect midway through developing your language which should have all or most of the existing words. \n\n### Renaming\nRenaming lects can also always be done safely, as this does not actually change the contents of the lexicon aside from the name which appears next to options and information related to the changed lect.\n\n### Removing\nRemoving lects *does not* delete the words which were assigned to that lect, but it *does* delete any pronunciations and the pronunciation rule set associated with that lect. You cannot delete the last remaining lect; there must always be at least one. Even when lect features are disabled, the app uses a lect named 'General' under the hood. \n\n## Phonetics & Semantics\n### Lect-Specific Pronunciation Rules\nThis is likely the main reason you would want to use the lect features. Each lect can have it own set of pronunciation rules, which you can write by selecting the lect from the dropdown which appears over the Pronunciations text field in the Phonology tab. To learn more about writing pronunciation rules, see the [Pronunciation Rules](https://github.com/Saturnine-Softworks/Lexicanter/wiki/Pronunciation-Rules) page. \n\n### Lexicon and Phrasebook\nIn both of these tabs, a new set of checkboxes will appear in the entry editor panel. In the Lexicon, this set of checkboxes appears for every *sense* of a word; in the phrasebook, you have this option for each *phrase*.\nChecking these boxes assigns that sense/phrase to that lect. A new pronunciation field will appear for each lect which is selected, and will be auto-filled using the pronunciation rules assigned to that lect. All of a word or phrase's pronunciations will appear beneath it in the lexicon/book. This way, you can include words and phrases which only appear in specific lects. \n",Etymology:"# Creating Etymology Trees\nWhen you enable Etymology Features under Advanced Settings, Lexicanter will reveal to you a new tab called *Etymology* and slightly change the appearance of entries in the lexicon. These features are a powerful and convenient way to document the lineages of your language's words. \n\n## The Etymology Tab\nYou'll be greeted by a small panel on the left with a search bar and two lists, labelled *Internal* and *External*. If this is your first time opening this tab, *External* is probably empty. We'll get back to that. \n\n*Internal* will be populated by a list of all of the words in your lexicon. If you click on one of these, you'll see the large panel on the left is updated. The word you clicked on will appear floating in the upper-middle of the panel, and its lexicon entry will appear slightly below. Further below, there are two columns, labelled *Ancestors* and *Descendants*, each with a checkbox labelled *Manual Entry*, unticked by default, and below that, a blank dropdown.\n\n### Editing Ancestor and Descendant Tethers\nWhen you click on either of those dropdowns, you'll be greeted with, once again, your entire lexicon. You should be able to use the keyboard to navigate this list, but since some lexicons can be massive and overwhelming, the search field at the top of the left-hand panel narrows down not only the list in that column, but also the lists you see in the dropdowns on this tab. \nAfter selecting a word from your lexicon, pressing the *Link* button will link the currently selected word to the ancestor/descendant word. As you add more ancestors and descendants, you'll see how the tree graph is drawn in this panel. \nTo remove a word from another words ancestors/descendants, find it in the list which appears in the respective column and click the *Sever* button to sever the tie. \n\n### Manual Entry\nIn many cases, you'll need to link to a word which is not in your lexicon. It may be from an ancestor language, or even from an unrelated language. For these cases, you can enable *Manual Entry*. \nWhen Manual Entry is enabled, you will see two text fields instead of a dropdown. The first of these text fields is for the related word itself, and the other text field is for specifying the *source* – that is, what language the word comes from. \nWhen you create entries this way, they will appear in the *External* list in the left-hand panel. External words also appear in the drop-downs after they are created. \n\n### Removing Etymology Entries\nWhen a word is selected, but it has no ancestor or descendant tethers, a button will appear that allows you to delete the entry altogether. \nFor words in your lexicon, this will *not delete the word from your lexicon* - it will simply clear the space for its etymology data out of the file data. This has no permanent effect, as you can select the word from the list to create its etymology entry again, but it may help to put at ease those of you who are particularly conscious about your file sizes. \nFor external entries, this *will delete* the entry altogether. This is how you can remove words from the *External* list in the left-hand panel. \n\n## Importing Related Lexicons\nWhen Etymology features are enabled, another option will appear in the Advanced Settings section: a button which allows you to import related lexicons. Using this button, you can select another Lexicanter file to import a lexicon from. The entirety of the lexicon will be saved to your *External* etymology entries. You can manage the external lexicons in your file under Advanced Settings.\n\n## Lexicon Appearance Changes\nOn every lexical entry which is part of an etymology tree, a short, simplified version of that word's ancestry will appear beneath its senses. This makes it easy to see a word's history at a glance when viewing your lexicon. \n",Inflections:"# Inflection Features\nLexicanter offers a way to expand your lexical entries with inflection information automatically generated from sound change rules.\nIt's a useful feature for generating verb conjugation tables, noun declension tables, and the like. This feature must be enabled under\nAdvanced Settings.\n\n## The Inflection Tab\nWhen you first open this tab, there will be a single button which reads 'Add Inflection Group'.\nWhen you click on this, an inflection group editor will be created. It has two text fields: the first is labelled 'Tags',\nand the second is labelled 'RegEx Filter' and should be pre-populated with `.+`. Below that, there will be a block-based\neditor similar to what is used in the Documentation tab.\n\n### Tags\nThe tags you assign to an inflection group should correspond to tags that you use in the lexicon. For example, if this inflection\ngroup is for verbs and you've marked verbs in the lexicon with the tag `verb`, you should put that tag here. The inflection group \nwill only be applied to lexical entries with tags that match the inflection group's own tags. You can use multiple tags if you wish, \nand the inflection group will be applied to any entry that has at least one of those tags. \n\n### RegEx Filter\nYou can write a regular expression to filter which words the inflection group is applied to even further. If you're unfamiliar with regular \nexpressions, you can read up on them [here](https://www.regular-expressions.info). Some basic patterns will be described here. \nAs an example, let's say that, like in Spanish, your verbs end in -ar, -er, and -ir, and there is a different set of conjugations depending \non which ending the verb has, but in the lexicon, each kind of verb has the same 'verb' tag. You can target your inflection group toward only \n-ar verbs by writing the following RegEx filter:\n```regex\n^.+ar$\n```\nNow this inflection group will only apply to words which have the 'verb' tag *and* end in -ar.\n\n### Editor\nYou can write whatever you want in the editor. You have headings, paragraphs, tables, and document markup at your disposal. However, \nthere is a key difference between this and the Documentation tab editor: the app will check through the table cells of all tables in your \ninflection group when it applies the inflection group to a word, and if the table cell has a sound change rule in it, it will replace the\ncontents of that cell with the word and apply the rule to it. So for example, if a table has a cell in it with the rule\n```\nar > o / _^\n```\nThen in the lexicon tab, on the word *hablar*, that cell will be replaced with 'hablo'. Cells which do not have `/` or `>` in them are ignored. \nTo learn more about writing sound change rules in Lexicanter, read the \n[Pronunciation Rules](https://github.com/Saturnine-Softworks/Lexicanter/wiki/Pronunciation-Rules) page. \n\n## In the Lexicon\nAfter creating inflection groups, a dropdown labelled 'Inflections' will appear in the lexical entries underneath the senses to \nwhich that inflection group applies. \n\n## Agenda\nSeveral improvements are planned for the Inflections features, including a way to specify irregulars and a UI-based way to filter \nwords instead of requiring the user to manually write RegEx filters (although that will remain an option for advanced users). \n        "},i=Object.keys(o);let r=i[0];return[r,o,i,e=>n(0,r=e)]}class lg extends Te{constructor(e){super(),Ee(this,e,ag,sg,s,{})}}function cg(e,t,n){const o=e.slice();return o[13]=t[n],o}function hg(e,t,n){const o=e.slice();return o[16]=t[n],o}function dg(e){let t;return{c(){t=E("label"),t.textContent="Search by word…",L(t,"for","ref-search-wrd"),M(t,"position","absolute"),M(t,"top","0.5em"),M(t,"left","1em")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function ug(e){let t;return{c(){t=E("label"),t.textContent="Search by tags…",L(t,"for","ref-search-tag"),M(t,"position","absolute"),M(t,"top","0.5em"),M(t,"left","1em")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function pg(e){let t;return{c(){t=E("label"),t.textContent="Search definitions…",L(t,"for","ref-search-def"),M(t,"position","absolute"),M(t,"top","0.33em"),M(t,"left","1em")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function fg(e){let t,n,o,i,r,s,a,l=e[0].Lects,c=[];for(let t=0;t<l.length;t+=1)c[t]=gg(hg(e,l,t));return{c(){t=E("div"),n=E("label"),o=S("Filter by lect: \n                "),i=E("select"),r=E("option"),r.textContent="All";for(let e=0;e<c.length;e+=1)c[e].c();r.__value="",r.value=r.__value,void 0===e[5]&&ne((()=>e[11].call(i))),L(t,"class","column")},m(l,h){k(l,t,h),w(t,n),w(n,o),w(n,i),w(i,r);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(i,null);P(i,e[5],!0),s||(a=_(i,"change",e[11]),s=!0)},p(e,t){if(1&t){let n;for(l=e[0].Lects,n=0;n<l.length;n+=1){const o=hg(e,l,n);c[n]?c[n].p(o,t):(c[n]=gg(o),c[n].c(),c[n].m(i,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}33&t&&P(i,e[5])},d(e){e&&x(t),C(c,e),s=!1,a()}}}function gg(e){let t,n,o,i=e[16]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[16],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){1&r&&i!==(i=e[16]+"")&&O(n,i),1&r&&o!==(o=e[16])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function mg(e){let t,n,o,i,r=e[0].Name+"";return{c(){t=E("p"),n=S("The lexicon of "),o=S(r),i=S(" is empty."),L(t,"class","info"),L(t,"id","ref-lex-body")},m(e,r){k(e,t,r),w(t,n),w(t,o),w(t,i)},p(e,t){1&t&&r!==(r=e[0].Name+"")&&O(o,r)},d(e){e&&x(t)}}}function bg(e){let t,n;return t=new yd({props:{word:e[13],source:e[0].Lexicon[e[13]],showInflections:e[0].ShowInflection,showEtymology:!0}}),{c(){ye(t.$$.fragment)},m(e,o){ke(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.word=e[13]),3&n&&(o.source=e[0].Lexicon[e[13]]),1&n&&(o.showInflections=e[0].ShowInflection),t.$set(o)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){ge(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function wg(e){let t,n,o,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,T,S=!e[2]&&dg(),I=!e[3]&&ug(),A=!e[4]&&pg(),O=e[0].UseLects&&fg(e),P=e[1],N=[];for(let t=0;t<P.length;t+=1)N[t]=bg(cg(e,P,t));const R=e=>ge(N[e],1,1,(()=>{N[e]=null}));let D=null;return P.length||(D=mg(e)),{c(){t=E("div"),n=E("div"),S&&S.c(),o=B(),r=E("input"),s=B(),a=E("div"),I&&I.c(),l=B(),c=E("input"),h=B(),d=E("div"),u=E("div"),A&&A.c(),p=B(),f=E("input"),g=B(),O&&O.c(),m=B(),b=E("div");for(let e=0;e<N.length;e+=1)N[e].c();D&&D.c(),L(r,"id","ref-search-wrd"),L(r,"type","text"),L(r,"class","search"),L(n,"class","column search-container"),L(c,"id","ref-search-tag"),L(c,"type","text"),L(c,"class","search"),L(a,"class","column search-container"),L(t,"class","row"),L(f,"id","ref-search-def"),L(f,"type","text"),L(f,"class","search"),L(u,"class","search-container column"),L(d,"class","row"),L(b,"class","scrolled"),M(b,"height","88%")},m(i,x){k(i,t,x),w(t,n),S&&S.m(n,null),w(n,o),w(n,r),$(r,e[2]),w(t,s),w(t,a),I&&I.m(a,null),w(a,l),w(a,c),$(c,e[3]),k(i,h,x),k(i,d,x),w(d,u),A&&A.m(u,null),w(u,p),w(u,f),$(f,e[4]),w(d,g),O&&O.m(d,null),k(i,m,x),k(i,b,x);for(let e=0;e<N.length;e+=1)N[e]&&N[e].m(b,null);D&&D.m(b,null),v=!0,y||(T=[_(r,"input",e[8]),_(r,"input",e[6]),_(c,"input",e[9]),_(c,"input",e[6]),_(f,"input",e[10]),_(f,"input",e[6])],y=!0)},p(e,[t]){if(e[2]?S&&(S.d(1),S=null):S||(S=dg(),S.c(),S.m(n,o)),4&t&&r.value!==e[2]&&$(r,e[2]),e[3]?I&&(I.d(1),I=null):I||(I=ug(),I.c(),I.m(a,l)),8&t&&c.value!==e[3]&&$(c,e[3]),e[4]?A&&(A.d(1),A=null):A||(A=pg(),A.c(),A.m(u,p)),16&t&&f.value!==e[4]&&$(f,e[4]),e[0].UseLects?O?O.p(e,t):(O=fg(e),O.c(),O.m(d,null)):O&&(O.d(1),O=null),3&t){let n;for(P=e[1],n=0;n<P.length;n+=1){const o=cg(e,P,n);N[n]?(N[n].p(o,t),fe(N[n],1)):(N[n]=bg(o),N[n].c(),fe(N[n],1),N[n].m(b,null))}for(ue(),n=P.length;n<N.length;n+=1)R(n);pe(),!P.length&&D?D.p(e,t):P.length?D&&(D.d(1),D=null):(D=mg(e),D.c(),D.m(b,null))}},i(e){if(!v){for(let e=0;e<P.length;e+=1)fe(N[e]);v=!0}},o(e){N=N.filter(Boolean);for(let e=0;e<N.length;e+=1)ge(N[e]);v=!1},d(e){e&&x(t),S&&S.d(),I&&I.d(),e&&x(h),e&&x(d),A&&A.d(),O&&O.d(),e&&x(m),e&&x(b),C(N,e),D&&D.d(),y=!1,i(T)}}}function vg(e,t,n){let o,i,r;h(e,ni,(e=>n(7,o=e)));let s="",a="",l="",c="",d={};return e.$$.update=()=>{129&e.$$.dirty&&(n(0,i=o),n(1,r=pi(i.Lexicon)))},[i,r,s,a,l,c,function(){d={};for(let e in i.Lexicon)`^${e}^`.toLowerCase().includes(s.toLowerCase())&&i.Lexicon[e].Senses.some((e=>e.tags.join("^").toLowerCase().includes(a.toLowerCase())))&&i.Lexicon[e].Senses.some((e=>e.definition.toLowerCase().match(new RegExp(l.replaceAll("^","\\b"),"gi"))))&&(""===c||i.Lexicon[e].Senses.some((e=>e.lects.includes(c))))&&(d[e]=i.Lexicon[e]);n(1,r=pi(d))},o,function(){s=this.value,n(2,s)},function(){a=this.value,n(3,a)},function(){l=this.value,n(4,l)},function(){c=N(this),n(5,c),n(0,i),n(7,o)}]}class yg extends Te{constructor(e){super(),Ee(this,e,vg,wg,s,{})}}function kg(e,t,n){const o=e.slice();return o[11]=t[n],o}function xg(e,t,n){const o=e.slice();return o[11]=t[n],o}function Cg(e){let t,n,o,i=e[11]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[11],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){64&r&&i!==(i=e[11]+"")&&O(n,i),64&r&&o!==(o=e[11])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Eg(e){let t,n,o,i=e[11]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[11],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){32&r&&i!==(i=e[11]+"")&&O(n,i),32&r&&o!==(o=e[11])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Tg(e){let t,n;return t=new yd({props:{word:e[1],source:e[0].Lexicon[e[1]],showInflections:e[0].ShowInflection,showEtymology:!0}}),{c(){ye(t.$$.fragment)},m(e,o){ke(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.word=e[1]),3&n&&(o.source=e[0].Lexicon[e[1]]),1&n&&(o.showInflections=e[0].ShowInflection),t.$set(o)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){ge(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Sg(e){let t,n,o,i,r,s,a,l,c,h,d=e[6],u=[];for(let t=0;t<d.length;t+=1)u[t]=Cg(xg(e,d,t));let p=e[5],f=[];for(let t=0;t<p.length;t+=1)f[t]=Eg(kg(e,p,t));r=new cu({props:{tree:e[2],width:e[3],height:e[4]}}),r.$on("select",e[9]);let g=e[1]in e[0].Lexicon&&Tg(e);return{c(){t=E("select"),n=E("optgroup");for(let e=0;e<u.length;e+=1)u[e].c();o=E("optgroup");for(let e=0;e<f.length;e+=1)f[e].c();i=B(),ye(r.$$.fragment),s=B(),g&&g.c(),a=I(),L(n,"label","Internal"),L(o,"label","External"),void 0===e[1]&&ne((()=>e[8].call(t)))},m(d,p){k(d,t,p),w(t,n);for(let e=0;e<u.length;e+=1)u[e]&&u[e].m(n,null);w(t,o);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(o,null);P(t,e[1],!0),k(d,i,p),ke(r,d,p),k(d,s,p),g&&g.m(d,p),k(d,a,p),l=!0,c||(h=_(t,"change",e[8]),c=!0)},p(e,[i]){if(64&i){let t;for(d=e[6],t=0;t<d.length;t+=1){const o=xg(e,d,t);u[t]?u[t].p(o,i):(u[t]=Cg(o),u[t].c(),u[t].m(n,null))}for(;t<u.length;t+=1)u[t].d(1);u.length=d.length}if(32&i){let t;for(p=e[5],t=0;t<p.length;t+=1){const n=kg(e,p,t);f[t]?f[t].p(n,i):(f[t]=Eg(n),f[t].c(),f[t].m(o,null))}for(;t<f.length;t+=1)f[t].d(1);f.length=p.length}98&i&&P(t,e[1]);const s={};4&i&&(s.tree=e[2]),8&i&&(s.width=e[3]),16&i&&(s.height=e[4]),r.$set(s),e[1]in e[0].Lexicon?g?(g.p(e,i),3&i&&fe(g,1)):(g=Tg(e),g.c(),fe(g,1),g.m(a.parentNode,a)):g&&(ue(),ge(g,1,1,(()=>{g=null})),pe())},i(e){l||(fe(r.$$.fragment,e),fe(g),l=!0)},o(e){ge(r.$$.fragment,e),ge(g),l=!1},d(e){e&&x(t),C(u,e),C(f,e),e&&x(i),xe(r,e),e&&x(s),g&&g.d(e),e&&x(a),c=!1,h()}}}function Bg(e,t,n){let o;h(e,ni,(e=>n(7,o=e)));let i,r,s,a,l,c=o,d="";return e.$$.update=()=>{128&e.$$.dirty&&n(0,c=o),3&e.$$.dirty&&(n(2,i=function(){const e=[];Object.keys(c.Etymologies).forEach((t=>{if(t!==d&&c.Etymologies[t].descendants.some((e=>e.name===d))){const n="<< THIS LANGUAGE >>"===c.Etymologies[t].source?c.Name:c.Etymologies[t].source;e.push([t,n])}}));const t=[];return d in c.Etymologies&&c.Etymologies[d].descendants.forEach((e=>{t.push([e.name,"<< THIS LANGUAGE >>"===e.source?c.Name:e.source])})),{name:d,children:t.map((e=>({name:e[0],source:e[1]}))),parents:e.map((e=>({name:e[0],source:e[1]})))}}()),n(3,r=.82*window.innerWidth*.33),n(4,s=.5*window.innerHeight)),1&e.$$.dirty&&(()=>{const e={};Object.keys(c.Relatives).forEach((t=>{Object.keys(c.Relatives[t]).forEach((n=>{n in c.Lexicon||(e[n]=c.Relatives[t][n])}))})),Object.keys(c.Etymologies).forEach((t=>{t in c.Lexicon||(e[t]={Senses:[],pronunciations:{}})})),n(5,a=pi(e)),n(6,l=pi(c.Lexicon))})()},[c,d,i,r,s,a,l,o,function(){d=N(this),n(1,d),n(5,a),n(0,c),n(7,o),n(6,l),n(0,c),n(7,o)},e=>n(1,d=e.detail)]}class Ig extends Te{constructor(e){super(),Ee(this,e,Bg,Sg,s,{})}}function _g(t){let n;return{c(){n=E("div"),L(n,"id","ref-docs"),L(n,"class","row text-center"),M(n,"height","92vh"),M(n,"overflow-y","auto"),M(n,"font-family","Gentium ")},m(e,t){k(e,n,t)},p:e,i:e,o:e,d(e){e&&x(n)}}}function Lg(e,t,n){let o;h(e,ni,(e=>n(0,o=e)));let i=o;return gs(i.Docs,"ref-docs"),e.$$.update=()=>{1&e.$$.dirty&&(i=o)},[o]}class Ag extends Te{constructor(e){super(),Ee(this,e,Lg,_g,s,{})}}function Og(e,t,n){const o=e.slice();return o[6]=t[n][0],o[7]=t[n][1],o}function $g(e,t,n){const o=e.slice();return o[10]=t[n],o}function Mg(e){let t,n,o,i=e[10]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[10],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){1&r&&i!==(i=e[10]+"")&&O(n,i),1&r&&o!==(o=e[10])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Pg(e){let t,n,o,i,r,s,a,l=e[6]+"",c=e[7]+"";return{c(){t=E("label"),n=S(l),o=B(),i=E("p"),r=S(c),s=B(),a=E("br"),L(i,"class","pronunciation")},m(e,l){k(e,t,l),w(t,n),w(t,o),w(t,i),w(i,r),w(t,s),k(e,a,l)},p(e,t){1&t&&l!==(l=e[6]+"")&&O(n,l),1&t&&c!==(c=e[7]+"")&&O(r,c)},d(e){e&&x(t),e&&x(a)}}}function Ng(t){let n,o,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,T,I,A=t[0].Lects,O=[];for(let e=0;e<A.length;e+=1)O[e]=Mg($g(t,A,e));let N=Object.entries(t[0].Phonotactics.General),R=[];for(let e=0;e<N.length;e+=1)R[e]=Pg(Og(t,N,e));return{c(){n=E("div"),o=E("label"),r=S("Pronunciations\n        "),s=E("select");for(let e=0;e<O.length;e+=1)O[e].c();a=B(),l=E("textarea"),h=B(),d=E("textarea"),u=B(),p=E("textarea"),g=B(),m=E("br"),b=E("hr"),v=E("br"),y=B();for(let e=0;e<R.length;e+=1)R[e].c();void 0===t[1]&&ne((()=>t[4].call(s))),L(l,"rows","12"),L(l,"class","pronunciation text-left"),l.value=c=t[0].Pronunciations[t[1]],l.readOnly=!0,L(d,"rows","2"),L(p,"rows","3"),L(p,"class","pronunciation"),p.value=f=vi(t[2],t[1],t[0]),p.readOnly=!0,L(n,"class","scrolled"),M(n,"height","100%")},m(e,i){k(e,n,i),w(n,o),w(o,r),w(o,s);for(let e=0;e<O.length;e+=1)O[e]&&O[e].m(s,null);P(s,t[1],!0),w(n,a),w(n,l),w(n,h),w(n,d),$(d,t[2]),w(n,u),w(n,p),w(n,g),w(n,m),w(n,b),w(n,v),w(n,y);for(let e=0;e<R.length;e+=1)R[e]&&R[e].m(n,null);T||(I=[_(s,"change",t[4]),_(d,"input",t[5])],T=!0)},p(e,[t]){if(1&t){let n;for(A=e[0].Lects,n=0;n<A.length;n+=1){const o=$g(e,A,n);O[n]?O[n].p(o,t):(O[n]=Mg(o),O[n].c(),O[n].m(s,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=A.length}if(3&t&&P(s,e[1]),3&t&&c!==(c=e[0].Pronunciations[e[1]])&&(l.value=c),4&t&&$(d,e[2]),7&t&&f!==(f=vi(e[2],e[1],e[0]))&&(p.value=f),1&t){let o;for(N=Object.entries(e[0].Phonotactics.General),o=0;o<N.length;o+=1){const i=Og(e,N,o);R[o]?R[o].p(i,t):(R[o]=Pg(i),R[o].c(),R[o].m(n,null))}for(;o<R.length;o+=1)R[o].d(1);R.length=N.length}},i:e,o:e,d(e){e&&x(n),C(O,e),C(R,e),T=!1,i(I)}}}function Rg(e,t,n){let o;h(e,ni,(e=>n(3,o=e)));let i=o,r=i.Lects[0],s="";return e.$$.update=()=>{8&e.$$.dirty&&n(0,i=o)},[i,r,s,o,function(){r=N(this),n(1,r),n(0,i),n(3,o)},function(){s=this.value,n(2,s)}]}class Dg extends Te{constructor(e){super(),Ee(this,e,Rg,Ng,s,{})}}function zg(e,t,n){const o=e.slice();return o[4]=t[n],o}function Fg(e,t,n){const o=e.slice();return o[7]=t[n],o}function Hg(e){let t,n,o,i,r,s,a,l,c=Object.keys(e[0].Phrasebook),h=[];for(let t=0;t<c.length;t+=1)h[t]=jg(Fg(e,c,t));let d=Object.keys(e[0].Phrasebook[e[1]]),u=[];for(let t=0;t<d.length;t+=1)u[t]=Ug(zg(e,d,t));const p=e=>ge(u[e],1,1,(()=>{u[e]=null}));return{c(){t=E("div"),n=E("label"),o=S("Phrasebook\n            "),i=E("select");for(let e=0;e<h.length;e+=1)h[e].c();r=B();for(let e=0;e<u.length;e+=1)u[e].c();void 0===e[1]&&ne((()=>e[3].call(i))),L(t,"class","scrolled"),M(t,"height","100%")},m(c,d){k(c,t,d),w(t,n),w(n,o),w(n,i);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(i,null);P(i,e[1],!0),w(t,r);for(let e=0;e<u.length;e+=1)u[e]&&u[e].m(t,null);s=!0,a||(l=_(i,"change",e[3]),a=!0)},p(e,n){if(1&n){let t;for(c=Object.keys(e[0].Phrasebook),t=0;t<c.length;t+=1){const o=Fg(e,c,t);h[t]?h[t].p(o,n):(h[t]=jg(o),h[t].c(),h[t].m(i,null))}for(;t<h.length;t+=1)h[t].d(1);h.length=c.length}if(3&n&&P(i,e[1]),3&n){let o;for(d=Object.keys(e[0].Phrasebook[e[1]]),o=0;o<d.length;o+=1){const i=zg(e,d,o);u[o]?(u[o].p(i,n),fe(u[o],1)):(u[o]=Ug(i),u[o].c(),fe(u[o],1),u[o].m(t,null))}for(ue(),o=d.length;o<u.length;o+=1)p(o);pe()}},i(e){if(!s){for(let e=0;e<d.length;e+=1)fe(u[e]);s=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)ge(u[e]);s=!1},d(e){e&&x(t),C(h,e),C(u,e),a=!1,l()}}}function jg(e){let t,n,o,i=e[7]+"";return{c(){t=E("option"),n=S(i),t.__value=o=e[7],t.value=t.__value},m(e,o){k(e,t,o),w(t,n)},p(e,r){1&r&&i!==(i=e[7]+"")&&O(n,i),1&r&&o!==(o=e[7])&&(t.__value=o,t.value=t.__value)},d(e){e&&x(t)}}}function Ug(e){let t,n;return t=new tp({props:{phrase:e[4],reference:!0,refCat:e[1]}}),{c(){ye(t.$$.fragment)},m(e,o){ke(t,e,o),n=!0},p(e,n){const o={};3&n&&(o.phrase=e[4]),2&n&&(o.refCat=e[1]),t.$set(o)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){ge(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Wg(e){let t,n,o=void 0!==e[1]&&e[1]in e[0].Phrasebook&&Hg(e);return{c(){o&&o.c(),t=I()},m(e,i){o&&o.m(e,i),k(e,t,i),n=!0},p(e,[n]){void 0!==e[1]&&e[1]in e[0].Phrasebook?o?(o.p(e,n),3&n&&fe(o,1)):(o=Hg(e),o.c(),fe(o,1),o.m(t.parentNode,t)):o&&(ue(),ge(o,1,1,(()=>{o=null})),pe())},i(e){n||(fe(o),n=!0)},o(e){ge(o),n=!1},d(e){o&&o.d(e),e&&x(t)}}}function qg(e,t,n){let o;h(e,ni,(e=>n(2,o=e)));let i=o,r="";return e.$$.update=()=>{4&e.$$.dirty&&n(0,i=o),1&e.$$.dirty&&n(1,r=Object.keys(i.Phrasebook)[0])},[i,r,o,function(){r=N(this),n(1,r),n(0,i),n(2,o),n(0,i),n(2,o)}]}class Vg extends Te{constructor(e){super(),Ee(this,e,qg,Wg,s,{})}}function Gg(e,t,n){const o=e.slice();return o[5]=t[n],o[7]=n,o}function Yg(e){let t,n,o,i,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,C,T,I,_,A,$,P,N,R=e[5].tags.join(" ")+"",D=e[5].filter+"";return{c(){t=E("div"),n=E("div"),o=E("label"),i=S("Tags\n                    "),r=E("div"),s=E("p"),a=S(R),l=B(),c=E("label"),h=S("RegEx Filter\n                    "),d=E("div"),u=E("p"),p=S("/"),f=S(D),g=S("/"),m=B(),b=E("div"),v=E("label"),y=S("Rule Categories\n                    "),C=E("div"),T=E("textarea"),_=B(),A=E("div"),$=B(),P=E("br"),N=E("br"),L(s,"class","lex-body"),L(u,"class","lex-body"),L(n,"class","column"),L(T,"class","text-left pronunciation"),L(T,"rows","3"),T.value=I=e[5].categories,T.readOnly=!0,L(b,"class","column"),L(t,"class","row"),M(t,"width","66%"),L(A,"class","codex-editor"),L(A,"id",`ref inflection ${e[7]}`),M(A,"font-family","Gentium")},m(e,x){k(e,t,x),w(t,n),w(n,o),w(o,i),w(o,r),w(r,s),w(s,a),w(n,l),w(n,c),w(c,h),w(c,d),w(d,u),w(u,p),w(u,f),w(u,g),w(t,m),w(t,b),w(b,v),w(v,y),w(v,C),w(C,T),k(e,_,x),k(e,A,x),k(e,$,x),k(e,P,x),k(e,N,x)},p(e,t){1&t&&R!==(R=e[5].tags.join(" ")+"")&&O(a,R),1&t&&D!==(D=e[5].filter+"")&&O(f,D),1&t&&I!==(I=e[5].categories)&&(T.value=I)},d(e){e&&x(t),e&&x(_),e&&x(A),e&&x($),e&&x(P),e&&x(N)}}}function Kg(t){let n,o=t[0].Inflections,i=[];for(let e=0;e<o.length;e+=1)i[e]=Yg(Gg(t,o,e));return{c(){n=E("div");for(let e=0;e<i.length;e+=1)i[e].c();L(n,"class","scrolled"),M(n,"height","100%")},m(e,t){k(e,n,t);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(n,null)},p(e,[t]){if(1&t){let r;for(o=e[0].Inflections,r=0;r<o.length;r+=1){const s=Gg(e,o,r);i[r]?i[r].p(s,t):(i[r]=Yg(s),i[r].c(),i[r].m(n,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}},i:e,o:e,d(e){e&&x(n),C(i,e)}}}function Xg(e,t,n){let o;h(e,ni,(e=>n(1,o=e)));let i=o;var r;!function(e){e.VERBOSE="VERBOSE",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR"}(r||(r={}));let s=[];return Y((()=>{!function(e){for(let e=s.length;e>0;e--)s[e-1].destroy(),s.pop();i.Inflections.filter(((t,n)=>n!==e)).forEach(((e,t)=>{const n={holder:`ref inflection ${t}`,data:e.tables,tools:{underline:ps,monospace:fs,table:{class:cs,inlineToolbar:!0,config:{rows:3,cols:3,withHeadings:!0}},header:{class:Hr,inlineToolbar:!0}},minHeight:30,logLevel:r.ERROR,readOnly:!0},o=new Fo(n);s.push(o)}))}(1/0)})),e.$$.update=()=>{2&e.$$.dirty&&n(0,i=o)},[i,o]}class Zg extends Te{constructor(e){super(),Ee(this,e,Xg,Kg,s,{})}}function Jg(e,t,n){const o=e.slice();return o[8]=t[n],o[10]=n,o}function Qg(e,t,n){const o=e.slice();return o[8]=t[n],o[10]=n,o}function em(e){let t,n,o,i,r,s,a,l,c,h,d,u=e[4],p=[];for(let t=0;t<u.length;t+=1)p[t]=nm(Qg(e,u,t));let f=e[5],g=[];for(let t=0;t<f.length;t+=1)g[t]=om(Jg(e,f,t));const m=e=>ge(g[e],1,1,(()=>{g[e]=null}));return{c(){t=E("div"),n=E("p"),o=S("β"),i=S(e[1]),r=S("-"),s=S(e[2]),a=S(" —"),l=B();for(let e=0;e<p.length;e+=1)p[e].c();c=B();for(let e=0;e<g.length;e+=1)g[e].c();h=I(),L(n,"class","version-info"),L(t,"class","button-container")},m(e,u){k(e,t,u),w(t,n),w(n,o),w(n,i),w(n,r),w(n,s),w(n,a),w(t,l);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(t,null);k(e,c,u);for(let t=0;t<g.length;t+=1)g[t]&&g[t].m(e,u);k(e,h,u),d=!0},p(e,n){if((!d||2&n)&&O(i,e[1]),(!d||4&n)&&O(s,e[2]),25&n){let o;for(u=e[4],o=0;o<u.length;o+=1){const i=Qg(e,u,o);p[o]?p[o].p(i,n):(p[o]=nm(i),p[o].c(),p[o].m(t,null))}for(;o<p.length;o+=1)p[o].d(1);p.length=u.length}if(33&n){let t;for(f=e[5],t=0;t<f.length;t+=1){const o=Jg(e,f,t);g[t]?(g[t].p(o,n),fe(g[t],1)):(g[t]=om(o),g[t].c(),fe(g[t],1),g[t].m(h.parentNode,h))}for(ue(),t=f.length;t<g.length;t+=1)m(t);pe()}},i(e){if(!d){for(let e=0;e<f.length;e+=1)fe(g[e]);d=!0}},o(e){g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)ge(g[e]);d=!1},d(e){e&&x(t),C(p,e),e&&x(c),C(g,e),e&&x(h)}}}function tm(e){let t,n,o,i,r,s=e[8]+"";function a(){return e[6](e[10])}return{c(){t=E("button"),n=S(s),o=B(),L(t,"class","hover-highlight tab-button"),R(t,"selected",e[0]===e[10])},m(e,s){k(e,t,s),w(t,n),w(t,o),i||(r=_(t,"click",a),i=!0)},p(n,o){e=n,1&o&&R(t,"selected",e[0]===e[10])},d(e){e&&x(t),i=!1,r()}}}function nm(e){let t,n=("Etym."!==e[8]&&"Inflect."!==e[8]||"Etym."===e[8]&&e[3].ShowEtymology||"Inflect."===e[8]&&e[3].ShowInflection)&&tm(e);return{c(){n&&n.c(),t=I()},m(e,o){n&&n.m(e,o),k(e,t,o)},p(e,o){"Etym."!==e[8]&&"Inflect."!==e[8]||"Etym."===e[8]&&e[3].ShowEtymology||"Inflect."===e[8]&&e[3].ShowInflection?n?n.p(e,o):(n=tm(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&x(t)}}}function om(e){let t,n,o,i,r;var s=e[8];return s&&(o=F(s,{})),{c(){t=E("div"),n=E("div"),o&&ye(o.$$.fragment),i=B(),L(n,"class","container"),M(n,"height","92vh"),R(t,"collapsed",e[0]!==e[10])},m(e,s){k(e,t,s),w(t,n),o&&ke(o,n,null),w(t,i),r=!0},p(e,i){if(s!==(s=e[8])){if(o){ue();const e=o;ge(e.$$.fragment,1,0,(()=>{xe(e,1)})),pe()}s?(o=F(s,{}),ye(o.$$.fragment),fe(o.$$.fragment,1),ke(o,n,null)):o=null}(!r||1&i)&&R(t,"collapsed",e[0]!==e[10])},i(e){r||(o&&fe(o.$$.fragment,e),r=!0)},o(e){o&&ge(o.$$.fragment,e),r=!1},d(e){e&&x(t),o&&xe(o)}}}function im(e){let t,n,o="object"==typeof e[3]&&em(e);return{c(){o&&o.c(),t=I()},m(e,i){o&&o.m(e,i),k(e,t,i),n=!0},p(e,[n]){"object"==typeof e[3]?o?(o.p(e,n),8&n&&fe(o,1)):(o=em(e),o.c(),fe(o,1),o.m(t.parentNode,t)):o&&(ue(),ge(o,1,1,(()=>{o=null})),pe())},i(e){n||(fe(o),n=!0)},o(e){ge(o),n=!1},d(e){o&&o.d(e),e&&x(t)}}}function rm(e,t,n){let o;h(e,ni,(e=>n(3,o=e)));const{ipcRenderer:i}=require("electron"),r=[yg,Ig,Vg,Zg,Dg,Ag];let s,a,l=0;i.invoke("getVersion").then((e=>n(1,s=e))),i.invoke("platform").then((e=>n(2,a=e)));return[l,s,a,o,["Lex","Etym.","Phrases","Inflect.","Phono.","Docs"],r,e=>n(0,l=e)]}class sm extends Te{constructor(e){super(),Ee(this,e,rm,im,s,{})}}function am(e,t,n){const o=e.slice();return o[15]=t[n],o[17]=n,o}function lm(e,t,n){const o=e.slice();return o[15]=t[n],o[17]=n,o}function cm(e){let t,n,o,i,r,s;return{c(){t=E("p"),n=S("β"),o=S(e[0]),i=S("-"),r=S(e[1]),s=S(" —"),L(t,"class","version-info")},m(e,a){k(e,t,a),w(t,n),w(t,o),w(t,i),w(t,r),w(t,s)},p(e,t){1&t&&O(o,e[0]),2&t&&O(r,e[1])},d(e){e&&x(t)}}}function hm(e){let t,n,o,i,r,s=e[15]+"";function a(){return e[12](e[17])}return{c(){t=E("button"),n=S(s),o=B(),L(t,"class","hover-highlight tab-button"),L(t,"style",["settings","history","help"].includes(e[15])?'font-family: "Material Icons"; font-size: 1em; vertical-align: bottom; height: 1.8em;':""),R(t,"selected",e[5]===e[17])},m(e,s){k(e,t,s),w(t,n),w(t,o),i||(r=_(t,"click",a),i=!0)},p(n,o){e=n,32&o&&R(t,"selected",e[5]===e[17])},d(e){e&&x(t),i=!1,r()}}}function dm(e){let t,n=("Etymology"!==e[15]&&"Inflection"!==e[15]&&"Orthography"!==e[15]||"Etymology"===e[15]&&e[2].ShowEtymology||"Inflection"===e[15]&&e[2].ShowInflection||"Orthography"===e[15]&&e[2].ShowOrthography)&&hm(e);return{c(){n&&n.c(),t=I()},m(e,o){n&&n.m(e,o),k(e,t,o)},p(e,o){"Etymology"!==e[15]&&"Inflection"!==e[15]&&"Orthography"!==e[15]||"Etymology"===e[15]&&e[2].ShowEtymology||"Inflection"===e[15]&&e[2].ShowInflection||"Orthography"===e[15]&&e[2].ShowOrthography?n?n.p(e,o):(n=hm(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&x(t)}}}function um(e){let t,n,o,i;var r=e[15];return r&&(n=F(r,{})),{c(){t=E("div"),n&&ye(n.$$.fragment),o=B(),R(t,"collapsed",e[5]!==e[17])},m(e,r){k(e,t,r),n&&ke(n,t,null),w(t,o),i=!0},p(e,s){if(r!==(r=e[15])){if(n){ue();const e=n;ge(e.$$.fragment,1,0,(()=>{xe(e,1)})),pe()}r?(n=F(r,{}),ye(n.$$.fragment),fe(n.$$.fragment,1),ke(n,t,o)):n=null}(!i||32&s)&&R(t,"collapsed",e[5]!==e[17])},i(e){i||(n&&fe(n.$$.fragment,e),i=!0)},o(e){n&&ge(n.$$.fragment,e),i=!1},d(e){e&&x(t),n&&xe(n)}}}function pm(e){let t,n,o;return n=new sm({}),{c(){t=E("div"),ye(n.$$.fragment),L(t,"class","column tab-pane reference"),M(t,"width","33%")},m(e,i){k(e,t,i),ke(n,t,null),o=!0},i(e){o||(fe(n.$$.fragment,e),o=!0)},o(e){ge(n.$$.fragment,e),o=!1},d(e){e&&x(t),xe(n)}}}function fm(e){let t,n,o,r,s,a,l,c,h,d,u,p,f,g,m,b,v,y,T,S,I,A,O,$,M=!e[4]&&cm(e),P=e[8],N=[];for(let t=0;t<P.length;t+=1)N[t]=dm(lm(e,P,t));let R=e[7],D=[];for(let t=0;t<R.length;t+=1)D[t]=um(am(e,R,t));const z=e=>ge(D[e],1,1,(()=>{D[e]=null}));let F=e[4]&&pm();return{c(){t=E("link"),o=B(),r=E("link"),s=B(),a=E("body"),l=E("div"),c=E("div"),h=E("div"),d=E("p"),u=E("button"),u.textContent="close",p=B(),f=E("button"),f.textContent="remove",g=B(),m=E("button"),m.textContent="fullscreen",b=B(),v=E("div"),M&&M.c(),y=B();for(let e=0;e<N.length;e+=1)N[e].c();T=B();for(let e=0;e<D.length;e+=1)D[e].c();I=B(),F&&F.c(),L(t,"rel","stylesheet"),L(t,"href",n="default"===e[2].FileTheme?e[3]:e[2].FileTheme),L(r,"href","https://fonts.googleapis.com/icon?family=Material+Icons"),L(r,"rel","stylesheet"),L(u,"class","hover-highlight close material-icons"),L(f,"class","hover-highlight minimize material-icons"),L(m,"class","hover-highlight maximize material-icons"),L(d,"class","window-control"),L(v,"class","button-container"),L(h,"class","column"),L(h,"style",S=e[4]?"width: 66%":"width: 100%"),L(c,"class","row"),L(l,"class","tab-container"),L(a,"id","body"),L(a,"spellcheck","false")},m(n,i){k(n,t,i),k(n,o,i),k(n,r,i),k(n,s,i),k(n,a,i),w(a,l),w(l,c),w(c,h),w(h,d),w(d,u),w(d,p),w(d,f),w(d,g),w(d,m),w(h,b),w(h,v),M&&M.m(v,null),w(v,y);for(let e=0;e<N.length;e+=1)N[e]&&N[e].m(v,null);w(h,T);for(let e=0;e<D.length;e+=1)D[e]&&D[e].m(h,null);w(c,I),F&&F.m(c,null),A=!0,O||($=[_(u,"click",e[9]),_(f,"click",e[10]),_(m,"click",e[11])],O=!0)},p(e,[o]){if((!A||12&o&&n!==(n="default"===e[2].FileTheme?e[3]:e[2].FileTheme))&&L(t,"href",n),e[4]?M&&(M.d(1),M=null):M?M.p(e,o):(M=cm(e),M.c(),M.m(v,y)),292&o){let t;for(P=e[8],t=0;t<P.length;t+=1){const n=lm(e,P,t);N[t]?N[t].p(n,o):(N[t]=dm(n),N[t].c(),N[t].m(v,null))}for(;t<N.length;t+=1)N[t].d(1);N.length=P.length}if(160&o){let t;for(R=e[7],t=0;t<R.length;t+=1){const n=am(e,R,t);D[t]?(D[t].p(n,o),fe(D[t],1)):(D[t]=um(n),D[t].c(),fe(D[t],1),D[t].m(h,null))}for(ue(),t=R.length;t<D.length;t+=1)z(t);pe()}(!A||16&o&&S!==(S=e[4]?"width: 66%":"width: 100%"))&&L(h,"style",S),e[4]?F?16&o&&fe(F,1):(F=pm(),F.c(),fe(F,1),F.m(c,null)):F&&(ue(),ge(F,1,1,(()=>{F=null})),pe())},i(e){if(!A){for(let e=0;e<R.length;e+=1)fe(D[e]);fe(F),A=!0}},o(e){D=D.filter(Boolean);for(let e=0;e<D.length;e+=1)ge(D[e]);ge(F),A=!1},d(e){e&&x(t),e&&x(o),e&&x(r),e&&x(s),e&&x(a),M&&M.d(),C(N,e),C(D,e),F&&F.d(),O=!1,i($)}}}function gm(e,t,n){let o,i,r,s,a;h(e,Qo,(e=>n(14,o=e))),h(e,Uo,(e=>n(2,i=e))),h(e,Jo,(e=>n(3,r=e))),h(e,ni,(e=>n(4,s=e))),h(e,Wo,(e=>n(5,a=e)));const{ipcRenderer:l}=require("electron"),c=require("vex-js");c.registerPlugin(require("vex-dialog")),c.defaultOptions.className="vex-theme-os";const u=[tu,Wu,Ap,Df,qp,og,Yp,uf,Sf,$f,lg];let p,f;l.on("app-close",(e=>{o?(ci("Autosaving before exit."),Th().then((e=>{window.setTimeout((()=>l.send("close")),1e3)}))):window.confirm("You may have unsaved changes. Are you sure you want to exit?")&&l.send("close")})),l.invoke("getVersion").then((e=>n(0,p=e))),l.invoke("platform").then((e=>n(1,f=e)));return[p,f,i,r,s,a,l,u,["Lexicon","Etymology","Phrasebook","Inflection","Phonology","Orthography","Documentation","File","settings","history","help"],()=>l.send("buttonclose"),()=>l.send("minimize"),()=>l.send("maximize"),e=>d(Wo,a=e,a)]}return new class extends Te{constructor(e){super(),Ee(this,e,gm,fm,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
